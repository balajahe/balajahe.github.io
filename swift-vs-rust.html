<!DOCTYPE html>
<html class="no-js fonts-loaded" lang="ru"><head>
    <meta http-equiv="content-type" content="text/html; charset=UTF-8">
<meta content="width=1024" name="viewport">
<title>Swift против Rust — бенчмаркинг на Linux с (не)понятным финалом / Хабр</title>

  <meta name="description" content="Привет, Хабр!

Периодически посматриваю на Swift в качестве языка прикладного программирования для Linux — простой, динамичный, компилируемый, без сборщика мусора, а значит, теоретически,...">

  <meta name="keywords" content="swift, rust, производительность, бенчмаркинг">

  <meta property="fb:app_id" content="444736788986613">
<meta property="og:type" content="article">
<meta property="fb:pages" content="472597926099084">
<meta property="og:url" content="https://habr.com/ru/post/450512/">
<meta property="og:title" content="Swift против Rust — бенчмаркинг на Linux с (не)понятным финалом">

    <meta property="og:image" content="https://habr.com/share/publication/450512/1801afa67d0dd7aef3fb4d7b3e778c1f/?v=1">
    <meta property="og:image:width" content="1200">
    <meta property="og:image:height" content="630">
    <link rel="image_src" href="https://habr.com/share/publication/450512/1801afa67d0dd7aef3fb4d7b3e778c1f/?v=1">
    <meta name="twitter:image" content="https://habr.com/share/publication/450512/1801afa67d0dd7aef3fb4d7b3e778c1f/?v=1">
      <meta property="vk:image" content="https://habr.com/share/publication/450512/1801afa67d0dd7aef3fb4d7b3e778c1f/?format=vk&amp;v=1">

<meta property="og:description" content="Привет, Хабр!  Периодически посматриваю на Swift в качестве языка прикладного программирования для Linux — простой, динамичный, компилируемый, без сборщика мусор...">
<meta name="twitter:description" content="Привет, Хабр!  Периодически посматриваю на Swift в качестве языка прикладного программирования для Linux — простой, динамичный, компилируемый, без сборщика мусор...">
<meta name="twitter:title" content="Swift против Rust — бенчмаркинг на Linux с (не)понятным финалом">
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:site" content="@habr_com">

  <meta property="al:android:url" content="habrahabr://post/450512">
<meta property="al:android:app_name" content="Habrahabr">
<meta property="al:android:package" content="ru.habrahabr">
<meta property="al:windows_phone:url" content="habrahabr://post/450512">
<meta property="al:windows_phone:app_name" content="Habrahabr">
<meta property="al:windows_phone:app_id" content="460a6bd6-8955-470f-935e-9ea1726a6060">

  <link rel="canonical" href="https://habr.com/ru/post/450512/">
  <link rel="alternate" media="only screen and (max-width: 640px)" href="https://m.habr.com/ru/post/450512/">


    <script type="text/javascript" async="" src="Swift%20%D0%BF%D1%80%D0%BE%D1%82%D0%B8%D0%B2%20Rust%20%E2%80%94%20%D0%B1%D0%B5%D0%BD%D1%87%D0%BC%D0%B0%D1%80%D0%BA%D0%B8%D0%BD%D0%B3%20%D0%BD%D0%B0%20Linux%20%D1%81%20(%D0%BD%D0%B5)%D0%BF%D0%BE%D0%BD%D1%8F%D1%82%D0%BD%D1%8B%D0%BC%20%D1%84%D0%B8%D0%BD%D0%B0%D0%BB%D0%BE%D0%BC%20_%20%D0%A5%D0%B0%D0%B1%D1%80_files/js.js"></script><script async="" src="Swift%20%D0%BF%D1%80%D0%BE%D1%82%D0%B8%D0%B2%20Rust%20%E2%80%94%20%D0%B1%D0%B5%D0%BD%D1%87%D0%BC%D0%B0%D1%80%D0%BA%D0%B8%D0%BD%D0%B3%20%D0%BD%D0%B0%20Linux%20%D1%81%20(%D0%BD%D0%B5)%D0%BF%D0%BE%D0%BD%D1%8F%D1%82%D0%BD%D1%8B%D0%BC%20%D1%84%D0%B8%D0%BD%D0%B0%D0%BB%D0%BE%D0%BC%20_%20%D0%A5%D0%B0%D0%B1%D1%80_files/analytics.js"></script><script async="" src="Swift%20%D0%BF%D1%80%D0%BE%D1%82%D0%B8%D0%B2%20Rust%20%E2%80%94%20%D0%B1%D0%B5%D0%BD%D1%87%D0%BC%D0%B0%D1%80%D0%BA%D0%B8%D0%BD%D0%B3%20%D0%BD%D0%B0%20Linux%20%D1%81%20(%D0%BD%D0%B5)%D0%BF%D0%BE%D0%BD%D1%8F%D1%82%D0%BD%D1%8B%D0%BC%20%D1%84%D0%B8%D0%BD%D0%B0%D0%BB%D0%BE%D0%BC%20_%20%D0%A5%D0%B0%D0%B1%D1%80_files/tag.js"></script><script type="application/ld+json">
      {
    "@context": "http:\/\/schema.org",
    "@type": "Article",
    "mainEntityOfPage": {
        "@type": "WebPage",
        "@id": "https:\/\/habr.com\/ru\/post\/450512\/"
    },
    "headline": "Swift против Rust — бенчмаркинг на Linux с (не)понятным финалом",
    "datePublished": "2019-05-06T09:57:43+03:00",
    "dateModified": "2019-06-08T01:26:54+03:00",
    "author": {
        "@type": "Person",
        "name": "epishman"
    },
    "publisher": {
        "@type": "Organization",
        "name": "Habr",
        "logo": {
            "@type": "ImageObject",
            "url": "https:\/\/dr.habracdn.net\/habrcom\/images\/habr_google.png"
        }
    },
    "description": "Привет, Хабр!  Периодически посматриваю на Swift в качестве языка прикладного программирования для Linux &mdash; простой, динамичный, компилируемый, без сборщика мусор...",
    "url": "https:\/\/habr.com\/ru\/post\/450512\/#post-content-body",
    "about": [
        "h_programming",
        "h_rust",
        "h_swift",
        "f_develop"
    ],
    "image": [
        "https:\/\/habr.com\/share\/publication\/450512\/1801afa67d0dd7aef3fb4d7b3e778c1f\/"
    ]
}
    </script>


<meta name="yandex-verification" content="71593b225aeafc4e">
<meta name="referrer" content="unsafe-url">
<meta name="pocket-site-verification" content="ed24b2b9721edf0a282c5b4a3232c4">


<style type="text/css">
  @font-face{font-family:'Fira Sans';font-style:normal;font-weight:500;src:url(/fonts/0/FiraSans/firaSans-medium.eot);src:local("Fira Sans Medium"),local("FiraSans-Medium"),url(/fonts/0/FiraSans/firaSans-medium.eot?#iefix) format("embedded-opentype"),url(/fonts/0/FiraSans/firaSans-medium.woff2) format("woff2"),url(/fonts/0/FiraSans/firaSans-medium.woff) format("woff"),url(/fonts/0/FiraSans/firaSans-medium.ttf) format("truetype")}
</style>

<link href="Swift%20%D0%BF%D1%80%D0%BE%D1%82%D0%B8%D0%B2%20Rust%20%E2%80%94%20%D0%B1%D0%B5%D0%BD%D1%87%D0%BC%D0%B0%D1%80%D0%BA%D0%B8%D0%BD%D0%B3%20%D0%BD%D0%B0%20Linux%20%D1%81%20(%D0%BD%D0%B5)%D0%BF%D0%BE%D0%BD%D1%8F%D1%82%D0%BD%D1%8B%D0%BC%20%D1%84%D0%B8%D0%BD%D0%B0%D0%BB%D0%BE%D0%BC%20_%20%D0%A5%D0%B0%D0%B1%D1%80_files/main.css" rel="stylesheet" media="all">





<meta name="yandex-verification" content="67d46b975fa41645">

<link rel="apple-touch-icon" sizes="180x180" href="https://habr.com/images/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="https://habr.com/images/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="https://habr.com/images/favicon-16x16.png">
<link rel="manifest" href="https://habr.com/site.webmanifest">
<link rel="mask-icon" href="https://habr.com/images/safari-pinned-tab.svg" color="#77a2b6">
<meta name="application-name" content="Хабр">
<meta name="msapplication-TileColor" content="#77a2b6">
<meta name="theme-color" content="#77a2b6">


  <link title="Комментарии к публикации «Swift против Rust — бенчмаркинг на Linux с (не)понятным финалом»" type="application/rss+xml" rel="alternate" href="https://habr.com/ru/rss/post/450512/">

<script>/* Font Face Observer v2.0.13 - © Bram Stein. License: BSD-3-Clause */(function(){'use strict';var f,g=[];function l(a){g.push(a);1==g.length&&f()}function m(){for(;g.length;)g[0](),g.shift()}f=function(){setTimeout(m)};function n(a){this.a=p;this.b=void 0;this.f=[];var b=this;try{a(function(a){q(b,a)},function(a){r(b,a)})}catch(c){r(b,c)}}var p=2;function t(a){return new n(function(b,c){c(a)})}function u(a){return new n(function(b){b(a)})}function q(a,b){if(a.a==p){if(b==a)throw new TypeError;var c=!1;try{var d=b&&b.then;if(null!=b&&"object"==typeof b&&"function"==typeof d){d.call(b,function(b){c||q(a,b);c=!0},function(b){c||r(a,b);c=!0});return}}catch(e){c||r(a,e);return}a.a=0;a.b=b;v(a)}}
function r(a,b){if(a.a==p){if(b==a)throw new TypeError;a.a=1;a.b=b;v(a)}}function v(a){l(function(){if(a.a!=p)for(;a.f.length;){var b=a.f.shift(),c=b[0],d=b[1],e=b[2],b=b[3];try{0==a.a?"function"==typeof c?e(c.call(void 0,a.b)):e(a.b):1==a.a&&("function"==typeof d?e(d.call(void 0,a.b)):b(a.b))}catch(h){b(h)}}})}n.prototype.g=function(a){return this.c(void 0,a)};n.prototype.c=function(a,b){var c=this;return new n(function(d,e){c.f.push([a,b,d,e]);v(c)})};
function w(a){return new n(function(b,c){function d(c){return function(d){h[c]=d;e+=1;e==a.length&&b(h)}}var e=0,h=[];0==a.length&&b(h);for(var k=0;k<a.length;k+=1)u(a[k]).c(d(k),c)})}function x(a){return new n(function(b,c){for(var d=0;d<a.length;d+=1)u(a[d]).c(b,c)})};window.Promise||(window.Promise=n,window.Promise.resolve=u,window.Promise.reject=t,window.Promise.race=x,window.Promise.all=w,window.Promise.prototype.then=n.prototype.c,window.Promise.prototype["catch"]=n.prototype.g);}());

(function(){function l(a,b){document.addEventListener?a.addEventListener("scroll",b,!1):a.attachEvent("scroll",b)}function m(a){document.body?a():document.addEventListener?document.addEventListener("DOMContentLoaded",function c(){document.removeEventListener("DOMContentLoaded",c);a()}):document.attachEvent("onreadystatechange",function k(){if("interactive"==document.readyState||"complete"==document.readyState)document.detachEvent("onreadystatechange",k),a()})};function r(a){this.a=document.createElement("div");this.a.setAttribute("aria-hidden","true");this.a.appendChild(document.createTextNode(a));this.b=document.createElement("span");this.c=document.createElement("span");this.h=document.createElement("span");this.f=document.createElement("span");this.g=-1;this.b.style.cssText="max-width:none;display:inline-block;position:absolute;height:100%;width:100%;overflow:scroll;font-size:16px;";this.c.style.cssText="max-width:none;display:inline-block;position:absolute;height:100%;width:100%;overflow:scroll;font-size:16px;";
this.f.style.cssText="max-width:none;display:inline-block;position:absolute;height:100%;width:100%;overflow:scroll;font-size:16px;";this.h.style.cssText="display:inline-block;width:200%;height:200%;font-size:16px;max-width:none;";this.b.appendChild(this.h);this.c.appendChild(this.f);this.a.appendChild(this.b);this.a.appendChild(this.c)}
function t(a,b){a.a.style.cssText="max-width:none;min-width:20px;min-height:20px;display:inline-block;overflow:hidden;position:absolute;width:auto;margin:0;padding:0;top:-999px;white-space:nowrap;font-synthesis:none;font:"+b+";"}function y(a){var b=a.a.offsetWidth,c=b+100;a.f.style.width=c+"px";a.c.scrollLeft=c;a.b.scrollLeft=a.b.scrollWidth+100;return a.g!==b?(a.g=b,!0):!1}function z(a,b){function c(){var a=k;y(a)&&a.a.parentNode&&b(a.g)}var k=a;l(a.b,c);l(a.c,c);y(a)};function A(a,b){var c=b||{};this.family=a;this.style=c.style||"normal";this.weight=c.weight||"normal";this.stretch=c.stretch||"normal"}var B=null,C=null,E=null,F=null;function G(){if(null===C)if(J()&&/Apple/.test(window.navigator.vendor)){var a=/AppleWebKit\/([0-9]+)(?:\.([0-9]+))(?:\.([0-9]+))/.exec(window.navigator.userAgent);C=!!a&&603>parseInt(a[1],10)}else C=!1;return C}function J(){null===F&&(F=!!document.fonts);return F}
function K(){if(null===E){var a=document.createElement("div");try{a.style.font="condensed 100px sans-serif"}catch(b){}E=""!==a.style.font}return E}function L(a,b){return[a.style,a.weight,K()?a.stretch:"","100px",b].join(" ")}
A.prototype.load=function(a,b){var c=this,k=a||"BESbswy",q=0,D=b||3E3,H=(new Date).getTime();return new Promise(function(a,b){if(J()&&!G()){var M=new Promise(function(a,b){function e(){(new Date).getTime()-H>=D?b():document.fonts.load(L(c,'"'+c.family+'"'),k).then(function(c){1<=c.length?a():setTimeout(e,25)},function(){b()})}e()}),N=new Promise(function(a,c){q=setTimeout(c,D)});Promise.race([N,M]).then(function(){clearTimeout(q);a(c)},function(){b(c)})}else m(function(){function u(){var b;if(b=-1!=
f&&-1!=g||-1!=f&&-1!=h||-1!=g&&-1!=h)(b=f!=g&&f!=h&&g!=h)||(null===B&&(b=/AppleWebKit\/([0-9]+)(?:\.([0-9]+))/.exec(window.navigator.userAgent),B=!!b&&(536>parseInt(b[1],10)||536===parseInt(b[1],10)&&11>=parseInt(b[2],10))),b=B&&(f==v&&g==v&&h==v||f==w&&g==w&&h==w||f==x&&g==x&&h==x)),b=!b;b&&(d.parentNode&&d.parentNode.removeChild(d),clearTimeout(q),a(c))}function I(){if((new Date).getTime()-H>=D)d.parentNode&&d.parentNode.removeChild(d),b(c);else{var a=document.hidden;if(!0===a||void 0===a)f=e.a.offsetWidth,
g=n.a.offsetWidth,h=p.a.offsetWidth,u();q=setTimeout(I,50)}}var e=new r(k),n=new r(k),p=new r(k),f=-1,g=-1,h=-1,v=-1,w=-1,x=-1,d=document.createElement("div");d.dir="ltr";t(e,L(c,"sans-serif"));t(n,L(c,"serif"));t(p,L(c,"monospace"));d.appendChild(e.a);d.appendChild(n.a);d.appendChild(p.a);document.body.appendChild(d);v=e.a.offsetWidth;w=n.a.offsetWidth;x=p.a.offsetWidth;I();z(e,function(a){f=a;u()});t(e,L(c,'"'+c.family+'",sans-serif'));z(n,function(a){g=a;u()});t(n,L(c,'"'+c.family+'",serif'));
z(p,function(a){h=a;u()});t(p,L(c,'"'+c.family+'",monospace'))})})};"object"===typeof module?module.exports=A:(window.FontFaceObserver=A,window.FontFaceObserver.prototype.load=A.prototype.load);}());

(function( w ){
if( w.document.documentElement.className.indexOf( "fonts-loaded" ) > -1 ){ return; }

var html = document.documentElement;
var FS500 = new w.FontFaceObserver("Fira Sans", { weight: 500 });

FS500.load().then(function() {
html.classList.add('fonts-loaded');
sessionStorage.fontsLoaded = true;
console.log('FS500-loaded');
}).catch(function () {
sessionStorage.fontsLoaded = false;
console.log('FS500-unloaded');
});

if (sessionStorage.fontsLoaded) {
html.classList.add('fonts-loaded');
}
}(this));
</script>
<script src="Swift%20%D0%BF%D1%80%D0%BE%D1%82%D0%B8%D0%B2%20Rust%20%E2%80%94%20%D0%B1%D0%B5%D0%BD%D1%87%D0%BC%D0%B0%D1%80%D0%BA%D0%B8%D0%BD%D0%B3%20%D0%BD%D0%B0%20Linux%20%D1%81%20(%D0%BD%D0%B5)%D0%BF%D0%BE%D0%BD%D1%8F%D1%82%D0%BD%D1%8B%D0%BC%20%D1%84%D0%B8%D0%BD%D0%B0%D0%BB%D0%BE%D0%BC%20_%20%D0%A5%D0%B0%D0%B1%D1%80_files/jquery-1.js"></script>
  <script async="" src="Swift%20%D0%BF%D1%80%D0%BE%D1%82%D0%B8%D0%B2%20Rust%20%E2%80%94%20%D0%B1%D0%B5%D0%BD%D1%87%D0%BC%D0%B0%D1%80%D0%BA%D0%B8%D0%BD%D0%B3%20%D0%BD%D0%B0%20Linux%20%D1%81%20(%D0%BD%D0%B5)%D0%BF%D0%BE%D0%BD%D1%8F%D1%82%D0%BD%D1%8B%D0%BC%20%D1%84%D0%B8%D0%BD%D0%B0%D0%BB%D0%BE%D0%BC%20_%20%D0%A5%D0%B0%D0%B1%D1%80_files/Tn4LrERWU1qX"></script>
  <script>
    window._io_config = window._io_config || {};
    window._io_config["0.2.0"] = window._io_config["0.2.0"] || [];
    window._io_config["0.2.0"].push({
    "page_url": "https:\/\/habr.com\/ru\/post\/450512\/",
    "page_url_canonical": "https:\/\/habr.com\/ru\/post\/450512\/",
    "page_title": "Swift против Rust — бенчмаркинг на Linux с (не)понятным финалом",
    "page_type": "article",
    "page_language": "ru",
    "article_authors": [
        "epishman"
    ],
    "article_categories": [
        "h_programming",
        "h_rust",
        "h_swift",
        "f_develop"
    ],
    "article_type": "simple",
    "article_publication_date": "Mon, 06 May 19 09:57:43 +0300"
});
  </script>

<script>
  window.create_callback_for_blocked = function(key) {
    return function() {
      googletag.cmd.push(function () {
        googletag.display(key);
      });
    }
  }

  window.habr_blockers_checker = new function() {
    var result;
    var callbacksQueue = [];
    var calledOnce = false;

    function fireCallbacks() {
      callbacksQueue.forEach(function(callback) {
        callback(result);
      });
      callbacksQueue = [];
    }

    this.detect = function(imgUrl, callback) {
      var checksRemain = 2;
      var detected = false;
      var error1 = false;
      var error2 = false;

      if (typeof callback !== 'function') {
        return;
      };

      callbacksQueue.push(callback);

      if (typeof result !== 'undefined') {
        fireCallbacks();
      };

      if (calledOnce) {
        return;
      }
      calledOnce = true;

      imgUrl += '?ch=*&rn=*';

      function beforeCheck(timeout) {
        if (checksRemain === 0 || timeout > 1E3) {
          result = checksRemain === 0 && detected;
          fireCallbacks();
        } else {
          setTimeout(function() {
            beforeCheck(timeout * 2)
          }, timeout * 2);
        }
      }

      function checkImages() {
        if (--checksRemain) {
          return;
        };
        detected = !error1 && error2;
      }

      var random = Math.random() * 11;

      var img1 = new Image;
      img1.onload = checkImages;
      img1.onerror = function() {
        error1 = true;
        checkImages()
      };
      img1.src = imgUrl.replace(/\*/, 1).replace(/\*/, random);

      var img2 = new Image;
      img2.onload = checkImages;
      img2.onerror = function() {
        error2 = true;
        checkImages()
      };
      img2.src = imgUrl.replace(/\*/, 2).replace(/\*/, random);

      beforeCheck(250, callback)
    };

    this.detectWrapper = function(callback) {
      return this.detect('/images/px.gif', callback);
    };
  };

  window.display_dfp_slot = function(key) {
    if (window.habr_blockers_checker) {
      window.habr_blockers_checker.detectWrapper(window.create_callback_for_blocked(key));
    } else {
      window.create_callback_for_blocked(key)();
    }
  };
</script>


<script src="Swift%20%D0%BF%D1%80%D0%BE%D1%82%D0%B8%D0%B2%20Rust%20%E2%80%94%20%D0%B1%D0%B5%D0%BD%D1%87%D0%BC%D0%B0%D1%80%D0%BA%D0%B8%D0%BD%D0%B3%20%D0%BD%D0%B0%20Linux%20%D1%81%20(%D0%BD%D0%B5)%D0%BF%D0%BE%D0%BD%D1%8F%D1%82%D0%BD%D1%8B%D0%BC%20%D1%84%D0%B8%D0%BD%D0%B0%D0%BB%D0%BE%D0%BC%20_%20%D0%A5%D0%B0%D0%B1%D1%80_files/raven.js"></script>
<script>Raven.config('https://830576edd4b7478086093f693a5a0df5@s.tmtm.ru/37', {
  maxBreadcrumbs: 50,
  sampleRate: 0.5,
  whitelistUrls: [/https?:\/\/((www)\.)?(m\.)?habr\.com/],
}).install()</script>

<script src="Swift%20%D0%BF%D1%80%D0%BE%D1%82%D0%B8%D0%B2%20Rust%20%E2%80%94%20%D0%B1%D0%B5%D0%BD%D1%87%D0%BC%D0%B0%D1%80%D0%BA%D0%B8%D0%BD%D0%B3%20%D0%BD%D0%B0%20Linux%20%D1%81%20(%D0%BD%D0%B5)%D0%BF%D0%BE%D0%BD%D1%8F%D1%82%D0%BD%D1%8B%D0%BC%20%D1%84%D0%B8%D0%BD%D0%B0%D0%BB%D0%BE%D0%BC%20_%20%D0%A5%D0%B0%D0%B1%D1%80_files/advertise.js"></script>
<script src="Swift%20%D0%BF%D1%80%D0%BE%D1%82%D0%B8%D0%B2%20Rust%20%E2%80%94%20%D0%B1%D0%B5%D0%BD%D1%87%D0%BC%D0%B0%D1%80%D0%BA%D0%B8%D0%BD%D0%B3%20%D0%BD%D0%B0%20Linux%20%D1%81%20(%D0%BD%D0%B5)%D0%BF%D0%BE%D0%BD%D1%8F%D1%82%D0%BD%D1%8B%D0%BC%20%D1%84%D0%B8%D0%BD%D0%B0%D0%BB%D0%BE%D0%BC%20_%20%D0%A5%D0%B0%D0%B1%D1%80_files/adriver.js"></script>

<script type="text/javascript">
  $(document).ready(function () {
    if (!$.cookie('split201901')) {
      $.cookie(
        'split201901',
        'B',
        {
          expires: 3 * 7,
          domain: 'habr.com',
          path: '/',
          secure: true
        }
      );
    }
  });
</script>


  <style type="text/css">.MathJax_Hover_Frame {border-radius: .25em; -webkit-border-radius: .25em; -moz-border-radius: .25em; -khtml-border-radius: .25em; box-shadow: 0px 0px 15px #83A; -webkit-box-shadow: 0px 0px 15px #83A; -moz-box-shadow: 0px 0px 15px #83A; -khtml-box-shadow: 0px 0px 15px #83A; border: 1px solid #A6D ! important; display: inline-block; position: absolute}
.MathJax_Menu_Button .MathJax_Hover_Arrow {position: absolute; cursor: pointer; display: inline-block; border: 2px solid #AAA; border-radius: 4px; -webkit-border-radius: 4px; -moz-border-radius: 4px; -khtml-border-radius: 4px; font-family: 'Courier New',Courier; font-size: 9px; color: #F0F0F0}
.MathJax_Menu_Button .MathJax_Hover_Arrow span {display: block; background-color: #AAA; border: 1px solid; border-radius: 3px; line-height: 0; padding: 4px}
.MathJax_Hover_Arrow:hover {color: white!important; border: 2px solid #CCC!important}
.MathJax_Hover_Arrow:hover span {background-color: #CCC!important}
</style><style type="text/css">#MathJax_About {position: fixed; left: 50%; width: auto; text-align: center; border: 3px outset; padding: 1em 2em; background-color: #DDDDDD; color: black; cursor: default; font-family: message-box; font-size: 120%; font-style: normal; text-indent: 0; text-transform: none; line-height: normal; letter-spacing: normal; word-spacing: normal; word-wrap: normal; white-space: nowrap; float: none; z-index: 201; border-radius: 15px; -webkit-border-radius: 15px; -moz-border-radius: 15px; -khtml-border-radius: 15px; box-shadow: 0px 10px 20px #808080; -webkit-box-shadow: 0px 10px 20px #808080; -moz-box-shadow: 0px 10px 20px #808080; -khtml-box-shadow: 0px 10px 20px #808080; filter: progid:DXImageTransform.Microsoft.dropshadow(OffX=2, OffY=2, Color='gray', Positive='true')}
#MathJax_About.MathJax_MousePost {outline: none}
.MathJax_Menu {position: absolute; background-color: white; color: black; width: auto; padding: 5px 0px; border: 1px solid #CCCCCC; margin: 0; cursor: default; font: menu; text-align: left; text-indent: 0; text-transform: none; line-height: normal; letter-spacing: normal; word-spacing: normal; word-wrap: normal; white-space: nowrap; float: none; z-index: 201; border-radius: 5px; -webkit-border-radius: 5px; -moz-border-radius: 5px; -khtml-border-radius: 5px; box-shadow: 0px 10px 20px #808080; -webkit-box-shadow: 0px 10px 20px #808080; -moz-box-shadow: 0px 10px 20px #808080; -khtml-box-shadow: 0px 10px 20px #808080; filter: progid:DXImageTransform.Microsoft.dropshadow(OffX=2, OffY=2, Color='gray', Positive='true')}
.MathJax_MenuItem {padding: 1px 2em; background: transparent}
.MathJax_MenuArrow {position: absolute; right: .5em; padding-top: .25em; color: #666666; font-size: .75em}
.MathJax_MenuActive .MathJax_MenuArrow {color: white}
.MathJax_MenuArrow.RTL {left: .5em; right: auto}
.MathJax_MenuCheck {position: absolute; left: .7em}
.MathJax_MenuCheck.RTL {right: .7em; left: auto}
.MathJax_MenuRadioCheck {position: absolute; left: .7em}
.MathJax_MenuRadioCheck.RTL {right: .7em; left: auto}
.MathJax_MenuLabel {padding: 1px 2em 3px 1.33em; font-style: italic}
.MathJax_MenuRule {border-top: 1px solid #DDDDDD; margin: 4px 3px}
.MathJax_MenuDisabled {color: GrayText}
.MathJax_MenuActive {background-color: #606872; color: white}
.MathJax_MenuDisabled:focus, .MathJax_MenuLabel:focus {background-color: #E8E8E8}
.MathJax_ContextMenu:focus {outline: none}
.MathJax_ContextMenu .MathJax_MenuItem:focus {outline: none}
#MathJax_AboutClose {top: .2em; right: .2em}
.MathJax_Menu .MathJax_MenuClose {top: -10px; left: -10px}
.MathJax_MenuClose {position: absolute; cursor: pointer; display: inline-block; border: 2px solid #AAA; border-radius: 18px; -webkit-border-radius: 18px; -moz-border-radius: 18px; -khtml-border-radius: 18px; font-family: 'Courier New',Courier; font-size: 24px; color: #F0F0F0}
.MathJax_MenuClose span {display: block; background-color: #AAA; border: 1.5px solid; border-radius: 18px; -webkit-border-radius: 18px; -moz-border-radius: 18px; -khtml-border-radius: 18px; line-height: 0; padding: 8px 0 6px}
.MathJax_MenuClose:hover {color: white!important; border: 2px solid #CCC!important}
.MathJax_MenuClose:hover span {background-color: #CCC!important}
.MathJax_MenuClose:hover:focus {outline: none}
</style><style type="text/css">.MathJax_Preview .MJXf-math {color: inherit!important}
</style><style type="text/css">.MJX_Assistive_MathML {position: absolute!important; top: 0; left: 0; clip: rect(1px, 1px, 1px, 1px); padding: 1px 0 0 0!important; border: 0!important; height: 1px!important; width: 1px!important; overflow: hidden!important; display: block!important; -webkit-touch-callout: none; -webkit-user-select: none; -khtml-user-select: none; -moz-user-select: none; -ms-user-select: none; user-select: none}
.MJX_Assistive_MathML.MJX_Assistive_MathML_Block {width: 100%!important}
</style><style type="text/css">#MathJax_Zoom {position: absolute; background-color: #F0F0F0; overflow: auto; display: block; z-index: 301; padding: .5em; border: 1px solid black; margin: 0; font-weight: normal; font-style: normal; text-align: left; text-indent: 0; text-transform: none; line-height: normal; letter-spacing: normal; word-spacing: normal; word-wrap: normal; white-space: nowrap; float: none; -webkit-box-sizing: content-box; -moz-box-sizing: content-box; box-sizing: content-box; box-shadow: 5px 5px 15px #AAAAAA; -webkit-box-shadow: 5px 5px 15px #AAAAAA; -moz-box-shadow: 5px 5px 15px #AAAAAA; -khtml-box-shadow: 5px 5px 15px #AAAAAA; filter: progid:DXImageTransform.Microsoft.dropshadow(OffX=2, OffY=2, Color='gray', Positive='true')}
#MathJax_ZoomOverlay {position: absolute; left: 0; top: 0; z-index: 300; display: inline-block; width: 100%; height: 100%; border: 0; padding: 0; margin: 0; background-color: white; opacity: 0; filter: alpha(opacity=0)}
#MathJax_ZoomFrame {position: relative; display: inline-block; height: 0; width: 0}
#MathJax_ZoomEventTrap {position: absolute; left: 0; top: 0; z-index: 302; display: inline-block; border: 0; padding: 0; margin: 0; background-color: white; opacity: 0; filter: alpha(opacity=0)}
</style><style type="text/css">.MathJax_Preview {color: #888}
#MathJax_Message {position: fixed; left: 1px; bottom: 2px; background-color: #E6E6E6; border: 1px solid #959595; margin: 0px; padding: 2px 8px; z-index: 102; color: black; font-size: 80%; width: auto; white-space: nowrap}
#MathJax_MSIE_Frame {position: absolute; top: 0; left: 0; width: 0px; z-index: 101; border: 0px; margin: 0px; padding: 0px}
.MathJax_Error {color: #CC0000; font-style: italic}
</style><style type="text/css">.MathJax_SVG_Display {text-align: center; margin: 1em 0em; position: relative; display: block!important; text-indent: 0; max-width: none; max-height: none; min-width: 0; min-height: 0; width: 100%}
.MathJax_SVG .MJX-monospace {font-family: monospace}
.MathJax_SVG .MJX-sans-serif {font-family: sans-serif}
#MathJax_SVG_Tooltip {background-color: InfoBackground; color: InfoText; border: 1px solid black; box-shadow: 2px 2px 5px #AAAAAA; -webkit-box-shadow: 2px 2px 5px #AAAAAA; -moz-box-shadow: 2px 2px 5px #AAAAAA; -khtml-box-shadow: 2px 2px 5px #AAAAAA; padding: 3px 4px; z-index: 401; position: absolute; left: 0; top: 0; width: auto; height: auto; display: none}
.MathJax_SVG {display: inline; font-style: normal; font-weight: normal; line-height: normal; font-size: 100%; font-size-adjust: none; text-indent: 0; text-align: left; text-transform: none; letter-spacing: normal; word-spacing: normal; word-wrap: normal; white-space: nowrap; float: none; direction: ltr; max-width: none; max-height: none; min-width: 0; min-height: 0; border: 0; padding: 0; margin: 0}
.MathJax_SVG * {transition: none; -webkit-transition: none; -moz-transition: none; -ms-transition: none; -o-transition: none}
.mjx-svg-href {fill: blue; stroke: blue}
.MathJax_SVG_Processing {visibility: hidden; position: absolute; top: 0; left: 0; width: 0; height: 0; overflow: hidden; display: block!important}
.MathJax_SVG_Processed {display: none!important}
.MathJax_SVG_ExBox {display: block!important; overflow: hidden; width: 1px; height: 60ex; min-height: 0; max-height: none; padding: 0; border: 0; margin: 0}
.MathJax_SVG_LineBox {display: table!important}
.MathJax_SVG_LineBox span {display: table-cell!important; width: 10000em!important; min-width: 0; max-width: none; padding: 0; border: 0; margin: 0}
.MathJax_SVG .noError {vertical-align: ; font-size: 90%; text-align: left; color: black; padding: 1px 3px; border: 1px solid}
</style><style type="text/css">.MJXp-script {font-size: .8em}
.MJXp-right {-webkit-transform-origin: right; -moz-transform-origin: right; -ms-transform-origin: right; -o-transform-origin: right; transform-origin: right}
.MJXp-bold {font-weight: bold}
.MJXp-italic {font-style: italic}
.MJXp-scr {font-family: MathJax_Script,'Times New Roman',Times,STIXGeneral,serif}
.MJXp-frak {font-family: MathJax_Fraktur,'Times New Roman',Times,STIXGeneral,serif}
.MJXp-sf {font-family: MathJax_SansSerif,'Times New Roman',Times,STIXGeneral,serif}
.MJXp-cal {font-family: MathJax_Caligraphic,'Times New Roman',Times,STIXGeneral,serif}
.MJXp-mono {font-family: MathJax_Typewriter,'Times New Roman',Times,STIXGeneral,serif}
.MJXp-largeop {font-size: 150%}
.MJXp-largeop.MJXp-int {vertical-align: -.2em}
.MJXp-math {display: inline-block; line-height: 1.2; text-indent: 0; font-family: 'Times New Roman',Times,STIXGeneral,serif; white-space: nowrap; border-collapse: collapse}
.MJXp-display {display: block; text-align: center; margin: 1em 0}
.MJXp-math span {display: inline-block}
.MJXp-box {display: block!important; text-align: center}
.MJXp-box:after {content: " "}
.MJXp-rule {display: block!important; margin-top: .1em}
.MJXp-char {display: block!important}
.MJXp-mo {margin: 0 .15em}
.MJXp-mfrac {margin: 0 .125em; vertical-align: .25em}
.MJXp-denom {display: inline-table!important; width: 100%}
.MJXp-denom > * {display: table-row!important}
.MJXp-surd {vertical-align: top}
.MJXp-surd > * {display: block!important}
.MJXp-script-box > *  {display: table!important; height: 50%}
.MJXp-script-box > * > * {display: table-cell!important; vertical-align: top}
.MJXp-script-box > *:last-child > * {vertical-align: bottom}
.MJXp-script-box > * > * > * {display: block!important}
.MJXp-mphantom {visibility: hidden}
.MJXp-munderover {display: inline-table!important}
.MJXp-over {display: inline-block!important; text-align: center}
.MJXp-over > * {display: block!important}
.MJXp-munderover > * {display: table-row!important}
.MJXp-mtable {vertical-align: .25em; margin: 0 .125em}
.MJXp-mtable > * {display: inline-table!important; vertical-align: middle}
.MJXp-mtr {display: table-row!important}
.MJXp-mtd {display: table-cell!important; text-align: center; padding: .5em 0 0 .5em}
.MJXp-mtr > .MJXp-mtd:first-child {padding-left: 0}
.MJXp-mtr:first-child > .MJXp-mtd {padding-top: 0}
.MJXp-mlabeledtr {display: table-row!important}
.MJXp-mlabeledtr > .MJXp-mtd:first-child {padding-left: 0}
.MJXp-mlabeledtr:first-child > .MJXp-mtd {padding-top: 0}
.MJXp-merror {background-color: #FFFF88; color: #CC0000; border: 1px solid #CC0000; padding: 1px 3px; font-style: normal; font-size: 90%}
.MJXp-scale0 {-webkit-transform: scaleX(.0); -moz-transform: scaleX(.0); -ms-transform: scaleX(.0); -o-transform: scaleX(.0); transform: scaleX(.0)}
.MJXp-scale1 {-webkit-transform: scaleX(.1); -moz-transform: scaleX(.1); -ms-transform: scaleX(.1); -o-transform: scaleX(.1); transform: scaleX(.1)}
.MJXp-scale2 {-webkit-transform: scaleX(.2); -moz-transform: scaleX(.2); -ms-transform: scaleX(.2); -o-transform: scaleX(.2); transform: scaleX(.2)}
.MJXp-scale3 {-webkit-transform: scaleX(.3); -moz-transform: scaleX(.3); -ms-transform: scaleX(.3); -o-transform: scaleX(.3); transform: scaleX(.3)}
.MJXp-scale4 {-webkit-transform: scaleX(.4); -moz-transform: scaleX(.4); -ms-transform: scaleX(.4); -o-transform: scaleX(.4); transform: scaleX(.4)}
.MJXp-scale5 {-webkit-transform: scaleX(.5); -moz-transform: scaleX(.5); -ms-transform: scaleX(.5); -o-transform: scaleX(.5); transform: scaleX(.5)}
.MJXp-scale6 {-webkit-transform: scaleX(.6); -moz-transform: scaleX(.6); -ms-transform: scaleX(.6); -o-transform: scaleX(.6); transform: scaleX(.6)}
.MJXp-scale7 {-webkit-transform: scaleX(.7); -moz-transform: scaleX(.7); -ms-transform: scaleX(.7); -o-transform: scaleX(.7); transform: scaleX(.7)}
.MJXp-scale8 {-webkit-transform: scaleX(.8); -moz-transform: scaleX(.8); -ms-transform: scaleX(.8); -o-transform: scaleX(.8); transform: scaleX(.8)}
.MJXp-scale9 {-webkit-transform: scaleX(.9); -moz-transform: scaleX(.9); -ms-transform: scaleX(.9); -o-transform: scaleX(.9); transform: scaleX(.9)}
.MathJax_PHTML .noError {vertical-align: ; font-size: 90%; text-align: left; color: black; padding: 1px 3px; border: 1px solid}
</style></head>

  <body class="nl"><div id="MathJax_Message" style="display: none;"></div><div style="visibility: hidden; overflow: hidden; position: absolute; top: 0px; height: 1px; width: auto; padding: 0px; border: 0px none; margin: 0px; text-align: left; text-indent: 0px; text-transform: none; line-height: normal; letter-spacing: normal; word-spacing: normal;"><div id="MathJax_SVG_Hidden"></div><svg><defs id="MathJax_SVG_glyphs"></defs></svg></div>

    <div class="layout">
      <div class="layout__row layout__row_services">
        <div id="TMpanel">
  <div class="container">
    <div class="logo-wrapper">
      <a href="https://habr.com/ru/" class="logo" title="">
          <svg width="62" height="24" viewBox="0 0 62 24" xmlns="http://www.w3.org/2000/svg">
    <path d="M16.875 19L11.075 10.225L16.825 1.4H12.6L8.75 7.4L4.94999 1.4H0.574994L6.32499 10.15L0.524994 19H4.79999L8.64999 12.975L12.525 19H16.875Z"></path>
    <path d="M24.2607 5.775C20.8857 5.775 18.9607 7.625 18.6107 9.85H22.0107C22.2107 9.175 22.8607 8.6 24.1107 8.6C25.3357 8.6 26.2357 9.225 26.2357 10.425V11.025H23.4107C20.1107 11.025 18.1107 12.55 18.1107 15.2C18.1107 17.8 20.1107 19.3 22.6107 19.3C24.2857 19.3 25.6357 18.65 26.4357 17.6V19H29.8107V10.55C29.8107 7.4 27.5857 5.775 24.2607 5.775ZM23.6107 16.475C22.4857 16.475 21.7607 15.925 21.7607 15.025C21.7607 14.1 22.5607 13.55 23.6857 13.55H26.2357V14.125C26.2357 15.625 25.0107 16.475 23.6107 16.475Z"></path>
    <path d="M39.925 6.3C38.125 6.3 36.65 6.95 35.7 8.275C35.95 5.85 36.925 4.65 39.375 4.275L44.3 3.55V0.375L39.025 1.25C33.925 2.1 32.35 5.5 32.35 11.175C32.35 16.275 34.825 19.3 39.2 19.3C43.125 19.3 45.55 16.3 45.55 12.7C45.55 8.825 43.3 6.3 39.925 6.3ZM39.025 16.25C37.125 16.25 36.075 14.725 36.075 12.675C36.075 10.7 37.175 9.275 39.05 9.275C40.875 9.275 41.9 10.75 41.9 12.7C41.9 14.65 40.9 16.25 39.025 16.25Z"></path>
    <path d="M55.2855 5.775C53.3855 5.775 52.1605 6.6 51.5105 7.575V6.075H48.0105V23.775H51.6605V17.75C52.3105 18.65 53.5355 19.3 55.1855 19.3C58.3605 19.3 60.8855 16.8 60.8855 12.55C60.8855 8.225 58.3605 5.775 55.2855 5.775ZM54.4105 16.15C52.7105 16.15 51.5855 14.775 51.5855 12.6V12.5C51.5855 10.325 52.7105 8.925 54.4105 8.925C56.1105 8.925 57.2105 10.35 57.2105 12.55C57.2105 14.75 56.1105 16.15 54.4105 16.15Z"></path>
</svg>

      </a>
      

        <span class="projects-dropdown" id="dropdown-control">
          <svg width="10" height="6" viewBox="0 0 10 6" fill="none" xmlns="http://www.w3.org/2000/svg">
    <path fill-rule="evenodd" clip-rule="evenodd" d="M5.70711 5.70711C5.31658 6.09763 4.68342 6.09763 4.29289 5.70711L0.292892 1.70711C-0.097632 1.31658 -0.0976319 0.683417 0.292892 0.292893C0.683417 -0.0976308 1.31658 -0.0976308 1.70711 0.292893L5 3.58579L8.29289 0.292894C8.68342 -0.0976301 9.31658 -0.0976301 9.70711 0.292894C10.0976 0.683418 10.0976 1.31658 9.70711 1.70711L5.70711 5.70711Z"></path>
</svg>

        </span>
        <div class="dropdown hidden" id="dropdown">
          <div class="dropdown-heading">
            Все сервисы Хабра
          </div>
          <a class="service" href="https://habr.com/">
            <div class="service-title">
              <svg width="52" height="22" viewBox="0 0 52 22" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path d="M13.86 17.0001L8.514 9.23405L13.816 1.51205H11.528L7.26 7.76005L2.97 1.51205H0.659997L5.984 9.19005L0.615997 17.0001H2.926L7.194 10.6861L11.528 17.0001H13.86Z" fill="#333333"></path>
                <path d="M20.181 5.67005C17.651 5.67005 16.111 7.10005 15.759 8.81605H17.585C17.893 8.00205 18.685 7.34205 20.137 7.34205C21.567 7.34205 22.645 8.11205 22.645 9.65205V10.4001H19.697C16.991 10.4001 15.341 11.6981 15.341 13.8321C15.341 15.9441 17.013 17.2421 19.169 17.2421C20.577 17.2421 21.897 16.7141 22.733 15.6801V17.0001H24.515V9.65205C24.515 7.16605 22.777 5.67005 20.181 5.67005ZM19.411 15.5921C18.179 15.5921 17.255 14.9761 17.255 13.8101C17.255 12.6221 18.289 12.0061 19.807 12.0061H22.645V12.8201C22.645 14.5141 21.171 15.5921 19.411 15.5921Z" fill="#333333"></path>
                <path d="M32.9685 5.91205C31.2965 5.91205 29.9545 6.55005 29.1185 7.78205C29.3825 5.27405 30.3945 3.88805 32.9025 3.42605L36.9505 2.67805V0.852051L32.5065 1.75405C28.7665 2.52405 27.2045 4.96605 27.2045 10.5101C27.2045 14.8001 29.4045 17.2421 32.7925 17.2421C36.0265 17.2421 38.0505 14.7121 38.0505 11.5441C38.0505 7.91405 35.8285 5.91205 32.9685 5.91205ZM32.7045 15.5261C30.6145 15.5261 29.2065 13.9641 29.2065 11.4561C29.2065 8.97005 30.7685 7.60605 32.7265 7.60605C34.7725 7.60605 36.1145 9.23405 36.1145 11.5441C36.1145 13.8541 34.7945 15.5261 32.7045 15.5261Z" fill="#333333"></path>
                <path d="M46.1431 5.67005C44.2291 5.67005 43.0631 6.55005 42.5131 7.49605V5.91205H40.6871V21.2021H42.5791V15.6361C43.1071 16.4501 44.2951 17.2421 46.0771 17.2421C48.6291 17.2421 51.1371 15.3721 51.1371 11.4561C51.1371 7.56205 48.6511 5.67005 46.1431 5.67005ZM45.9011 15.5261C43.8551 15.5261 42.5131 13.9641 42.5131 11.5001V11.4121C42.5131 8.94805 43.8551 7.38605 45.9011 7.38605C47.8811 7.38605 49.2011 9.03605 49.2011 11.4561C49.2011 13.8761 47.8811 15.5261 45.9011 15.5261Z" fill="#333333"></path>
              </svg>
            </div>
            <p class="service-description">
              Сообщество IT-специалистов
            </p>
          </a>
          <a class="service" href="https://qna.habr.com/?utm_source=habr&amp;utm_medium=habr_top_panel">
            <h4 class="service-title">
            <svg width="46" height="18" viewBox="0 0 46 18" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path d="M14.4 8.25602C14.4 3.65802 11.606 0.27002 7.27201 0.27002C2.93801 0.27002 0.144012 3.65802 0.144012 8.25602C0.144012 12.854 2.93801 16.242 7.27201 16.242C8.41601 16.242 9.45001 16.022 10.352 15.604L11.518 17.342H13.696L11.848 14.614C13.476 13.184 14.4 10.918 14.4 8.25602ZM7.27201 14.416C4.10401 14.416 2.14601 11.864 2.14601 8.25602C2.14601 4.64802 4.10401 2.09602 7.27201 2.09602C10.44 2.09602 12.398 4.64802 12.398 8.25602C12.398 10.236 11.826 11.908 10.77 12.986L9.64801 11.314H7.47001L9.29601 14.02C8.70201 14.284 8.02001 14.416 7.27201 14.416Z" fill="#333333"></path>
              <path d="M30.965 16L27.973 12.766L30.921 9.11402H28.699L26.829 11.534L23.331 7.77202C25.377 6.80402 26.455 5.59402 26.455 3.85602C26.455 1.78802 24.871 0.27002 22.583 0.27002C20.207 0.27002 18.535 1.89802 18.535 3.87802C18.535 5.19802 19.305 6.12202 20.163 7.00202L20.427 7.26602C17.985 8.25602 16.753 9.73002 16.753 11.732C16.753 14.196 18.667 16.242 21.835 16.242C23.749 16.242 25.311 15.494 26.565 14.24L26.763 14.042L28.567 16H30.965ZM22.539 1.92002C23.705 1.92002 24.629 2.62402 24.629 3.83402C24.629 5.00002 23.793 5.90202 22.187 6.62802L21.571 6.01202C21.109 5.55002 20.405 4.82402 20.405 3.81202C20.405 2.66802 21.329 1.92002 22.539 1.92002ZM21.945 14.504C19.877 14.504 18.755 13.316 18.755 11.666C18.755 10.258 19.591 9.20202 21.593 8.43202L25.641 12.832L25.509 12.964C24.541 13.976 23.309 14.504 21.945 14.504Z" fill="#333333"></path>
              <path d="M43.5619 16H45.6739L39.8219 0.512019H37.7979L31.9459 16H34.0579L35.5539 11.908H42.0439L43.5619 16ZM38.7879 2.97602L41.3839 10.104H36.2139L38.7879 2.97602Z" fill="#333333"></path>
            </svg>
            </h4>
            <p class="service-description">
              Ответы на&nbsp;любые вопросы об&nbsp;IT
            </p>
          </a>
          <a class="service" href="https://career.habr.com/?utm_source=habr&amp;utm_medium=habr_top_panel">
            <div class="service-title">
            <svg width="84" height="21" viewBox="0 0 84 21" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path d="M12.442 16L4.96201 7.92596L12.31 0.511963H9.78001L2.894 7.41996V0.511963H0.936005V16H2.894V8.60796L9.84601 16H12.442Z" fill="#333333"></path>
              <path d="M18.3646 4.66996C15.8346 4.66996 14.2946 6.09996 13.9426 7.81596H15.7686C16.0766 7.00196 16.8686 6.34196 18.3206 6.34196C19.7506 6.34196 20.8286 7.11196 20.8286 8.65196V9.39996H17.8806C15.1746 9.39996 13.5246 10.698 13.5246 12.832C13.5246 14.944 15.1966 16.242 17.3526 16.242C18.7606 16.242 20.0806 15.714 20.9166 14.68V16H22.6986V8.65196C22.6986 6.16596 20.9606 4.66996 18.3646 4.66996ZM17.5946 14.592C16.3626 14.592 15.4386 13.976 15.4386 12.81C15.4386 11.622 16.4726 11.006 17.9906 11.006H20.8286V11.82C20.8286 13.514 19.3546 14.592 17.5946 14.592Z" fill="#333333"></path>
              <path d="M31.3501 4.66996C29.4361 4.66996 28.2701 5.54996 27.7201 6.49596V4.91196H25.8941V20.202H27.7861V14.636C28.3141 15.45 29.5021 16.242 31.2841 16.242C33.8361 16.242 36.3441 14.372 36.3441 10.456C36.3441 6.56196 33.8581 4.66996 31.3501 4.66996ZM31.1081 14.526C29.0621 14.526 27.7201 12.964 27.7201 10.5V10.412C27.7201 7.94796 29.0621 6.38596 31.1081 6.38596C33.0881 6.38596 34.4081 8.03596 34.4081 10.456C34.4081 12.876 33.0881 14.526 31.1081 14.526Z" fill="#333333"></path>
              <path d="M43.3561 8.49796H40.8701V4.91196H38.9781V16H43.3341C45.7101 16 47.2501 14.372 47.2501 12.216C47.2501 10.06 45.7101 8.49796 43.3561 8.49796ZM43.1141 14.328H40.8701V10.17H43.1141C44.5661 10.17 45.3581 11.028 45.3581 12.216C45.3581 13.404 44.5661 14.328 43.1141 14.328Z" fill="#333333"></path>
              <path d="M59.1788 11.028V10.06C59.1788 6.75996 57.2868 4.66996 54.3388 4.66996C51.3028 4.66996 49.1248 6.86996 49.1248 10.456C49.1248 14.02 51.2808 16.242 54.4928 16.242C57.3748 16.242 58.7608 14.438 59.0468 13.14H57.1328C56.9348 13.712 56.0548 14.548 54.5148 14.548C52.4688 14.548 51.1048 13.052 51.1048 11.072V11.028H59.1788ZM54.2948 6.36396C56.0768 6.36396 57.1768 7.50796 57.2648 9.42196H51.1268C51.2808 7.59596 52.4468 6.36396 54.2948 6.36396Z" fill="#333333"></path>
              <path d="M67.272 4.66996C65.358 4.66996 64.192 5.54996 63.642 6.49596V4.91196H61.816V20.202H63.708V14.636C64.236 15.45 65.424 16.242 67.206 16.242C69.758 16.242 72.266 14.372 72.266 10.456C72.266 6.56196 69.78 4.66996 67.272 4.66996ZM67.03 14.526C64.984 14.526 63.642 12.964 63.642 10.5V10.412C63.642 7.94796 64.984 6.38596 67.03 6.38596C69.01 6.38596 70.33 8.03596 70.33 10.456C70.33 12.876 69.01 14.526 67.03 14.526Z" fill="#333333"></path>
              <path d="M79.058 4.66996C76.528 4.66996 74.988 6.09996 74.636 7.81596H76.462C76.77 7.00196 77.562 6.34196 79.014 6.34196C80.444 6.34196 81.522 7.11196 81.522 8.65196V9.39996H78.574C75.868 9.39996 74.218 10.698 74.218 12.832C74.218 14.944 75.89 16.242 78.046 16.242C79.454 16.242 80.774 15.714 81.61 14.68V16H83.392V8.65196C83.392 6.16596 81.654 4.66996 79.058 4.66996ZM78.288 14.592C77.056 14.592 76.132 13.976 76.132 12.81C76.132 11.622 77.166 11.006 78.684 11.006H81.522V11.82C81.522 13.514 80.048 14.592 78.288 14.592Z" fill="#333333"></path>
            </svg>
            </div>
            <p class="service-description">
              Профессиональное развитие в&nbsp;IT
            </p>
          </a>
          <a class="service" href="https://freelance.habr.com/?utm_source=habr&amp;utm_medium=habr_top_panel">
            <div class="service-title">
            <svg width="91" height="21" viewBox="0 0 91 21" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path d="M9.032 1.65602V0.0720215H7.118V1.65602C3.268 1.72202 0.0339966 4.01002 0.0339966 8.16802C0.0339966 12.304 3.268 14.592 7.118 14.658V16.242H9.032V14.658C12.882 14.592 16.116 12.304 16.116 8.16802C16.116 4.01002 12.882 1.72202 9.032 1.65602ZM7.118 12.898C4.082 12.832 2.014 11.05 2.014 8.16802C2.014 5.26402 4.082 3.48202 7.118 3.41602V12.898ZM9.032 12.898V3.41602C12.068 3.48202 14.136 5.26402 14.136 8.16802C14.136 11.05 12.068 12.832 9.032 12.898Z" fill="#333333"></path>
              <path d="M24.2603 4.67002C22.3463 4.67002 21.1803 5.55002 20.6303 6.49602V4.91202H18.8043V20.202H20.6963V14.636C21.2243 15.45 22.4123 16.242 24.1943 16.242C26.7463 16.242 29.2543 14.372 29.2543 10.456C29.2543 6.56202 26.7683 4.67002 24.2603 4.67002ZM24.0183 14.526C21.9723 14.526 20.6303 12.964 20.6303 10.5V10.412C20.6303 7.94802 21.9723 6.38602 24.0183 6.38602C25.9983 6.38602 27.3183 8.03602 27.3183 10.456C27.3183 12.876 25.9983 14.526 24.0183 14.526Z" fill="#333333"></path>
              <path d="M39.4123 4.91202L33.7583 13.074V4.91202H31.8883V16H33.7583L39.4123 7.83802V16H41.2823V4.91202H39.4123Z" fill="#333333"></path>
              <path d="M46.0815 4.91202L45.5095 11.71C45.3555 13.624 44.9595 14.328 43.5735 14.328H43.2655V16.044H43.7935C46.0595 16.044 47.0935 14.856 47.3355 11.842L47.7755 6.60602H51.8455V16H53.7375V4.91202H46.0815Z" fill="#333333"></path>
              <path d="M61.2045 4.67002C58.6745 4.67002 57.1345 6.10002 56.7825 7.81602H58.6085C58.9165 7.00202 59.7085 6.34202 61.1605 6.34202C62.5905 6.34202 63.6685 7.11202 63.6685 8.65202V9.40002H60.7205C58.0145 9.40002 56.3645 10.698 56.3645 12.832C56.3645 14.944 58.0365 16.242 60.1925 16.242C61.6005 16.242 62.9205 15.714 63.7565 14.68V16H65.5385V8.65202C65.5385 6.16602 63.8005 4.67002 61.2045 4.67002ZM60.4345 14.592C59.2025 14.592 58.2785 13.976 58.2785 12.81C58.2785 11.622 59.3125 11.006 60.8305 11.006H63.6685V11.82C63.6685 13.514 62.1945 14.592 60.4345 14.592Z" fill="#333333"></path>
              <path d="M76.104 4.91202V9.37802H70.626V4.91202H68.734V16H70.626V11.094H76.104V16H77.996V4.91202H76.104Z" fill="#333333"></path>
              <path d="M85.9003 14.526C83.8983 14.526 82.5783 12.876 82.5783 10.456C82.5783 8.05802 83.8543 6.38602 85.8783 6.38602C87.6383 6.38602 88.4523 7.53002 88.7383 8.45402H90.6303C90.3443 6.69402 88.8263 4.67002 85.8783 4.67002C82.6883 4.67002 80.6423 7.13402 80.6423 10.456C80.6423 13.844 82.7323 16.242 85.8783 16.242C88.6283 16.242 90.3883 14.394 90.6303 12.414H88.7383C88.4963 13.36 87.7483 14.526 85.9003 14.526Z" fill="#333333"></path>
            </svg>
            </div>
            <p class="service-description">
              Удаленная работа для IT-специалистов
            </p>
          </a>
        </div>
    </div>
    <div class="bmenu">
      <a class="bmenu__conversion" href="https://habr.com/sandbox/start/" onclick="if (typeof ga === 'function') { ga('send', 'event', 'habr_top_panel', 'become_an_author'); }">Как стать автором</a>

    </div>
      <div class="bmenu_inner" style="display:flex!important;visibility:visible!important;">
  <span class="bmenu__label">Мегапосты:</span>
  <span class="bmenu slink">
    <a href="https://u.tmtm.ru/u-k-p-270220" target="_blank" style="color: #8CFB8C" rel=" noopener">Боли сисадмина</a>
    <a href="https://u.tmtm.ru/u-f-p-270220" target="_blank" style="color: #FFAFAF" rel=" noopener">От свайпа до фриланса</a>
    <a href="https://u.tmtm.ru/u-mv-t-210220" target="_blank" style="color: #F3FFB5" rel=" noopener">Подарки для Хабра</a>
  </span>
</div>

  </div>
</div>

<script>
  var dropdown = document.querySelector('#dropdown');
  var dropdownControl = document.querySelector('#dropdown-control');
  var logoWrapper = document.querySelector('.logo-wrapper');

  document.addEventListener('click', function(e) {
      if (dropdown) {
        var isClickInside = logoWrapper.contains(e.target);
        var dropdownClosed = dropdown.classList.contains('hidden');
        if (!isClickInside && !dropdownClosed) {
          dropdown.classList.add('hidden');
          dropdownControl.classList.remove('reverted');
        }
      }
  });
  if (dropdownControl) {
    dropdownControl.onclick = function () {
      dropdown.classList.toggle('hidden');
      dropdownControl.classList.toggle('reverted');
    }
  }
</script>

      </div>

      <div class="layout__row layout__row_navbar">
        <div class="layout__cell">
          <div class="main-navbar">
  <div class="main-navbar__section main-navbar__section_left">
    <ul class="nav-links" id="navbar-links">
    <li class="nav-links__item">
      <a href="https://habr.com/ru/feed/" class="nav-links__item-link ">Моя лента</a>
    </li>
    <li class="nav-links__item">
      <a href="https://habr.com/ru/all/" class="nav-links__item-link ">Все потоки</a>
    </li>
    <li class="nav-links__item">
      <a href="https://habr.com/ru/flows/develop/" class="nav-links__item-link ">Разработка</a>
    </li>
    <li class="nav-links__item">
      <a href="https://habr.com/ru/flows/popsci/" class="nav-links__item-link ">Научпоп</a>
    </li>
    <li class="nav-links__item">
      <a href="https://habr.com/ru/flows/admin/" class="nav-links__item-link ">Администрирование</a>
    </li>
    <li class="nav-links__item">
      <a href="https://habr.com/ru/flows/design/" class="nav-links__item-link ">Дизайн</a>
    </li>
    <li class="nav-links__item">
      <a href="https://habr.com/ru/flows/management/" class="nav-links__item-link ">Менеджмент</a>
    </li>
    <li class="nav-links__item">
      <a href="https://habr.com/ru/flows/marketing/" class="nav-links__item-link ">Маркетинг</a>
    </li>
  
</ul>

    <form action="https://habr.com/ru/search/#h" method="get" class="search-form" id="search-form">
  <button type="button" class="btn btn_navbar_search icon-svg_search" id="search-form-btn" title="Поиск по сайту">
    <svg class="icon-svg" width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
<path fill-rule="evenodd" clip-rule="evenodd" d="M17 11C17 14.3137 14.3137 17 11 17C7.68629 17 5 14.3137 5 11C5 7.68629 7.68629 5 11 5C14.3137 5 17 7.68629 17 11ZM15.5838 17.5574C14.2857 18.4665 12.7051 19 11 19C6.58172 19 3 15.4183 3 11C3 6.58172 6.58172 3 11 3C15.4183 3 19 6.58172 19 11C19 12.9998 18.2662 14.8282 17.0533 16.2307C17.0767 16.2502 17.0994 16.2709 17.1214 16.2929L20.4143 19.5858C20.8048 19.9763 20.8048 20.6095 20.4143 21C20.0238 21.3905 19.3906 21.3905 19.0001 21L15.7072 17.7071C15.6605 17.6604 15.6194 17.6102 15.5838 17.5574Z"></path>
</svg>

  </button>
  <label class="search-form__field-wrapper">
    <input type="text" name="q" class="search-form__field" id="search-form-field" placeholder="Поиск" tabindex="-1">
    <button type="button" class="btn btn_search-close" id="search-form-clear" title="Закрыть">
      <svg class="icon-svg icon-svg_navbar-close-search" width="31" height="32" viewBox="0 0 31 32" aria-hidden="true" version="1.1" role="img"><path d="M26.67 0L15.217 11.448 3.77 0 0 3.77l11.447 11.45L0 26.666l3.77 3.77L15.218 18.99l11.45 11.448 3.772-3.77-11.448-11.45L30.44 3.772z"></path></svg>

    </button>
  </label>
</form>

  </div>

  <div class="main-navbar__section main-navbar__section_right">

      <a href="https://habr.com/ru/tracker/" class="btn btn_medium btn_navbar_tracker" title="Трекер">
        <svg class="icon-svg icon-svg_navbar-tracker" width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
<path fill-rule="evenodd" clip-rule="evenodd" d="M13.5 3.5C13.5 3.72586 13.4501 3.94005 13.3607 4.13216C16.5754 4.76546 19 7.59958 19 11V16H19.9412C20.5259 16 21 16.4477 21 17C21 17.5523 20.5259 18 19.9412 18H19H17H15.5C15.5 19.933 13.933 21.5 12 21.5C10.067 21.5 8.5 19.933 8.5 18H7H5H4.05882C3.47405 18 3 17.5523 3 17C3 16.4477 3.47405 16 4.05882 16H5V11C5 7.59958 7.42461 4.76546 10.6393 4.13216C10.5499 3.94005 10.5 3.72586 10.5 3.5C10.5 2.67157 11.1716 2 12 2C12.8284 2 13.5 2.67157 13.5 3.5ZM9.12734 16H14.8727H17V11C17 8.23858 14.7614 6 12 6C9.23858 6 7 8.23858 7 11V16H9.12734ZM10.5 18C10.5 18.8284 11.1716 19.5 12 19.5C12.8284 19.5 13.5 18.8284 13.5 18H10.5Z"></path>
</svg>

      </a>


      <a title="Написать" href="https://habr.com/ru/topic/add/" class="btn btn_medium btn_navbar_write-topic">
        <svg class="icon-svg icon-svg_navbar-pencil" width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
<path fill-rule="evenodd" clip-rule="evenodd" d="M14.9195 2.4669C15.3101 2.85742 15.3101 3.49059 14.9195 3.88111L8.54928 10.2514C8.35407 10.4498 8.30625 10.6535 8.34031 10.8822C8.38002 11.1488 8.54258 11.4696 8.82068 11.7477C9.09878 12.0258 9.41953 12.1883 9.68615 12.228C9.91729 12.2625 10.1229 12.2133 10.3233 12.0128L14.9195 7.41665C15.1125 7.22366 15.3647 7.12604 15.6177 7.1238C15.8766 7.12146 16.1363 7.21908 16.3338 7.41665C16.7244 7.80718 16.7244 8.44034 16.3338 8.83086L11.7376 13.4271C11.5372 13.6275 11.488 13.8331 11.5224 14.0642C11.5622 14.3308 11.7247 14.6516 12.0028 14.9297C12.2809 15.2078 12.6017 15.3703 12.8683 15.41C13.0961 15.444 13.299 15.3967 13.4967 15.2034L19.8693 8.83086C20.2598 8.44033 20.893 8.44033 21.2835 8.83086C21.674 9.22138 21.674 9.85455 21.2835 10.2451L14.928 16.6006L14.9196 16.609L14.9049 16.6237L13.5053 18.0232C13.39 18.1386 13.2482 18.224 13.0923 18.2719L3.89991 21.1003C3.54588 21.2093 3.16064 21.1136 2.89872 20.8517C2.6368 20.5898 2.54111 20.2045 2.65005 19.8505L5.47847 10.6581C5.52644 10.5022 5.61181 10.3604 5.72715 10.2451L7.13073 8.84148C7.13424 8.83794 7.13777 8.8344 7.1413 8.83087C7.14333 8.82884 7.14537 8.82682 7.14741 8.82481L13.5053 2.4669C13.8958 2.07637 14.529 2.07637 14.9195 2.4669ZM6.96289 12.6345L5.1171 18.6333L11.116 16.7875C10.9252 16.6534 10.7484 16.5037 10.5886 16.3439C10.0712 15.8265 9.65924 15.1308 9.54427 14.3588C9.53755 14.3138 9.53189 14.2685 9.5273 14.2232C9.48191 14.2186 9.43665 14.2129 9.39152 14.2062C8.61958 14.0913 7.92386 13.6793 7.40647 13.1619C7.24667 13.0021 7.09693 12.8253 6.96289 12.6345Z"></path>
</svg>

      </a>

      <div class="dropdown dropdown_user">
        <button type="button" class="btn btn_medium btn_navbar_user-dropdown" data-toggle="dropdown" aria-haspopup="true" role="button" aria-expanded="false" tabindex="0" title="epishman">
            <img src="Swift%20%D0%BF%D1%80%D0%BE%D1%82%D0%B8%D0%B2%20Rust%20%E2%80%94%20%D0%B1%D0%B5%D0%BD%D1%87%D0%BC%D0%B0%D1%80%D0%BA%D0%B8%D0%BD%D0%B3%20%D0%BD%D0%B0%20Linux%20%D1%81%20(%D0%BD%D0%B5)%D0%BF%D0%BE%D0%BD%D1%8F%D1%82%D0%BD%D1%8B%D0%BC%20%D1%84%D0%B8%D0%BD%D0%B0%D0%BB%D0%BE%D0%BC%20_%20%D0%A5%D0%B0%D0%B1%D1%80_files/ec0d88c4853c0d36d44bd0526dcfa8d7_002.png" alt="user avatar" width="32" height="32">
        </button>
        <div class="dropdown-container dropdown-container_white" aria-hidden="true" role="menu">
  <a href="https://habr.com/ru/users/epishman/" class="dropdown__user-info user-info">
    <span class="user-info__nickname">epishman</span><br>
    <span class="user-info__special">Профиль</span>
  </a><br>
    <span class="dropdown__user-stats">У&nbsp;вас недостаточно кармы для&nbsp;голосования. <a href="https://habr.com/info/help/karma/">Как поднять карму?</a></span>
  <ul class="n-dropdown-menu n-dropdown-menu_profile">
    <li class="n-dropdown-menu__item">
      <a href="https://habr.com/ru/users/epishman/posts/" class="n-dropdown-menu__item-link">Публикации</a>
    </li>
      <li class="n-dropdown-menu__item">
        <a href="https://habr.com/ru/users/epishman/posts/drafts/" class="n-dropdown-menu__item-link">Черновики</a>
      </li>

      <li class="n-dropdown-menu__item">
        <a href="https://habr.com/ru/users/epishman/comments/" class="n-dropdown-menu__item-link">Комментарии</a>
      </li>
    <li class="n-dropdown-menu__item">
      <a href="https://habr.com/ru/conversations/" class="n-dropdown-menu__item-link">Диалоги </a>
    </li>
    <li class="n-dropdown-menu__item">
      <a href="https://habr.com/ru/users/epishman/favorites/" class="n-dropdown-menu__item-link">Закладки</a>
    </li>
    <li class="n-dropdown-menu__item">
      <a href="https://habr.com/ru/beta/" class="n-dropdown-menu__item-link">Бета-тестирование</a>
    </li>

    <li class="n-dropdown-menu__item n-dropdown-menu__item_border">
      <a href="#" class="n-dropdown-menu__item-link n-dropdown-menu__item-link_user-menu js-show_lang_settings">
        <svg class="icon-svg icon-svg_user-dropdown" width="16" height="16">
          <use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#globus"></use>
        </svg>
        Настройка языка
      </a>
    </li>

    <li class="n-dropdown-menu__item ">
      <a href="https://habr.com/ru/auth/settings/profile/" class="n-dropdown-menu__item-link n-dropdown-menu__item-link_user-menu">
        <svg class="icon-svg icon-svg_user-dropdown" width="16" height="16">
          <use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#settings"></use>
        </svg>
        Настройки
      </a>
    </li>
    <li class="n-dropdown-menu__item">
      <a href="https://habr.com/ru/logout/epishman/3506847558/" class="n-dropdown-menu__item-link n-dropdown-menu__item-link_user-menu">
        <svg class="icon-svg icon-svg_user-dropdown" width="16" height="16">
          <use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#logout"></use>
        </svg>
        Выйти
      </a>
    </li>
  </ul>
</div>

      </div>

  </div>
</div>

        </div>
      </div>

      <div class="layout__row layout__row_body">
        <div class="layout__cell layout__cell_body">
          
            
  
  
  <section class="column-wrapper column-wrapper_post js-sticky-wrapper">
    <div class="content_left js-content_left">
      
    <article class="post post_full" id="post_450512" lang="ru">
  <div class="post__wrapper">
    <header class="post__meta">
        <a href="https://habr.com/ru/users/epishman/" class="post__user-info user-info" title="Автор публикации">
            <img src="Swift%20%D0%BF%D1%80%D0%BE%D1%82%D0%B8%D0%B2%20Rust%20%E2%80%94%20%D0%B1%D0%B5%D0%BD%D1%87%D0%BC%D0%B0%D1%80%D0%BA%D0%B8%D0%BD%D0%B3%20%D0%BD%D0%B0%20Linux%20%D1%81%20(%D0%BD%D0%B5)%D0%BF%D0%BE%D0%BD%D1%8F%D1%82%D0%BD%D1%8B%D0%BC%20%D1%84%D0%B8%D0%BD%D0%B0%D0%BB%D0%BE%D0%BC%20_%20%D0%A5%D0%B0%D0%B1%D1%80_files/ec0d88c4853c0d36d44bd0526dcfa8d7_002.png" class="user-info__image-pic user-info__image-pic_small" width="24" height="24">
          <span class="user-info__nickname user-info__nickname_small">epishman</span>
        </a>

      <span class="post__time" data-time_published="2019-05-06T06:57Z">6 мая 2019 в 09:57</span>

      <span class="post__author-controls"><a href="https://habr.com/ru/topic/edit/450512/" class="icon-svg_edit icon-svg_edit-top" title="Редактировать"><svg class="icon-svg" width="32" height="32" viewBox="0 0 32 32" aria-hidden="true" aria-labelledby="title" version="1.1" role="img"><path d="M4 0h24c2.209 0 4 1.791 4 4v24c0 2.209-1.791 4-4 4h-24c-2.209 0-4-1.791-4-4v-24c0-2.209 1.791-4 4-4zm20.327 7.587c-1.85-1.85-3.238-1.573-3.238-1.573l-13.879 13.879-1.295 6.106 6.106-1.295 13.879-13.878s.278-1.389-1.573-3.239zm-12.669 16.384l-2.081.448c-.201-.376-.443-.752-.886-1.195s-.819-.684-1.194-.886l.449-2.081.602-.602s1.133.023 2.411 1.302l1.302 2.412-.602.602z"></path></svg>
</a></span>
    </header>

    <h1 class="post__title post__title_full">
      <span class="post__title-text">Swift против Rust — бенчмаркинг на Linux с (не)понятным финалом</span>
    </h1>


      <ul class="post__hubs post__hubs_full-post inline-list">
          <li class="inline-list__item inline-list__item_hub">
            <a href="https://habr.com/ru/hub/programming/" class="inline-list__item-link hub-link " title="Вы не подписаны на этот хаб" onclick="if (typeof ga === 'function') { ga('send', 'event', 'hub', 'post page', 'Программирование'); }">Программирование</a>, 
          </li>
          <li class="inline-list__item inline-list__item_hub">
            <a href="https://habr.com/ru/hub/rust/" class="inline-list__item-link hub-link hub-link_subscribed" title="Вы подписаны на этот хаб" onclick="if (typeof ga === 'function') { ga('send', 'event', 'hub', 'post page', 'Rust'); }">Rust</a>, 
          </li>
          <li class="inline-list__item inline-list__item_hub">
            <a href="https://habr.com/ru/hub/swift/" class="inline-list__item-link hub-link " title="Вы не подписаны на этот хаб" onclick="if (typeof ga === 'function') { ga('send', 'event', 'hub', 'post page', 'Swift'); }">Swift</a>
          </li>
      </ul>

    <ul class="post__marks inline-list"></ul>

    <div class="post__body post__body_full">
      <div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/450512/">Привет, Хабр!<br>
<br>
Периодически посматриваю на Swift в качестве языка прикладного 
программирования для Linux — простой, динамичный, компилируемый, без 
сборщика мусора, а значит, теоретически, пригоден и для устройств. Решил
 сравнить его с чем-то таким же молодым и модным — например Rust. В 
качестве теста я взял прикладную задачу — парсинг и агрегация большого 
файла JSON, содержащего массив объектов. Исходники старался оформлять в 
едином стиле, сравнивал по 4-м параметрам: скорость исполнения, размер 
бинарника, размер исходника, субъективные впечатления от кодинга.<br>
<br>
<b>Подробнее о задаче</b>. Имеется файл JSON размером 100 Мб, внутри 
массив из миллиона объектов. Каждый объект представляет собой запись о 
долге — название компании, список телефонов и сумма долга. Одни и те же 
телефоны могут использовать разные компании, и по этому признаку их 
нужно сгруппировать, т.е. выделить реальных дебиторов, имеющих список 
названий, список телефонов, и суммарный долг. Исходные объекты 
«грязные», т.е. данные могут быть записаны в виде строк / чисел / 
массивов / объектов.<br>
<br>
Результаты бенчмаркинга меня озадачили. Подробности и исходные тексты — под катом.<a name="habracut"></a><br>
<br>
<b>Исходный JSON:</b><br>
<pre><code class="json hljs">[
    {<span class="hljs-attr"><span class="hljs-attr">"company"</span></span>:<span class="hljs-string"><span class="hljs-string">"Рога и копыта"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"debt"</span></span>: <span class="hljs-number"><span class="hljs-number">800</span></span>, <span class="hljs-attr"><span class="hljs-attr">"phones"</span></span>: [<span class="hljs-number"><span class="hljs-number">123</span></span>, <span class="hljs-number"><span class="hljs-number">234</span></span>, <span class="hljs-number"><span class="hljs-number">456</span></span>]},
    {<span class="hljs-attr"><span class="hljs-attr">"company"</span></span>:<span class="hljs-string"><span class="hljs-string">"Первая коллекторская"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"debt"</span></span>: <span class="hljs-number"><span class="hljs-number">1200</span></span>, <span class="hljs-attr"><span class="hljs-attr">"phones"</span></span>: [<span class="hljs-string"><span class="hljs-string">"2128506"</span></span>, <span class="hljs-number"><span class="hljs-number">456</span></span>, <span class="hljs-number"><span class="hljs-number">789</span></span>]},
    {<span class="hljs-attr"><span class="hljs-attr">"company"</span></span>:<span class="hljs-string"><span class="hljs-string">"Святой престол"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"debt"</span></span>: <span class="hljs-string"><span class="hljs-string">"666"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"phones"</span></span>: <span class="hljs-number"><span class="hljs-number">666</span></span>},
    {<span class="hljs-attr"><span class="hljs-attr">"company"</span></span>: <span class="hljs-string"><span class="hljs-string">"Казачий спас"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"debt"</span></span>: <span class="hljs-number"><span class="hljs-number">1500</span></span>, <span class="hljs-attr"><span class="hljs-attr">"phones"</span></span>: [<span class="hljs-number"><span class="hljs-number">234567</span></span>, <span class="hljs-string"><span class="hljs-string">"34567"</span></span>], <span class="hljs-attr"><span class="hljs-attr">"phone"</span></span>: <span class="hljs-number"><span class="hljs-number">666</span></span>},
    {<span class="hljs-attr"><span class="hljs-attr">"company"</span></span>: {<span class="hljs-attr"><span class="hljs-attr">"name"</span></span>: <span class="hljs-string"><span class="hljs-string">"Шестерочка"</span></span>}, <span class="hljs-attr"><span class="hljs-attr">"debt"</span></span>: <span class="hljs-number"><span class="hljs-number">2550</span></span>, <span class="hljs-attr"><span class="hljs-attr">"phones"</span></span>: <span class="hljs-number"><span class="hljs-number">788</span></span>, <span class="hljs-attr"><span class="hljs-attr">"phone"</span></span>: <span class="hljs-number"><span class="hljs-number">789</span></span>},
...</code></pre><br>
<h4>Детали реализации</h4><br>
Задача распадается на 4 стадии:<br>
<br>
1) Буферизованное посимвольное чтение файла, потоковый парсинг и 
выделение объектов из массива. Не стал заморачиваться поиском библиотек 
типа YAJL, ведь мы точно знаем что внутри массив, и выделить объекты 
можно путем подсчета открывающих и закрывающих фигурных скобок {}, благо
 что они ASCII, а не многобайтные Unicode. На удивление, не обнаружил в 
обоих языках функции посимвольного чтения из потока Unicode — полное 
безобразие, слава богу что парсеры JSON берут эту работу на себя, иначе 
пришлось бы велосипедить с битовыми масками и сдвигами.<br>
<br>
2) Cтроки-объекты, выделенные на стадии 1, передаем штатному парсеру JSON, на выходе получаем динамическую структуру (<i>Any</i> в Swift и <i>JsonValue</i> в Rust).<br>
<br>
3) Копаемся в динамических данных, на выходе формируем типизированную структуру:<br>
<pre><code class="swift hljs"><span class="hljs-comment"><span class="hljs-comment">//source data</span></span>
<span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">DebtRec</span></span></span><span class="hljs-class"> </span></span>{
    <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> company: <span class="hljs-type"><span class="hljs-type">String</span></span>
    <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> phones: <span class="hljs-type"><span class="hljs-type">Array</span></span>&lt;<span class="hljs-type"><span class="hljs-type">String</span></span>&gt;
    <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> debt: <span class="hljs-type"><span class="hljs-type">Double</span></span>
}</code></pre><br>
4) Агрегируем запись о долге — ищем по номеру телефона дебитора (либо 
создаем), и обновляем его атрибуты. Для чего используем еще 2 структуры:<br>
<pre><code class="swift hljs"><span class="hljs-comment"><span class="hljs-comment">//result data</span></span>
<span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Debtor</span></span></span><span class="hljs-class"> </span></span>{
    <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> companies: <span class="hljs-type"><span class="hljs-type">Set</span></span>&lt;<span class="hljs-type"><span class="hljs-type">String</span></span>&gt;
    <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> phones: <span class="hljs-type"><span class="hljs-type">Set</span></span>&lt;<span class="hljs-type"><span class="hljs-type">String</span></span>&gt;
    <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> debt: <span class="hljs-type"><span class="hljs-type">Double</span></span>
}
<span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Debtors</span></span></span><span class="hljs-class"> </span></span>{
    <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> all: <span class="hljs-type"><span class="hljs-type">Array</span></span>&lt;<span class="hljs-type"><span class="hljs-type">Debtor</span></span>&gt;
    <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> index_by_phone: <span class="hljs-type"><span class="hljs-type">Dictionary</span></span>&lt;<span class="hljs-type"><span class="hljs-type">String</span></span>, <span class="hljs-type"><span class="hljs-type">Int</span></span>&gt;
}</code></pre><br>
Итоговых дебиторов храним в динамическом массиве (векторе), для быстрого
 поиска по телефону используем индексную хеш-таблицу, в которой для 
каждого телефона храним ссылку на дебитора. Упс… Помня, что Rust не 
поощряет хранение реальных ссылок (даже иммутабельных), используем 
вместо ссылки числовой индекс дебитора в массиве all — доступ по индексу
 дешевая операция. Хотя, конечно, если все перейдут на доступ по 
индексам и хешам, получим не приложение, а какую-то СУБД. Может Rust 
этого от нас и добивается?<br>
<br>
P.S.<br>
Мой код на Rust далек от идеального — например, много to_string(), тогда
 как правильнее было бы заморочиться со ссылками и временами жизни (хотя
 предполагаю, что умный компилятор сделал это за меня). Что касается 
Swift — код также весьма далек от совершенства, но ведь в этом и цель 
бенчмаркинга — показать как простой человек склонен решать задачи на том
 или ином языке, и что из этого получается.<br>
<br>
<h4>Результаты тестирования</h4><br>
Проекты компилировались со стандартными опциями:<br>
<i>swift build -c release<br>
cargo build --release</i><br>
<br>
Дебажная версия Rust показала чудовищную производительность в 86 секунд,
 возможно, честно отрабатывая мои to_string() (а может вообще в машинный
 код не переводила? &lt;шутка&gt;). Для Swift разница в дебажной и 
релизной версии оказалась незначительной. Сравниваем только релизные 
версии.<br>
<br>
<b>Скорость чтения и обработки 1 млн. объектов</b><br>
<b><i>Swift</i></b>: 50 секунд<br>
<b><i>Rust</i></b>: 4.31 секунды, то есть в 11.5 раз быстрее<br>
<br>
<b>Размер бинарного кода</b><br>
<b><i>Swift</i></b>:<br>
Сам бинарник 62 Kb, но библиотеки runtime — 9 штук на сумму 54,6 Мб (я 
считал только те, без которых программа действительно не запускается)<br>
<b><i>Rust</i></b>:<br>
Бинарник получился не маленким — 1,9 Мб, зато он один (<i>«lto=true»</i> ужимает до 950 Кб, но компилирует существенно дольше).<br>
<br>
<b>Размер исходного кода</b><br>
<b><i>Swift</i></b>: 189 строк, 4.5 Kb<br>
<b><i>Rust</i></b>: 230 строк, 5.8 Кб<br>
<br>
<b>Впечатления от языка</b><br>
Что касается кодинга — бесспорно, Swift гладкий и приятный глазу, 
особенно в сравнении с «ершистым» Rust, и программы получаются 
компактнее. Я не буду придираться к мелочам, отмечу лишь те грабли, на 
которые наступил сам при изучении. Простите, могу быть субъективен.<br>
<br>
1) Именования объектов стандартной библиотеки Swift (а также Foundation)
 не так интуитивны и структурированы как в Rust, видимо по причине 
необходимости тащить наследие предков. Без документации порой сложно 
догадаться, какой метод или объект нужно искать. Перегруженные 
конструкторы конечно добавляют приятной магии, но данный подход, похоже,
 совсем не молодежный, и мне ближе принцип именования фабричных методов в
 Rust — from_str(), from_utf8() и т.д.<br>
<br>
2) Обилие унаследованных объектов + перегрузка методов в Swift облегчает
 возможность начинающему программисту выстрелить себе в ногу. Например, в
 качестве промежуточного буфера прочитанных из файла байт я сначала 
использовал Data(), который как раз требуется на вход парсеру JSON. Этот
 Data имеет те же методы, что и Array, т.е. позволяет добавлять байты, 
да и по сути это одно и то же. Однако, производительность с Data была в 
несколько раз (!) ниже, чем в нынешнем варианте с Array. В Rust разница в
 производительности между векторами и слайсами практически не ощущается,
 а API доступа настолько разные, что никак не перепутать.<br>
<i>PS<br>
В комментариях — специалисты по Swift смогли ускорить код в несколько 
раз, но это уже магия профессионалов, тогда как Rust смогли ускорить 
только на 14%. Получается, что порог вхождения в Rust на самом деле 
ниже, а не выше, как принято думать, и злой компилятор не оставляет 
никакой свободы «сделать что-то не так».</i><br>
<br>
3) Опциональный тип данных Swift (а также оператор приведения типов) 
сделаны синтаксически более изящно, через постфиксы ?! — в отличие от 
неуклюжего растового unwrap(). Однако растовый match позволяет 
единообразно обрабатывать типы Option, Result, Value, получая, при 
необходимости, доступ к тексту ошибки. В Swift же в разных местах 
используется то возврат Optional, то бросок исключения, и это иногда 
сбивает с толку.<br>
<br>
4) Объявления внутренних функций в Swift не всплывают, поэтому их 
приходится объявлять выше по тексту, что странно, ведь во всех остальных
 языках внутренние функции можно объявлять в конце.<br>
<br>
5) В Rust встречаются кривые синтаксические конструкции, например если 
нужно проверить значение JSON на пустоту, приходится писать один из 2-х 
смешных бредов:<br>
<pre><code class="rust hljs"><span class="hljs-keyword"><span class="hljs-keyword">if</span></span> <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> Null = myVal {
    ...
}
<span class="hljs-keyword"><span class="hljs-keyword">match</span></span> myVal {
    Null =&gt; {
        ...
    }
    _ =&gt; {}
}</code></pre><br>
хотя напрашиваются очевидные варианты:<br>
<pre><code class="rust hljs"><span class="hljs-keyword"><span class="hljs-keyword">if</span></span> myVal is Null {
    ...
}
<span class="hljs-keyword"><span class="hljs-keyword">if</span></span> myVal == <span class="hljs-built_in"><span class="hljs-built_in">Option</span></span>::Null {
    ...
}</code></pre><br>
Поэтому и приходится в библиотеках создавать кучу методов is_str(), 
is_null(), is_f64() для каждого enum-типа, что, конечно, жуткие 
синтаксические костыли.<br>
<i>PS<br>
Судя по всему, это скоро починят, в комментариях есть ссылка на proposal.</i><br>
<br>
<h4>Резюме</h4><br>
Так что же так тормозит в свифте? Разложим на стадии:<br>
<br>
1) Чтение файла, потоковый парсинг с выделеним объектов<br>
<b><i>Swift</i></b>: 7.46 секунд<br>
<b><i>Rust</i></b>: 0.75 секунд<br>
<br>
2) Парсинг JSON в динамический объект<br>
<b><i>Swift</i></b>: 21.8 секунд <br>
 — это миллион вызовов: <i>JSONSerialization.jsonObject(with: Data(obj))</i><br>
<b><i>Rust</i></b>: 1.77 секунд <br>
 — это миллион вызовов: <i>serde_json::from_slice(&amp;obj)</i><br>
<br>
3) Преобразование Any в типизированную структуру<br>
<b><i>Swift</i></b>: 16.01 секунд<br>
<b><i>Rust</i></b>: 0.88 секунд<br>
 — допускаю, что можно написать оптимальнее, но мой код на Rust такой же «тупой» как и на Swift<br>
<br>
4) Агрегация<br>
 <b><i>Swift</i></b>: 4.74 секунд<br>
<b><i>Rust</i></b>: 0.91 секунд<br>
<br>
То есть мы видим, что в языке Swift тормозит все, и его надо сравнивать с
 системами типа Node.js или Python, причем я не уверен, в чью пользу 
будет бенчмаркинг. Принимая во внимание огромность рантайма — об 
использовании в устройствах вообще можно забыть. Получается, что 
алгоритм подсчета ссылок гораздо медленнее сборщика мусора? Тогда что, 
все учим Go и MicroPython?<br>
<br>
Rust — красавчик, хотя задача была слишком простой, и погружаться в ад 
заимствований и лайфтаймов не было необходимости. Конечно, было бы 
неплохо протестировать растовые Rc&lt;&gt; на предмет торможения, а еще 
хочется прогнать данный тест на Node, Go и Java, но жаль свободного 
времени (хотя, по моим прикидкам, Javascript будет медленнее всего в 2.5
 раза).<br>
<br>
P.S.<br>
Буду благодарен растаманам и свифтерам за комментарии — что не так с моим кодом.<br>
<br>
<h4>Исходные тексты</h4><br>
<b>Swift:</b><br>
<div class="spoiler"><b class="spoiler_title">main.swift</b><div class="spoiler_text"><pre><code class="swift hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> Foundation

<span class="hljs-keyword"><span class="hljs-keyword">let</span></span> <span class="hljs-type"><span class="hljs-type">FILE_BUFFER_SIZE</span></span> = <span class="hljs-number"><span class="hljs-number">50000</span></span> 

<span class="hljs-comment"><span class="hljs-comment">//source data</span></span>
<span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">DebtRec</span></span></span><span class="hljs-class"> </span></span>{
    <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> company: <span class="hljs-type"><span class="hljs-type">String</span></span> = <span class="hljs-string"><span class="hljs-string">""</span></span>
    <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> phones: <span class="hljs-type"><span class="hljs-type">Array</span></span>&lt;<span class="hljs-type"><span class="hljs-type">String</span></span>&gt; = []
    <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> debt: <span class="hljs-type"><span class="hljs-type">Double</span></span> = <span class="hljs-number"><span class="hljs-number">0.0</span></span>
}
<span class="hljs-comment"><span class="hljs-comment">//result data</span></span>
<span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Debtor</span></span></span><span class="hljs-class"> </span></span>{
    <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> companies: <span class="hljs-type"><span class="hljs-type">Set</span></span>&lt;<span class="hljs-type"><span class="hljs-type">String</span></span>&gt; = []
    <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> phones: <span class="hljs-type"><span class="hljs-type">Set</span></span>&lt;<span class="hljs-type"><span class="hljs-type">String</span></span>&gt; = []
    <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> debt: <span class="hljs-type"><span class="hljs-type">Double</span></span> = <span class="hljs-number"><span class="hljs-number">0.0</span></span>
}
<span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Debtors</span></span></span><span class="hljs-class"> </span></span>{
    <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> all: <span class="hljs-type"><span class="hljs-type">Array</span></span>&lt;<span class="hljs-type"><span class="hljs-type">Debtor</span></span>&gt; = []
    <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> index_by_phone: <span class="hljs-type"><span class="hljs-type">Dictionary</span></span>&lt;<span class="hljs-type"><span class="hljs-type">String</span></span>, <span class="hljs-type"><span class="hljs-type">Int</span></span>&gt; = [:]
}


<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">main</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span> {
    <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> res = <span class="hljs-type"><span class="hljs-type">Debtors</span></span>()

    <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> fflag = <span class="hljs-number"><span class="hljs-number">0</span></span>
    <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> arg <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> <span class="hljs-type"><span class="hljs-type">CommandLine</span></span>.arguments {
        <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> arg == <span class="hljs-string"><span class="hljs-string">"-f"</span></span> {
            fflag = <span class="hljs-number"><span class="hljs-number">1</span></span>
        }
        <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> fflag == <span class="hljs-number"><span class="hljs-number">1</span></span> {
            fflag = <span class="hljs-number"><span class="hljs-number">2</span></span>
            <span class="hljs-built_in"><span class="hljs-built_in">print</span></span>(<span class="hljs-string"><span class="hljs-string">"\(arg):"</span></span>)
            <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> tbegin = <span class="hljs-type"><span class="hljs-type">Date</span></span>()

            <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> (<span class="hljs-built_in"><span class="hljs-built_in">count</span></span>, errcount) = process_file(fname: arg, res: &amp;res)

            <span class="hljs-built_in"><span class="hljs-built_in">print</span></span>(<span class="hljs-string"><span class="hljs-string">"PROCESSED: \(count) objects in \(DateInterval(start: tbegin, end: Date()).duration)s, \(errcount) errors found"</span></span>)
        }
    }

    <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (di, d) <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> res.all.enumerated() {
        <span class="hljs-built_in"><span class="hljs-built_in">print</span></span>(<span class="hljs-string"><span class="hljs-string">"-------------------------------"</span></span>)
        <span class="hljs-built_in"><span class="hljs-built_in">print</span></span>(<span class="hljs-string"><span class="hljs-string">"#\(di): debt: \(d.debt)"</span></span>)
        <span class="hljs-built_in"><span class="hljs-built_in">print</span></span>(<span class="hljs-string"><span class="hljs-string">"companies: \(d.companies)\nphones: \(d.phones)"</span></span>)
    }

    <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> fflag &lt; <span class="hljs-number"><span class="hljs-number">2</span></span> {
        <span class="hljs-built_in"><span class="hljs-built_in">print</span></span>(<span class="hljs-string"><span class="hljs-string">"USAGE: fastpivot -f \"file 1\" -f \"file 2\" ..."</span></span>)
    }
}


<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">process_file</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(fname: String, res: </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">inout</span></span></span></span><span class="hljs-function"><span class="hljs-params"> Debtors)</span></span></span></span> -&gt; (<span class="hljs-type"><span class="hljs-type">Int</span></span>, <span class="hljs-type"><span class="hljs-type">Int</span></span>) {
    <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> <span class="hljs-built_in"><span class="hljs-built_in">count</span></span> = <span class="hljs-number"><span class="hljs-number">0</span></span>
    <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> errcount = <span class="hljs-number"><span class="hljs-number">0</span></span>

    <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> f = <span class="hljs-type"><span class="hljs-type">FileHandle</span></span>(forReadingAtPath: fname) {
        <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> obj: <span class="hljs-type"><span class="hljs-type">Array</span></span>&lt;<span class="hljs-type"><span class="hljs-type">UInt8</span></span>&gt; = []
        <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> braces = <span class="hljs-number"><span class="hljs-number">0</span></span>

        <span class="hljs-keyword"><span class="hljs-keyword">while</span></span> <span class="hljs-literal"><span class="hljs-literal">true</span></span> {
            <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> buf = f.readData(ofLength: <span class="hljs-type"><span class="hljs-type">FILE_BUFFER_SIZE</span></span>)
            <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> buf.isEmpty {
                <span class="hljs-keyword"><span class="hljs-keyword">break</span></span> <span class="hljs-comment"><span class="hljs-comment">//EOF</span></span>
            }
            <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> b <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> buf {
                <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> b == <span class="hljs-number"><span class="hljs-number">123</span></span> { <span class="hljs-comment"><span class="hljs-comment">// {</span></span>
                    braces += <span class="hljs-number"><span class="hljs-number">1</span></span>
                    obj.append(b)
                }
                <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> b == <span class="hljs-number"><span class="hljs-number">125</span></span> { <span class="hljs-comment"><span class="hljs-comment">// }</span></span>
                    braces -= <span class="hljs-number"><span class="hljs-number">1</span></span>
                    obj.append(b)

                    <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> braces == <span class="hljs-number"><span class="hljs-number">0</span></span> { <span class="hljs-comment"><span class="hljs-comment">//object formed !</span></span>

                        <span class="hljs-keyword"><span class="hljs-keyword">do</span></span> {
                            <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> o = <span class="hljs-keyword"><span class="hljs-keyword">try</span></span> <span class="hljs-type"><span class="hljs-type">JSONSerialization</span></span>.jsonObject(with: <span class="hljs-type"><span class="hljs-type">Data</span></span>(obj))
                            process_object(o: (o <span class="hljs-keyword"><span class="hljs-keyword">as</span></span>! <span class="hljs-type"><span class="hljs-type">Dictionary</span></span>&lt;<span class="hljs-type"><span class="hljs-type">String</span></span>, <span class="hljs-type"><span class="hljs-type">Any</span></span>&gt;), res: &amp;res)
                        } <span class="hljs-keyword"><span class="hljs-keyword">catch</span></span> {
                            <span class="hljs-built_in"><span class="hljs-built_in">print</span></span>(<span class="hljs-string"><span class="hljs-string">"JSON ERROR: \(obj)"</span></span>)
                            errcount += <span class="hljs-number"><span class="hljs-number">1</span></span>
                        }

                        <span class="hljs-built_in"><span class="hljs-built_in">count</span></span> += <span class="hljs-number"><span class="hljs-number">1</span></span>
                        obj = []
                    }
                }
                <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> braces &gt; <span class="hljs-number"><span class="hljs-number">0</span></span> {
                    obj.append(b)
                }
            }
        }
    } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> {
        <span class="hljs-built_in"><span class="hljs-built_in">print</span></span>(<span class="hljs-string"><span class="hljs-string">"ERROR: Unable to open file"</span></span>)
    }
    <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> (<span class="hljs-built_in"><span class="hljs-built_in">count</span></span>, errcount)
}


<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">process_object</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(o: Dictionary&lt;String, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">Any</span></span></span></span><span class="hljs-function"><span class="hljs-params">&gt;, res: </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">inout</span></span></span></span><span class="hljs-function"><span class="hljs-params"> Debtors)</span></span></span></span> {
    <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> dr = extract_data(o)
    <span class="hljs-comment"><span class="hljs-comment">//print("\(dr.company) - \(dr.phones) - \(dr.debt)")</span></span>

    <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> di: <span class="hljs-type"><span class="hljs-type">Optional</span></span>&lt;<span class="hljs-type"><span class="hljs-type">Int</span></span>&gt; = <span class="hljs-type"><span class="hljs-type">Optional</span></span>.<span class="hljs-keyword"><span class="hljs-keyword">none</span></span> <span class="hljs-comment"><span class="hljs-comment">//debtor index search result</span></span>
    <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> p <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> dr.phones {
        <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> i = res.index_by_phone[p] {
            di = <span class="hljs-type"><span class="hljs-type">Optional</span></span>.some(i)
            <span class="hljs-keyword"><span class="hljs-keyword">break</span></span>
        }
    }
    <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> i = di { <span class="hljs-comment"><span class="hljs-comment">//existing debtor</span></span>
        <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> d = res.all[i]
        d.companies.insert(dr.company)
        <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> p <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> dr.phones {
            d.phones.insert(p)
            res.index_by_phone[p] = i
        }
        d.debt += dr.debt
    }
    <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { <span class="hljs-comment"><span class="hljs-comment">//new debtor</span></span>
        <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> d = <span class="hljs-type"><span class="hljs-type">Debtor</span></span>()
        <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> i = res.all.<span class="hljs-built_in"><span class="hljs-built_in">count</span></span>

        d.companies.insert(dr.company)
        <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> p <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> dr.phones {
            d.phones.insert(p)
            res.index_by_phone[p] = i
        }
        d.debt = dr.debt

        res.all.append(d)
    }
}


<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">extract_data</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-number">_</span></span></span></span><span class="hljs-function"><span class="hljs-params"> o: Dictionary&lt;String, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">Any</span></span></span></span><span class="hljs-function"><span class="hljs-params">&gt;)</span></span></span></span> -&gt; <span class="hljs-type"><span class="hljs-type">DebtRec</span></span> {

    <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">val2str</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-number">_</span></span></span></span><span class="hljs-function"><span class="hljs-params"> v: </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">Any</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span></span> -&gt; <span class="hljs-type"><span class="hljs-type">String</span></span> {
        <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> vs = (v <span class="hljs-keyword"><span class="hljs-keyword">as</span></span>? <span class="hljs-type"><span class="hljs-type">String</span></span>) {
            <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> vs
        }
        <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> vi = (v <span class="hljs-keyword"><span class="hljs-keyword">as</span></span>? <span class="hljs-type"><span class="hljs-type">Int</span></span>) {
            <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-type"><span class="hljs-type">String</span></span>(vi)
        }
        <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> {
            <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-string"><span class="hljs-string">"null"</span></span>
        }
    }

    <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> dr = <span class="hljs-type"><span class="hljs-type">DebtRec</span></span>()

    <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> <span class="hljs-built_in"><span class="hljs-built_in">c</span></span> = o[<span class="hljs-string"><span class="hljs-string">"company"</span></span>]!
    <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> company = (<span class="hljs-built_in"><span class="hljs-built_in">c</span></span> <span class="hljs-keyword"><span class="hljs-keyword">as</span></span>? <span class="hljs-type"><span class="hljs-type">Dictionary</span></span>&lt;<span class="hljs-type"><span class="hljs-type">String</span></span>, <span class="hljs-type"><span class="hljs-type">Any</span></span>&gt;) {
        dr.company = val2str(company[<span class="hljs-string"><span class="hljs-string">"name"</span></span>]!)
    } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> {
        dr.company = val2str(<span class="hljs-built_in"><span class="hljs-built_in">c</span></span>)
    }

    <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> pp = o[<span class="hljs-string"><span class="hljs-string">"phones"</span></span>]
    <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> pp = (pp <span class="hljs-keyword"><span class="hljs-keyword">as</span></span>? <span class="hljs-type"><span class="hljs-type">Array</span></span>&lt;<span class="hljs-type"><span class="hljs-type">Any</span></span>&gt;) {
        <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> p <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> pp {
            dr.phones.append(val2str(p))
        }
    } 
    <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> pp != <span class="hljs-literal"><span class="hljs-literal">nil</span></span> {
        dr.phones.append(val2str(pp!))
    }       

    <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> p = o[<span class="hljs-string"><span class="hljs-string">"phone"</span></span>]
    <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> p != <span class="hljs-literal"><span class="hljs-literal">nil</span></span> {
        dr.phones.append(val2str(p!))
    }        

    <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> d = o[<span class="hljs-string"><span class="hljs-string">"debt"</span></span>] {
        <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> dd = (d <span class="hljs-keyword"><span class="hljs-keyword">as</span></span>? <span class="hljs-type"><span class="hljs-type">Double</span></span>) {
            dr.debt = dd
        }
        <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> ds = (d <span class="hljs-keyword"><span class="hljs-keyword">as</span></span>? <span class="hljs-type"><span class="hljs-type">String</span></span>) {
            dr.debt = <span class="hljs-type"><span class="hljs-type">Double</span></span>(ds)!
        }
    }

    <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> dr
}

main()</code></pre><br>
</div></div><br>
<b>Rust:</b><br>
<div class="spoiler"><b class="spoiler_title">main.rs</b><div class="spoiler_text"><pre><code class="rust hljs"><span class="hljs-comment"><span class="hljs-comment">//[dependencies]</span></span>
<span class="hljs-comment"><span class="hljs-comment">//serde_json = "1.0"</span></span>

<span class="hljs-keyword"><span class="hljs-keyword">use</span></span> std::collections::{HashMap, HashSet};
<span class="hljs-keyword"><span class="hljs-keyword">use</span></span> serde_json::Value;

<span class="hljs-keyword"><span class="hljs-keyword">const</span></span> FILE_BUFFER_SIZE: <span class="hljs-built_in"><span class="hljs-built_in">usize</span></span> = <span class="hljs-number"><span class="hljs-number">50000</span></span>;

<span class="hljs-comment"><span class="hljs-comment">//source data</span></span>
<span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">struct</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">DebtRec</span></span></span></span> {
    company: <span class="hljs-built_in"><span class="hljs-built_in">String</span></span>,
    phones: <span class="hljs-built_in"><span class="hljs-built_in">Vec</span></span>&lt;<span class="hljs-built_in"><span class="hljs-built_in">String</span></span>&gt;,
    debt: <span class="hljs-built_in"><span class="hljs-built_in">f64</span></span>
}
<span class="hljs-comment"><span class="hljs-comment">//result data</span></span>
<span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">struct</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Debtor</span></span></span></span> {
    companies: HashSet&lt;<span class="hljs-built_in"><span class="hljs-built_in">String</span></span>&gt;,
    phones: HashSet&lt;<span class="hljs-built_in"><span class="hljs-built_in">String</span></span>&gt;,
    debt: <span class="hljs-built_in"><span class="hljs-built_in">f64</span></span>
}
<span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">struct</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Debtors</span></span></span></span> {
    all: <span class="hljs-built_in"><span class="hljs-built_in">Vec</span></span>&lt;Debtor&gt;,
    index_by_phone: HashMap&lt;<span class="hljs-built_in"><span class="hljs-built_in">String</span></span>, <span class="hljs-built_in"><span class="hljs-built_in">usize</span></span>&gt;
}


<span class="hljs-keyword"><span class="hljs-keyword">impl</span></span> DebtRec {
    <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fn</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">new</span></span></span></span>() -&gt; DebtRec {
        DebtRec {
            company: <span class="hljs-built_in"><span class="hljs-built_in">String</span></span>::new(),
            phones: <span class="hljs-built_in"><span class="hljs-built_in">Vec</span></span>::new(),
            debt: <span class="hljs-number"><span class="hljs-number">0.0</span></span>
        }
    }
}
<span class="hljs-keyword"><span class="hljs-keyword">impl</span></span> Debtor {
    <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fn</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">new</span></span></span></span>() -&gt; Debtor {
        Debtor {
            companies: HashSet::new(),
            phones: HashSet::new(),
            debt: <span class="hljs-number"><span class="hljs-number">0.0</span></span>
        }
    }
}
<span class="hljs-keyword"><span class="hljs-keyword">impl</span></span> Debtors {
    <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fn</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">new</span></span></span></span>() -&gt; Debtors {
        Debtors {
            all: <span class="hljs-built_in"><span class="hljs-built_in">Vec</span></span>::new(),
            index_by_phone: HashMap::new()
        }
    }
}


<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fn</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">main</span></span></span></span>() {
    <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> <span class="hljs-keyword"><span class="hljs-keyword">mut</span></span> res = Debtors::new();

    <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> <span class="hljs-keyword"><span class="hljs-keyword">mut</span></span> fflag = <span class="hljs-number"><span class="hljs-number">0</span></span>;
    <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> arg <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> std::env::args() {
        <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> arg == <span class="hljs-string"><span class="hljs-string">"-f"</span></span> {
            fflag = <span class="hljs-number"><span class="hljs-number">1</span></span>;
        }
        <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> fflag == <span class="hljs-number"><span class="hljs-number">1</span></span> {
            fflag = <span class="hljs-number"><span class="hljs-number">2</span></span>;
            <span class="hljs-built_in"><span class="hljs-built_in">println!</span></span>(<span class="hljs-string"><span class="hljs-string">"{}:"</span></span>, &amp;arg);
            <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> tbegin = std::time::SystemTime::now();

            <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> (count, errcount) = process_file(&amp;arg, &amp;<span class="hljs-keyword"><span class="hljs-keyword">mut</span></span> res);

            <span class="hljs-built_in"><span class="hljs-built_in">println!</span></span>(<span class="hljs-string"><span class="hljs-string">"PROCESSED: {} objects in {:?}, {} errors found"</span></span>, count, tbegin.elapsed().unwrap(), errcount);
        }
    }

    <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (di, d) <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> res.all.iter().enumerate() {
        <span class="hljs-built_in"><span class="hljs-built_in">println!</span></span>(<span class="hljs-string"><span class="hljs-string">"-------------------------------"</span></span>);
        <span class="hljs-built_in"><span class="hljs-built_in">println!</span></span>(<span class="hljs-string"><span class="hljs-string">"#{}: debt: {}"</span></span>, di, &amp;d.debt);
        <span class="hljs-built_in"><span class="hljs-built_in">println!</span></span>(<span class="hljs-string"><span class="hljs-string">"companies: {:?}\nphones: {:?}"</span></span>, &amp;d.companies, &amp;d.phones);
    }

    <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> fflag &lt; <span class="hljs-number"><span class="hljs-number">2</span></span> {
        <span class="hljs-built_in"><span class="hljs-built_in">println!</span></span>(<span class="hljs-string"><span class="hljs-string">"USAGE: fastpivot -f \"file 1\" -f \"file 2\" ..."</span></span>);
    }
}


<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fn</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">process_file</span></span></span></span>(fname: &amp;<span class="hljs-built_in"><span class="hljs-built_in">str</span></span>, res: &amp;<span class="hljs-keyword"><span class="hljs-keyword">mut</span></span> Debtors) -&gt; (<span class="hljs-built_in"><span class="hljs-built_in">i32</span></span>, <span class="hljs-built_in"><span class="hljs-built_in">i32</span></span>) { 
    <span class="hljs-keyword"><span class="hljs-keyword">use</span></span> std::io::prelude::*;

    <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> <span class="hljs-keyword"><span class="hljs-keyword">mut</span></span> count = <span class="hljs-number"><span class="hljs-number">0</span></span>;
    <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> <span class="hljs-keyword"><span class="hljs-keyword">mut</span></span> errcount = <span class="hljs-number"><span class="hljs-number">0</span></span>;

    <span class="hljs-keyword"><span class="hljs-keyword">match</span></span> std::fs::File::open(fname) {
        <span class="hljs-literal"><span class="hljs-literal">Ok</span></span>(file) =&gt; {
            <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> <span class="hljs-keyword"><span class="hljs-keyword">mut</span></span> freader = std::io::BufReader::with_capacity(FILE_BUFFER_SIZE, file);
            <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> <span class="hljs-keyword"><span class="hljs-keyword">mut</span></span> obj = <span class="hljs-built_in"><span class="hljs-built_in">Vec</span></span>::new();
            <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> <span class="hljs-keyword"><span class="hljs-keyword">mut</span></span> braces = <span class="hljs-number"><span class="hljs-number">0</span></span>;

            <span class="hljs-keyword"><span class="hljs-keyword">loop</span></span> {
                <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> buf = freader.fill_buf().unwrap();
                <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> blen = buf.len();
                <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> blen == <span class="hljs-number"><span class="hljs-number">0</span></span> {
                    <span class="hljs-keyword"><span class="hljs-keyword">break</span></span>; <span class="hljs-comment"><span class="hljs-comment">//EOF</span></span>
                }
                <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> b <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> buf {
                    <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> *b == <span class="hljs-string"><span class="hljs-string">b'{'</span></span> {
                        braces += <span class="hljs-number"><span class="hljs-number">1</span></span>;
                        obj.push(*b);
                    }
                    <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> *b == <span class="hljs-string"><span class="hljs-string">b'}'</span></span> {
                        braces -= <span class="hljs-number"><span class="hljs-number">1</span></span>;
                        obj.push(*b);

                        <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> braces == <span class="hljs-number"><span class="hljs-number">0</span></span> { <span class="hljs-comment"><span class="hljs-comment">//object formed !</span></span>

                            <span class="hljs-keyword"><span class="hljs-keyword">match</span></span> serde_json::from_slice(&amp;obj) {
                                <span class="hljs-literal"><span class="hljs-literal">Ok</span></span>(o) =&gt; {
                                    process_object(&amp;o, res);
                                }
                                <span class="hljs-literal"><span class="hljs-literal">Err</span></span>(e) =&gt; {
                                    <span class="hljs-built_in"><span class="hljs-built_in">println!</span></span>(<span class="hljs-string"><span class="hljs-string">"JSON ERROR: {}:\n{:?}"</span></span>, e, &amp;obj);
                                    errcount +=<span class="hljs-number"><span class="hljs-number">1</span></span>;
                                }
                            }

                            count += <span class="hljs-number"><span class="hljs-number">1</span></span>;
                            obj = <span class="hljs-built_in"><span class="hljs-built_in">Vec</span></span>::new();
                        }
                    }
                    <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> braces &gt; <span class="hljs-number"><span class="hljs-number">0</span></span> {
                        obj.push(*b);
                    }
                }
                freader.consume(blen);
            }
        }
        <span class="hljs-literal"><span class="hljs-literal">Err</span></span>(e) =&gt; {
            <span class="hljs-built_in"><span class="hljs-built_in">println!</span></span>(<span class="hljs-string"><span class="hljs-string">"ERROR: {}"</span></span>, e);
        }
    }
    <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> (count, errcount);
}


<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fn</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">process_object</span></span></span></span>(o: &amp;Value, res: &amp;<span class="hljs-keyword"><span class="hljs-keyword">mut</span></span> Debtors) {
    <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> dr = extract_data(o);
    <span class="hljs-comment"><span class="hljs-comment">//println!("{} - {:?} - {}", &amp;dr.company, &amp;dr.phones, &amp;dr.debt,);</span></span>

    <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> <span class="hljs-keyword"><span class="hljs-keyword">mut</span></span> di: <span class="hljs-built_in"><span class="hljs-built_in">Option</span></span>&lt;<span class="hljs-built_in"><span class="hljs-built_in">usize</span></span>&gt; = <span class="hljs-built_in"><span class="hljs-built_in">Option</span></span>::<span class="hljs-literal"><span class="hljs-literal">None</span></span>; <span class="hljs-comment"><span class="hljs-comment">//debtor index search result</span></span>
    <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> p <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> &amp;dr.phones {
        <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> <span class="hljs-literal"><span class="hljs-literal">Some</span></span>(i) = res.index_by_phone.get(p) {
            di = <span class="hljs-literal"><span class="hljs-literal">Some</span></span>(*i);
            <span class="hljs-keyword"><span class="hljs-keyword">break</span></span>;
        }
    }
    <span class="hljs-keyword"><span class="hljs-keyword">match</span></span> di {
        <span class="hljs-literal"><span class="hljs-literal">Some</span></span>(i) =&gt; { <span class="hljs-comment"><span class="hljs-comment">//existing debtor</span></span>
            <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> d = &amp;<span class="hljs-keyword"><span class="hljs-keyword">mut</span></span> res.all[i];
            d.companies.insert(dr.company);
            <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> p <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> &amp;dr.phones {
                d.phones.insert(p.to_string());
                res.index_by_phone.insert(p.to_string(), i);
            }
            d.debt += dr.debt;
        }
        <span class="hljs-literal"><span class="hljs-literal">None</span></span> =&gt; { <span class="hljs-comment"><span class="hljs-comment">//new debtor</span></span>
            <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> <span class="hljs-keyword"><span class="hljs-keyword">mut</span></span> d = Debtor::new();
            <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> i = res.all.len();

            d.companies.insert(dr.company);
            <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> p <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> &amp;dr.phones {
                d.phones.insert(p.to_string());
                res.index_by_phone.insert(p.to_string(), i);
            }
            d.debt = dr.debt;

            res.all.push(d);
        }
    }
}


<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fn</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">extract_data</span></span></span></span>(o: &amp;Value) -&gt; DebtRec {
    <span class="hljs-keyword"><span class="hljs-keyword">use</span></span> std::<span class="hljs-built_in"><span class="hljs-built_in">str</span></span>::FromStr;

    <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> <span class="hljs-keyword"><span class="hljs-keyword">mut</span></span> dr = DebtRec::new();

    <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> c = &amp;o[<span class="hljs-string"><span class="hljs-string">"company"</span></span>];
    dr.company =
        <span class="hljs-keyword"><span class="hljs-keyword">match</span></span> c {
            Value::Object(c1) =&gt;
                <span class="hljs-keyword"><span class="hljs-keyword">match</span></span> &amp;c1[<span class="hljs-string"><span class="hljs-string">"name"</span></span>] {
                    Value::<span class="hljs-built_in"><span class="hljs-built_in">String</span></span>(c2) =&gt; c2.to_string(),
                    _ =&gt; val2str(c)
                },
            _ =&gt; val2str(c)
        };

    <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> pp =  &amp;o[<span class="hljs-string"><span class="hljs-string">"phones"</span></span>];
    <span class="hljs-keyword"><span class="hljs-keyword">match</span></span> pp {
        Value::Null =&gt; {}
        Value::Array(pp) =&gt; {
            <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> p <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> pp {
                dr.phones.push(val2str(&amp;p));
            }
        }
        _ =&gt; {dr.phones.push(val2str(&amp;pp))}
    }

    <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> p = &amp;o[<span class="hljs-string"><span class="hljs-string">"phone"</span></span>];
    <span class="hljs-keyword"><span class="hljs-keyword">match</span></span> p {
        Value::Null =&gt; {}
        _ =&gt; {dr.phones.push(val2str(&amp;p))}
    }

    dr.debt =
        <span class="hljs-keyword"><span class="hljs-keyword">match</span></span> &amp;o[<span class="hljs-string"><span class="hljs-string">"debt"</span></span>] {
            Value::Number(d) =&gt; d.as_f64().unwrap_or(<span class="hljs-number"><span class="hljs-number">0.0</span></span>),
            Value::<span class="hljs-built_in"><span class="hljs-built_in">String</span></span>(d) =&gt; <span class="hljs-built_in"><span class="hljs-built_in">f64</span></span>::from_str(&amp;d).unwrap_or(<span class="hljs-number"><span class="hljs-number">0.0</span></span>),
            _ =&gt; <span class="hljs-number"><span class="hljs-number">0.0</span></span>
        };

    <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> dr;

    <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fn</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">val2str</span></span></span></span>(v: &amp;Value) -&gt; <span class="hljs-built_in"><span class="hljs-built_in">String</span></span> {
        <span class="hljs-keyword"><span class="hljs-keyword">match</span></span> v {
            Value::<span class="hljs-built_in"><span class="hljs-built_in">String</span></span>(vs) =&gt; vs.to_string(), <span class="hljs-comment"><span class="hljs-comment">//to avoid additional quotes</span></span>
            _ =&gt; v.to_string()
        }
    }
}</code></pre><br>
</div></div><br>
<a href="https://pocketolap.com/rust/1.json">Тестовый файл.</a></div>
      
    </div>

    

    <dl class="post__tags">
      <dt class="post__tags-label">Теги:</dt>
      <dd class="post__tags-list">    <ul class="inline-list inline-list_fav-tags js-post-tags">
        <li class="inline-list__item inline-list__item_tag"><a href="https://habr.com/ru/search/?q=%5Bswift%5D&amp;target_type=posts" rel="tag" class="inline-list__item-link post__tag  ">swift</a></li>
        <li class="inline-list__item inline-list__item_tag"><a href="https://habr.com/ru/search/?q=%5Brust%5D&amp;target_type=posts" rel="tag" class="inline-list__item-link post__tag  ">rust</a></li>
        <li class="inline-list__item inline-list__item_tag"><a href="https://habr.com/ru/search/?q=%5B%D0%BF%D1%80%D0%BE%D0%B8%D0%B7%D0%B2%D0%BE%D0%B4%D0%B8%D1%82%D0%B5%D0%BB%D1%8C%D0%BD%D0%BE%D1%81%D1%82%D1%8C%5D&amp;target_type=posts" rel="tag" class="inline-list__item-link post__tag  ">производительность</a></li>
        <li class="inline-list__item inline-list__item_tag"><a href="https://habr.com/ru/search/?q=%5B%D0%B1%D0%B5%D0%BD%D1%87%D0%BC%D0%B0%D1%80%D0%BA%D0%B8%D0%BD%D0%B3%5D&amp;target_type=posts" rel="tag" class="inline-list__item-link post__tag  ">бенчмаркинг</a></li>
    </ul>
    <button type="button" class="btn btn_outline_grey btn_mini hidden js-fav-edit-link" data-type="2" data-id="450512" onclick="show_edit_tags(this)">Добавить метки</button>
</dd>
    </dl>
  </div>
    <div class="overlay hidden" id="js-vote-reason">
  <div class="popup popup_reasons">
    <div class="popup__head popup__head_lang-settings">
      <span class="popup__head-title">Укажите причину минуса, чтобы автор поработал над ошибками</span>
      <button type="button" class="btn btn_small btn_popup-close js-hide_vote-reason">
        <svg class="icon-svg" width="12" height="12">
          <use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#close"></use>
        </svg>
      </button>
    </div>
    <div class="popup__body">
       <label class="radio radio_custom reasons-vote__item js-vote-popup_list-item">
          <input type="radio" name="reasonList" class="radio__input js-vote_radio" value="">
          <span class="radio__label radio__label_another js-vote_title"></span>
        </label>
      <div id="js-vote-popup_list"></div>
      <button type="button" class="btn btn_blue btn_huge js-vote_send" disabled="disabled">Отправить анонимно</button>
    </div>
  </div>
</div>

      <div class="overlay hidden" id="js-vote-result">
  <div class="popup popup_reasons">
    <div class="popup__head">
      <span class="popup__head-title js-result-popup_title"></span>
      <button type="button" class="btn btn_small btn_popup-close js-hide_result-reason">
        <svg class="icon-svg" width="12" height="12">
          <use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#close"></use>
        </svg>
      </button>
    </div>
    <div class="popup__body">
      <div class="js-reasons-vote_result-empty">Пока никто не указал причину минусов</div>
      <div class="js-reasons-vote_result-content">
        <div class="reasons-vote__title">Причины минусов</div>
        <div id="js-result-popup_list"></div>
      </div>
    </div>
  </div>
</div>


      <script>
        $(document).ready(function () {
          window.votesReasonsStat = JSON.parse('[{"id":"1","percent":0},{"id":"2","percent":0},{"id":"3","percent":0},{"id":"4","percent":0},{"id":"5","percent":0},{"id":"6","percent":0},{"id":"7","percent":0},{"id":"8","percent":0},{"id":"9","percent":0}]');
        });
      </script>
</article>


      <form action="/json/favorites/" method="post" class="form form_bordered form_favorites-tags hidden" id="edit_tags_form">
  <input type="hidden" name="action" value="add">
  <input type="hidden" name="ti" value="0">
  <input type="hidden" name="tt" value="0">

  <button type="button" class="btn form__close-btn" onclick="closeForm(this)" title="Закрыть"><svg class="icon-svg icon-svg_navbar-close-search" width="31" height="32" viewBox="0 0 31 32" aria-hidden="true" version="1.1" role="img"><path d="M26.67 0L15.217 11.448 3.77 0 0 3.77l11.447 11.45L0 26.666l3.77 3.77L15.218 18.99l11.45 11.448 3.772-3.77-11.448-11.45L30.44 3.772z"></path></svg>
</button>

  <fieldset class="form__fieldset">
    <legend class="form__legend">Пометьте публикацию своими метками</legend>
    <input type="text" name="tags_string" class="form__text-field" autocomplete="off">
    <span class="form__desc">Метки лучше разделять запятой. Например: <i>программирование, алгоритмы</i></span>
  </fieldset>

  <div class="form__footer">
    <button type="submit" class="btn btn_x-large btn_outline_blue" disabled="disabled">Сохранить</button>
  </div>
</form>

    </div>

    <div class="sidebar">
      <div class="sidebar_right_ad">
        
      </div>
      <div class="sidebar_right sidebar_content-area sticky_init">
            <div id="neuro-habr">
    <div class="default-block">
    <div class="default-block__header">
      <h3 class="default-block__header-title">Рекомендуем</h3>
    </div>

      <div class="default-block__content default-block__content_most-read" id="broadcast_most-read">
        <ul class="content-list content-list_most-read">
          <li class="content-list__item content-list__item_devided post-info">
            <a href="https://habr.com/ru/company/lamptest/blog/490292/?cv[t]=sidebar&amp;cv[v]=4" class="post-info__title" onclick="if (typeof ga === 'function') { ga('send', 'event', 'tm_block', 'neuro_habr', 'sidebar', '1'); }">Большое красно-синее надувательство</a>
            <div class="post-info__meta">
              <span class="post-info__meta-item" title="Количество просмотров">
                <svg class="post-info__meta-icon icon-svg_views" width="16" height="9"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#eye"></use></svg><span class="post-info__meta-counter post-info__meta-counter_small">44,3k</span>
              </span>
              <a href="https://habr.com/ru/company/lamptest/blog/490292/?cv[t]=sidebar&amp;cv[v]=4#comments" class="post-info__meta-item" rel="nofollow" title="Комментарии">
                <svg class="post-info__meta-icon icon-svg_comments" width="14" height="13"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#comment"></use></svg><span class="post-info__meta-counter post-info__meta-counter_small">54</span>
              </a>
            </div>
          </li>
          <li class="content-list__item content-list__item_devided post-info">
            <a href="https://habr.com/ru/post/490294/?cv[t]=sidebar&amp;cv[v]=4" class="post-info__title" onclick="if (typeof ga === 'function') { ga('send', 'event', 'tm_block', 'neuro_habr', 'sidebar', '2'); }">Собеседование в луже крови</a>
            <div class="post-info__meta">
              <span class="post-info__meta-item" title="Количество просмотров">
                <svg class="post-info__meta-icon icon-svg_views" width="16" height="9"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#eye"></use></svg><span class="post-info__meta-counter post-info__meta-counter_small">56,2k</span>
              </span>
              <a href="https://habr.com/ru/post/490294/?cv[t]=sidebar&amp;cv[v]=4#comments" class="post-info__meta-item" rel="nofollow" title="Комментарии">
                <svg class="post-info__meta-icon icon-svg_comments" width="14" height="13"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#comment"></use></svg><span class="post-info__meta-counter post-info__meta-counter_small">167</span>
              </a>
            </div>
          </li>
          <li class="content-list__item content-list__item_devided post-info">
            <a href="https://habr.com/ru/post/489710/?cv[t]=sidebar&amp;cv[v]=4" class="post-info__title" onclick="if (typeof ga === 'function') { ga('send', 'event', 'tm_block', 'neuro_habr', 'sidebar', '3'); }">Как восстановить светодиодную лампу за 2 минуты при минимальных навыках работы с паяльником и знаниях об электронике</a>
            <div class="post-info__meta">
              <span class="post-info__meta-item" title="Количество просмотров">
                <svg class="post-info__meta-icon icon-svg_views" width="16" height="9"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#eye"></use></svg><span class="post-info__meta-counter post-info__meta-counter_small">80,5k</span>
              </span>
              <a href="https://habr.com/ru/post/489710/?cv[t]=sidebar&amp;cv[v]=4#comments" class="post-info__meta-item" rel="nofollow" title="Комментарии">
                <svg class="post-info__meta-icon icon-svg_comments" width="14" height="13"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#comment"></use></svg><span class="post-info__meta-counter post-info__meta-counter_small">279</span>
              </a>
            </div>
          </li>
          <li class="content-list__item content-list__item_devided post-info">
            <a href="https://habr.com/ru/news/t/490048/?cv[t]=sidebar&amp;cv[v]=4" class="post-info__title" onclick="if (typeof ga === 'function') { ga('send', 'event', 'tm_block', 'neuro_habr', 'sidebar', '4'); }">Microsoft постепенно убирает возможность создавать локальные аккаунты Windows 10</a>
            <div class="post-info__meta">
              <span class="post-info__meta-item" title="Количество просмотров">
                <svg class="post-info__meta-icon icon-svg_views" width="16" height="9"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#eye"></use></svg><span class="post-info__meta-counter post-info__meta-counter_small">47,1k</span>
              </span>
              <a href="https://habr.com/ru/news/t/490048/?cv[t]=sidebar&amp;cv[v]=4#comments" class="post-info__meta-item" rel="nofollow" title="Комментарии">
                <svg class="post-info__meta-icon icon-svg_comments" width="14" height="13"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#comment"></use></svg><span class="post-info__meta-counter post-info__meta-counter_small">313</span>
              </a>
            </div>
          </li>
          <li class="content-list__item content-list__item_devided post-info">
            <a href="https://habr.com/ru/company/ua-hosting/blog/488816/?cv[t]=sidebar&amp;cv[v]=4" class="post-info__title" onclick="if (typeof ga === 'function') { ga('send', 'event', 'tm_block', 'neuro_habr', 'sidebar', '5'); }">Как мы потеряли «Мир»: пожар на космической станции, столкновение с грузовиком «Прогресс», разгерметизация</a>
            <div class="post-info__meta">
              <span class="post-info__meta-item" title="Количество просмотров">
                <svg class="post-info__meta-icon icon-svg_views" width="16" height="9"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#eye"></use></svg><span class="post-info__meta-counter post-info__meta-counter_small">61k</span>
              </span>
              <a href="https://habr.com/ru/company/ua-hosting/blog/488816/?cv[t]=sidebar&amp;cv[v]=4#comments" class="post-info__meta-item" rel="nofollow" title="Комментарии">
                <svg class="post-info__meta-icon icon-svg_comments" width="14" height="13"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#comment"></use></svg><span class="post-info__meta-counter post-info__meta-counter_small">482</span>
              </a>
            </div>
          </li>
          <li class="content-list__item content-list__item_devided post-info">
            <a href="https://habr.com/ru/post/490080/?cv[t]=sidebar&amp;cv[v]=4" class="post-info__title" onclick="if (typeof ga === 'function') { ga('send', 'event', 'tm_block', 'neuro_habr', 'sidebar', '6'); }">Как конкуренты могут легко заблокировать ваш сайт</a>
            <div class="post-info__meta">
              <span class="post-info__meta-item" title="Количество просмотров">
                <svg class="post-info__meta-icon icon-svg_views" width="16" height="9"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#eye"></use></svg><span class="post-info__meta-counter post-info__meta-counter_small">39,6k</span>
              </span>
              <a href="https://habr.com/ru/post/490080/?cv[t]=sidebar&amp;cv[v]=4#comments" class="post-info__meta-item" rel="nofollow" title="Комментарии">
                <svg class="post-info__meta-icon icon-svg_comments" width="14" height="13"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#comment"></use></svg><span class="post-info__meta-counter post-info__meta-counter_small">169</span>
              </a>
            </div>
          </li>
          <li class="content-list__item content-list__item_devided post-info">
            <a href="https://u.tmtm.ru/r-mv-t-210220" class="post-info__title" onclick="if (typeof ga === 'function') { ga('send', 'event', 'tm_block', 'neuro_habr', 'prmlink'); }">Влейся в команду Хабра: тест на находчивость и интуицию</a>
              <div class="post-info__meta-label">
                Мегатест
              </div>
          </li>
      </ul>
    </div>
  </div>

</div>
  <script>
    var rndmvlue = Math.random().toString(36).substring(2);
    var neuroHabrUrl = '/ru/json/mrnh/?v='+rndmvlue;
    $.ajax({
      url: neuroHabrUrl,
      success: function (data) {
        if (data.messages === 'ok' && data.html && data.html.length) {
          $('#neuro-habr').append(data.html);
        }
      },
      error: function(err) {},
      dataType: 'json',
      type: 'GET',
    });
  </script>

      </div>
    </div>
  </section>

  <section class="column-wrapper column-wrapper_post-additionals">
    <div class="content_left">
      <div class="post-additionals">
          <ul class="post-stats post-stats_post js-user_" data-post-type="publish_ugc_ru,h_359,h_18961,h_19039,f_develop" id="infopanel_post_450512">
          <li class="post-stats__item post-stats__item_voting-wjt">
            <div class="voting-wjt voting-wjt_post js-post-vote" data-id="450512" data-type="2">
              <button type="button" class="btn voting-wjt__button " data-action="plus" onclick="posts_vote_plus(this);" title="У вас недостаточно заряда для голосования" disabled="disabled"><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>

              <span class="voting-wjt__counter voting-wjt_pointer  voting-wjt__counter_positive  js-score" onclick="posts_vote_result(28, 24, 4)" title="Всего голосов 28: ↑24 и ↓4">+20</span>

              <button type="button" class="btn voting-wjt__button " data-action="minus" onclick="posts_vote_minus(this);" title="У вас недостаточно заряда для голосования" disabled="disabled"><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>
            </div>
          </li>
    <li class="post-stats__item post-stats__item_bookmark">
      <button type="button" class="btn bookmark-btn bookmark-btn_post " data-post-type="publish_ugc_ru,h_359,h_18961,h_19039,f_develop" data-type="2" data-id="450512" data-action="add" title="Добавить в закладки" onclick="posts_add_to_favorite(this);">
        <span class="btn_inner"><svg class="icon-svg_bookmark" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#book"></use></svg><span class="bookmark__counter js-favs_count" title="Количество пользователей, добавивших публикацию в закладки">36</span></span>
      </button>
    </li>

    <li class="post-stats__item post-stats__item_views">
      <div class="post-stats__views" title="Количество просмотров">
        <svg class="icon-svg_views-count" width="21" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#eye"></use></svg><span class="post-stats__views-count">11,7k</span>
      </div>
    </li>

      <li class="post-stats__item post-stats__item_comments">
          <a href="https://habr.com/ru/post/450512/#comments" class="post-stats__comments-link" rel="nofollow">
            <svg class="icon-svg_post-comments" width="16" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#comment"></use></svg><span class="post-stats__comments-count" title="Читать комментарии">439</span>
          </a>
      </li>


      <li class="post-stats__item post-stats__item_share">
        <div class="dropdown dropdown_share">
          <div href="https://habr.com/ru/post/450512/#comments" data-toggle="dropdown" class="post-stats__share" rel="nofollow" tabindex="0">
            <svg class="icon-svg_post-share" width="24" height="24">
              <use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#share">
            </use></svg>
            <span class="post-stats__comments-text" title="Поделиться">
              Поделиться
            </span>
          </div>

          <div class="dropdown-container">
            <div class="post-share">
  <ul class="post-share__buttons">
    <li class="post-share__item post-share__item_post">
      <span class="post-share__item-link post-share__item-link_normal post-share__item-link_copy" title="Скопировать ссылку" onclick="copyCurrentUrl(), $('.dropdown_share').removeClass('dropdown_active')">
        Скопировать ссылку
      </span>
    </li>
    <li class="post-share__item post-share__item_post">
      <a href="https://www.facebook.com/sharer/sharer.php?u=https://habr.com/ru/post/450512/" class="post-share__item-link post-share__item-link_normal post-share__item-link_facebook" title="Facebook" onclick="window.open(this.href, 'Facebook', 'width=640,height=436,toolbar=0,status=0'); return false">
        Facebook
      </a>
    </li>
    <li class="post-share__item post-share__item_post">
      <a href="https://twitter.com/intent/tweet?text=Swift+%D0%BF%D1%80%D0%BE%D1%82%D0%B8%D0%B2+Rust+%E2%80%94+%D0%B1%D0%B5%D0%BD%D1%87%D0%BC%D0%B0%D1%80%D0%BA%D0%B8%D0%BD%D0%B3+%D0%BD%D0%B0+Linux+%D1%81+%28%D0%BD%D0%B5%29%D0%BF%D0%BE%D0%BD%D1%8F%D1%82%D0%BD%D1%8B%D0%BC+%D1%84%D0%B8%D0%BD%D0%B0%D0%BB%D0%BE%D0%BC+https://habr.com/p/450512/+via+%40habr_com" class="post-share__item-link post-share__item-link_normal post-share__item-link_twitter" title="Twitter" onclick="window.open(this.href, 'Twitter', 'width=800,height=300,resizable=yes,toolbar=0,status=0'); return false">
        Twitter
      </a>
    </li>
    <li class="post-share__item post-share__item_post">
      <a href="https://vk.com/share.php?url=https://habr.com/ru/post/450512/" class="post-share__item-link post-share__item-link_normal post-share__item-link_vkontakte" title="ВКонтакте" onclick="window.open(this.href, 'ВКонтакте', 'width=800,height=300,toolbar=0,status=0'); return false">
        ВКонтакте
      </a>
    </li>
    <li class="post-share__item post-share__item_post">
      <a href="https://t.me/share/url?url=https://habr.com/ru/post/450512/&amp;title=Swift%20%D0%BF%D1%80%D0%BE%D1%82%D0%B8%D0%B2%20Rust%20%E2%80%94%20%D0%B1%D0%B5%D0%BD%D1%87%D0%BC%D0%B0%D1%80%D0%BA%D0%B8%D0%BD%D0%B3%20%D0%BD%D0%B0%20Linux%20%D1%81%20(%D0%BD%D0%B5)%D0%BF%D0%BE%D0%BD%D1%8F%D1%82%D0%BD%D1%8B%D0%BC%20%D1%84%D0%B8%D0%BD%D0%B0%D0%BB%D0%BE%D0%BC" class="post-share__item-link post-share__item-link_normal post-share__item-link_telegram" title="Telegram" onclick="window.open(this.href, 'Telegram', 'width=800,height=300,toolbar=0,status=0'); return false">
        Telegram
      </a>
    </li>
    <li class="post-share__item post-share__item_post">
      <a href="https://getpocket.com/edit?url=https://habr.com/ru/post/450512/&amp;title=Swift%20%D0%BF%D1%80%D0%BE%D1%82%D0%B8%D0%B2%20Rust%20%E2%80%94%20%D0%B1%D0%B5%D0%BD%D1%87%D0%BC%D0%B0%D1%80%D0%BA%D0%B8%D0%BD%D0%B3%20%D0%BD%D0%B0%20Linux%20%D1%81%20(%D0%BD%D0%B5)%D0%BF%D0%BE%D0%BD%D1%8F%D1%82%D0%BD%D1%8B%D0%BC%20%D1%84%D0%B8%D0%BD%D0%B0%D0%BB%D0%BE%D0%BC" class="post-share__item-link post-share__item-link_normal post-share__item-link_pocket" title="Pocket" target="_blank" rel=" noopener">
        Pocket
      </a>
    </li>
  </ul>
</div>

          </div>
        </div>
      </li>

        <li class="post-stats__item post-stats__item_edit">
          <a href="https://habr.com/topic/edit/450512/" class="btn btn_post-stats post-stats__edit"><span class="icon-svg_edit"><svg class="icon-svg" width="32" height="32" viewBox="0 0 32 32" aria-hidden="true" aria-labelledby="title" version="1.1" role="img"><path d="M4 0h24c2.209 0 4 1.791 4 4v24c0 2.209-1.791 4-4 4h-24c-2.209 0-4-1.791-4-4v-24c0-2.209 1.791-4 4-4zm20.327 7.587c-1.85-1.85-3.238-1.573-3.238-1.573l-13.879 13.879-1.295 6.106 6.106-1.295 13.879-13.878s.278-1.389-1.573-3.239zm-12.669 16.384l-2.081.448c-.201-.376-.443-.752-.886-1.195s-.819-.684-1.194-.886l.449-2.081.602-.602s1.133.023 2.411 1.302l1.302 2.412-.602.602z"></path></svg>
</span></a>
        </li>


  </ul>

          
          <form action="/json/complaints/add/" class="form form_bordered form_abuse hidden" method="post" id="abuse_form">
  <input type="hidden" name="tt" value="2">
  <input type="hidden" name="ti" value="450512">

  <button type="button" class="btn form__close-btn" onclick="closeForm(this)"><svg class="icon-svg icon-svg_navbar-close-search" width="31" height="32" viewBox="0 0 31 32" aria-hidden="true" version="1.1" role="img"><path d="M26.67 0L15.217 11.448 3.77 0 0 3.77l11.447 11.45L0 26.666l3.77 3.77L15.218 18.99l11.45 11.448 3.772-3.77-11.448-11.45L30.44 3.772z"></path></svg>
</button>

  <fieldset class="form__fieldset">
    <legend class="form__legend">Нарушение</legend>
    <input type="text" name="text" class="form__text-field">
    <span class="form__desc">Опишите суть нарушения</span>
  </fieldset>

  <div class="form__footer">
    <button type="submit" class="btn btn_x-large btn_outline_blue" disabled="disabled">Отправить</button>
  </div>
</form>


          <div class="author-panel author-panel_user">
            <div class="author-panel__user-info">
              <div class="user-info">
  <a href="https://habr.com/ru/users/epishman/" class="media-obj__image" onclick="if (typeof ga === 'function') { ga('send', 'event', 'author_info_top', 'profile', 'epishman');}">
      <img src="Swift%20%D0%BF%D1%80%D0%BE%D1%82%D0%B8%D0%B2%20Rust%20%E2%80%94%20%D0%B1%D0%B5%D0%BD%D1%87%D0%BC%D0%B0%D1%80%D0%BA%D0%B8%D0%BD%D0%B3%20%D0%BD%D0%B0%20Linux%20%D1%81%20(%D0%BD%D0%B5)%D0%BF%D0%BE%D0%BD%D1%8F%D1%82%D0%BD%D1%8B%D0%BC%20%D1%84%D0%B8%D0%BD%D0%B0%D0%BB%D0%BE%D0%BC%20_%20%D0%A5%D0%B0%D0%B1%D1%80_files/ec0d88c4853c0d36d44bd0526dcfa8d7_002.png" class="media-obj__image-pic media-obj__image-pic_user" width="48" height="48">
  </a>

  <div class="user-info__about">
    <div class="user-info__links">
        <a href="https://habr.com/users/epishman/" class="user-info__nickname user-info__nickname_doggy" onclick="if (typeof ga === 'function') { ga('send', 'event', 'author_info_top', 'profile', 'epishman');}">epishman</a>
        
    </div>

      <div class="user-info__specialization">Пользователь</div>
  </div>
</div>

  <div class="user-info__buttons">

      <a href="https://habr.com/ru/auth/settings/profile/" class="btn btn_blue btn_x-large">
        Настроить профиль
      </a>
  </div>

<div class="overlay hidden" id="js-donate">
  <div class="popup">
    <div class="popup__head popup__head_lang-settings">
      <span class="popup__head-title js-popup_title" data-section="1">Платежная система</span>
      <button type="button" class="btn btn_small btn_popup-close js-hide-donate">
        <svg class="icon-svg" width="12" height="12">
          <use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#close"></use>
        </svg>
      </button>
    </div>
    <div class="popup__body js-donate-popup_body">
    </div>
  </div>
</div>

            </div>
            
          </div>
      </div>
        

    <div class="default-block default-block_content">
      <div class="default-block__header default-block__header_large">
        <h2 class="default-block__header-title default-block__header-title_large">Похожие публикации</h2>
      </div>
      <div class="default-block__content">

        <ul class="content-list">
            <li class="content-list__item content-list__item_devided post-info">
              <span class="post-info__date">18 декабря 2015 в 18:45</span>
                <h3 class="post-info__title post-info__title_large">
                  <a href="https://habr.com/ru/post/272681/" class="post-info__title post-info__title_large" onclick="if (typeof ga === 'function') { ga('send', 'event', 'tm_block', 'similar_posts', 'common', '1'); }">
                    Сравниваем Swift и Rust
                  </a>
                </h3>

              <div class="post-info__meta">
                <span class="post-info__meta-item" title="Рейтинг">
                  <svg class="post-info__meta-icon icon-svg_rating" width="11" height="13"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#arrow-bold"></use></svg>
                      <span class="post-info__meta-counter">+49</span>
                </span>
                <span class="post-info__meta-item" title="Количество просмотров">
                  <svg class="post-info__meta-icon icon-svg_views" width="16" height="9"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#eye"></use></svg><span class="post-info__meta-counter">28,3k</span>
                </span>
                <span class="post-info__meta-item" title="Закладки">
                  <svg class="post-info__meta-icon icon-svg_bookmark-mini" width="8" height="13"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#book"></use></svg><span class="post-info__meta-counter">101</span>
                </span>
                <a href="https://habr.com/ru/post/272681#comments" class="post-info__meta-item" rel="nofollow" title="Комментарии">
                  <svg class="post-info__meta-icon icon-svg_comments" width="14" height="13"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#comment"></use></svg><span class="post-info__meta-counter">18</span>
                </a>
              </div>
            </li>
            <li class="content-list__item content-list__item_devided post-info">
              <span class="post-info__date">26 июня 2015 в 12:50</span>
                <h3 class="post-info__title post-info__title_large">
                  <a href="https://habr.com/ru/post/261201/" class="post-info__title post-info__title_large" onclick="if (typeof ga === 'function') { ga('send', 'event', 'tm_block', 'similar_posts', 'common', '2'); }">
                    Сравнение производительности языков на примере простейшего классификатора
                  </a>
                </h3>

              <div class="post-info__meta">
                <span class="post-info__meta-item" title="Рейтинг">
                  <svg class="post-info__meta-icon icon-svg_rating" width="11" height="13"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#arrow-bold"></use></svg>
                      <span class="post-info__meta-counter">+17</span>
                </span>
                <span class="post-info__meta-item" title="Количество просмотров">
                  <svg class="post-info__meta-icon icon-svg_views" width="16" height="9"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#eye"></use></svg><span class="post-info__meta-counter">31,8k</span>
                </span>
                <span class="post-info__meta-item" title="Закладки">
                  <svg class="post-info__meta-icon icon-svg_bookmark-mini" width="8" height="13"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#book"></use></svg><span class="post-info__meta-counter">61</span>
                </span>
                <a href="https://habr.com/ru/post/261201#comments" class="post-info__meta-item" rel="nofollow" title="Комментарии">
                  <svg class="post-info__meta-icon icon-svg_comments" width="14" height="13"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#comment"></use></svg><span class="post-info__meta-counter">34</span>
                </a>
              </div>
            </li>
            <li class="content-list__item content-list__item_devided post-info">
              <span class="post-info__date">30 мая 2014 в 11:15</span>
                <h3 class="post-info__title post-info__title_large">
                  <a href="https://habr.com/ru/post/223875/" class="post-info__title post-info__title_large" onclick="if (typeof ga === 'function') { ga('send', 'event', 'tm_block', 'similar_posts', 'common', '3'); }">
                    Слишком быстрый, слишком мегаморфный: что влияет на производительность вызова метода в Java?
                  </a>
                </h3>

              <div class="post-info__meta">
                <span class="post-info__meta-item" title="Рейтинг">
                  <svg class="post-info__meta-icon icon-svg_rating" width="11" height="13"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#arrow-bold"></use></svg>
                      <span class="post-info__meta-counter">+42</span>
                </span>
                <span class="post-info__meta-item" title="Количество просмотров">
                  <svg class="post-info__meta-icon icon-svg_views" width="16" height="9"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#eye"></use></svg><span class="post-info__meta-counter">20,2k</span>
                </span>
                <span class="post-info__meta-item" title="Закладки">
                  <svg class="post-info__meta-icon icon-svg_bookmark-mini" width="8" height="13"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#book"></use></svg><span class="post-info__meta-counter">176</span>
                </span>
                <a href="https://habr.com/ru/post/223875#comments" class="post-info__meta-item" rel="nofollow" title="Комментарии">
                  <svg class="post-info__meta-icon icon-svg_comments" width="14" height="13"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#comment"></use></svg><span class="post-info__meta-counter">5</span>
                </a>
              </div>
            </li>
        </ul>

      </div>
    </div>

      <div class="default-block_content">
          

  <div class="promo-block promo-block_vacancies">
    <h2 class="promo-block__header">
      
      <a onclick="if (typeof ga === 'function') { if (g_is_ugc_post) { var action = 'career_post' } else {  var action = 'career_feed' } ga('send', 'event', 'tm_block', action, 'blockname'); }" href="https://career.habr.com/vacancies" target="_blank" data-utm="?utm_source=habr&amp;utm_medium=habr_block&amp;utm_content=block_name&amp;utm_campaign=vacancies_post" class="promo-block__title-link" rel="nofollow noopener">
        Вакансии
      </a>
    </h2>

      <div class="promo-block__content">
        <ul class="content-list content-list_promo">
            <li class="content-list__item content-list__item_promo">
              <a onclick="if (typeof ga === 'function') { if (g_is_ugc_post) { var action = 'career_post' } else {  var action = 'career_feed' } ga('send', 'event', 'tm_block', action, 'post'); }" href="https://career.habr.com/vacancies/1000056293" class="promo-item" data-utm="?utm_source=tm_habrahabr&amp;utm_medium=tm_block&amp;utm_content=vacancy&amp;utm_campaign=vacancies_post">
    <div class="promo-item__wrap">
      <div class="promo-item__title promo-item__title_hovered">IOS Developer (Swift)</div>
      <div class="promo-item__attrs">
          <span class="promo-item__attrs-item promo-item__amount_rur">
              <span title="150000 rur">
                от 150&nbsp;000
              </span>
          </span>
        <span class="promo-item__attrs-item">SFERA</span>
        <span class="promo-item__attrs-item">Краснодар</span>
        <span class="promo-item__attrs-item">Можно удаленно</span>
      </div>
    </div>
  </a>

            </li>
            <li class="content-list__item content-list__item_promo">
              <a onclick="if (typeof ga === 'function') { if (g_is_ugc_post) { var action = 'career_post' } else {  var action = 'career_feed' } ga('send', 'event', 'tm_block', action, 'post'); }" href="https://career.habr.com/vacancies/1000038770" class="promo-item" data-utm="?utm_source=tm_habrahabr&amp;utm_medium=tm_block&amp;utm_content=vacancy&amp;utm_campaign=vacancies_post">
    <div class="promo-item__wrap">
      <div class="promo-item__title promo-item__title_hovered">Senior iOS/macOS Developer (Swift)</div>
      <div class="promo-item__attrs">
          <span class="promo-item__attrs-item promo-item__amount_rur">
              <span title="120000 rur">
                от 120&nbsp;000
              </span>
          </span>
        <span class="promo-item__attrs-item">1312 Inc.</span>
        <span class="promo-item__attrs-item">Сочи</span>
        <span class="promo-item__attrs-item">Можно удаленно</span>
      </div>
    </div>
  </a>

            </li>
            <li class="content-list__item content-list__item_promo">
              <a onclick="if (typeof ga === 'function') { if (g_is_ugc_post) { var action = 'career_post' } else {  var action = 'career_feed' } ga('send', 'event', 'tm_block', action, 'post'); }" href="https://career.habr.com/vacancies/1000057013" class="promo-item" data-utm="?utm_source=tm_habrahabr&amp;utm_medium=tm_block&amp;utm_content=vacancy&amp;utm_campaign=vacancies_post">
    <div class="promo-item__wrap">
      <div class="promo-item__title promo-item__title_hovered">iOS &amp; Mac Developer (Swift) - удаленно</div>
      <div class="promo-item__attrs">
          <span class="promo-item__attrs-item promo-item__amount_rur">
              <span title="150000 rur">
                от 150&nbsp;000
              </span>
          </span>
        <span class="promo-item__attrs-item">1Blocker</span>
        
        <span class="promo-item__attrs-item">Можно удаленно</span>
      </div>
    </div>
  </a>

            </li>
            <li class="content-list__item content-list__item_promo">
              <a onclick="if (typeof ga === 'function') { if (g_is_ugc_post) { var action = 'career_post' } else {  var action = 'career_feed' } ga('send', 'event', 'tm_block', action, 'post'); }" href="https://career.habr.com/vacancies/1000048365" class="promo-item" data-utm="?utm_source=tm_habrahabr&amp;utm_medium=tm_block&amp;utm_content=vacancy&amp;utm_campaign=vacancies_post">
    <div class="promo-item__wrap">
      <div class="promo-item__title promo-item__title_hovered">Senior iOS-разработчик </div>
      <div class="promo-item__attrs">
          <span class="promo-item__attrs-item promo-item__amount_rur">
              <span title="250000 rur">
                от 250&nbsp;000
              </span>
              <span title="300000 rur">
                до 300&nbsp;000
              </span>
          </span>
        <span class="promo-item__attrs-item">8BIT GROUP</span>
        <span class="promo-item__attrs-item">Москва</span>
        
      </div>
    </div>
  </a>

            </li>
            <li class="content-list__item content-list__item_promo">
              <a onclick="if (typeof ga === 'function') { if (g_is_ugc_post) { var action = 'career_post' } else {  var action = 'career_feed' } ga('send', 'event', 'tm_block', action, 'post'); }" href="https://career.habr.com/vacancies/1000050235" class="promo-item" data-utm="?utm_source=tm_habrahabr&amp;utm_medium=tm_block&amp;utm_content=vacancy&amp;utm_campaign=vacancies_post">
    <div class="promo-item__wrap">
      <div class="promo-item__title promo-item__title_hovered">iOS Developer</div>
      <div class="promo-item__attrs">
          <span class="promo-item__attrs-item promo-item__amount_rur">
              <span title="120000 rur">
                от 120&nbsp;000
              </span>
              <span title="210000 rur">
                до 210&nbsp;000
              </span>
          </span>
        <span class="promo-item__attrs-item">Dodo Pizza</span>
        <span class="promo-item__attrs-item">Нижний Новгород</span>
        
      </div>
    </div>
  </a>

            </li>
        </ul>
      </div>

    <div class="promo-block__footer">
      <a onclick="if (typeof ga === 'function') { if (g_is_ugc_post) { var action = 'career_post' } else {  var action = 'career_feed' }  ga('send', 'event', 'tm_block', action, 'posts'); }" href="https://career.habr.com/vacancies/" data-utm="?utm_source=habr&amp;utm_medium=habr_block&amp;utm_content=vacancies_all&amp;utm_campaign=vacancies_post" class="promo-block__footer-link promo-block__footer-link_selected" target="_blank" rel="nofollow noopener">Больше вакансий на Хабр Карьере</a>
    </div>
  </div>


      </div>
      
    </div>
    <div class="sidebar_right">
    </div>
  </section>

<section class="column-wrapper column-wrapper_comments js-comments-wrapper">
  <div class="content_left">
        <div class="comments-section" id="comments">
    <header class="comments-section__head">
      <h2 class="comments-section__head-title">
        Комментарии
        <span class="comments-section__head-counter" id="comments_count">
          439
        </span>
      </h2>
          <div class="comments-section__subscribe-panel defination-list">
      <span class="defination-list__label defination-list__label_subscribe-panel">Отслеживать новые в</span>
      <span class="defination-list__value defination-list__value_subscribe-panel ">
        <span class="checkbox-group">
          <label class="checkbox checkbox_custom checkbox_comments-subscribe">
            <input type="checkbox" id="subscribe_comments" rel="{ target_type: '2', target_id: 450512 }" checked="checked"><span class="checkbox__label">почте</span>
          </label>
          <label class="checkbox checkbox_custom checkbox_comments-subscribe">
            <input type="checkbox" id="tracker_comments" rel="{ target_type: '2', target_id: 450512 }"><span class="checkbox__label">трекере</span>
          </label>
        </span>
      </span>
    </div>

    </header>
    
    

    <ul class="content-list content-list_comments" id="comments-list">
        <li class="content-list__item content-list__item_comment js-comment " rel="20116884">
    
    <span class="parent_id" data-parent_id="0"></span>
    <div class="comment" id="comment_20116884">
      <span class="comment__collapse" title="Свернуть/развернуть ветку комментариев" data-id="20116884"></span>
        <div class="comment__message comment__message_banned">НЛО прилетело и опубликовало эту надпись здесь</div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-0" id="reply_comments_20116884">  <li class="content-list__item content-list__item_comment js-comment " rel="20116968">
    
    <span class="parent_id" data-parent_id="20116884"></span>
    <div class="comment" id="comment_20116968">
      <span class="comment__collapse" title="Свернуть/развернуть ветку комментариев" data-id="20116968"></span>
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head comment__head_topic-author comment__head_my-comment " rel="20116968">
          <a href="https://habr.com/ru/users/epishman/" class="user-info user-info_inline" rel="user-popover" data-user-login="epishman">
    <img src="Swift%20%D0%BF%D1%80%D0%BE%D1%82%D0%B8%D0%B2%20Rust%20%E2%80%94%20%D0%B1%D0%B5%D0%BD%D1%87%D0%BC%D0%B0%D1%80%D0%BA%D0%B8%D0%BD%D0%B3%20%D0%BD%D0%B0%20Linux%20%D1%81%20(%D0%BD%D0%B5)%D0%BF%D0%BE%D0%BD%D1%8F%D1%82%D0%BD%D1%8B%D0%BC%20%D1%84%D0%B8%D0%BD%D0%B0%D0%BB%D0%BE%D0%BC%20_%20%D0%A5%D0%B0%D0%B1%D1%80_files/ec0d88c4853c0d36d44bd0526dcfa8d7.png" class="user-info__image-pic user-info__image-pic_small" width="24" height="24">
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">epishman</span>
</a>

          
          <time class="comment__date-time comment__date-time_published">6 мая 2019 в 11:16</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="#comment_20116968" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="20116968" data-action="add" title="Добавить в закладки"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#book"></use></svg></a>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <span class="icon_comment-branch js-comment_tree" data-id="20116968" data-parent_id="20116884" title="Показать ветку комментариев"><svg width="8" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#tree"></use></svg></span>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#comment_20116884" class="icon_comment-arrow-up js-comment_parent" data-id="20116968" data-parent_id="20116884" title="Показать предыдущий комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
    </li>

  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="#comment_20116968" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="20116968" data-parent_id="20116884" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="20116968" data-post-target="450512" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="plus" onclick="comment_vote(this);" title="За свои комментарии голосовать нельзя" disabled="disabled"><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter   js-score" title="Всего голосов 0: ↑1 и ↓1">0</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="За свои комментарии голосовать нельзя" disabled="disabled"><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message ">Спасибо, поправил!</div>

        <div class="comment__footer">
    <a href="#reply" class="comment__footer-link reply_link" onclick="return comment_show_reply_form(20116968 )">Ответить</a>


</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-1" id="reply_comments_20116968">  <li class="content-list__item content-list__item_comment js-comment " rel="20117164">
    
    <span class="parent_id" data-parent_id="20116968"></span>
    <div class="comment" id="comment_20117164">
      <span class="comment__collapse" title="Свернуть/развернуть ветку комментариев" data-id="20117164"></span>
        <div class="comment__message comment__message_banned">НЛО прилетело и опубликовало эту надпись здесь</div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-2" id="reply_comments_20117164"></ul>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="content-list__item content-list__item_comment js-comment " rel="20116974">
    
    <span class="parent_id" data-parent_id="0"></span>
    <div class="comment" id="comment_20116974">
      <span class="comment__collapse" title="Свернуть/развернуть ветку комментариев" data-id="20116974"></span>
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head   " rel="20116974">
          <a href="https://habr.com/ru/users/modest_man/" class="user-info user-info_inline" rel="user-popover" data-user-login="modest_man">
    <svg class="default-image default-image_mini default-image_pink" width="24" height="24"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#slug"></use></svg>
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">modest_man</span>
</a>

          
          <time class="comment__date-time comment__date-time_published">6 мая 2019 в 11:16</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="#comment_20116974" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="20116974" data-action="add" title="Добавить в закладки"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#book"></use></svg></a>
    </li>


  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="#comment_20116974" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="20116974" data-parent_id="0" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="20116974" data-post-target="450512" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="plus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter voting-wjt__counter_positive  js-score" title="Всего голосов +1: ↑1 и ↓0">+1</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message ">Не могли бы вы выложить файлы с данными для парсинга, чтобы попробовать запустить у себя?</div>

        <div class="comment__footer">
    <a href="#reply" class="comment__footer-link reply_link" onclick="return comment_show_reply_form(20116974 )">Ответить</a>


</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-0" id="reply_comments_20116974">  <li class="content-list__item content-list__item_comment js-comment " rel="20117066">
    
    <span class="parent_id" data-parent_id="20116974"></span>
    <div class="comment" id="comment_20117066">
      <span class="comment__collapse" title="Свернуть/развернуть ветку комментариев" data-id="20117066"></span>
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head comment__head_topic-author comment__head_my-comment " rel="20117066">
          <a href="https://habr.com/ru/users/epishman/" class="user-info user-info_inline" rel="user-popover" data-user-login="epishman">
    <img src="Swift%20%D0%BF%D1%80%D0%BE%D1%82%D0%B8%D0%B2%20Rust%20%E2%80%94%20%D0%B1%D0%B5%D0%BD%D1%87%D0%BC%D0%B0%D1%80%D0%BA%D0%B8%D0%BD%D0%B3%20%D0%BD%D0%B0%20Linux%20%D1%81%20(%D0%BD%D0%B5)%D0%BF%D0%BE%D0%BD%D1%8F%D1%82%D0%BD%D1%8B%D0%BC%20%D1%84%D0%B8%D0%BD%D0%B0%D0%BB%D0%BE%D0%BC%20_%20%D0%A5%D0%B0%D0%B1%D1%80_files/ec0d88c4853c0d36d44bd0526dcfa8d7.png" class="user-info__image-pic user-info__image-pic_small" width="24" height="24">
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">epishman</span>
</a>

          
          <time class="comment__date-time comment__date-time_published">6 мая 2019 в 11:32</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="#comment_20117066" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="20117066" data-action="add" title="Добавить в закладки"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#book"></use></svg></a>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <span class="icon_comment-branch js-comment_tree" data-id="20117066" data-parent_id="20116974" title="Показать ветку комментариев"><svg width="8" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#tree"></use></svg></span>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#comment_20116974" class="icon_comment-arrow-up js-comment_parent" data-id="20117066" data-parent_id="20116974" title="Показать предыдущий комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
    </li>

  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="#comment_20117066" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="20117066" data-parent_id="20116974" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="20117066" data-post-target="450512" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="plus" onclick="comment_vote(this);" title="За свои комментарии голосовать нельзя" disabled="disabled"><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter voting-wjt__counter_positive  js-score" title="Всего голосов +1: ↑1 и ↓0">+1</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="За свои комментарии голосовать нельзя" disabled="disabled"><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message ">Если не лень <a href="https://pocketolap.com/rust/1.json">качать</a>. В принципе это просто размноженный фрагмент, приведенный в статье. В консоль должно вывести 2 записи.</div>

        <div class="comment__footer">
    <a href="#reply" class="comment__footer-link reply_link" onclick="return comment_show_reply_form(20117066 )">Ответить</a>


</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-1" id="reply_comments_20117066">  <li class="content-list__item content-list__item_comment js-comment " rel="20258756">
    
    <span class="parent_id" data-parent_id="20117066"></span>
    <div class="comment" id="comment_20258756">
      <span class="comment__collapse" title="Свернуть/развернуть ветку комментариев" data-id="20258756"></span>
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head   " rel="20258756">
          <a href="https://habr.com/ru/users/technic93/" class="user-info user-info_inline" rel="user-popover" data-user-login="technic93">
    <img src="Swift%20%D0%BF%D1%80%D0%BE%D1%82%D0%B8%D0%B2%20Rust%20%E2%80%94%20%D0%B1%D0%B5%D0%BD%D1%87%D0%BC%D0%B0%D1%80%D0%BA%D0%B8%D0%BD%D0%B3%20%D0%BD%D0%B0%20Linux%20%D1%81%20(%D0%BD%D0%B5)%D0%BF%D0%BE%D0%BD%D1%8F%D1%82%D0%BD%D1%8B%D0%BC%20%D1%84%D0%B8%D0%BD%D0%B0%D0%BB%D0%BE%D0%BC%20_%20%D0%A5%D0%B0%D0%B1%D1%80_files/4e796c6e9f932ba70d1af19b21f2b99a.png" class="user-info__image-pic user-info__image-pic_small" width="24" height="24">
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">technic93</span>
</a>

          
          <time class="comment__date-time comment__date-time_published">7 июня 2019 в 21:05</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="#comment_20258756" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="20258756" data-action="add" title="Добавить в закладки"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#book"></use></svg></a>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <span class="icon_comment-branch js-comment_tree" data-id="20258756" data-parent_id="20117066" title="Показать ветку комментариев"><svg width="8" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#tree"></use></svg></span>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#comment_20117066" class="icon_comment-arrow-up js-comment_parent" data-id="20258756" data-parent_id="20117066" title="Показать предыдущий комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
    </li>

  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="#comment_20258756" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="20258756" data-parent_id="20117066" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="20258756" data-post-target="450512" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="plus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter   js-score" title="Всего голосов 0: ↑0 и ↓0">0</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message "><p>Добавте ссылку в статью. или ссылку на код которым этот файл сгенерирован.</p></div>

        <div class="comment__footer">
    <a href="#reply" class="comment__footer-link reply_link" onclick="return comment_show_reply_form(20258756 )">Ответить</a>


</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-2" id="reply_comments_20258756">  <li class="content-list__item content-list__item_comment js-comment " rel="20259366">
    
    <span class="parent_id" data-parent_id="20258756"></span>
    <div class="comment" id="comment_20259366">
      <span class="comment__collapse" title="Свернуть/развернуть ветку комментариев" data-id="20259366"></span>
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head comment__head_topic-author comment__head_my-comment " rel="20259366">
          <a href="https://habr.com/ru/users/epishman/" class="user-info user-info_inline" rel="user-popover" data-user-login="epishman">
    <img src="Swift%20%D0%BF%D1%80%D0%BE%D1%82%D0%B8%D0%B2%20Rust%20%E2%80%94%20%D0%B1%D0%B5%D0%BD%D1%87%D0%BC%D0%B0%D1%80%D0%BA%D0%B8%D0%BD%D0%B3%20%D0%BD%D0%B0%20Linux%20%D1%81%20(%D0%BD%D0%B5)%D0%BF%D0%BE%D0%BD%D1%8F%D1%82%D0%BD%D1%8B%D0%BC%20%D1%84%D0%B8%D0%BD%D0%B0%D0%BB%D0%BE%D0%BC%20_%20%D0%A5%D0%B0%D0%B1%D1%80_files/ec0d88c4853c0d36d44bd0526dcfa8d7.png" class="user-info__image-pic user-info__image-pic_small" width="24" height="24">
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">epishman</span>
</a>

          
          <time class="comment__date-time comment__date-time_published">8 июня 2019 в 01:25</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="#comment_20259366" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="20259366" data-action="add" title="Добавить в закладки"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#book"></use></svg></a>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <span class="icon_comment-branch js-comment_tree" data-id="20259366" data-parent_id="20258756" title="Показать ветку комментариев"><svg width="8" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#tree"></use></svg></span>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#comment_20258756" class="icon_comment-arrow-up js-comment_parent" data-id="20259366" data-parent_id="20258756" title="Показать предыдущий комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
    </li>

  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="#comment_20259366" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="20259366" data-parent_id="20258756" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="20259366" data-post-target="450512" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="plus" onclick="comment_vote(this);" title="За свои комментарии голосовать нельзя" disabled="disabled"><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter   js-score" title="Всего голосов 0: ↑0 и ↓0">0</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="За свои комментарии голосовать нельзя" disabled="disabled"><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message ">ok</div>

        <div class="comment__footer">
    <a href="#reply" class="comment__footer-link reply_link" onclick="return comment_show_reply_form(20259366 )">Ответить</a>


</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-3" id="reply_comments_20259366"></ul>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="content-list__item content-list__item_comment js-comment " rel="20117050">
    
    <span class="parent_id" data-parent_id="0"></span>
    <div class="comment" id="comment_20117050">
      <span class="comment__collapse" title="Свернуть/развернуть ветку комментариев" data-id="20117050"></span>
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head   " rel="20117050">
          <a href="https://habr.com/ru/users/veslemay/" class="user-info user-info_inline" rel="user-popover" data-user-login="veslemay">
    <svg class="default-image default-image_mini default-image_pink" width="24" height="24"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#slug"></use></svg>
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">veslemay</span>
</a>

          
          <time class="comment__date-time comment__date-time_published">6 мая 2019 в 11:29</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="#comment_20117050" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="20117050" data-action="add" title="Добавить в закладки"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#book"></use></svg></a>
    </li>


  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="#comment_20117050" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="20117050" data-parent_id="0" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="20117050" data-post-target="450512" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="plus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter   js-score" title="Всего голосов 0: ↑1 и ↓1">0</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message ">Rust действительно красавчик. Вы 
сравнивали потребление памяти? Возможно set в свифте дерево и его 
некорректно сравнивать с хешмапой, ведь оно требует куда большего кол-ва
 памяти, а свифт создан «для мобилок».</div>

        <div class="comment__footer">
    <a href="#reply" class="comment__footer-link reply_link" onclick="return comment_show_reply_form(20117050 )">Ответить</a>


</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-0" id="reply_comments_20117050">  <li class="content-list__item content-list__item_comment js-comment " rel="20117154">
    
    <span class="parent_id" data-parent_id="20117050"></span>
    <div class="comment" id="comment_20117154">
      <span class="comment__collapse" title="Свернуть/развернуть ветку комментариев" data-id="20117154"></span>
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head comment__head_topic-author comment__head_my-comment " rel="20117154">
          <a href="https://habr.com/ru/users/epishman/" class="user-info user-info_inline" rel="user-popover" data-user-login="epishman">
    <img src="Swift%20%D0%BF%D1%80%D0%BE%D1%82%D0%B8%D0%B2%20Rust%20%E2%80%94%20%D0%B1%D0%B5%D0%BD%D1%87%D0%BC%D0%B0%D1%80%D0%BA%D0%B8%D0%BD%D0%B3%20%D0%BD%D0%B0%20Linux%20%D1%81%20(%D0%BD%D0%B5)%D0%BF%D0%BE%D0%BD%D1%8F%D1%82%D0%BD%D1%8B%D0%BC%20%D1%84%D0%B8%D0%BD%D0%B0%D0%BB%D0%BE%D0%BC%20_%20%D0%A5%D0%B0%D0%B1%D1%80_files/ec0d88c4853c0d36d44bd0526dcfa8d7.png" class="user-info__image-pic user-info__image-pic_small" width="24" height="24">
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">epishman</span>
</a>

          
          <time class="comment__date-time comment__date-time_published">6 мая 2019 в 11:46</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="#comment_20117154" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="20117154" data-action="add" title="Добавить в закладки"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#book"></use></svg></a>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <span class="icon_comment-branch js-comment_tree" data-id="20117154" data-parent_id="20117050" title="Показать ветку комментариев"><svg width="8" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#tree"></use></svg></span>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#comment_20117050" class="icon_comment-arrow-up js-comment_parent" data-id="20117154" data-parent_id="20117050" title="Показать предыдущий комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
    </li>

  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="#comment_20117154" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="20117154" data-parent_id="20117050" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="20117154" data-post-target="450512" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="plus" onclick="comment_vote(this);" title="За свои комментарии голосовать нельзя" disabled="disabled"><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter voting-wjt__counter_positive  js-score" title="Всего голосов +1: ↑1 и ↓0">+1</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="За свои комментарии голосовать нельзя" disabled="disabled"><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message ">Swift — VSZ: 205 Мб, RSS: 21 Мб<br>
Rust — VSZ: 13 Мб, RSS: 1Мб<br>
Все стабильно, не течет.<br></div>

        <div class="comment__footer">
    <a href="#reply" class="comment__footer-link reply_link" onclick="return comment_show_reply_form(20117154 )">Ответить</a>


</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-1" id="reply_comments_20117154"></ul>
  </li>
</ul>
  </li>
  <li class="content-list__item content-list__item_comment js-comment " rel="20117052">
    
    <span class="parent_id" data-parent_id="0"></span>
    <div class="comment" id="comment_20117052">
      <span class="comment__collapse" title="Свернуть/развернуть ветку комментариев" data-id="20117052"></span>
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head   " rel="20117052">
          <a href="https://habr.com/ru/users/agalakhov/" class="user-info user-info_inline" rel="user-popover" data-user-login="agalakhov">
    <svg class="default-image default-image_mini default-image_green" width="24" height="24"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#slug"></use></svg>
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">agalakhov</span>
</a>

          
          <time class="comment__date-time comment__date-time_published">6 мая 2019 в 11:29</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="#comment_20117052" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="20117052" data-action="add" title="Добавить в закладки"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#book"></use></svg></a>
    </li>


  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="#comment_20117052" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="20117052" data-parent_id="0" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="20117052" data-post-target="450512" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="plus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter voting-wjt__counter_positive  js-score" title="Всего голосов +6: ↑6 и ↓0">+6</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message ">«Некрасивость» кода на Rust в 
приведенном примере возникла исключительно из-за стиля написания. 
Например, обработку ошибки при открытии файла на Rust можно было 
написать в точности таким же `if let`, как на Swift. То же самое 
относится и к match в проверках на None. И еще много таких мест есть. 
Кажется, если поправить их все, код на Rust будет даже более красивым.</div>

        <div class="comment__footer">
    <a href="#reply" class="comment__footer-link reply_link" onclick="return comment_show_reply_form(20117052 )">Ответить</a>


</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-0" id="reply_comments_20117052">  <li class="content-list__item content-list__item_comment js-comment " rel="20117100">
    
    <span class="parent_id" data-parent_id="20117052"></span>
    <div class="comment" id="comment_20117100">
      <span class="comment__collapse" title="Свернуть/развернуть ветку комментариев" data-id="20117100"></span>
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head comment__head_topic-author comment__head_my-comment " rel="20117100">
          <a href="https://habr.com/ru/users/epishman/" class="user-info user-info_inline" rel="user-popover" data-user-login="epishman">
    <img src="Swift%20%D0%BF%D1%80%D0%BE%D1%82%D0%B8%D0%B2%20Rust%20%E2%80%94%20%D0%B1%D0%B5%D0%BD%D1%87%D0%BC%D0%B0%D1%80%D0%BA%D0%B8%D0%BD%D0%B3%20%D0%BD%D0%B0%20Linux%20%D1%81%20(%D0%BD%D0%B5)%D0%BF%D0%BE%D0%BD%D1%8F%D1%82%D0%BD%D1%8B%D0%BC%20%D1%84%D0%B8%D0%BD%D0%B0%D0%BB%D0%BE%D0%BC%20_%20%D0%A5%D0%B0%D0%B1%D1%80_files/ec0d88c4853c0d36d44bd0526dcfa8d7.png" class="user-info__image-pic user-info__image-pic_small" width="24" height="24">
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">epishman</span>
</a>

          
          <time class="comment__date-time comment__date-time_published">6 мая 2019 в 11:37</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="#comment_20117100" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="20117100" data-action="add" title="Добавить в закладки"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#book"></use></svg></a>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <span class="icon_comment-branch js-comment_tree" data-id="20117100" data-parent_id="20117052" title="Показать ветку комментариев"><svg width="8" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#tree"></use></svg></span>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#comment_20117052" class="icon_comment-arrow-up js-comment_parent" data-id="20117100" data-parent_id="20117052" title="Показать предыдущий комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
    </li>

  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="#comment_20117100" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="20117100" data-parent_id="20117052" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="20117100" data-post-target="450512" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="plus" onclick="comment_vote(this);" title="За свои комментарии голосовать нельзя" disabled="disabled"><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter voting-wjt__counter_positive  js-score" title="Всего голосов +3: ↑3 и ↓0">+3</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="За свои комментарии голосовать нельзя" disabled="disabled"><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message ">Согласен, недавно только понял, что деструктуризация <i>if let Ok(o) = val </i>нагляднее, чем у других, так как сразу виден тип переменной val.</div>

        <div class="comment__footer">
    <a href="#reply" class="comment__footer-link reply_link" onclick="return comment_show_reply_form(20117100 )">Ответить</a>


</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-1" id="reply_comments_20117100">  <li class="content-list__item content-list__item_comment js-comment " rel="20117288">
    
    <span class="parent_id" data-parent_id="20117100"></span>
    <div class="comment" id="comment_20117288">
      <span class="comment__collapse" title="Свернуть/развернуть ветку комментариев" data-id="20117288"></span>
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head   " rel="20117288">
          <a href="https://habr.com/ru/users/agalakhov/" class="user-info user-info_inline" rel="user-popover" data-user-login="agalakhov">
    <svg class="default-image default-image_mini default-image_green" width="24" height="24"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#slug"></use></svg>
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">agalakhov</span>
</a>

          <svg class="icon_comment-edit" title="Комментарий был изменен" width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#pencil"></use></svg>
          <time class="comment__date-time comment__date-time_published">6 мая 2019 в 12:05</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="#comment_20117288" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="20117288" data-action="add" title="Добавить в закладки"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#book"></use></svg></a>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <span class="icon_comment-branch js-comment_tree" data-id="20117288" data-parent_id="20117100" title="Показать ветку комментариев"><svg width="8" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#tree"></use></svg></span>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#comment_20117100" class="icon_comment-arrow-up js-comment_parent" data-id="20117288" data-parent_id="20117100" title="Показать предыдущий комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
    </li>

  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="#comment_20117288" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="20117288" data-parent_id="20117100" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="20117288" data-post-target="450512" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small voting-wjt__button_plus" data-action="plus" onclick="comment_vote(this);" title="Вы проголосовали положительно " disabled="disabled"><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter voting-wjt__counter_positive  js-score" title="Всего голосов +6: ↑6 и ↓0">+6</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="Вы проголосовали положительно , отменить голос нельзя" disabled="disabled"><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message ">Eще в таких же случаях методы 
типа .and_then() могут быть полезны. Или возврат ошибки из функции через
 оператор "?" с переносом обработки ошибок на уровень выше.<br>
<br>
При чтении файла можно выкинуть всю возню с буферизацией и написать буквально так:<br>
`for byte in BufReader(file).bytes()`.<br>
<br>
Вместо `Option::None` можно писать просто `None`, так как это имя всегда
 импортировано. Аннотация типа в той же строке не нужна, Rust сам 
выведет. Вообще этот цикл лучше переписать как-то так:<br>
`let dr = di.phones.iter().map(|p| res.index_by_phone.get(p)).any(Option::is_some);`<br>
<br>
Тот же прием лучше использовать для итерирования по байтам: поскольку 
все непустые ветки завершаются одним и тем же `push()`, то имеет смысл 
профильтровать итератор, а потом вызвать `collect()`. Иногда такой 
подход повышает скорость, так как при заранее известном размере 
итератора вектор не будет переаллоцироваться.<br>
<br>
Еще во многих местах лишний match на String, так как `val_to_str()` уже 
содержит точно то же самое. Вместо `to_string()` почти везде можно 
писать `into()`. В целом, кажется, я могу раза в два сократить 
написанное тут. И это даже если не вспоминать, что крейт `serde` 
содержит готовую работу с JSON, и вообще всю программу можно свести к 
одному вызову `from_str()`, если добавить `#[derive(Deserialize)]` к 
структурам. По скорости это будет очень быстро, Deserialize не делает 
лишних копирований и прочего.<br>
<br>
Для переделки со строк на ссылки скорее всего достаточно просто сменить 
тип поля в структурах: сложная игра со временами жизни тут не требуется,
 достаточно просто формально это время объявить.</div>

        <div class="comment__footer">
    <a href="#reply" class="comment__footer-link reply_link" onclick="return comment_show_reply_form(20117288 )">Ответить</a>


</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-2" id="reply_comments_20117288">  <li class="content-list__item content-list__item_comment js-comment " rel="20117360">
    
    <span class="parent_id" data-parent_id="20117288"></span>
    <div class="comment" id="comment_20117360">
      <span class="comment__collapse" title="Свернуть/развернуть ветку комментариев" data-id="20117360"></span>
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head comment__head_topic-author comment__head_my-comment " rel="20117360">
          <a href="https://habr.com/ru/users/epishman/" class="user-info user-info_inline" rel="user-popover" data-user-login="epishman">
    <img src="Swift%20%D0%BF%D1%80%D0%BE%D1%82%D0%B8%D0%B2%20Rust%20%E2%80%94%20%D0%B1%D0%B5%D0%BD%D1%87%D0%BC%D0%B0%D1%80%D0%BA%D0%B8%D0%BD%D0%B3%20%D0%BD%D0%B0%20Linux%20%D1%81%20(%D0%BD%D0%B5)%D0%BF%D0%BE%D0%BD%D1%8F%D1%82%D0%BD%D1%8B%D0%BC%20%D1%84%D0%B8%D0%BD%D0%B0%D0%BB%D0%BE%D0%BC%20_%20%D0%A5%D0%B0%D0%B1%D1%80_files/ec0d88c4853c0d36d44bd0526dcfa8d7.png" class="user-info__image-pic user-info__image-pic_small" width="24" height="24">
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">epishman</span>
</a>

          
          <time class="comment__date-time comment__date-time_published">6 мая 2019 в 12:13</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="#comment_20117360" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="20117360" data-action="add" title="Добавить в закладки"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#book"></use></svg></a>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <span class="icon_comment-branch js-comment_tree" data-id="20117360" data-parent_id="20117288" title="Показать ветку комментариев"><svg width="8" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#tree"></use></svg></span>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#comment_20117288" class="icon_comment-arrow-up js-comment_parent" data-id="20117360" data-parent_id="20117288" title="Показать предыдущий комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
    </li>

  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="#comment_20117360" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="20117360" data-parent_id="20117288" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="20117360" data-post-target="450512" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="plus" onclick="comment_vote(this);" title="За свои комментарии голосовать нельзя" disabled="disabled"><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter voting-wjt__counter_positive  js-score" title="Всего голосов +2: ↑2 и ↓0">+2</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="За свои комментарии голосовать нельзя" disabled="disabled"><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message ">Матч на стринг не лишний, если 
просто написать to_string(), то serde для строковых данных выведет еще 
дополнительные кавычки. За все остальное — большое спасибо!</div>

        <div class="comment__footer">
    <a href="#reply" class="comment__footer-link reply_link" onclick="return comment_show_reply_form(20117360 )">Ответить</a>


</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-3" id="reply_comments_20117360">  <li class="content-list__item content-list__item_comment js-comment " rel="20119886">
    
    <span class="parent_id" data-parent_id="20117360"></span>
    <div class="comment" id="comment_20119886">
      <span class="comment__collapse" title="Свернуть/развернуть ветку комментариев" data-id="20119886"></span>
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head   " rel="20119886">
          <a href="https://habr.com/ru/users/agalakhov/" class="user-info user-info_inline" rel="user-popover" data-user-login="agalakhov">
    <svg class="default-image default-image_mini default-image_green" width="24" height="24"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#slug"></use></svg>
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">agalakhov</span>
</a>

          
          <time class="comment__date-time comment__date-time_published">6 мая 2019 в 18:31</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="#comment_20119886" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="20119886" data-action="add" title="Добавить в закладки"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#book"></use></svg></a>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <span class="icon_comment-branch js-comment_tree" data-id="20119886" data-parent_id="20117360" title="Показать ветку комментариев"><svg width="8" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#tree"></use></svg></span>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#comment_20117360" class="icon_comment-arrow-up js-comment_parent" data-id="20119886" data-parent_id="20117360" title="Показать предыдущий комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
    </li>

  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="#comment_20119886" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="20119886" data-parent_id="20117360" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="20119886" data-post-target="450512" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="plus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter voting-wjt__counter_positive  js-score" title="Всего голосов +1: ↑1 и ↓0">+1</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message "><p>Кавычки внутри кавычек? Если 
так, то это где-то еще баг, и решать надо не таким способом. serde не 
дает дополнительных кавычек (точно знаю, у нас в продакшн он как раз на 
JSON). Если речь о скобках, не о кавычках, так там <code>#[flatten]</code> ставится. Чуть попозже внимательно проверю, откуда что идет, при беглом прочтении не вижу.</p></div>

        <div class="comment__footer">
    <a href="#reply" class="comment__footer-link reply_link" onclick="return comment_show_reply_form(20119886 )">Ответить</a>


</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-4" id="reply_comments_20119886">  <li class="content-list__item content-list__item_comment js-comment " rel="20120000">
    
    <span class="parent_id" data-parent_id="20119886"></span>
    <div class="comment" id="comment_20120000">
      <span class="comment__collapse" title="Свернуть/развернуть ветку комментариев" data-id="20120000"></span>
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head comment__head_topic-author comment__head_my-comment " rel="20120000">
          <a href="https://habr.com/ru/users/epishman/" class="user-info user-info_inline" rel="user-popover" data-user-login="epishman">
    <img src="Swift%20%D0%BF%D1%80%D0%BE%D1%82%D0%B8%D0%B2%20Rust%20%E2%80%94%20%D0%B1%D0%B5%D0%BD%D1%87%D0%BC%D0%B0%D1%80%D0%BA%D0%B8%D0%BD%D0%B3%20%D0%BD%D0%B0%20Linux%20%D1%81%20(%D0%BD%D0%B5)%D0%BF%D0%BE%D0%BD%D1%8F%D1%82%D0%BD%D1%8B%D0%BC%20%D1%84%D0%B8%D0%BD%D0%B0%D0%BB%D0%BE%D0%BC%20_%20%D0%A5%D0%B0%D0%B1%D1%80_files/ec0d88c4853c0d36d44bd0526dcfa8d7.png" class="user-info__image-pic user-info__image-pic_small" width="24" height="24">
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">epishman</span>
</a>

          
          <time class="comment__date-time comment__date-time_published">6 мая 2019 в 18:55</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="#comment_20120000" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="20120000" data-action="add" title="Добавить в закладки"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#book"></use></svg></a>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <span class="icon_comment-branch js-comment_tree" data-id="20120000" data-parent_id="20119886" title="Показать ветку комментариев"><svg width="8" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#tree"></use></svg></span>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#comment_20119886" class="icon_comment-arrow-up js-comment_parent" data-id="20120000" data-parent_id="20119886" title="Показать предыдущий комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
    </li>

  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="#comment_20120000" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="20120000" data-parent_id="20119886" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="20120000" data-post-target="450512" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="plus" onclick="comment_vote(this);" title="За свои комментарии голосовать нельзя" disabled="disabled"><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter voting-wjt__counter_positive  js-score" title="Всего голосов +2: ↑2 и ↓0">+2</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="За свои комментарии голосовать нельзя" disabled="disabled"><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message ">Возможно это особенность 
реализации to_string() в serde_json::Value, похоже оно предназначено для
 презентационных целей, добавляет [], {}, "", надо просто другой метод 
исользовать.</div>

        <div class="comment__footer">
    <a href="#reply" class="comment__footer-link reply_link" onclick="return comment_show_reply_form(20120000 )">Ответить</a>


</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-5" id="reply_comments_20120000"></ul>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="content-list__item content-list__item_comment js-comment " rel="20120520">
    
    <span class="parent_id" data-parent_id="20117288"></span>
    <div class="comment" id="comment_20120520">
      <span class="comment__collapse" title="Свернуть/развернуть ветку комментариев" data-id="20120520"></span>
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head comment__head_topic-author comment__head_my-comment " rel="20120520">
          <a href="https://habr.com/ru/users/epishman/" class="user-info user-info_inline" rel="user-popover" data-user-login="epishman">
    <img src="Swift%20%D0%BF%D1%80%D0%BE%D1%82%D0%B8%D0%B2%20Rust%20%E2%80%94%20%D0%B1%D0%B5%D0%BD%D1%87%D0%BC%D0%B0%D1%80%D0%BA%D0%B8%D0%BD%D0%B3%20%D0%BD%D0%B0%20Linux%20%D1%81%20(%D0%BD%D0%B5)%D0%BF%D0%BE%D0%BD%D1%8F%D1%82%D0%BD%D1%8B%D0%BC%20%D1%84%D0%B8%D0%BD%D0%B0%D0%BB%D0%BE%D0%BC%20_%20%D0%A5%D0%B0%D0%B1%D1%80_files/ec0d88c4853c0d36d44bd0526dcfa8d7.png" class="user-info__image-pic user-info__image-pic_small" width="24" height="24">
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">epishman</span>
</a>

          <svg class="icon_comment-edit" title="Комментарий был изменен" width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#pencil"></use></svg>
          <time class="comment__date-time comment__date-time_published">6 мая 2019 в 21:13</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="#comment_20120520" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="20120520" data-action="add" title="Добавить в закладки"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#book"></use></svg></a>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <span class="icon_comment-branch js-comment_tree" data-id="20120520" data-parent_id="20117288" title="Показать ветку комментариев"><svg width="8" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#tree"></use></svg></span>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#comment_20117288" class="icon_comment-arrow-up js-comment_parent" data-id="20120520" data-parent_id="20117288" title="Показать предыдущий комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
    </li>

  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="#comment_20120520" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="20120520" data-parent_id="20117288" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="20120520" data-post-target="450512" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="plus" onclick="comment_vote(this);" title="За свои комментарии голосовать нельзя" disabled="disabled"><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter voting-wjt__counter_positive  js-score" title="Всего голосов +1: ↑1 и ↓0">+1</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="За свои комментарии голосовать нельзя" disabled="disabled"><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message ">При чтении файла можно выкинуть всю возню с буферизацией и написать буквально так:<br>
`for byte in BufReader(file).bytes()`.<br>
=============<br>
Неа, полученный байт придется анрапить, а это задержка существенная, 
проверял. Проще вообще читать сразу из File, своим собственным буфером, 
как товарищ ниже мой код <a href="https://habr.com/ru/post/450512/#comment_20119542">переделал</a>.</div>

        <div class="comment__footer">
    <a href="#reply" class="comment__footer-link reply_link" onclick="return comment_show_reply_form(20120520 )">Ответить</a>


</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-3" id="reply_comments_20120520"></ul>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="content-list__item content-list__item_comment js-comment " rel="20117136">
    
    <span class="parent_id" data-parent_id="0"></span>
    <div class="comment" id="comment_20117136">
      <span class="comment__collapse" title="Свернуть/развернуть ветку комментариев" data-id="20117136"></span>
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head   " rel="20117136">
          <a href="https://habr.com/ru/users/zolkko/" class="user-info user-info_inline" rel="user-popover" data-user-login="zolkko">
    <img src="Swift%20%D0%BF%D1%80%D0%BE%D1%82%D0%B8%D0%B2%20Rust%20%E2%80%94%20%D0%B1%D0%B5%D0%BD%D1%87%D0%BC%D0%B0%D1%80%D0%BA%D0%B8%D0%BD%D0%B3%20%D0%BD%D0%B0%20Linux%20%D1%81%20(%D0%BD%D0%B5)%D0%BF%D0%BE%D0%BD%D1%8F%D1%82%D0%BD%D1%8B%D0%BC%20%D1%84%D0%B8%D0%BD%D0%B0%D0%BB%D0%BE%D0%BC%20_%20%D0%A5%D0%B0%D0%B1%D1%80_files/9ff1da0f6bc9d279369e4edada1fc41d.png" class="user-info__image-pic user-info__image-pic_small" width="24" height="24">
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">zolkko</span>
</a>

          
          <time class="comment__date-time comment__date-time_published">6 мая 2019 в 11:41</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="#comment_20117136" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="20117136" data-action="add" title="Добавить в закладки"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#book"></use></svg></a>
    </li>


  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="#comment_20117136" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="20117136" data-parent_id="0" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="20117136" data-post-target="450512" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="plus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter voting-wjt__counter_positive  js-score" title="Всего голосов +3: ↑3 и ↓0">+3</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message "><p>Что бы чуть-чуть поменьше кода получилось в раст версии можно убрать <code>impl Struct</code> блоки и заменить из на:</p><br>
<pre><code class="rust hljs"><span class="hljs-meta"><span class="hljs-meta">#[derive(Default)]</span></span>
<span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">struct</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Debtor</span></span></span></span> { <span class="hljs-comment"><span class="hljs-comment">/*... */</span></span> }
<span class="hljs-comment"><span class="hljs-comment">// ...</span></span>
Debtor::<span class="hljs-keyword"><span class="hljs-keyword">default</span></span>();</code></pre><br>
<p>Думаю, что было бы справедливо использовать тип <code>process_file -&gt; (isize, isize)</code> или в swift поменять на <code>Int32</code>.</p><br>
<p>Ещё чисто из эстетических соображений убрать вложеность <code>match std::fs::File::open(fname)</code>.</p><br>
<p>Возможно для swift версии будет иметь значение замена <code>class</code> на <code>struct</code> и соотвествующая замена <code>let</code> на <code>var</code>?</p></div>

        <div class="comment__footer">
    <a href="#reply" class="comment__footer-link reply_link" onclick="return comment_show_reply_form(20117136 )">Ответить</a>


</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-0" id="reply_comments_20117136">  <li class="content-list__item content-list__item_comment js-comment " rel="20117174">
    
    <span class="parent_id" data-parent_id="20117136"></span>
    <div class="comment" id="comment_20117174">
      <span class="comment__collapse" title="Свернуть/развернуть ветку комментариев" data-id="20117174"></span>
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head comment__head_topic-author comment__head_my-comment " rel="20117174">
          <a href="https://habr.com/ru/users/epishman/" class="user-info user-info_inline" rel="user-popover" data-user-login="epishman">
    <img src="Swift%20%D0%BF%D1%80%D0%BE%D1%82%D0%B8%D0%B2%20Rust%20%E2%80%94%20%D0%B1%D0%B5%D0%BD%D1%87%D0%BC%D0%B0%D1%80%D0%BA%D0%B8%D0%BD%D0%B3%20%D0%BD%D0%B0%20Linux%20%D1%81%20(%D0%BD%D0%B5)%D0%BF%D0%BE%D0%BD%D1%8F%D1%82%D0%BD%D1%8B%D0%BC%20%D1%84%D0%B8%D0%BD%D0%B0%D0%BB%D0%BE%D0%BC%20_%20%D0%A5%D0%B0%D0%B1%D1%80_files/ec0d88c4853c0d36d44bd0526dcfa8d7.png" class="user-info__image-pic user-info__image-pic_small" width="24" height="24">
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">epishman</span>
</a>

          <svg class="icon_comment-edit" title="Комментарий был изменен" width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#pencil"></use></svg>
          <time class="comment__date-time comment__date-time_published">6 мая 2019 в 11:49</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="#comment_20117174" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="20117174" data-action="add" title="Добавить в закладки"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#book"></use></svg></a>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <span class="icon_comment-branch js-comment_tree" data-id="20117174" data-parent_id="20117136" title="Показать ветку комментариев"><svg width="8" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#tree"></use></svg></span>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#comment_20117136" class="icon_comment-arrow-up js-comment_parent" data-id="20117174" data-parent_id="20117136" title="Показать предыдущий комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
    </li>

  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="#comment_20117174" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="20117174" data-parent_id="20117136" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="20117174" data-post-target="450512" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="plus" onclick="comment_vote(this);" title="За свои комментарии голосовать нельзя" disabled="disabled"><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter voting-wjt__counter_positive  js-score" title="Всего голосов +1: ↑1 и ↓0">+1</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="За свои комментарии голосовать нельзя" disabled="disabled"><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message ">Спасибо, не знал что дерайв дефолт и коллекции умеет инициализировать.<br>
Структуры в Swift передаются по значению, копированием, поэтому только классы.</div>

        <div class="comment__footer">
    <a href="#reply" class="comment__footer-link reply_link" onclick="return comment_show_reply_form(20117174 )">Ответить</a>


</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-1" id="reply_comments_20117174">  <li class="content-list__item content-list__item_comment js-comment " rel="20117308">
    
    <span class="parent_id" data-parent_id="20117174"></span>
    <div class="comment" id="comment_20117308">
      <span class="comment__collapse" title="Свернуть/развернуть ветку комментариев" data-id="20117308"></span>
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head   " rel="20117308">
          <a href="https://habr.com/ru/users/agalakhov/" class="user-info user-info_inline" rel="user-popover" data-user-login="agalakhov">
    <svg class="default-image default-image_mini default-image_green" width="24" height="24"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#slug"></use></svg>
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">agalakhov</span>
</a>

          
          <time class="comment__date-time comment__date-time_published">6 мая 2019 в 12:07</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="#comment_20117308" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="20117308" data-action="add" title="Добавить в закладки"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#book"></use></svg></a>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <span class="icon_comment-branch js-comment_tree" data-id="20117308" data-parent_id="20117174" title="Показать ветку комментариев"><svg width="8" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#tree"></use></svg></span>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#comment_20117174" class="icon_comment-arrow-up js-comment_parent" data-id="20117308" data-parent_id="20117174" title="Показать предыдущий комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
    </li>

  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="#comment_20117308" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="20117308" data-parent_id="20117174" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="20117308" data-post-target="450512" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small voting-wjt__button_plus" data-action="plus" onclick="comment_vote(this);" title="Вы проголосовали положительно " disabled="disabled"><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter voting-wjt__counter_positive  js-score" title="Всего голосов +3: ↑3 и ↓0">+3</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="Вы проголосовали положительно , отменить голос нельзя" disabled="disabled"><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message "><p>Дерайвить дефолт можно для всех типов, которые имеют <code>impl Default</code>, а это почти все типы стандартной библиотеки. В том числе все коллекции, которые могут быть пустыми.</p></div>

        <div class="comment__footer">
    <a href="#reply" class="comment__footer-link reply_link" onclick="return comment_show_reply_form(20117308 )">Ответить</a>


</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-2" id="reply_comments_20117308"></ul>
  </li>
  <li class="content-list__item content-list__item_comment js-comment " rel="20121248">
    
    <span class="parent_id" data-parent_id="20117174"></span>
    <div class="comment" id="comment_20121248">
      <span class="comment__collapse" title="Свернуть/развернуть ветку комментариев" data-id="20121248"></span>
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head   " rel="20121248">
          <a href="https://habr.com/ru/users/V1tol/" class="user-info user-info_inline" rel="user-popover" data-user-login="V1tol">
    <img src="Swift%20%D0%BF%D1%80%D0%BE%D1%82%D0%B8%D0%B2%20Rust%20%E2%80%94%20%D0%B1%D0%B5%D0%BD%D1%87%D0%BC%D0%B0%D1%80%D0%BA%D0%B8%D0%BD%D0%B3%20%D0%BD%D0%B0%20Linux%20%D1%81%20(%D0%BD%D0%B5)%D0%BF%D0%BE%D0%BD%D1%8F%D1%82%D0%BD%D1%8B%D0%BC%20%D1%84%D0%B8%D0%BD%D0%B0%D0%BB%D0%BE%D0%BC%20_%20%D0%A5%D0%B0%D0%B1%D1%80_files/7ca385a302cfdff54b323bbcce991b79.jpg" class="user-info__image-pic user-info__image-pic_small" width="24" height="24">
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">V1tol</span>
</a>

          
          <time class="comment__date-time comment__date-time_published">7 мая 2019 в 00:54</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="#comment_20121248" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="20121248" data-action="add" title="Добавить в закладки"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#book"></use></svg></a>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <span class="icon_comment-branch js-comment_tree" data-id="20121248" data-parent_id="20117174" title="Показать ветку комментариев"><svg width="8" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#tree"></use></svg></span>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#comment_20117174" class="icon_comment-arrow-up js-comment_parent" data-id="20121248" data-parent_id="20117174" title="Показать предыдущий комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
    </li>

  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="#comment_20121248" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="20121248" data-parent_id="20117174" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="20121248" data-post-target="450512" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small voting-wjt__button_plus" data-action="plus" onclick="comment_vote(this);" title="Вы проголосовали положительно " disabled="disabled"><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter voting-wjt__counter_positive  js-score" title="Всего голосов +1: ↑1 и ↓0">+1</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="Вы проголосовали положительно , отменить голос нельзя" disabled="disabled"><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message "><blockquote>Структуры в Swift передаются по значению, копированием, поэтому только классы.</blockquote><br>
Это не совсем так (точнее не всегда). Структуры в Swift используют семантику copy-on-write. То есть, в коде вида<br>
<pre><code class="swift hljs"><span class="hljs-keyword"><span class="hljs-keyword">let</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">struct</span></span></span><span class="hljs-class"> = </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Struct</span></span></span><span class="hljs-class">(</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">var</span></span></span><span class="hljs-class">: 5)
</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">var</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">struct2</span></span></span><span class="hljs-class"> = </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">struct</span></span></span><span class="hljs-class">
</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">struct2</span></span></span><span class="hljs-class">.</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">var</span></span></span><span class="hljs-class"> = 10
</span></span></code></pre><br>
структура скопируется не на 2 строке, а на 3. Также есть ключевое слово 
inout, которое используется для передачи внутрь метода структуры через 
аргумент и модификации её без копирования.<br>
<br>
Собственно, для изменения вашего кода с классов на структуры, мне 
понадобилось добавить всего 1 строку помимо замены ключевого слова class
 на struct. По производительности мне это обошлось в 1 копирование в 
методе process_object (и то я не увидел никакой разницы).</div>

        <div class="comment__footer">
    <a href="#reply" class="comment__footer-link reply_link" onclick="return comment_show_reply_form(20121248 )">Ответить</a>


</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-2" id="reply_comments_20121248"></ul>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="content-list__item content-list__item_comment js-comment " rel="20117184">
    
    <span class="parent_id" data-parent_id="0"></span>
    <div class="comment" id="comment_20117184">
      <span class="comment__collapse" title="Свернуть/развернуть ветку комментариев" data-id="20117184"></span>
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head   " rel="20117184">
          <a href="https://habr.com/ru/users/NishchebrodKolya2/" class="user-info user-info_inline" rel="user-popover" data-user-login="NishchebrodKolya2">
    <svg class="default-image default-image_mini default-image_pink" width="24" height="24"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#slug"></use></svg>
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">NishchebrodKolya2</span>
</a>

          
          <time class="comment__date-time comment__date-time_published">6 мая 2019 в 11:51</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="#comment_20117184" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="20117184" data-action="add" title="Добавить в закладки"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#book"></use></svg></a>
    </li>


  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="#comment_20117184" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="20117184" data-parent_id="0" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="20117184" data-post-target="450512" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="plus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter  voting-wjt__counter_negative js-score" title="Всего голосов –7: ↑0 и ↓7">–7</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message comment__message_downgrade comment__message_downgrade-5">Вы сравнили ежа с ужом, как минимум языки под разные задачи, тогда уж сравнивайте C++ и java, результат будет похожий.</div>

        <div class="comment__footer">
    <a href="#reply" class="comment__footer-link reply_link" onclick="return comment_show_reply_form(20117184 )">Ответить</a>


</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-0" id="reply_comments_20117184">  <li class="content-list__item content-list__item_comment js-comment " rel="20117204">
    
    <span class="parent_id" data-parent_id="20117184"></span>
    <div class="comment" id="comment_20117204">
      <span class="comment__collapse" title="Свернуть/развернуть ветку комментариев" data-id="20117204"></span>
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head comment__head_topic-author comment__head_my-comment " rel="20117204">
          <a href="https://habr.com/ru/users/epishman/" class="user-info user-info_inline" rel="user-popover" data-user-login="epishman">
    <img src="Swift%20%D0%BF%D1%80%D0%BE%D1%82%D0%B8%D0%B2%20Rust%20%E2%80%94%20%D0%B1%D0%B5%D0%BD%D1%87%D0%BC%D0%B0%D1%80%D0%BA%D0%B8%D0%BD%D0%B3%20%D0%BD%D0%B0%20Linux%20%D1%81%20(%D0%BD%D0%B5)%D0%BF%D0%BE%D0%BD%D1%8F%D1%82%D0%BD%D1%8B%D0%BC%20%D1%84%D0%B8%D0%BD%D0%B0%D0%BB%D0%BE%D0%BC%20_%20%D0%A5%D0%B0%D0%B1%D1%80_files/ec0d88c4853c0d36d44bd0526dcfa8d7.png" class="user-info__image-pic user-info__image-pic_small" width="24" height="24">
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">epishman</span>
</a>

          <svg class="icon_comment-edit" title="Комментарий был изменен" width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#pencil"></use></svg>
          <time class="comment__date-time comment__date-time_published">6 мая 2019 в 11:54</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="#comment_20117204" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="20117204" data-action="add" title="Добавить в закладки"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#book"></use></svg></a>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <span class="icon_comment-branch js-comment_tree" data-id="20117204" data-parent_id="20117184" title="Показать ветку комментариев"><svg width="8" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#tree"></use></svg></span>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#comment_20117184" class="icon_comment-arrow-up js-comment_parent" data-id="20117204" data-parent_id="20117184" title="Показать предыдущий комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
    </li>

  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="#comment_20117204" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="20117204" data-parent_id="20117184" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="20117204" data-post-target="450512" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="plus" onclick="comment_vote(this);" title="За свои комментарии голосовать нельзя" disabled="disabled"><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter voting-wjt__counter_positive  js-score" title="Всего голосов +3: ↑3 и ↓0">+3</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="За свои комментарии голосовать нельзя" disabled="disabled"><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message ">Как-то писал похожий бенч Go vs Javascript (V8), там разница 2.5 раза всего, на Java давно не писал, не знаю.</div>

        <div class="comment__footer">
    <a href="#reply" class="comment__footer-link reply_link" onclick="return comment_show_reply_form(20117204 )">Ответить</a>


</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-1" id="reply_comments_20117204">  <li class="content-list__item content-list__item_comment js-comment " rel="20117736">
    
    <span class="parent_id" data-parent_id="20117204"></span>
    <div class="comment" id="comment_20117736">
      <span class="comment__collapse" title="Свернуть/развернуть ветку комментариев" data-id="20117736"></span>
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head   " rel="20117736">
          <a href="https://habr.com/ru/users/NishchebrodKolya2/" class="user-info user-info_inline" rel="user-popover" data-user-login="NishchebrodKolya2">
    <svg class="default-image default-image_mini default-image_pink" width="24" height="24"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#slug"></use></svg>
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">NishchebrodKolya2</span>
</a>

          
          <time class="comment__date-time comment__date-time_published">6 мая 2019 в 13:05</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="#comment_20117736" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="20117736" data-action="add" title="Добавить в закладки"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#book"></use></svg></a>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <span class="icon_comment-branch js-comment_tree" data-id="20117736" data-parent_id="20117204" title="Показать ветку комментариев"><svg width="8" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#tree"></use></svg></span>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#comment_20117204" class="icon_comment-arrow-up js-comment_parent" data-id="20117736" data-parent_id="20117204" title="Показать предыдущий комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
    </li>

  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="#comment_20117736" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="20117736" data-parent_id="20117204" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="20117736" data-post-target="450512" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="plus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter voting-wjt__counter_positive  js-score" title="Всего голосов +2: ↑2 и ↓0">+2</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message ">А если попробовать более по свифтовому?<br>
<br>
<pre><code class="swift hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> Foundation

<span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">struct</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">DebtRec</span></span></span><span class="hljs-class">: </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Decodable</span></span></span><span class="hljs-class"> </span></span>{
    <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">enum</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Key</span></span></span><span class="hljs-class">: </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">String</span></span></span><span class="hljs-class">, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">CodingKey</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> company, debt, phones }
    <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">struct</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Company</span></span></span><span class="hljs-class">: </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Decodable</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> name: <span class="hljs-type"><span class="hljs-type">String</span></span> }
    
    <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">enum</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Error</span></span></span><span class="hljs-class">: </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Swift</span></span></span><span class="hljs-class">.</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Error</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> invalidCompany, invalidPhones, invalidPhoneItem, invalidDebt }
    
    <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> company: <span class="hljs-type"><span class="hljs-type">String</span></span>, phones: [<span class="hljs-type"><span class="hljs-type">String</span></span>], debt: <span class="hljs-type"><span class="hljs-type">Double</span></span>
    
    <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">struct</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">PhoneItem</span></span></span><span class="hljs-class">: </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Decodable</span></span></span><span class="hljs-class"> </span></span>{
        <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> value: <span class="hljs-type"><span class="hljs-type">String</span></span>
        <span class="hljs-keyword"><span class="hljs-keyword">init</span></span>(from decoder: <span class="hljs-type"><span class="hljs-type">Decoder</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">throws</span></span> {
            <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> decoder = <span class="hljs-keyword"><span class="hljs-keyword">try</span></span> decoder.singleValueContainer()
            <span class="hljs-keyword"><span class="hljs-keyword">guard</span></span> <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> value = (<span class="hljs-keyword"><span class="hljs-keyword">try</span></span>? decoder.decode(<span class="hljs-type"><span class="hljs-type">Int</span></span>.<span class="hljs-keyword"><span class="hljs-keyword">self</span></span>)).<span class="hljs-built_in"><span class="hljs-built_in">map</span></span>({ <span class="hljs-string"><span class="hljs-string">"\($0)"</span></span> }) ?? (<span class="hljs-keyword"><span class="hljs-keyword">try</span></span>? decoder.decode(<span class="hljs-type"><span class="hljs-type">String</span></span>.<span class="hljs-keyword"><span class="hljs-keyword">self</span></span>)) <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">throw</span></span> <span class="hljs-type"><span class="hljs-type">Error</span></span>.invalidPhoneItem }
            <span class="hljs-keyword"><span class="hljs-keyword">self</span></span>.value = value
        }
    }
    
    <span class="hljs-keyword"><span class="hljs-keyword">init</span></span>(from decoder: <span class="hljs-type"><span class="hljs-type">Decoder</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">throws</span></span> {
        <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> container = <span class="hljs-keyword"><span class="hljs-keyword">try</span></span> decoder.container(keyedBy: <span class="hljs-type"><span class="hljs-type">Key</span></span>.<span class="hljs-keyword"><span class="hljs-keyword">self</span></span>)
        <span class="hljs-keyword"><span class="hljs-keyword">guard</span></span> <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> company = (<span class="hljs-keyword"><span class="hljs-keyword">try</span></span>? container.decode(<span class="hljs-type"><span class="hljs-type">String</span></span>.<span class="hljs-keyword"><span class="hljs-keyword">self</span></span>, forKey: .company)) ?? (<span class="hljs-keyword"><span class="hljs-keyword">try</span></span>? container.decode(<span class="hljs-type"><span class="hljs-type">Company</span></span>.<span class="hljs-keyword"><span class="hljs-keyword">self</span></span>, forKey: .company).name) <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">throw</span></span> <span class="hljs-type"><span class="hljs-type">Error</span></span>.invalidCompany }
        <span class="hljs-keyword"><span class="hljs-keyword">self</span></span>.company = company
        <span class="hljs-keyword"><span class="hljs-keyword">guard</span></span> <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> phones = (<span class="hljs-keyword"><span class="hljs-keyword">try</span></span>? container.decode(<span class="hljs-type"><span class="hljs-type">Int</span></span>.<span class="hljs-keyword"><span class="hljs-keyword">self</span></span>, forKey: .phones)).<span class="hljs-built_in"><span class="hljs-built_in">map</span></span>({ [<span class="hljs-string"><span class="hljs-string">"\($0)"</span></span>] }) ?? (<span class="hljs-keyword"><span class="hljs-keyword">try</span></span>? container.decode([<span class="hljs-type"><span class="hljs-type">PhoneItem</span></span>].<span class="hljs-keyword"><span class="hljs-keyword">self</span></span>, forKey: .phones).<span class="hljs-built_in"><span class="hljs-built_in">map</span></span>({ $<span class="hljs-number"><span class="hljs-number">0</span></span>.value })) <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">throw</span></span> <span class="hljs-type"><span class="hljs-type">Error</span></span>.invalidPhones }
        <span class="hljs-keyword"><span class="hljs-keyword">self</span></span>.phones = phones
        <span class="hljs-keyword"><span class="hljs-keyword">guard</span></span> <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> debt = (<span class="hljs-keyword"><span class="hljs-keyword">try</span></span>? container.decode(<span class="hljs-type"><span class="hljs-type">Double</span></span>.<span class="hljs-keyword"><span class="hljs-keyword">self</span></span>, forKey: .debt)) ?? (<span class="hljs-keyword"><span class="hljs-keyword">try</span></span>? container.decode(<span class="hljs-type"><span class="hljs-type">String</span></span>.<span class="hljs-keyword"><span class="hljs-keyword">self</span></span>, forKey: .debt)).flatMap({ <span class="hljs-type"><span class="hljs-type">Double</span></span>($<span class="hljs-number"><span class="hljs-number">0</span></span>) }) <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">throw</span></span> <span class="hljs-type"><span class="hljs-type">Error</span></span>.invalidDebt }
        <span class="hljs-keyword"><span class="hljs-keyword">self</span></span>.debt = debt
    }
}

<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">main</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span> <span class="hljs-keyword"><span class="hljs-keyword">throws</span></span> {
    <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> data = <span class="hljs-keyword"><span class="hljs-keyword">try</span></span> <span class="hljs-type"><span class="hljs-type">Data</span></span>(contentsOf: <span class="hljs-type"><span class="hljs-type">URL</span></span>(fileURLWithPath: <span class="hljs-string"><span class="hljs-string">"__path_to_json__"</span></span>))
    <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> res = <span class="hljs-keyword"><span class="hljs-keyword">try</span></span> <span class="hljs-type"><span class="hljs-type">JSONDecoder</span></span>().decode([<span class="hljs-type"><span class="hljs-type">DebtRec</span></span>].<span class="hljs-keyword"><span class="hljs-keyword">self</span></span>, from: data)
}

<span class="hljs-keyword"><span class="hljs-keyword">try</span></span> main()</code></pre></div>

        <div class="comment__footer">
    <a href="#reply" class="comment__footer-link reply_link" onclick="return comment_show_reply_form(20117736 )">Ответить</a>


</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-2" id="reply_comments_20117736">  <li class="content-list__item content-list__item_comment js-comment " rel="20117832">
    
    <span class="parent_id" data-parent_id="20117736"></span>
    <div class="comment" id="comment_20117832">
      <span class="comment__collapse" title="Свернуть/развернуть ветку комментариев" data-id="20117832"></span>
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head comment__head_topic-author comment__head_my-comment " rel="20117832">
          <a href="https://habr.com/ru/users/epishman/" class="user-info user-info_inline" rel="user-popover" data-user-login="epishman">
    <img src="Swift%20%D0%BF%D1%80%D0%BE%D1%82%D0%B8%D0%B2%20Rust%20%E2%80%94%20%D0%B1%D0%B5%D0%BD%D1%87%D0%BC%D0%B0%D1%80%D0%BA%D0%B8%D0%BD%D0%B3%20%D0%BD%D0%B0%20Linux%20%D1%81%20(%D0%BD%D0%B5)%D0%BF%D0%BE%D0%BD%D1%8F%D1%82%D0%BD%D1%8B%D0%BC%20%D1%84%D0%B8%D0%BD%D0%B0%D0%BB%D0%BE%D0%BC%20_%20%D0%A5%D0%B0%D0%B1%D1%80_files/ec0d88c4853c0d36d44bd0526dcfa8d7.png" class="user-info__image-pic user-info__image-pic_small" width="24" height="24">
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">epishman</span>
</a>

          
          <time class="comment__date-time comment__date-time_published">6 мая 2019 в 13:23</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="#comment_20117832" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="20117832" data-action="add" title="Добавить в закладки"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#book"></use></svg></a>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <span class="icon_comment-branch js-comment_tree" data-id="20117832" data-parent_id="20117736" title="Показать ветку комментариев"><svg width="8" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#tree"></use></svg></span>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#comment_20117736" class="icon_comment-arrow-up js-comment_parent" data-id="20117832" data-parent_id="20117736" title="Показать предыдущий комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
    </li>

  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="#comment_20117832" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="20117832" data-parent_id="20117736" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="20117832" data-post-target="450512" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="plus" onclick="comment_vote(this);" title="За свои комментарии голосовать нельзя" disabled="disabled"><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter voting-wjt__counter_positive  js-score" title="Всего голосов +3: ↑3 и ↓0">+3</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="За свои комментарии голосовать нельзя" disabled="disabled"><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message ">Не, ну так не честно.<br>
VSZ: 1Гб<br>
RSS: 920 Мб<br>
Вы забрали весь файл в память, а в жизни приходится миллиарды записей обрабатывать.</div>

        <div class="comment__footer">
    <a href="#reply" class="comment__footer-link reply_link" onclick="return comment_show_reply_form(20117832 )">Ответить</a>


</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-3" id="reply_comments_20117832">  <li class="content-list__item content-list__item_comment js-comment " rel="20118018">
    
    <span class="parent_id" data-parent_id="20117832"></span>
    <div class="comment" id="comment_20118018">
      <span class="comment__collapse" title="Свернуть/развернуть ветку комментариев" data-id="20118018"></span>
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head   " rel="20118018">
          <a href="https://habr.com/ru/users/NishchebrodKolya2/" class="user-info user-info_inline" rel="user-popover" data-user-login="NishchebrodKolya2">
    <svg class="default-image default-image_mini default-image_pink" width="24" height="24"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#slug"></use></svg>
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">NishchebrodKolya2</span>
</a>

          
          <time class="comment__date-time comment__date-time_published">6 мая 2019 в 13:48</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="#comment_20118018" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="20118018" data-action="add" title="Добавить в закладки"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#book"></use></svg></a>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <span class="icon_comment-branch js-comment_tree" data-id="20118018" data-parent_id="20117832" title="Показать ветку комментариев"><svg width="8" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#tree"></use></svg></span>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#comment_20117832" class="icon_comment-arrow-up js-comment_parent" data-id="20118018" data-parent_id="20117832" title="Показать предыдущий комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
    </li>

  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="#comment_20118018" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="20118018" data-parent_id="20117832" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="20118018" data-post-target="450512" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="plus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter voting-wjt__counter_positive  js-score" title="Всего голосов +1: ↑1 и ↓0">+1</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message ">Это как бы решение из коробки, 
очевидно перед разработчиками swift не стояла задача супер оптимизации, в
 rust как известно наоборот.</div>

        <div class="comment__footer">
    <a href="#reply" class="comment__footer-link reply_link" onclick="return comment_show_reply_form(20118018 )">Ответить</a>


</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-4" id="reply_comments_20118018">  <li class="content-list__item content-list__item_comment js-comment " rel="20118038">
    
    <span class="parent_id" data-parent_id="20118018"></span>
    <div class="comment" id="comment_20118038">
      <span class="comment__collapse" title="Свернуть/развернуть ветку комментариев" data-id="20118038"></span>
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head comment__head_topic-author comment__head_my-comment " rel="20118038">
          <a href="https://habr.com/ru/users/epishman/" class="user-info user-info_inline" rel="user-popover" data-user-login="epishman">
    <img src="Swift%20%D0%BF%D1%80%D0%BE%D1%82%D0%B8%D0%B2%20Rust%20%E2%80%94%20%D0%B1%D0%B5%D0%BD%D1%87%D0%BC%D0%B0%D1%80%D0%BA%D0%B8%D0%BD%D0%B3%20%D0%BD%D0%B0%20Linux%20%D1%81%20(%D0%BD%D0%B5)%D0%BF%D0%BE%D0%BD%D1%8F%D1%82%D0%BD%D1%8B%D0%BC%20%D1%84%D0%B8%D0%BD%D0%B0%D0%BB%D0%BE%D0%BC%20_%20%D0%A5%D0%B0%D0%B1%D1%80_files/ec0d88c4853c0d36d44bd0526dcfa8d7.png" class="user-info__image-pic user-info__image-pic_small" width="24" height="24">
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">epishman</span>
</a>

          
          <time class="comment__date-time comment__date-time_published">6 мая 2019 в 13:51</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="#comment_20118038" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="20118038" data-action="add" title="Добавить в закладки"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#book"></use></svg></a>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <span class="icon_comment-branch js-comment_tree" data-id="20118038" data-parent_id="20118018" title="Показать ветку комментариев"><svg width="8" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#tree"></use></svg></span>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#comment_20118018" class="icon_comment-arrow-up js-comment_parent" data-id="20118038" data-parent_id="20118018" title="Показать предыдущий комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
    </li>

  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="#comment_20118038" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="20118038" data-parent_id="20118018" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="20118038" data-post-target="450512" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="plus" onclick="comment_vote(this);" title="За свои комментарии голосовать нельзя" disabled="disabled"><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter voting-wjt__counter_positive  js-score" title="Всего голосов +1: ↑1 и ↓0">+1</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="За свои комментарии голосовать нельзя" disabled="disabled"><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message ">Ну, в общем, да. В браузере вообще невозможно файл потоково прочитать, и приходится ради такой мелочи ноду ставить :)</div>

        <div class="comment__footer">
    <a href="#reply" class="comment__footer-link reply_link" onclick="return comment_show_reply_form(20118038 )">Ответить</a>


</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-5" id="reply_comments_20118038">  <li class="content-list__item content-list__item_comment js-comment " rel="20552795">
    
    <span class="parent_id" data-parent_id="20118038"></span>
    <div class="comment" id="comment_20552795">
      <span class="comment__collapse" title="Свернуть/развернуть ветку комментариев" data-id="20552795"></span>
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head   " rel="20552795">
          <a href="https://habr.com/ru/users/nazarpc/" class="user-info user-info_inline" rel="user-popover" data-user-login="nazarpc">
    <img src="Swift%20%D0%BF%D1%80%D0%BE%D1%82%D0%B8%D0%B2%20Rust%20%E2%80%94%20%D0%B1%D0%B5%D0%BD%D1%87%D0%BC%D0%B0%D1%80%D0%BA%D0%B8%D0%BD%D0%B3%20%D0%BD%D0%B0%20Linux%20%D1%81%20(%D0%BD%D0%B5)%D0%BF%D0%BE%D0%BD%D1%8F%D1%82%D0%BD%D1%8B%D0%BC%20%D1%84%D0%B8%D0%BD%D0%B0%D0%BB%D0%BE%D0%BC%20_%20%D0%A5%D0%B0%D0%B1%D1%80_files/d5a0c62c8b01f774768b7f51ebb13270.jpg" class="user-info__image-pic user-info__image-pic_small" width="24" height="24">
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">nazarpc</span>
</a>

          
          <time class="comment__date-time comment__date-time_published">27 августа 2019 в 02:12</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="#comment_20552795" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="20552795" data-action="add" title="Добавить в закладки"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#book"></use></svg></a>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <span class="icon_comment-branch js-comment_tree" data-id="20552795" data-parent_id="20118038" title="Показать ветку комментариев"><svg width="8" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#tree"></use></svg></span>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#comment_20118038" class="icon_comment-arrow-up js-comment_parent" data-id="20552795" data-parent_id="20118038" title="Показать предыдущий комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
    </li>

  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="#comment_20552795" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="20552795" data-parent_id="20118038" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="20552795" data-post-target="450512" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="plus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter   js-score" title="Всего голосов 0: ↑0 и ↓0">0</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message ">Почему это нельзя? Ещё как можно: <a href="https://developer.mozilla.org/en-US/docs/Web/API/ReadableStream">developer.mozilla.org/en-US/docs/Web/API/ReadableStream</a></div>

        <div class="comment__footer">
    <a href="#reply" class="comment__footer-link reply_link" onclick="return comment_show_reply_form(20552795 )">Ответить</a>


</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-6" id="reply_comments_20552795"></ul>
  </li>
</ul>
  </li>
  <li class="content-list__item content-list__item_comment js-comment " rel="20118060">
    
    <span class="parent_id" data-parent_id="20118018"></span>
    <div class="comment" id="comment_20118060">
      <span class="comment__collapse" title="Свернуть/развернуть ветку комментариев" data-id="20118060"></span>
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head   " rel="20118060">
          <a href="https://habr.com/ru/users/PsyHaSTe/" class="user-info user-info_inline" rel="user-popover" data-user-login="PsyHaSTe">
    <img src="Swift%20%D0%BF%D1%80%D0%BE%D1%82%D0%B8%D0%B2%20Rust%20%E2%80%94%20%D0%B1%D0%B5%D0%BD%D1%87%D0%BC%D0%B0%D1%80%D0%BA%D0%B8%D0%BD%D0%B3%20%D0%BD%D0%B0%20Linux%20%D1%81%20(%D0%BD%D0%B5)%D0%BF%D0%BE%D0%BD%D1%8F%D1%82%D0%BD%D1%8B%D0%BC%20%D1%84%D0%B8%D0%BD%D0%B0%D0%BB%D0%BE%D0%BC%20_%20%D0%A5%D0%B0%D0%B1%D1%80_files/7631ac5e5a7e237a937f5f2a74ae4c9e.jpg" class="user-info__image-pic user-info__image-pic_small" width="24" height="24">
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">PsyHaSTe</span>
</a>

          
          <time class="comment__date-time comment__date-time_published">6 мая 2019 в 13:53</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="#comment_20118060" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="20118060" data-action="add" title="Добавить в закладки"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#book"></use></svg></a>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <span class="icon_comment-branch js-comment_tree" data-id="20118060" data-parent_id="20118018" title="Показать ветку комментариев"><svg width="8" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#tree"></use></svg></span>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#comment_20118018" class="icon_comment-arrow-up js-comment_parent" data-id="20118060" data-parent_id="20118018" title="Показать предыдущий комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
    </li>

  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="#comment_20118060" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="20118060" data-parent_id="20118018" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="20118060" data-post-target="450512" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="plus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter voting-wjt__counter_positive  js-score" title="Всего голосов +2: ↑2 и ↓0">+2</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message "><p>В расте тоже есть решение из коробки <code>let val = serde_json::from_str(file)</code>, только сравниваем мы вроде не стандартные функции работы с JSON, а более-менее эквивалентный код.</p></div>

        <div class="comment__footer">
    <a href="#reply" class="comment__footer-link reply_link" onclick="return comment_show_reply_form(20118060 )">Ответить</a>


</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-5" id="reply_comments_20118060">  <li class="content-list__item content-list__item_comment js-comment " rel="20118170">
    
    <span class="parent_id" data-parent_id="20118060"></span>
    <div class="comment" id="comment_20118170">
      <span class="comment__collapse" title="Свернуть/развернуть ветку комментариев" data-id="20118170"></span>
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head   " rel="20118170">
          <a href="https://habr.com/ru/users/NishchebrodKolya2/" class="user-info user-info_inline" rel="user-popover" data-user-login="NishchebrodKolya2">
    <svg class="default-image default-image_mini default-image_pink" width="24" height="24"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#slug"></use></svg>
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">NishchebrodKolya2</span>
</a>

          
          <time class="comment__date-time comment__date-time_published">6 мая 2019 в 14:10</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="#comment_20118170" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="20118170" data-action="add" title="Добавить в закладки"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#book"></use></svg></a>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <span class="icon_comment-branch js-comment_tree" data-id="20118170" data-parent_id="20118060" title="Показать ветку комментариев"><svg width="8" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#tree"></use></svg></span>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#comment_20118060" class="icon_comment-arrow-up js-comment_parent" data-id="20118170" data-parent_id="20118060" title="Показать предыдущий комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
    </li>

  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="#comment_20118170" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="20118170" data-parent_id="20118060" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="20118170" data-post-target="450512" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="plus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter voting-wjt__counter_positive  js-score" title="Всего голосов +2: ↑2 и ↓0">+2</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message ">Почему бы нам тогда не сравнить эквивалентный код на C++ и Java, и не порадоваться какой молодец C++?</div>

        <div class="comment__footer">
    <a href="#reply" class="comment__footer-link reply_link" onclick="return comment_show_reply_form(20118170 )">Ответить</a>


</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-6" id="reply_comments_20118170">  <li class="content-list__item content-list__item_comment js-comment " rel="20118184">
    
    <span class="parent_id" data-parent_id="20118170"></span>
    <div class="comment" id="comment_20118184">
      <span class="comment__collapse" title="Свернуть/развернуть ветку комментариев" data-id="20118184"></span>
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head   " rel="20118184">
          <a href="https://habr.com/ru/users/PsyHaSTe/" class="user-info user-info_inline" rel="user-popover" data-user-login="PsyHaSTe">
    <img src="Swift%20%D0%BF%D1%80%D0%BE%D1%82%D0%B8%D0%B2%20Rust%20%E2%80%94%20%D0%B1%D0%B5%D0%BD%D1%87%D0%BC%D0%B0%D1%80%D0%BA%D0%B8%D0%BD%D0%B3%20%D0%BD%D0%B0%20Linux%20%D1%81%20(%D0%BD%D0%B5)%D0%BF%D0%BE%D0%BD%D1%8F%D1%82%D0%BD%D1%8B%D0%BC%20%D1%84%D0%B8%D0%BD%D0%B0%D0%BB%D0%BE%D0%BC%20_%20%D0%A5%D0%B0%D0%B1%D1%80_files/7631ac5e5a7e237a937f5f2a74ae4c9e.jpg" class="user-info__image-pic user-info__image-pic_small" width="24" height="24">
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">PsyHaSTe</span>
</a>

          
          <time class="comment__date-time comment__date-time_published">6 мая 2019 в 14:12</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="#comment_20118184" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="20118184" data-action="add" title="Добавить в закладки"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#book"></use></svg></a>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <span class="icon_comment-branch js-comment_tree" data-id="20118184" data-parent_id="20118170" title="Показать ветку комментариев"><svg width="8" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#tree"></use></svg></span>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#comment_20118170" class="icon_comment-arrow-up js-comment_parent" data-id="20118184" data-parent_id="20118170" title="Показать предыдущий комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
    </li>

  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="#comment_20118184" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="20118184" data-parent_id="20118170" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="20118184" data-post-target="450512" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="plus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter voting-wjt__counter_positive  js-score" title="Всего голосов +1: ↑1 и ↓0">+1</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message "><p>Напишите, почему бы и нет? Чем больше сравнений, тем лучше.</p></div>

        <div class="comment__footer">
    <a href="#reply" class="comment__footer-link reply_link" onclick="return comment_show_reply_form(20118184 )">Ответить</a>


</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-7" id="reply_comments_20118184">  <li class="content-list__item content-list__item_comment js-comment " rel="20118394">
    
    <span class="parent_id" data-parent_id="20118184"></span>
    <div class="comment" id="comment_20118394">
      <span class="comment__collapse" title="Свернуть/развернуть ветку комментариев" data-id="20118394"></span>
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head   " rel="20118394">
          <a href="https://habr.com/ru/users/NishchebrodKolya2/" class="user-info user-info_inline" rel="user-popover" data-user-login="NishchebrodKolya2">
    <svg class="default-image default-image_mini default-image_pink" width="24" height="24"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#slug"></use></svg>
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">NishchebrodKolya2</span>
</a>

          
          <time class="comment__date-time comment__date-time_published">6 мая 2019 в 14:40</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="#comment_20118394" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="20118394" data-action="add" title="Добавить в закладки"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#book"></use></svg></a>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <span class="icon_comment-branch js-comment_tree" data-id="20118394" data-parent_id="20118184" title="Показать ветку комментариев"><svg width="8" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#tree"></use></svg></span>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#comment_20118184" class="icon_comment-arrow-up js-comment_parent" data-id="20118394" data-parent_id="20118184" title="Показать предыдущий комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
    </li>

  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="#comment_20118394" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="20118394" data-parent_id="20118184" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="20118394" data-post-target="450512" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="plus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter  voting-wjt__counter_negative js-score" title="Всего голосов –3: ↑1 и ↓4">–3</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message comment__message_downgrade comment__message_downgrade-3">Там где java, с++ вообще не котируется и наоборот. По этому это Вы напишите, а мы почитаем.</div>

        <div class="comment__footer">
    <a href="#reply" class="comment__footer-link reply_link" onclick="return comment_show_reply_form(20118394 )">Ответить</a>


</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-8" id="reply_comments_20118394"></ul>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="content-list__item content-list__item_comment js-comment " rel="20121548">
    
    <span class="parent_id" data-parent_id="20117832"></span>
    <div class="comment" id="comment_20121548">
      <span class="comment__collapse" title="Свернуть/развернуть ветку комментариев" data-id="20121548"></span>
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head   " rel="20121548">
          <a href="https://habr.com/ru/users/XanKraegor/" class="user-info user-info_inline" rel="user-popover" data-user-login="XanKraegor">
    <img src="Swift%20%D0%BF%D1%80%D0%BE%D1%82%D0%B8%D0%B2%20Rust%20%E2%80%94%20%D0%B1%D0%B5%D0%BD%D1%87%D0%BC%D0%B0%D1%80%D0%BA%D0%B8%D0%BD%D0%B3%20%D0%BD%D0%B0%20Linux%20%D1%81%20(%D0%BD%D0%B5)%D0%BF%D0%BE%D0%BD%D1%8F%D1%82%D0%BD%D1%8B%D0%BC%20%D1%84%D0%B8%D0%BD%D0%B0%D0%BB%D0%BE%D0%BC%20_%20%D0%A5%D0%B0%D0%B1%D1%80_files/18ad12672848fff486e0b5bb2fbac9ba.jpg" class="user-info__image-pic user-info__image-pic_small" width="24" height="24">
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">XanKraegor</span>
</a>

          
          <time class="comment__date-time comment__date-time_published">7 мая 2019 в 06:09</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="#comment_20121548" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="20121548" data-action="add" title="Добавить в закладки"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#book"></use></svg></a>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <span class="icon_comment-branch js-comment_tree" data-id="20121548" data-parent_id="20117832" title="Показать ветку комментариев"><svg width="8" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#tree"></use></svg></span>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#comment_20117832" class="icon_comment-arrow-up js-comment_parent" data-id="20121548" data-parent_id="20117832" title="Показать предыдущий комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
    </li>

  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="#comment_20121548" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="20121548" data-parent_id="20117832" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="20121548" data-post-target="450512" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="plus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter   js-score" title="Всего голосов 0: ↑0 и ↓0">0</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message "><p>А что мешает «по-честному» декодировать таким же способом, но построчно или чанками из буфера?</p></div>

        <div class="comment__footer">
    <a href="#reply" class="comment__footer-link reply_link" onclick="return comment_show_reply_form(20121548 )">Ответить</a>


</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-4" id="reply_comments_20121548"></ul>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="content-list__item content-list__item_comment js-comment " rel="20117328">
    
    <span class="parent_id" data-parent_id="20117184"></span>
    <div class="comment" id="comment_20117328">
      <span class="comment__collapse" title="Свернуть/развернуть ветку комментариев" data-id="20117328"></span>
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head   " rel="20117328">
          <a href="https://habr.com/ru/users/agalakhov/" class="user-info user-info_inline" rel="user-popover" data-user-login="agalakhov">
    <svg class="default-image default-image_mini default-image_green" width="24" height="24"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#slug"></use></svg>
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">agalakhov</span>
</a>

          <svg class="icon_comment-edit" title="Комментарий был изменен" width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#pencil"></use></svg>
          <time class="comment__date-time comment__date-time_published">6 мая 2019 в 12:08</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="#comment_20117328" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="20117328" data-action="add" title="Добавить в закладки"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#book"></use></svg></a>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <span class="icon_comment-branch js-comment_tree" data-id="20117328" data-parent_id="20117184" title="Показать ветку комментариев"><svg width="8" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#tree"></use></svg></span>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#comment_20117184" class="icon_comment-arrow-up js-comment_parent" data-id="20117328" data-parent_id="20117184" title="Показать предыдущий комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
    </li>

  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="#comment_20117328" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="20117328" data-parent_id="20117184" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="20117328" data-post-target="450512" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="plus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter voting-wjt__counter_positive  js-score" title="Всего голосов +5: ↑8 и ↓3">+5</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message ">C++ проиграет, если на Rust 
писать чисто. Потому что на ту игру со ссылками, которая нормальна в 
Rust с его borrow checker, ни один программист C++ в здравом уме не 
решится и будет копировать строки.<br>
<br>
Сравнение Rust и Swift более чем корректно, потому что это очень похожие
 по синтаксису языки. Компилятор Swift мог бы быть таким же быстрым, как
 Rust, если бы его разработчики не халтурили.</div>

        <div class="comment__footer">
    <a href="#reply" class="comment__footer-link reply_link" onclick="return comment_show_reply_form(20117328 )">Ответить</a>


</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-1" id="reply_comments_20117328">  <li class="content-list__item content-list__item_comment js-comment " rel="20117388">
    
    <span class="parent_id" data-parent_id="20117328"></span>
    <div class="comment" id="comment_20117388">
      <span class="comment__collapse" title="Свернуть/развернуть ветку комментариев" data-id="20117388"></span>
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head comment__head_topic-author comment__head_my-comment " rel="20117388">
          <a href="https://habr.com/ru/users/epishman/" class="user-info user-info_inline" rel="user-popover" data-user-login="epishman">
    <img src="Swift%20%D0%BF%D1%80%D0%BE%D1%82%D0%B8%D0%B2%20Rust%20%E2%80%94%20%D0%B1%D0%B5%D0%BD%D1%87%D0%BC%D0%B0%D1%80%D0%BA%D0%B8%D0%BD%D0%B3%20%D0%BD%D0%B0%20Linux%20%D1%81%20(%D0%BD%D0%B5)%D0%BF%D0%BE%D0%BD%D1%8F%D1%82%D0%BD%D1%8B%D0%BC%20%D1%84%D0%B8%D0%BD%D0%B0%D0%BB%D0%BE%D0%BC%20_%20%D0%A5%D0%B0%D0%B1%D1%80_files/ec0d88c4853c0d36d44bd0526dcfa8d7.png" class="user-info__image-pic user-info__image-pic_small" width="24" height="24">
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">epishman</span>
</a>

          
          <time class="comment__date-time comment__date-time_published">6 мая 2019 в 12:17</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="#comment_20117388" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="20117388" data-action="add" title="Добавить в закладки"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#book"></use></svg></a>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <span class="icon_comment-branch js-comment_tree" data-id="20117388" data-parent_id="20117328" title="Показать ветку комментариев"><svg width="8" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#tree"></use></svg></span>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#comment_20117328" class="icon_comment-arrow-up js-comment_parent" data-id="20117388" data-parent_id="20117328" title="Показать предыдущий комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
    </li>

  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="#comment_20117388" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="20117388" data-parent_id="20117328" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="20117388" data-post-target="450512" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="plus" onclick="comment_vote(this);" title="За свои комментарии голосовать нельзя" disabled="disabled"><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter voting-wjt__counter_positive  js-score" title="Всего голосов +1: ↑1 и ↓0">+1</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="За свои комментарии голосовать нельзя" disabled="disabled"><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message ">Насколько я понимаю, в свифте любые указатели это Arc&lt;&gt;, может поэтому и тормоза.</div>

        <div class="comment__footer">
    <a href="#reply" class="comment__footer-link reply_link" onclick="return comment_show_reply_form(20117388 )">Ответить</a>


</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-2" id="reply_comments_20117388"></ul>
  </li>
  <li class="content-list__item content-list__item_comment js-comment " rel="20117764">
    
    <span class="parent_id" data-parent_id="20117328"></span>
    <div class="comment" id="comment_20117764">
      <span class="comment__collapse" title="Свернуть/развернуть ветку комментариев" data-id="20117764"></span>
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head   " rel="20117764">
          <a href="https://habr.com/ru/users/NishchebrodKolya2/" class="user-info user-info_inline" rel="user-popover" data-user-login="NishchebrodKolya2">
    <svg class="default-image default-image_mini default-image_pink" width="24" height="24"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#slug"></use></svg>
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">NishchebrodKolya2</span>
</a>

          
          <time class="comment__date-time comment__date-time_published">6 мая 2019 в 13:11</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="#comment_20117764" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="20117764" data-action="add" title="Добавить в закладки"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#book"></use></svg></a>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <span class="icon_comment-branch js-comment_tree" data-id="20117764" data-parent_id="20117328" title="Показать ветку комментариев"><svg width="8" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#tree"></use></svg></span>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#comment_20117328" class="icon_comment-arrow-up js-comment_parent" data-id="20117764" data-parent_id="20117328" title="Показать предыдущий комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
    </li>

  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="#comment_20117764" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="20117764" data-parent_id="20117328" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="20117764" data-post-target="450512" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="plus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter voting-wjt__counter_positive  js-score" title="Всего голосов +1: ↑1 и ↓0">+1</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message ">Свифт ни разу не позиционируется 
как самый быстрый, и корректнее было бы его сравнивать с Kotlin Native, 
тот вроде тоже с ARC и под мобилки.</div>

        <div class="comment__footer">
    <a href="#reply" class="comment__footer-link reply_link" onclick="return comment_show_reply_form(20117764 )">Ответить</a>


</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-2" id="reply_comments_20117764"></ul>
  </li>
  <li class="content-list__item content-list__item_comment js-comment " rel="20118104">
    
    <span class="parent_id" data-parent_id="20117328"></span>
    <div class="comment" id="comment_20118104">
      <span class="comment__collapse" title="Свернуть/развернуть ветку комментариев" data-id="20118104"></span>
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head   " rel="20118104">
          <a href="https://habr.com/ru/users/veslemay/" class="user-info user-info_inline" rel="user-popover" data-user-login="veslemay">
    <svg class="default-image default-image_mini default-image_pink" width="24" height="24"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#slug"></use></svg>
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">veslemay</span>
</a>

          
          <time class="comment__date-time comment__date-time_published">6 мая 2019 в 13:59</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="#comment_20118104" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="20118104" data-action="add" title="Добавить в закладки"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#book"></use></svg></a>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <span class="icon_comment-branch js-comment_tree" data-id="20118104" data-parent_id="20117328" title="Показать ветку комментариев"><svg width="8" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#tree"></use></svg></span>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#comment_20117328" class="icon_comment-arrow-up js-comment_parent" data-id="20118104" data-parent_id="20117328" title="Показать предыдущий комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
    </li>

  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="#comment_20118104" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="20118104" data-parent_id="20117328" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="20118104" data-post-target="450512" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="plus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter  voting-wjt__counter_negative js-score" title="Всего голосов –16: ↑6 и ↓22">–16</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message comment__message_downgrade comment__message_downgrade-5"><blockquote>C++ проиграет, если на Rust писать чисто.</blockquote><br>
Везде и всюду видно обратное и именно поэтому rust целиком и полностью С/С++-зависим.<br>
<br>
<blockquote>ни один программист C++ в здравом уме не решится и будет копировать строки.</blockquote><br>
И что же мне помешает? Что мешает другим? Везде и всюду не копируются, а тут вдруг кто-то сообщают обратное.<br>
<br>
К тому же, раст состоит целиком и полностью из копирования. Там 
копируется всё и единственное, что ему позволяет существовать — это llvm
 и его оптимизации, которые выпиливают все эти копирования.<br>
<br>
<blockquote>Сравнение Rust и Swift более чем корректно, потому что это очень похожие по синтаксису языки. </blockquote><br>
Неверно. Раст целиком и полностью состоит из костылей из которых не 
состоит тот же свифт, та же жава, сишарп — тысячи их. Как минимум там 
нет исключений, а значит он никому ненужен.<br>
<br>
<blockquote>Компилятор Swift мог бы быть таким же быстрым, как Rust, если бы его разработчики не халтурили.</blockquote><br>
Именно компилятор раста халтура, ведь раст существует только благодаря 
халяве, которую даёт llvm(т.е. С++). У раста вообще нет никакого 
компилятора — есть огрызок фронта, который так же завязан на 
llvm-рантайме.<br>
<br>
Для понимания всей нелепости раста без халявы — достаточно взглянуть на 
код «без оптимизаций» — это то, что генерирует «компилятор» раста. Хотя 
об этом я уже говорил выше.</div>

        <div class="comment__footer">
    <a href="#reply" class="comment__footer-link reply_link" onclick="return comment_show_reply_form(20118104 )">Ответить</a>


</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-2" id="reply_comments_20118104">  <li class="content-list__item content-list__item_comment js-comment " rel="20118128">
    
    <span class="parent_id" data-parent_id="20118104"></span>
    <div class="comment" id="comment_20118128">
      <span class="comment__collapse" title="Свернуть/развернуть ветку комментариев" data-id="20118128"></span>
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head   " rel="20118128">
          <a href="https://habr.com/ru/users/PsyHaSTe/" class="user-info user-info_inline" rel="user-popover" data-user-login="PsyHaSTe">
    <img src="Swift%20%D0%BF%D1%80%D0%BE%D1%82%D0%B8%D0%B2%20Rust%20%E2%80%94%20%D0%B1%D0%B5%D0%BD%D1%87%D0%BC%D0%B0%D1%80%D0%BA%D0%B8%D0%BD%D0%B3%20%D0%BD%D0%B0%20Linux%20%D1%81%20(%D0%BD%D0%B5)%D0%BF%D0%BE%D0%BD%D1%8F%D1%82%D0%BD%D1%8B%D0%BC%20%D1%84%D0%B8%D0%BD%D0%B0%D0%BB%D0%BE%D0%BC%20_%20%D0%A5%D0%B0%D0%B1%D1%80_files/7631ac5e5a7e237a937f5f2a74ae4c9e.jpg" class="user-info__image-pic user-info__image-pic_small" width="24" height="24">
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">PsyHaSTe</span>
</a>

          <svg class="icon_comment-edit" title="Комментарий был изменен" width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#pencil"></use></svg>
          <time class="comment__date-time comment__date-time_published">6 мая 2019 в 14:01</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="#comment_20118128" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="20118128" data-action="add" title="Добавить в закладки"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#book"></use></svg></a>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <span class="icon_comment-branch js-comment_tree" data-id="20118128" data-parent_id="20118104" title="Показать ветку комментариев"><svg width="8" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#tree"></use></svg></span>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#comment_20118104" class="icon_comment-arrow-up js-comment_parent" data-id="20118128" data-parent_id="20118104" title="Показать предыдущий комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
    </li>

  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="#comment_20118128" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="20118128" data-parent_id="20118104" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="20118128" data-post-target="450512" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="plus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter voting-wjt__counter_positive  js-score" title="Всего голосов +7: ↑7 и ↓0">+7</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message "><blockquote>Везде и всюду видно обратное и именно поэтому rust целиком и полностью С/С++-зависим.</blockquote><p>Каким образом раст С-зависим? Ну не считая всяких врапперов, но это про любой язык сказать можно.</p><br>
<blockquote>И что же мне помешает? Что мешает другим? Везде и всюду не копируются, а тут вдруг кто-то сообщают обратное.</blockquote><p><a href="https://manishearth.github.io/blog/2015/05/03/where-rust-really-shines/">Тут</a>
 вкратце, почему не получится. Если в двух словах, то в плюсах это будет
 очень хрупко, и буст по перфомансу не окупит потенциальных проблем.</p><br>
<blockquote>Неверно. Раст целиком и полностью состоит из костылей из 
которых не состоит тот же свифт, та же жава, сишарп — тысячи их. Как 
минимум там нет исключений, а значит он никому ненужен.</blockquote><p>Ха-ха</p><br>
<blockquote>Именно компилятор раста халтура, ведь раст существует только
 благодаря халяве, которую даёт llvm(т.е. С++). У раста вообще нет 
никакого компилятора — есть огрызок фронта, который так же завязан на 
llvm-рантайме.</blockquote><p>Это плохо?</p></div>

        <div class="comment__footer">
    <a href="#reply" class="comment__footer-link reply_link" onclick="return comment_show_reply_form(20118128 )">Ответить</a>


</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-3" id="reply_comments_20118128">  <li class="content-list__item content-list__item_comment js-comment " rel="20126606">
    
    <span class="parent_id" data-parent_id="20118128"></span>
    <div class="comment" id="comment_20126606">
      <span class="comment__collapse" title="Свернуть/развернуть ветку комментариев" data-id="20126606"></span>
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head   " rel="20126606">
          <a href="https://habr.com/ru/users/KanuTaH/" class="user-info user-info_inline" rel="user-popover" data-user-login="KanuTaH">
    <img src="Swift%20%D0%BF%D1%80%D0%BE%D1%82%D0%B8%D0%B2%20Rust%20%E2%80%94%20%D0%B1%D0%B5%D0%BD%D1%87%D0%BC%D0%B0%D1%80%D0%BA%D0%B8%D0%BD%D0%B3%20%D0%BD%D0%B0%20Linux%20%D1%81%20(%D0%BD%D0%B5)%D0%BF%D0%BE%D0%BD%D1%8F%D1%82%D0%BD%D1%8B%D0%BC%20%D1%84%D0%B8%D0%BD%D0%B0%D0%BB%D0%BE%D0%BC%20_%20%D0%A5%D0%B0%D0%B1%D1%80_files/de79b1dd4d8c2305b72dd794b21141d7.png" class="user-info__image-pic user-info__image-pic_small" width="24" height="24">
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">KanuTaH</span>
</a>

          <svg class="icon_comment-edit" title="Комментарий был изменен" width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#pencil"></use></svg>
          <time class="comment__date-time comment__date-time_published">8 мая 2019 в 02:51</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="#comment_20126606" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="20126606" data-action="add" title="Добавить в закладки"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#book"></use></svg></a>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <span class="icon_comment-branch js-comment_tree" data-id="20126606" data-parent_id="20118128" title="Показать ветку комментариев"><svg width="8" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#tree"></use></svg></span>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#comment_20118128" class="icon_comment-arrow-up js-comment_parent" data-id="20126606" data-parent_id="20118128" title="Показать предыдущий комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
    </li>

  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="#comment_20126606" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="20126606" data-parent_id="20118128" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="20126606" data-post-target="450512" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="plus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter   js-score" title="Всего голосов 0: ↑0 и ↓0">0</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message "><blockquote>Тут вкратце, почему не получится.</blockquote><br>
Эм… Не понял, в чем проблема. «If I wished to use a pointer I would need
 to be sure that the vector isn’t deallocated by the time I’m done with 
it» — для этого есть умные указатели. «And more importantly, to be sure 
that no other code pushes to the vector (when a vector overflows its 
capacity it will be reallocated, invalidating any other pointers to its 
contents)» — так не надо пихать в вектор сами строки, пихай туда 
указатели на строки в куче, resize вектора никак не повлияет на 
указатели на сами объекты. Более того, std мир не ограничивается, есть 
другие реализации, например, Qt с его implicit sharing, там копирование 
объектов из-за этого дешевое потому, что самого копирования там как 
такового нет (пока ты не захочешь изменить одну из копий), причем все 
это реализовано абсолютно прозрачно. В общем, странно мне это читать, 
это из разряда страшилок скорее.</div>

        <div class="comment__footer">
    <a href="#reply" class="comment__footer-link reply_link" onclick="return comment_show_reply_form(20126606 )">Ответить</a>


</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-4" id="reply_comments_20126606">  <li class="content-list__item content-list__item_comment js-comment " rel="20127118">
    
    <span class="parent_id" data-parent_id="20126606"></span>
    <div class="comment" id="comment_20127118">
      <span class="comment__collapse" title="Свернуть/развернуть ветку комментариев" data-id="20127118"></span>
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head   " rel="20127118">
          <a href="https://habr.com/ru/users/mayorovp/" class="user-info user-info_inline" rel="user-popover" data-user-login="mayorovp">
    <svg class="default-image default-image_mini default-image_pink" width="24" height="24"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#slug"></use></svg>
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">mayorovp</span>
</a>

          
          <time class="comment__date-time comment__date-time_published">8 мая 2019 в 09:23</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="#comment_20127118" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="20127118" data-action="add" title="Добавить в закладки"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#book"></use></svg></a>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <span class="icon_comment-branch js-comment_tree" data-id="20127118" data-parent_id="20126606" title="Показать ветку комментариев"><svg width="8" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#tree"></use></svg></span>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#comment_20126606" class="icon_comment-arrow-up js-comment_parent" data-id="20127118" data-parent_id="20126606" title="Показать предыдущий комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
    </li>

  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="#comment_20127118" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="20127118" data-parent_id="20126606" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="20127118" data-post-target="450512" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small voting-wjt__button_plus" data-action="plus" onclick="comment_vote(this);" title="Вы проголосовали положительно " disabled="disabled"><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter voting-wjt__counter_positive  js-score" title="Всего голосов +3: ↑3 и ↓0">+3</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="Вы проголосовали положительно , отменить голос нельзя" disabled="disabled"><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message "><p>Умные указатели требуют затрат
 в рантайме. Поэтому на плюсах приходится выбирать между быстрыми сырыми
 указателями и медленными умными.</p></div>

        <div class="comment__footer">
    <a href="#reply" class="comment__footer-link reply_link" onclick="return comment_show_reply_form(20127118 )">Ответить</a>


</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-5" id="reply_comments_20127118">  <li class="content-list__item content-list__item_comment js-comment " rel="20127422">
    
    <span class="parent_id" data-parent_id="20127118"></span>
    <div class="comment" id="comment_20127422">
      <span class="comment__collapse" title="Свернуть/развернуть ветку комментариев" data-id="20127422"></span>
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head   " rel="20127422">
          <a href="https://habr.com/ru/users/KanuTaH/" class="user-info user-info_inline" rel="user-popover" data-user-login="KanuTaH">
    <img src="Swift%20%D0%BF%D1%80%D0%BE%D1%82%D0%B8%D0%B2%20Rust%20%E2%80%94%20%D0%B1%D0%B5%D0%BD%D1%87%D0%BC%D0%B0%D1%80%D0%BA%D0%B8%D0%BD%D0%B3%20%D0%BD%D0%B0%20Linux%20%D1%81%20(%D0%BD%D0%B5)%D0%BF%D0%BE%D0%BD%D1%8F%D1%82%D0%BD%D1%8B%D0%BC%20%D1%84%D0%B8%D0%BD%D0%B0%D0%BB%D0%BE%D0%BC%20_%20%D0%A5%D0%B0%D0%B1%D1%80_files/de79b1dd4d8c2305b72dd794b21141d7.png" class="user-info__image-pic user-info__image-pic_small" width="24" height="24">
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">KanuTaH</span>
</a>

          
          <time class="comment__date-time comment__date-time_published">8 мая 2019 в 10:16</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="#comment_20127422" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="20127422" data-action="add" title="Добавить в закладки"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#book"></use></svg></a>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <span class="icon_comment-branch js-comment_tree" data-id="20127422" data-parent_id="20127118" title="Показать ветку комментариев"><svg width="8" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#tree"></use></svg></span>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#comment_20127118" class="icon_comment-arrow-up js-comment_parent" data-id="20127422" data-parent_id="20127118" title="Показать предыдущий комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
    </li>

  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="#comment_20127422" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="20127422" data-parent_id="20127118" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="20127422" data-post-target="450512" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="plus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter  voting-wjt__counter_negative js-score" title="Всего голосов –1: ↑0 и ↓1">–1</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message comment__message_downgrade comment__message_downgrade-1">Зато они работают везде, а не только в пределах вашего собственного кода.</div>

        <div class="comment__footer">
    <a href="#reply" class="comment__footer-link reply_link" onclick="return comment_show_reply_form(20127422 )">Ответить</a>


</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-6" id="reply_comments_20127422">  <li class="content-list__item content-list__item_comment js-comment " rel="20127426">
    
    <span class="parent_id" data-parent_id="20127422"></span>
    <div class="comment" id="comment_20127426">
      <span class="comment__collapse" title="Свернуть/развернуть ветку комментариев" data-id="20127426"></span>
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head   " rel="20127426">
          <a href="https://habr.com/ru/users/mayorovp/" class="user-info user-info_inline" rel="user-popover" data-user-login="mayorovp">
    <svg class="default-image default-image_mini default-image_pink" width="24" height="24"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#slug"></use></svg>
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">mayorovp</span>
</a>

          <svg class="icon_comment-edit" title="Комментарий был изменен" width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#pencil"></use></svg>
          <time class="comment__date-time comment__date-time_published">8 мая 2019 в 10:17</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="#comment_20127426" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="20127426" data-action="add" title="Добавить в закладки"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#book"></use></svg></a>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <span class="icon_comment-branch js-comment_tree" data-id="20127426" data-parent_id="20127422" title="Показать ветку комментариев"><svg width="8" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#tree"></use></svg></span>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#comment_20127422" class="icon_comment-arrow-up js-comment_parent" data-id="20127426" data-parent_id="20127422" title="Показать предыдущий комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
    </li>

  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="#comment_20127426" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="20127426" data-parent_id="20127422" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="20127426" data-post-target="450512" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="plus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter   js-score" title="Всего голосов 0: ↑0 и ↓0">0</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message "><p>Возвращаю вам ваш аргумент: и как же они будут работать, если владелец объекта — внешняя dll? :-)</p></div>

        <div class="comment__footer">
    <a href="#reply" class="comment__footer-link reply_link" onclick="return comment_show_reply_form(20127426 )">Ответить</a>


</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-7" id="reply_comments_20127426">  <li class="content-list__item content-list__item_comment js-comment " rel="20127430">
    
    <span class="parent_id" data-parent_id="20127426"></span>
    <div class="comment" id="comment_20127430">
      <span class="comment__collapse" title="Свернуть/развернуть ветку комментариев" data-id="20127430"></span>
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head   " rel="20127430">
          <a href="https://habr.com/ru/users/KanuTaH/" class="user-info user-info_inline" rel="user-popover" data-user-login="KanuTaH">
    <img src="Swift%20%D0%BF%D1%80%D0%BE%D1%82%D0%B8%D0%B2%20Rust%20%E2%80%94%20%D0%B1%D0%B5%D0%BD%D1%87%D0%BC%D0%B0%D1%80%D0%BA%D0%B8%D0%BD%D0%B3%20%D0%BD%D0%B0%20Linux%20%D1%81%20(%D0%BD%D0%B5)%D0%BF%D0%BE%D0%BD%D1%8F%D1%82%D0%BD%D1%8B%D0%BC%20%D1%84%D0%B8%D0%BD%D0%B0%D0%BB%D0%BE%D0%BC%20_%20%D0%A5%D0%B0%D0%B1%D1%80_files/de79b1dd4d8c2305b72dd794b21141d7.png" class="user-info__image-pic user-info__image-pic_small" width="24" height="24">
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">KanuTaH</span>
</a>

          
          <time class="comment__date-time comment__date-time_published">8 мая 2019 в 10:19</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="#comment_20127430" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="20127430" data-action="add" title="Добавить в закладки"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#book"></use></svg></a>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <span class="icon_comment-branch js-comment_tree" data-id="20127430" data-parent_id="20127426" title="Показать ветку комментариев"><svg width="8" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#tree"></use></svg></span>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#comment_20127426" class="icon_comment-arrow-up js-comment_parent" data-id="20127430" data-parent_id="20127426" title="Показать предыдущий комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
    </li>

  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="#comment_20127430" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="20127430" data-parent_id="20127426" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="20127430" data-post-target="450512" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="plus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter   js-score" title="Всего голосов 0: ↑0 и ↓0">0</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message ">Эм… Куча-то у них общая, почему бы им и не работать?</div>

        <div class="comment__footer">
    <a href="#reply" class="comment__footer-link reply_link" onclick="return comment_show_reply_form(20127430 )">Ответить</a>


</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-8" id="reply_comments_20127430">  <li class="content-list__item content-list__item_comment js-comment " rel="20127486">
    
    <span class="parent_id" data-parent_id="20127430"></span>
    <div class="comment" id="comment_20127486">
      <span class="comment__collapse" title="Свернуть/развернуть ветку комментариев" data-id="20127486"></span>
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head   " rel="20127486">
          <a href="https://habr.com/ru/users/mayorovp/" class="user-info user-info_inline" rel="user-popover" data-user-login="mayorovp">
    <svg class="default-image default-image_mini default-image_pink" width="24" height="24"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#slug"></use></svg>
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">mayorovp</span>
</a>

          
          <time class="comment__date-time comment__date-time_published">8 мая 2019 в 10:25</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="#comment_20127486" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="20127486" data-action="add" title="Добавить в закладки"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#book"></use></svg></a>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <span class="icon_comment-branch js-comment_tree" data-id="20127486" data-parent_id="20127430" title="Показать ветку комментариев"><svg width="8" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#tree"></use></svg></span>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#comment_20127430" class="icon_comment-arrow-up js-comment_parent" data-id="20127486" data-parent_id="20127430" title="Показать предыдущий комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
    </li>

  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="#comment_20127486" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="20127486" data-parent_id="20127430" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="20127486" data-post-target="450512" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="plus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter   js-score" title="Всего голосов 0: ↑0 и ↓0">0</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message "><p>Потому что внешняя dll в ситуации "codebase, так сказать, неполная" может удалить объект наплевав на все ваши умные указатели.</p></div>

        <div class="comment__footer">
    <a href="#reply" class="comment__footer-link reply_link" onclick="return comment_show_reply_form(20127486 )">Ответить</a>


</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-9" id="reply_comments_20127486">  <li class="content-list__item content-list__item_comment js-comment " rel="20127530">
    
    <span class="parent_id" data-parent_id="20127486"></span>
    <div class="comment" id="comment_20127530">
      <span class="comment__collapse" title="Свернуть/развернуть ветку комментариев" data-id="20127530"></span>
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head   " rel="20127530">
          <a href="https://habr.com/ru/users/KanuTaH/" class="user-info user-info_inline" rel="user-popover" data-user-login="KanuTaH">
    <img src="Swift%20%D0%BF%D1%80%D0%BE%D1%82%D0%B8%D0%B2%20Rust%20%E2%80%94%20%D0%B1%D0%B5%D0%BD%D1%87%D0%BC%D0%B0%D1%80%D0%BA%D0%B8%D0%BD%D0%B3%20%D0%BD%D0%B0%20Linux%20%D1%81%20(%D0%BD%D0%B5)%D0%BF%D0%BE%D0%BD%D1%8F%D1%82%D0%BD%D1%8B%D0%BC%20%D1%84%D0%B8%D0%BD%D0%B0%D0%BB%D0%BE%D0%BC%20_%20%D0%A5%D0%B0%D0%B1%D1%80_files/de79b1dd4d8c2305b72dd794b21141d7.png" class="user-info__image-pic user-info__image-pic_small" width="24" height="24">
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">KanuTaH</span>
</a>

          
          <time class="comment__date-time comment__date-time_published">8 мая 2019 в 10:30</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="#comment_20127530" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="20127530" data-action="add" title="Добавить в закладки"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#book"></use></svg></a>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <span class="icon_comment-branch js-comment_tree" data-id="20127530" data-parent_id="20127486" title="Показать ветку комментариев"><svg width="8" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#tree"></use></svg></span>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#comment_20127486" class="icon_comment-arrow-up js-comment_parent" data-id="20127530" data-parent_id="20127486" title="Показать предыдущий комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
    </li>

  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="#comment_20127530" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="20127530" data-parent_id="20127486" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="20127530" data-post-target="450512" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="plus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter  voting-wjt__counter_negative js-score" title="Всего голосов –7: ↑0 и ↓7">–7</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message comment__message_downgrade comment__message_downgrade-5">А
 еще она может сделать rm -rf /. Ладно, в общем, вы скатываетесь в ту же
 демагогию, что и автор оригинальной статьи по ссылке, мне это не 
интересно. Просто имейте в виду для себя — когда вы пропагандируете 
rust, не делайте это так топорно. Для начинающих ваши аргументы могут 
показаться привлекательными, но для людей с опытом они выглядят… топорно
 и пропагандистски в плохом смысле. Я где-то понимаю, почему <a href="https://habr.com/ru/users/veslemay/" class="user_link">veslemay</a> так хейтит пропагандистов rust'а :)</div>

        <div class="comment__footer">
    <a href="#reply" class="comment__footer-link reply_link" onclick="return comment_show_reply_form(20127530 )">Ответить</a>


</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-10" id="reply_comments_20127530"></ul>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="content-list__item content-list__item_comment js-comment " rel="20171282">
    
    <span class="parent_id" data-parent_id="20127422"></span>
    <div class="comment" id="comment_20171282">
      <span class="comment__collapse" title="Свернуть/развернуть ветку комментариев" data-id="20171282"></span>
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head   " rel="20171282">
          <a href="https://habr.com/ru/users/DarthVictor/" class="user-info user-info_inline" rel="user-popover" data-user-login="DarthVictor">
    <img src="Swift%20%D0%BF%D1%80%D0%BE%D1%82%D0%B8%D0%B2%20Rust%20%E2%80%94%20%D0%B1%D0%B5%D0%BD%D1%87%D0%BC%D0%B0%D1%80%D0%BA%D0%B8%D0%BD%D0%B3%20%D0%BD%D0%B0%20Linux%20%D1%81%20(%D0%BD%D0%B5)%D0%BF%D0%BE%D0%BD%D1%8F%D1%82%D0%BD%D1%8B%D0%BC%20%D1%84%D0%B8%D0%BD%D0%B0%D0%BB%D0%BE%D0%BC%20_%20%D0%A5%D0%B0%D0%B1%D1%80_files/99438473db6c002035a5da3a5d85f7a9.jpg" class="user-info__image-pic user-info__image-pic_small" width="24" height="24">
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">DarthVictor</span>
</a>

          <svg class="icon_comment-edit" title="Комментарий был изменен" width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#pencil"></use></svg>
          <time class="comment__date-time comment__date-time_published">19 мая 2019 в 00:36</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="#comment_20171282" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="20171282" data-action="add" title="Добавить в закладки"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#book"></use></svg></a>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <span class="icon_comment-branch js-comment_tree" data-id="20171282" data-parent_id="20127422" title="Показать ветку комментариев"><svg width="8" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#tree"></use></svg></span>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#comment_20127422" class="icon_comment-arrow-up js-comment_parent" data-id="20171282" data-parent_id="20127422" title="Показать предыдущий комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
    </li>

  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="#comment_20171282" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="20171282" data-parent_id="20127422" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="20171282" data-post-target="450512" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="plus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter voting-wjt__counter_positive  js-score" title="Всего голосов +1: ↑1 и ↓0">+1</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message ">То ли дело плюсы, там даже в пределах вашего собственного кода собранного разными версиями компилятора нихрена не гарантируется.</div>

        <div class="comment__footer">
    <a href="#reply" class="comment__footer-link reply_link" onclick="return comment_show_reply_form(20171282 )">Ответить</a>


</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-7" id="reply_comments_20171282"></ul>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="content-list__item content-list__item_comment js-comment " rel="20128110">
    
    <span class="parent_id" data-parent_id="20126606"></span>
    <div class="comment" id="comment_20128110">
      <span class="comment__collapse" title="Свернуть/развернуть ветку комментариев" data-id="20128110"></span>
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head   " rel="20128110">
          <a href="https://habr.com/ru/users/PsyHaSTe/" class="user-info user-info_inline" rel="user-popover" data-user-login="PsyHaSTe">
    <img src="Swift%20%D0%BF%D1%80%D0%BE%D1%82%D0%B8%D0%B2%20Rust%20%E2%80%94%20%D0%B1%D0%B5%D0%BD%D1%87%D0%BC%D0%B0%D1%80%D0%BA%D0%B8%D0%BD%D0%B3%20%D0%BD%D0%B0%20Linux%20%D1%81%20(%D0%BD%D0%B5)%D0%BF%D0%BE%D0%BD%D1%8F%D1%82%D0%BD%D1%8B%D0%BC%20%D1%84%D0%B8%D0%BD%D0%B0%D0%BB%D0%BE%D0%BC%20_%20%D0%A5%D0%B0%D0%B1%D1%80_files/7631ac5e5a7e237a937f5f2a74ae4c9e.jpg" class="user-info__image-pic user-info__image-pic_small" width="24" height="24">
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">PsyHaSTe</span>
</a>

          <svg class="icon_comment-edit" title="Комментарий был изменен" width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#pencil"></use></svg>
          <time class="comment__date-time comment__date-time_published">8 мая 2019 в 12:01</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="#comment_20128110" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="20128110" data-action="add" title="Добавить в закладки"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#book"></use></svg></a>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <span class="icon_comment-branch js-comment_tree" data-id="20128110" data-parent_id="20126606" title="Показать ветку комментариев"><svg width="8" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#tree"></use></svg></span>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#comment_20126606" class="icon_comment-arrow-up js-comment_parent" data-id="20128110" data-parent_id="20126606" title="Показать предыдущий комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
    </li>

  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="#comment_20128110" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="20128110" data-parent_id="20126606" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="20128110" data-post-target="450512" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="plus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter voting-wjt__counter_positive  js-score" title="Всего голосов +1: ↑1 и ↓0">+1</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message "><blockquote>для этого есть умные указатели</blockquote><p>А вы их используете для <strong>каждой</strong> переменной? Я видел только использования, когда программист уверен, что тут они нужны.</p><br>
<blockquote>так не надо пихать в вектор сами строки, пихай туда указатели на строки в куче</blockquote><p>Что
 значит "не пихайте сами строки"? Строки это и так указатели на кучу где
 лежат данные, в лучшем случае они еще и длину хранят. </p><br>
<blockquote>если есть такая опасность, то никто не мешает хранить в векторе такие же shared_ptr на атрибуты</blockquote><p>Даже если использовать shared_ptr через shared_ptr отстрелить ногу вполне себе легко можно:</p><br>
<pre><code class="cpp hljs"><span class="hljs-meta"><span class="hljs-meta">#</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">include</span></span></span><span class="hljs-meta"> </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">&lt;memory&gt;</span></span></span></span>
<span class="hljs-meta"><span class="hljs-meta">#</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">include</span></span></span><span class="hljs-meta"> </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">&lt;iostream&gt;</span></span></span></span>
<span class="hljs-meta"><span class="hljs-meta">#</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">include</span></span></span><span class="hljs-meta"> </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">&lt;functional&gt;</span></span></span></span>

<span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::function&lt;<span class="hljs-keyword"><span class="hljs-keyword">int</span></span>(<span class="hljs-keyword"><span class="hljs-keyword">void</span></span>)&gt; f(<span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::<span class="hljs-built_in"><span class="hljs-built_in">shared_ptr</span></span>&lt;<span class="hljs-keyword"><span class="hljs-keyword">int</span></span>&gt; x) {
    <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> [&amp;]() { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> *x; };
}

<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">int</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">main</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{
    <span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::function&lt;<span class="hljs-keyword"><span class="hljs-keyword">int</span></span>(<span class="hljs-keyword"><span class="hljs-keyword">void</span></span>)&gt; y(<span class="hljs-literal"><span class="hljs-literal">nullptr</span></span>);
    {
        <span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::<span class="hljs-built_in"><span class="hljs-built_in">shared_ptr</span></span>&lt;<span class="hljs-keyword"><span class="hljs-keyword">int</span></span>&gt; x(<span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::make_shared&lt;<span class="hljs-keyword"><span class="hljs-keyword">int</span></span>&gt;(<span class="hljs-number"><span class="hljs-number">4</span></span>));
        y = f(x);
    }
    <span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::<span class="hljs-built_in"><span class="hljs-built_in">cout</span></span> &lt;&lt; y() &lt;&lt; <span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::<span class="hljs-built_in"><span class="hljs-built_in">endl</span></span>;
}</code></pre></div>

        <div class="comment__footer">
    <a href="#reply" class="comment__footer-link reply_link" onclick="return comment_show_reply_form(20128110 )">Ответить</a>


</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-5" id="reply_comments_20128110">  <li class="content-list__item content-list__item_comment js-comment " rel="20128138">
    
    <span class="parent_id" data-parent_id="20128110"></span>
    <div class="comment" id="comment_20128138">
      <span class="comment__collapse" title="Свернуть/развернуть ветку комментариев" data-id="20128138"></span>
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head   " rel="20128138">
          <a href="https://habr.com/ru/users/KanuTaH/" class="user-info user-info_inline" rel="user-popover" data-user-login="KanuTaH">
    <img src="Swift%20%D0%BF%D1%80%D0%BE%D1%82%D0%B8%D0%B2%20Rust%20%E2%80%94%20%D0%B1%D0%B5%D0%BD%D1%87%D0%BC%D0%B0%D1%80%D0%BA%D0%B8%D0%BD%D0%B3%20%D0%BD%D0%B0%20Linux%20%D1%81%20(%D0%BD%D0%B5)%D0%BF%D0%BE%D0%BD%D1%8F%D1%82%D0%BD%D1%8B%D0%BC%20%D1%84%D0%B8%D0%BD%D0%B0%D0%BB%D0%BE%D0%BC%20_%20%D0%A5%D0%B0%D0%B1%D1%80_files/de79b1dd4d8c2305b72dd794b21141d7.png" class="user-info__image-pic user-info__image-pic_small" width="24" height="24">
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">KanuTaH</span>
</a>

          <svg class="icon_comment-edit" title="Комментарий был изменен" width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#pencil"></use></svg>
          <time class="comment__date-time comment__date-time_published">8 мая 2019 в 12:04</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="#comment_20128138" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="20128138" data-action="add" title="Добавить в закладки"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#book"></use></svg></a>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <span class="icon_comment-branch js-comment_tree" data-id="20128138" data-parent_id="20128110" title="Показать ветку комментариев"><svg width="8" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#tree"></use></svg></span>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#comment_20128110" class="icon_comment-arrow-up js-comment_parent" data-id="20128138" data-parent_id="20128110" title="Показать предыдущий комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
    </li>

  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="#comment_20128138" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="20128138" data-parent_id="20128110" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="20128138" data-post-target="450512" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="plus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter  voting-wjt__counter_negative js-score" title="Всего голосов –1: ↑0 и ↓1">–1</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message comment__message_downgrade comment__message_downgrade-1"><blockquote>А вы их используете для каждой переменной?</blockquote><br>
Нет, конечно. Но автор же беспокоится, что в large codebase некий код 
где-то там far far away, который, возможно, и не он сам писал, может 
как-то что-то прощелкать в плане времени жизни. Для таких случаев 
использование умных указателей безусловно оправданно.<br>
<br>
<blockquote>Что значит «не пихайте сами строки»? Строки это и так 
указатели на кучу где лежат данные, в лучшем случае они еще и длину 
хранят.</blockquote><br>
Ну я не знаю, что автор тут имел в виду под «when a vector overflows its
 capacity it will be reallocated, invalidating any other pointers to its
 contents», видимо, он пытается сделать что-то вроде 
std::vector&lt;std::string&gt; (а потом брать ссылки на элементы 
вектора) вместо std::vector&lt;std::string*&gt;, в общем, выглядит это 
либо как бред начинающего, либо как передергивание.</div>

        <div class="comment__footer">
    <a href="#reply" class="comment__footer-link reply_link" onclick="return comment_show_reply_form(20128138 )">Ответить</a>


</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-6" id="reply_comments_20128138">  <li class="content-list__item content-list__item_comment js-comment " rel="20128252">
    
    <span class="parent_id" data-parent_id="20128138"></span>
    <div class="comment" id="comment_20128252">
      <span class="comment__collapse" title="Свернуть/развернуть ветку комментариев" data-id="20128252"></span>
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head   " rel="20128252">
          <a href="https://habr.com/ru/users/creker/" class="user-info user-info_inline" rel="user-popover" data-user-login="creker">
    <img src="Swift%20%D0%BF%D1%80%D0%BE%D1%82%D0%B8%D0%B2%20Rust%20%E2%80%94%20%D0%B1%D0%B5%D0%BD%D1%87%D0%BC%D0%B0%D1%80%D0%BA%D0%B8%D0%BD%D0%B3%20%D0%BD%D0%B0%20Linux%20%D1%81%20(%D0%BD%D0%B5)%D0%BF%D0%BE%D0%BD%D1%8F%D1%82%D0%BD%D1%8B%D0%BC%20%D1%84%D0%B8%D0%BD%D0%B0%D0%BB%D0%BE%D0%BC%20_%20%D0%A5%D0%B0%D0%B1%D1%80_files/58738e1e5c93e6de80dc66bb4fbef5bd.png" class="user-info__image-pic user-info__image-pic_small" width="24" height="24">
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">creker</span>
</a>

          
          <time class="comment__date-time comment__date-time_published">8 мая 2019 в 12:25</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="#comment_20128252" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="20128252" data-action="add" title="Добавить в закладки"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#book"></use></svg></a>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <span class="icon_comment-branch js-comment_tree" data-id="20128252" data-parent_id="20128138" title="Показать ветку комментариев"><svg width="8" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#tree"></use></svg></span>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#comment_20128138" class="icon_comment-arrow-up js-comment_parent" data-id="20128252" data-parent_id="20128138" title="Показать предыдущий комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
    </li>

  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="#comment_20128252" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="20128252" data-parent_id="20128138" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="20128252" data-post-target="450512" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="plus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter voting-wjt__counter_positive  js-score" title="Всего голосов +1: ↑1 и ↓0">+1</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message ">std::vector&lt;std::string*&gt; 
это потенциально тормоза из-за нарушения локальности данных, а это кэш 
промахи и вот это вот все. Строчки же еще имеют оптимизацию, когда для 
коротких строк символы будут лежать внутри самого объекта, а не где-то в
 куче. Да и вообще, не принято в плюсах хранить указатели в контейнерах,
 если только это реально не нужно прямо кровь из носа. Причин для этого 
масса, помимо локальности данных.<br>
<br>
Автор ведет речь о слайсах, когда мы создаем указатель с длиной на 
внутреннее хранилище контейнера. Прямо как string_view, который все так 
долго ждали в плюсах. Только вот проблема, даже с учетом иммутабельности
 std::string мы с этими string_view запросто можем получить все 
вкусности плюсов — dangling pointer и use after free. А с std::vector 
дело еще хуже, ибо контейнер изменяемый и внутренний буфер могут 
внезапно уничтожить и реаллицировать в другом месте.<br>
<br>
Поэтому и хвалит он раст, у которого компилятор не позволит такой баг 
допустить. В других языках такие вещи решаются всякими сборщиками 
мусора. В плюсах это решается внимательными программистами и фиксами 
CVE, когда неизбежно что-то внимательный программист пропустит.</div>

        <div class="comment__footer">
    <a href="#reply" class="comment__footer-link reply_link" onclick="return comment_show_reply_form(20128252 )">Ответить</a>


</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-7" id="reply_comments_20128252">  <li class="content-list__item content-list__item_comment js-comment " rel="20128280">
    
    <span class="parent_id" data-parent_id="20128252"></span>
    <div class="comment" id="comment_20128280">
      <span class="comment__collapse" title="Свернуть/развернуть ветку комментариев" data-id="20128280"></span>
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head   " rel="20128280">
          <a href="https://habr.com/ru/users/KanuTaH/" class="user-info user-info_inline" rel="user-popover" data-user-login="KanuTaH">
    <img src="Swift%20%D0%BF%D1%80%D0%BE%D1%82%D0%B8%D0%B2%20Rust%20%E2%80%94%20%D0%B1%D0%B5%D0%BD%D1%87%D0%BC%D0%B0%D1%80%D0%BA%D0%B8%D0%BD%D0%B3%20%D0%BD%D0%B0%20Linux%20%D1%81%20(%D0%BD%D0%B5)%D0%BF%D0%BE%D0%BD%D1%8F%D1%82%D0%BD%D1%8B%D0%BC%20%D1%84%D0%B8%D0%BD%D0%B0%D0%BB%D0%BE%D0%BC%20_%20%D0%A5%D0%B0%D0%B1%D1%80_files/de79b1dd4d8c2305b72dd794b21141d7.png" class="user-info__image-pic user-info__image-pic_small" width="24" height="24">
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">KanuTaH</span>
</a>

          <svg class="icon_comment-edit" title="Комментарий был изменен" width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#pencil"></use></svg>
          <time class="comment__date-time comment__date-time_published">8 мая 2019 в 12:28</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="#comment_20128280" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="20128280" data-action="add" title="Добавить в закладки"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#book"></use></svg></a>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <span class="icon_comment-branch js-comment_tree" data-id="20128280" data-parent_id="20128252" title="Показать ветку комментариев"><svg width="8" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#tree"></use></svg></span>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#comment_20128252" class="icon_comment-arrow-up js-comment_parent" data-id="20128280" data-parent_id="20128252" title="Показать предыдущий комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
    </li>

  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="#comment_20128280" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="20128280" data-parent_id="20128252" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="20128280" data-post-target="450512" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="plus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter   js-score" title="Всего голосов 0: ↑0 и ↓0">0</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message "><blockquote>Строчки же еще имеют оптимизацию, когда для коротких строк символы будут лежать внутри самого объекта, а не где-то в куче.</blockquote><br>
Не понял. Контейнер по условию задачи находится в куче, строки так или 
иначе тоже в куче — либо в составе контейнера, либо отдельно. То, что 
они не находятся в памяти друг за другом — так у автора есть же 
требование, что при расширении контейнера и реаллокациях ссылки на 
строки из него не должны инвалидироваться. Тут ничего не попишешь. Не 
было бы этого требования — можно было бы обеспечить для них локальность 
без проблем.</div>

        <div class="comment__footer">
    <a href="#reply" class="comment__footer-link reply_link" onclick="return comment_show_reply_form(20128280 )">Ответить</a>


</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-8" id="reply_comments_20128280">  <li class="content-list__item content-list__item_comment js-comment " rel="20128304">
    
    <span class="parent_id" data-parent_id="20128280"></span>
    <div class="comment" id="comment_20128304">
      <span class="comment__collapse" title="Свернуть/развернуть ветку комментариев" data-id="20128304"></span>
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head   " rel="20128304">
          <a href="https://habr.com/ru/users/creker/" class="user-info user-info_inline" rel="user-popover" data-user-login="creker">
    <img src="Swift%20%D0%BF%D1%80%D0%BE%D1%82%D0%B8%D0%B2%20Rust%20%E2%80%94%20%D0%B1%D0%B5%D0%BD%D1%87%D0%BC%D0%B0%D1%80%D0%BA%D0%B8%D0%BD%D0%B3%20%D0%BD%D0%B0%20Linux%20%D1%81%20(%D0%BD%D0%B5)%D0%BF%D0%BE%D0%BD%D1%8F%D1%82%D0%BD%D1%8B%D0%BC%20%D1%84%D0%B8%D0%BD%D0%B0%D0%BB%D0%BE%D0%BC%20_%20%D0%A5%D0%B0%D0%B1%D1%80_files/58738e1e5c93e6de80dc66bb4fbef5bd.png" class="user-info__image-pic user-info__image-pic_small" width="24" height="24">
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">creker</span>
</a>

          
          <time class="comment__date-time comment__date-time_published">8 мая 2019 в 12:33</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="#comment_20128304" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="20128304" data-action="add" title="Добавить в закладки"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#book"></use></svg></a>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <span class="icon_comment-branch js-comment_tree" data-id="20128304" data-parent_id="20128280" title="Показать ветку комментариев"><svg width="8" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#tree"></use></svg></span>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#comment_20128280" class="icon_comment-arrow-up js-comment_parent" data-id="20128304" data-parent_id="20128280" title="Показать предыдущий комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
    </li>

  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="#comment_20128304" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="20128304" data-parent_id="20128280" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="20128304" data-post-target="450512" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="plus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter   js-score" title="Всего голосов 0: ↑0 и ↓0">0</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message "><blockquote>Не понял</blockquote><br>
Почитайте про short string optimization.<br>
<br>
<blockquote>так у автора есть же требование, что при расширении 
контейнера и реаллокациях ссылки на строки из него не должны 
инвалидироваться. Тут ничего не попишешь.</blockquote><br>
У него не требование, а факт того, что есть такая угроза и плюсы с ней 
никак не помогают. Раст помогает и ошибки допустить не позволит.</div>

        <div class="comment__footer">
    <a href="#reply" class="comment__footer-link reply_link" onclick="return comment_show_reply_form(20128304 )">Ответить</a>


</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-9" id="reply_comments_20128304">  <li class="content-list__item content-list__item_comment js-comment " rel="20128336">
    
    <span class="parent_id" data-parent_id="20128304"></span>
    <div class="comment" id="comment_20128336">
      <span class="comment__collapse" title="Свернуть/развернуть ветку комментариев" data-id="20128336"></span>
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head   " rel="20128336">
          <a href="https://habr.com/ru/users/KanuTaH/" class="user-info user-info_inline" rel="user-popover" data-user-login="KanuTaH">
    <img src="Swift%20%D0%BF%D1%80%D0%BE%D1%82%D0%B8%D0%B2%20Rust%20%E2%80%94%20%D0%B1%D0%B5%D0%BD%D1%87%D0%BC%D0%B0%D1%80%D0%BA%D0%B8%D0%BD%D0%B3%20%D0%BD%D0%B0%20Linux%20%D1%81%20(%D0%BD%D0%B5)%D0%BF%D0%BE%D0%BD%D1%8F%D1%82%D0%BD%D1%8B%D0%BC%20%D1%84%D0%B8%D0%BD%D0%B0%D0%BB%D0%BE%D0%BC%20_%20%D0%A5%D0%B0%D0%B1%D1%80_files/de79b1dd4d8c2305b72dd794b21141d7.png" class="user-info__image-pic user-info__image-pic_small" width="24" height="24">
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">KanuTaH</span>
</a>

          <svg class="icon_comment-edit" title="Комментарий был изменен" width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#pencil"></use></svg>
          <time class="comment__date-time comment__date-time_published">8 мая 2019 в 12:37</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="#comment_20128336" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="20128336" data-action="add" title="Добавить в закладки"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#book"></use></svg></a>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <span class="icon_comment-branch js-comment_tree" data-id="20128336" data-parent_id="20128304" title="Показать ветку комментариев"><svg width="8" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#tree"></use></svg></span>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#comment_20128304" class="icon_comment-arrow-up js-comment_parent" data-id="20128336" data-parent_id="20128304" title="Показать предыдущий комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
    </li>

  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="#comment_20128336" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="20128336" data-parent_id="20128304" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="20128336" data-post-target="450512" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="plus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter  voting-wjt__counter_negative js-score" title="Всего голосов –1: ↑0 и ↓1">–1</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message comment__message_downgrade comment__message_downgrade-1"><blockquote>Почитайте про short string optimization.<br>
</blockquote><br>
Вы… это самое… сами почитайте, о чем я пишу вообще.<br>
<br>
<blockquote>Раст помогает и ошибки допустить не позволит.</blockquote><br>
Вы сильно преувеличиваете возможности компилятора раста что-то там «не позволить».</div>

        <div class="comment__footer">
    <a href="#reply" class="comment__footer-link reply_link" onclick="return comment_show_reply_form(20128336 )">Ответить</a>


</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-10" id="reply_comments_20128336">  <li class="content-list__item content-list__item_comment js-comment " rel="20128492">
    
    <span class="parent_id" data-parent_id="20128336"></span>
    <div class="comment" id="comment_20128492">
      <span class="comment__collapse" title="Свернуть/развернуть ветку комментариев" data-id="20128492"></span>
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head   " rel="20128492">
          <a href="https://habr.com/ru/users/creker/" class="user-info user-info_inline" rel="user-popover" data-user-login="creker">
    <img src="Swift%20%D0%BF%D1%80%D0%BE%D1%82%D0%B8%D0%B2%20Rust%20%E2%80%94%20%D0%B1%D0%B5%D0%BD%D1%87%D0%BC%D0%B0%D1%80%D0%BA%D0%B8%D0%BD%D0%B3%20%D0%BD%D0%B0%20Linux%20%D1%81%20(%D0%BD%D0%B5)%D0%BF%D0%BE%D0%BD%D1%8F%D1%82%D0%BD%D1%8B%D0%BC%20%D1%84%D0%B8%D0%BD%D0%B0%D0%BB%D0%BE%D0%BC%20_%20%D0%A5%D0%B0%D0%B1%D1%80_files/58738e1e5c93e6de80dc66bb4fbef5bd.png" class="user-info__image-pic user-info__image-pic_small" width="24" height="24">
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">creker</span>
</a>

          
          <time class="comment__date-time comment__date-time_published">8 мая 2019 в 13:10</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="#comment_20128492" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="20128492" data-action="add" title="Добавить в закладки"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#book"></use></svg></a>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <span class="icon_comment-branch js-comment_tree" data-id="20128492" data-parent_id="20128336" title="Показать ветку комментариев"><svg width="8" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#tree"></use></svg></span>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#comment_20128336" class="icon_comment-arrow-up js-comment_parent" data-id="20128492" data-parent_id="20128336" title="Показать предыдущий комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
    </li>

  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="#comment_20128492" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="20128492" data-parent_id="20128336" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="20128492" data-post-target="450512" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="plus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter   js-score" title="Всего голосов 0: ↑0 и ↓0">0</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message "><blockquote>Вы… это самое… сами почитайте, о чем я пишу вообще.</blockquote><br>
Все недавние комментарии о том, что вы статью не поняли. Я это вижу, 
поэтому решил помочь, но чего-то не помогло все равно. По идее, на одном
 слове «слайсы» уже должно быть все понятно.<br>
<br>
<blockquote>Вы сильно преувеличиваете возможности компилятора раста что-то там «не позволить».</blockquote><br>
Пустые слова. Раст не позволит, плюсы позволят. Так эти языки работают.</div>

        <div class="comment__footer">
    <a href="#reply" class="comment__footer-link reply_link" onclick="return comment_show_reply_form(20128492 )">Ответить</a>


</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-11" id="reply_comments_20128492">  <li class="content-list__item content-list__item_comment js-comment " rel="20128510">
    
    <span class="parent_id" data-parent_id="20128492"></span>
    <div class="comment" id="comment_20128510">
      <span class="comment__collapse" title="Свернуть/развернуть ветку комментариев" data-id="20128510"></span>
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head   " rel="20128510">
          <a href="https://habr.com/ru/users/KanuTaH/" class="user-info user-info_inline" rel="user-popover" data-user-login="KanuTaH">
    <img src="Swift%20%D0%BF%D1%80%D0%BE%D1%82%D0%B8%D0%B2%20Rust%20%E2%80%94%20%D0%B1%D0%B5%D0%BD%D1%87%D0%BC%D0%B0%D1%80%D0%BA%D0%B8%D0%BD%D0%B3%20%D0%BD%D0%B0%20Linux%20%D1%81%20(%D0%BD%D0%B5)%D0%BF%D0%BE%D0%BD%D1%8F%D1%82%D0%BD%D1%8B%D0%BC%20%D1%84%D0%B8%D0%BD%D0%B0%D0%BB%D0%BE%D0%BC%20_%20%D0%A5%D0%B0%D0%B1%D1%80_files/de79b1dd4d8c2305b72dd794b21141d7.png" class="user-info__image-pic user-info__image-pic_small" width="24" height="24">
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">KanuTaH</span>
</a>

          <svg class="icon_comment-edit" title="Комментарий был изменен" width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#pencil"></use></svg>
          <time class="comment__date-time comment__date-time_published">8 мая 2019 в 13:13</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="#comment_20128510" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="20128510" data-action="add" title="Добавить в закладки"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#book"></use></svg></a>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <span class="icon_comment-branch js-comment_tree" data-id="20128510" data-parent_id="20128492" title="Показать ветку комментариев"><svg width="8" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#tree"></use></svg></span>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#comment_20128492" class="icon_comment-arrow-up js-comment_parent" data-id="20128510" data-parent_id="20128492" title="Показать предыдущий комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
    </li>

  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="#comment_20128510" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="20128510" data-parent_id="20128492" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="20128510" data-post-target="450512" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="plus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter   js-score" title="Всего голосов 0: ↑0 и ↓0">0</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message "><blockquote>Я это вижу</blockquote><br>
Не похоже.<br>
<br>
<blockquote>Пустые слова. Раст не позволит, плюсы позволят. Так эти языки работают.</blockquote><br>
Пустые слова — это считать компилятор раста серебряной пулей, способной 
заглядывать внутрь сисколлов или сторонних библиотек без прилагаемых 
исходников.</div>

        <div class="comment__footer">
    <a href="#reply" class="comment__footer-link reply_link" onclick="return comment_show_reply_form(20128510 )">Ответить</a>


</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-12" id="reply_comments_20128510">  <li class="content-list__item content-list__item_comment js-comment " rel="20128630">
    
    <span class="parent_id" data-parent_id="20128510"></span>
    <div class="comment" id="comment_20128630">
      <span class="comment__collapse" title="Свернуть/развернуть ветку комментариев" data-id="20128630"></span>
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head comment__head_topic-author comment__head_my-comment " rel="20128630">
          <a href="https://habr.com/ru/users/epishman/" class="user-info user-info_inline" rel="user-popover" data-user-login="epishman">
    <img src="Swift%20%D0%BF%D1%80%D0%BE%D1%82%D0%B8%D0%B2%20Rust%20%E2%80%94%20%D0%B1%D0%B5%D0%BD%D1%87%D0%BC%D0%B0%D1%80%D0%BA%D0%B8%D0%BD%D0%B3%20%D0%BD%D0%B0%20Linux%20%D1%81%20(%D0%BD%D0%B5)%D0%BF%D0%BE%D0%BD%D1%8F%D1%82%D0%BD%D1%8B%D0%BC%20%D1%84%D0%B8%D0%BD%D0%B0%D0%BB%D0%BE%D0%BC%20_%20%D0%A5%D0%B0%D0%B1%D1%80_files/ec0d88c4853c0d36d44bd0526dcfa8d7.png" class="user-info__image-pic user-info__image-pic_small" width="24" height="24">
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">epishman</span>
</a>

          
          <time class="comment__date-time comment__date-time_published">8 мая 2019 в 13:34</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="#comment_20128630" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="20128630" data-action="add" title="Добавить в закладки"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#book"></use></svg></a>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <span class="icon_comment-branch js-comment_tree" data-id="20128630" data-parent_id="20128510" title="Показать ветку комментариев"><svg width="8" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#tree"></use></svg></span>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#comment_20128510" class="icon_comment-arrow-up js-comment_parent" data-id="20128630" data-parent_id="20128510" title="Показать предыдущий комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
    </li>

  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="#comment_20128630" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="20128630" data-parent_id="20128510" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="20128630" data-post-target="450512" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="plus" onclick="comment_vote(this);" title="За свои комментарии голосовать нельзя" disabled="disabled"><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter   js-score" title="Всего голосов 0: ↑0 и ↓0">0</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="За свои комментарии голосовать нельзя" disabled="disabled"><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message ">Поэтому у растаманов и принято линковать все статически с lto, а сошки это моветон.</div>

        <div class="comment__footer">
    <a href="#reply" class="comment__footer-link reply_link" onclick="return comment_show_reply_form(20128630 )">Ответить</a>


</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-13" id="reply_comments_20128630">  <li class="content-list__item content-list__item_comment js-comment " rel="20128634">
    
    <span class="parent_id" data-parent_id="20128630"></span>
    <div class="comment" id="comment_20128634">
      <span class="comment__collapse" title="Свернуть/развернуть ветку комментариев" data-id="20128634"></span>
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head   " rel="20128634">
          <a href="https://habr.com/ru/users/KanuTaH/" class="user-info user-info_inline" rel="user-popover" data-user-login="KanuTaH">
    <img src="Swift%20%D0%BF%D1%80%D0%BE%D1%82%D0%B8%D0%B2%20Rust%20%E2%80%94%20%D0%B1%D0%B5%D0%BD%D1%87%D0%BC%D0%B0%D1%80%D0%BA%D0%B8%D0%BD%D0%B3%20%D0%BD%D0%B0%20Linux%20%D1%81%20(%D0%BD%D0%B5)%D0%BF%D0%BE%D0%BD%D1%8F%D1%82%D0%BD%D1%8B%D0%BC%20%D1%84%D0%B8%D0%BD%D0%B0%D0%BB%D0%BE%D0%BC%20_%20%D0%A5%D0%B0%D0%B1%D1%80_files/de79b1dd4d8c2305b72dd794b21141d7.png" class="user-info__image-pic user-info__image-pic_small" width="24" height="24">
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">KanuTaH</span>
</a>

          <svg class="icon_comment-edit" title="Комментарий был изменен" width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#pencil"></use></svg>
          <time class="comment__date-time comment__date-time_published">8 мая 2019 в 13:35</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="#comment_20128634" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="20128634" data-action="add" title="Добавить в закладки"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#book"></use></svg></a>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <span class="icon_comment-branch js-comment_tree" data-id="20128634" data-parent_id="20128630" title="Показать ветку комментариев"><svg width="8" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#tree"></use></svg></span>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#comment_20128630" class="icon_comment-arrow-up js-comment_parent" data-id="20128634" data-parent_id="20128630" title="Показать предыдущий комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
    </li>

  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="#comment_20128634" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="20128634" data-parent_id="20128630" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="20128634" data-post-target="450512" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="plus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter  voting-wjt__counter_negative js-score" title="Всего голосов –1: ↑0 и ↓1">–1</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message comment__message_downgrade comment__message_downgrade-1">Ессессно.
 Им пока везет, что они тихо-мирно варятся там в своем растамирке, где 
нет необходимости решать реальные задачи с помощью сторонних closed 
source библиотек, а также делать свои такие же closed source библиотеки 
на продажу.</div>

        <div class="comment__footer">
    <a href="#reply" class="comment__footer-link reply_link" onclick="return comment_show_reply_form(20128634 )">Ответить</a>


</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-14" id="reply_comments_20128634"></ul>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="content-list__item content-list__item_comment js-comment " rel="20158456">
    
    <span class="parent_id" data-parent_id="20128252"></span>
    <div class="comment" id="comment_20158456">
      <span class="comment__collapse" title="Свернуть/развернуть ветку комментариев" data-id="20158456"></span>
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head   " rel="20158456">
          <a href="https://habr.com/ru/users/twinklede/" class="user-info user-info_inline" rel="user-popover" data-user-login="twinklede">
    <svg class="default-image default-image_mini default-image_pink" width="24" height="24"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#slug"></use></svg>
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">twinklede</span>
</a>

          
          <time class="comment__date-time comment__date-time_published">15 мая 2019 в 22:44</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="#comment_20158456" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="20158456" data-action="add" title="Добавить в закладки"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#book"></use></svg></a>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <span class="icon_comment-branch js-comment_tree" data-id="20158456" data-parent_id="20128252" title="Показать ветку комментариев"><svg width="8" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#tree"></use></svg></span>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#comment_20128252" class="icon_comment-arrow-up js-comment_parent" data-id="20158456" data-parent_id="20128252" title="Показать предыдущий комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
    </li>

  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="#comment_20158456" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="20158456" data-parent_id="20128252" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="20158456" data-post-target="450512" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="plus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter   js-score" title="Всего голосов 0: ↑0 и ↓0">0</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message "><blockquote>Прямо как string_view, который все так долго ждали в плюсах. </blockquote><br>
Все его использовали ещё со времён. Где именно его ждали? В стандарте? 
Ну слайсы для раста уже 10лет ждут в стандарте, как всё остальное. <br>
<br>
<blockquote>Поэтому и хвалит он раст, у которого компилятор не позволит такой баг допустить.</blockquote><br>
Как? Не даст взять ссылку на элемент и придётся(как автор делал) хранить индексы? Это неудобно, но ладно.<br>
<br>
Проблема заключается в том, что я без проблем могу написать vector, 
который ссылки не теряет. Причём мне ненужно даже писать вектор, можно 
просто поменять ему аллокатор.<br>
<br>
Это одна из фундаментальные проблем «безопасности» подобного рода. Эта 
безопасность защищает даже тогда, когда никакой защиты ненужно. Но 
продолжает вносить оверхед(как и по производительности, так и по 
удобству программиста).</div>

        <div class="comment__footer">
    <a href="#reply" class="comment__footer-link reply_link" onclick="return comment_show_reply_form(20158456 )">Ответить</a>


</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-8" id="reply_comments_20158456"></ul>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="content-list__item content-list__item_comment js-comment " rel="20126648">
    
    <span class="parent_id" data-parent_id="20118128"></span>
    <div class="comment" id="comment_20126648">
      <span class="comment__collapse" title="Свернуть/развернуть ветку комментариев" data-id="20126648"></span>
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head   " rel="20126648">
          <a href="https://habr.com/ru/users/KanuTaH/" class="user-info user-info_inline" rel="user-popover" data-user-login="KanuTaH">
    <img src="Swift%20%D0%BF%D1%80%D0%BE%D1%82%D0%B8%D0%B2%20Rust%20%E2%80%94%20%D0%B1%D0%B5%D0%BD%D1%87%D0%BC%D0%B0%D1%80%D0%BA%D0%B8%D0%BD%D0%B3%20%D0%BD%D0%B0%20Linux%20%D1%81%20(%D0%BD%D0%B5)%D0%BF%D0%BE%D0%BD%D1%8F%D1%82%D0%BD%D1%8B%D0%BC%20%D1%84%D0%B8%D0%BD%D0%B0%D0%BB%D0%BE%D0%BC%20_%20%D0%A5%D0%B0%D0%B1%D1%80_files/de79b1dd4d8c2305b72dd794b21141d7.png" class="user-info__image-pic user-info__image-pic_small" width="24" height="24">
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">KanuTaH</span>
</a>

          <svg class="icon_comment-edit" title="Комментарий был изменен" width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#pencil"></use></svg>
          <time class="comment__date-time comment__date-time_published">8 мая 2019 в 03:41</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="#comment_20126648" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="20126648" data-action="add" title="Добавить в закладки"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#book"></use></svg></a>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <span class="icon_comment-branch js-comment_tree" data-id="20126648" data-parent_id="20118128" title="Показать ветку комментариев"><svg width="8" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#tree"></use></svg></span>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#comment_20118128" class="icon_comment-arrow-up js-comment_parent" data-id="20126648" data-parent_id="20118128" title="Показать предыдущий комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
    </li>

  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="#comment_20126648" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="20126648" data-parent_id="20118128" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="20126648" data-post-target="450512" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="plus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter   js-score" title="Всего голосов 0: ↑0 и ↓0">0</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message ">P.S. Прочитал там сносочку, 
кто-то рассказал гражданину про shared_ptr, но он начал придумывать 
новые страшилки — про «iterator invalidation» (пока ты держишь 
подконтрольную тебе копию shared_ptr, указывающую на вектор, вектор 
никуда не денется, и, соответственно, никакого iterator invalidation не 
будет), «someone consuming the API might take a reference of an 
attribute and hold on to it long enough for it to become invalidated» — 
если есть такая опасность, то никто не мешает хранить в векторе такие же
 shared_ptr на атрибуты: пока ты им владеешь, атрибут никуда не денется,
 даже если вектор будет полностью уничтожен. Например, такой код:<br>
<br>
<pre><code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">auto</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">func</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function">
</span></span>{
    <span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::<span class="hljs-built_in"><span class="hljs-built_in">vector</span></span>&lt;<span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::<span class="hljs-built_in"><span class="hljs-built_in">shared_ptr</span></span>&lt;<span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::<span class="hljs-built_in"><span class="hljs-built_in">string</span></span>&gt;&gt; vctor;

    vctor.push_back(<span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::make_shared&lt;<span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::<span class="hljs-built_in"><span class="hljs-built_in">string</span></span>&gt;(<span class="hljs-string"><span class="hljs-string">"FYVA"</span></span>));

    <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> vctor.back();
}

<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">int</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">main</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function">
</span></span>{
    <span class="hljs-keyword"><span class="hljs-keyword">auto</span></span> res = func();

    <span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::<span class="hljs-built_in"><span class="hljs-built_in">cout</span></span> &lt;&lt; *res &lt;&lt; <span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::<span class="hljs-built_in"><span class="hljs-built_in">endl</span></span>;

    <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span>;
}
</code></pre><br>
вполне себе успешно выведет «FYVA», хотя контейнер, содержавший строку, уже был уничтожен на момент вывода.<br>
<br>
Более того, это будет совершенно безопасно работать даже в чужом коде, 
который доступен тебе исключительно в виде .lib/.so/.dll (насколько я 
понимаю, расту для его compile-time borrow checking нужен доступ к 
исходникам, ничего прочекать в чужом машинном коде он не в состоянии).<br>
<br>
Это не говоря уж о том, что в том же Qt этот атрибут (если это какой-то 
стандартный QString или контейнер (QList/QMap/...) или даже какой-то 
кастомный наследник от QObject с реализованной implicit sharing 
функциональностью, это несложно) можно будет просто скопировать локально
 через обычный конструктор копии или operator=(), и не париться — будет 
shallow copy.<br>
<br>
В общем, если по чесноку, аргументы автора выглядят, мягко говоря, 
надуманными и действительно похожими на пропаганду в плохом смысле этого
 слова.</div>

        <div class="comment__footer">
    <a href="#reply" class="comment__footer-link reply_link" onclick="return comment_show_reply_form(20126648 )">Ответить</a>


</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-4" id="reply_comments_20126648">  <li class="content-list__item content-list__item_comment js-comment " rel="20127056">
    
    <span class="parent_id" data-parent_id="20126648"></span>
    <div class="comment" id="comment_20127056">
      <span class="comment__collapse" title="Свернуть/развернуть ветку комментариев" data-id="20127056"></span>
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head   " rel="20127056">
          <a href="https://habr.com/ru/users/red75prim/" class="user-info user-info_inline" rel="user-popover" data-user-login="red75prim">
    <svg class="default-image default-image_mini default-image_lilac" width="24" height="24"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#slug"></use></svg>
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">red75prim</span>
</a>

          <svg class="icon_comment-edit" title="Комментарий был изменен" width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#pencil"></use></svg>
          <time class="comment__date-time comment__date-time_published">8 мая 2019 в 09:09</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="#comment_20127056" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="20127056" data-action="add" title="Добавить в закладки"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#book"></use></svg></a>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <span class="icon_comment-branch js-comment_tree" data-id="20127056" data-parent_id="20126648" title="Показать ветку комментариев"><svg width="8" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#tree"></use></svg></span>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#comment_20126648" class="icon_comment-arrow-up js-comment_parent" data-id="20127056" data-parent_id="20126648" title="Показать предыдущий комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
    </li>

  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="#comment_20127056" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="20127056" data-parent_id="20126648" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="20127056" data-post-target="450512" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="plus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter voting-wjt__counter_positive  js-score" title="Всего голосов +2: ↑2 и ↓0">+2</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message ">Iterator invalidation это про другое.<br>
<br>
<pre><code class="cpp hljs"><span class="hljs-meta"><span class="hljs-meta">#</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">include</span></span></span><span class="hljs-meta"> </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">&lt;iostream&gt;</span></span></span></span>
<span class="hljs-meta"><span class="hljs-meta">#</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">include</span></span></span><span class="hljs-meta"> </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">&lt;vector&gt;</span></span></span></span>

<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">int</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">main</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function">
</span></span>{
    <span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::<span class="hljs-built_in"><span class="hljs-built_in">vector</span></span>&lt;<span class="hljs-keyword"><span class="hljs-keyword">int</span></span>&gt; a;
    a.push_back(<span class="hljs-number"><span class="hljs-number">1</span></span>);
    a.push_back(<span class="hljs-number"><span class="hljs-number">2</span></span>);
    <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">int</span></span> &amp;b: a) {
        a.push_back(b);
    }
    <span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::<span class="hljs-built_in"><span class="hljs-built_in">cout</span></span> &lt;&lt; <span class="hljs-string"><span class="hljs-string">"Hello, UB!\n"</span></span>;
    <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">int</span></span> &amp;b: a) {
        <span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::<span class="hljs-built_in"><span class="hljs-built_in">cout</span></span> &lt;&lt; b &lt;&lt; <span class="hljs-string"><span class="hljs-string">"\n"</span></span>;
    }
}
</code></pre><br>
<br>
Этот код компилируется без ошибок и предупреждений в GCC 4.9 c -Wall -Wextra -Wpedantic и выводит:<br>
<br>
<code>Hello, UB!<br>
1<br>
2<br>
1<br>
0<br>
 </code><br>
<br>
Некоторые операции над структурами инвалидируют итераторы, указывающие 
на эту структуру. Если после этого всё-таки использовать эти итераторы, 
то получаем undefined behavior. <br>
<br>
Очень рекомендую проверить свой код на такие случаи.</div>

        <div class="comment__footer">
    <a href="#reply" class="comment__footer-link reply_link" onclick="return comment_show_reply_form(20127056 )">Ответить</a>


</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-5" id="reply_comments_20127056">  <li class="content-list__item content-list__item_comment js-comment " rel="20127208">
    
    <span class="parent_id" data-parent_id="20127056"></span>
    <div class="comment" id="comment_20127208">
      <span class="comment__collapse" title="Свернуть/развернуть ветку комментариев" data-id="20127208"></span>
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head   " rel="20127208">
          <a href="https://habr.com/ru/users/KanuTaH/" class="user-info user-info_inline" rel="user-popover" data-user-login="KanuTaH">
    <img src="Swift%20%D0%BF%D1%80%D0%BE%D1%82%D0%B8%D0%B2%20Rust%20%E2%80%94%20%D0%B1%D0%B5%D0%BD%D1%87%D0%BC%D0%B0%D1%80%D0%BA%D0%B8%D0%BD%D0%B3%20%D0%BD%D0%B0%20Linux%20%D1%81%20(%D0%BD%D0%B5)%D0%BF%D0%BE%D0%BD%D1%8F%D1%82%D0%BD%D1%8B%D0%BC%20%D1%84%D0%B8%D0%BD%D0%B0%D0%BB%D0%BE%D0%BC%20_%20%D0%A5%D0%B0%D0%B1%D1%80_files/de79b1dd4d8c2305b72dd794b21141d7.png" class="user-info__image-pic user-info__image-pic_small" width="24" height="24">
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">KanuTaH</span>
</a>

          
          <time class="comment__date-time comment__date-time_published">8 мая 2019 в 09:43</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="#comment_20127208" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="20127208" data-action="add" title="Добавить в закладки"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#book"></use></svg></a>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <span class="icon_comment-branch js-comment_tree" data-id="20127208" data-parent_id="20127056" title="Показать ветку комментариев"><svg width="8" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#tree"></use></svg></span>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#comment_20127056" class="icon_comment-arrow-up js-comment_parent" data-id="20127208" data-parent_id="20127056" title="Показать предыдущий комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
    </li>

  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="#comment_20127208" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="20127208" data-parent_id="20127056" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="20127208" data-post-target="450512" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="plus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter   js-score" title="Всего голосов 0: ↑0 и ↓0">0</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message "><p>Я прекрасно знаю, что во время
 итерирования нельзя менять содержимое итерируемого контейнера. Только 
какое отношение это имеет к изначальной проблеме "дать структуре доступ к
 вектору", я так и не понял. Менять вектор при итерировании по нему 
нельзя независимо от количества ссылок на него. Такое ощущение, что 
автору надо было срочно придумать хоть что-то. </p></div>

        <div class="comment__footer">
    <a href="#reply" class="comment__footer-link reply_link" onclick="return comment_show_reply_form(20127208 )">Ответить</a>


</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-6" id="reply_comments_20127208">  <li class="content-list__item content-list__item_comment js-comment " rel="20127342">
    
    <span class="parent_id" data-parent_id="20127208"></span>
    <div class="comment" id="comment_20127342">
      <span class="comment__collapse" title="Свернуть/развернуть ветку комментариев" data-id="20127342"></span>
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head   " rel="20127342">
          <a href="https://habr.com/ru/users/mayorovp/" class="user-info user-info_inline" rel="user-popover" data-user-login="mayorovp">
    <svg class="default-image default-image_mini default-image_pink" width="24" height="24"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#slug"></use></svg>
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">mayorovp</span>
</a>

          
          <time class="comment__date-time comment__date-time_published">8 мая 2019 в 10:03</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="#comment_20127342" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="20127342" data-action="add" title="Добавить в закладки"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#book"></use></svg></a>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <span class="icon_comment-branch js-comment_tree" data-id="20127342" data-parent_id="20127208" title="Показать ветку комментариев"><svg width="8" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#tree"></use></svg></span>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#comment_20127208" class="icon_comment-arrow-up js-comment_parent" data-id="20127342" data-parent_id="20127208" title="Показать предыдущий комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
    </li>

  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="#comment_20127342" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="20127342" data-parent_id="20127208" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="20127342" data-post-target="450512" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="plus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter   js-score" title="Всего голосов 0: ↑0 и ↓0">0</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message "><p>Самое прямое. В C++ 
программист сам должен следить чтобы вектор не менялся пока на него 
остаются итераторы. В Rust за этим следит компилятор, что позволяет 
строить более сложные структуры без увеличения нагрузки на программиста.</p></div>

        <div class="comment__footer">
    <a href="#reply" class="comment__footer-link reply_link" onclick="return comment_show_reply_form(20127342 )">Ответить</a>


</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-7" id="reply_comments_20127342">  <li class="content-list__item content-list__item_comment js-comment " rel="20127376">
    
    <span class="parent_id" data-parent_id="20127342"></span>
    <div class="comment" id="comment_20127376">
      <span class="comment__collapse" title="Свернуть/развернуть ветку комментариев" data-id="20127376"></span>
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head   " rel="20127376">
          <a href="https://habr.com/ru/users/KanuTaH/" class="user-info user-info_inline" rel="user-popover" data-user-login="KanuTaH">
    <img src="Swift%20%D0%BF%D1%80%D0%BE%D1%82%D0%B8%D0%B2%20Rust%20%E2%80%94%20%D0%B1%D0%B5%D0%BD%D1%87%D0%BC%D0%B0%D1%80%D0%BA%D0%B8%D0%BD%D0%B3%20%D0%BD%D0%B0%20Linux%20%D1%81%20(%D0%BD%D0%B5)%D0%BF%D0%BE%D0%BD%D1%8F%D1%82%D0%BD%D1%8B%D0%BC%20%D1%84%D0%B8%D0%BD%D0%B0%D0%BB%D0%BE%D0%BC%20_%20%D0%A5%D0%B0%D0%B1%D1%80_files/de79b1dd4d8c2305b72dd794b21141d7.png" class="user-info__image-pic user-info__image-pic_small" width="24" height="24">
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">KanuTaH</span>
</a>

          <svg class="icon_comment-edit" title="Комментарий был изменен" width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#pencil"></use></svg>
          <time class="comment__date-time comment__date-time_published">8 мая 2019 в 10:07</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="#comment_20127376" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="20127376" data-action="add" title="Добавить в закладки"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#book"></use></svg></a>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <span class="icon_comment-branch js-comment_tree" data-id="20127376" data-parent_id="20127342" title="Показать ветку комментариев"><svg width="8" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#tree"></use></svg></span>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#comment_20127342" class="icon_comment-arrow-up js-comment_parent" data-id="20127376" data-parent_id="20127342" title="Показать предыдущий комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
    </li>

  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="#comment_20127376" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="20127376" data-parent_id="20127342" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="20127376" data-post-target="450512" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="plus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter  voting-wjt__counter_negative js-score" title="Всего голосов –2: ↑0 и ↓2">–2</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message comment__message_downgrade comment__message_downgrade-2">Ну
 вот не надо про это, что «компилятор следит». Что ваш компилятор 
сделает, если владелец контейнера — чужая .dll, к коду которой у вас нет
 доступа (а это совершенно рядовая ситуация, с которой сталкивается 
любой разработчик сплошь и рядом)? Ничего он не сделает и не проверит.</div>

        <div class="comment__footer">
    <a href="#reply" class="comment__footer-link reply_link" onclick="return comment_show_reply_form(20127376 )">Ответить</a>


</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-8" id="reply_comments_20127376">  <li class="content-list__item content-list__item_comment js-comment " rel="20127424">
    
    <span class="parent_id" data-parent_id="20127376"></span>
    <div class="comment" id="comment_20127424">
      <span class="comment__collapse" title="Свернуть/развернуть ветку комментариев" data-id="20127424"></span>
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head   " rel="20127424">
          <a href="https://habr.com/ru/users/mayorovp/" class="user-info user-info_inline" rel="user-popover" data-user-login="mayorovp">
    <svg class="default-image default-image_mini default-image_pink" width="24" height="24"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#slug"></use></svg>
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">mayorovp</span>
</a>

          
          <time class="comment__date-time comment__date-time_published">8 мая 2019 в 10:17</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="#comment_20127424" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="20127424" data-action="add" title="Добавить в закладки"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#book"></use></svg></a>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <span class="icon_comment-branch js-comment_tree" data-id="20127424" data-parent_id="20127376" title="Показать ветку комментариев"><svg width="8" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#tree"></use></svg></span>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#comment_20127376" class="icon_comment-arrow-up js-comment_parent" data-id="20127424" data-parent_id="20127376" title="Показать предыдущий комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
    </li>

  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="#comment_20127424" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="20127424" data-parent_id="20127376" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="20127424" data-post-target="450512" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="plus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter   js-score" title="Всего голосов 0: ↑0 и ↓0">0</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message "><p>Как-то быстро вы перешли от двух локальных переменных к внешней dll...</p></div>

        <div class="comment__footer">
    <a href="#reply" class="comment__footer-link reply_link" onclick="return comment_show_reply_form(20127424 )">Ответить</a>


</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-9" id="reply_comments_20127424">  <li class="content-list__item content-list__item_comment js-comment " rel="20127442">
    
    <span class="parent_id" data-parent_id="20127424"></span>
    <div class="comment" id="comment_20127442">
      <span class="comment__collapse" title="Свернуть/развернуть ветку комментариев" data-id="20127442"></span>
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head   " rel="20127442">
          <a href="https://habr.com/ru/users/KanuTaH/" class="user-info user-info_inline" rel="user-popover" data-user-login="KanuTaH">
    <img src="Swift%20%D0%BF%D1%80%D0%BE%D1%82%D0%B8%D0%B2%20Rust%20%E2%80%94%20%D0%B1%D0%B5%D0%BD%D1%87%D0%BC%D0%B0%D1%80%D0%BA%D0%B8%D0%BD%D0%B3%20%D0%BD%D0%B0%20Linux%20%D1%81%20(%D0%BD%D0%B5)%D0%BF%D0%BE%D0%BD%D1%8F%D1%82%D0%BD%D1%8B%D0%BC%20%D1%84%D0%B8%D0%BD%D0%B0%D0%BB%D0%BE%D0%BC%20_%20%D0%A5%D0%B0%D0%B1%D1%80_files/de79b1dd4d8c2305b72dd794b21141d7.png" class="user-info__image-pic user-info__image-pic_small" width="24" height="24">
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">KanuTaH</span>
</a>

          <svg class="icon_comment-edit" title="Комментарий был изменен" width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#pencil"></use></svg>
          <time class="comment__date-time comment__date-time_published">8 мая 2019 в 10:20</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="#comment_20127442" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="20127442" data-action="add" title="Добавить в закладки"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#book"></use></svg></a>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <span class="icon_comment-branch js-comment_tree" data-id="20127442" data-parent_id="20127424" title="Показать ветку комментариев"><svg width="8" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#tree"></use></svg></span>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#comment_20127424" class="icon_comment-arrow-up js-comment_parent" data-id="20127442" data-parent_id="20127424" title="Показать предыдущий комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
    </li>

  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="#comment_20127442" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="20127442" data-parent_id="20127424" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="20127442" data-post-target="450512" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="plus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter   js-score" title="Всего голосов 0: ↑0 и ↓0">0</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message ">Речь не идет о «двух локальных 
переменных». Автор сам пишет, что, дескать, «for a smaller codebase this
 might be possible» просто добавить в структуру указатель на вектор, но 
вот если codebase большая, дескать, то будут проблемы. А если codebase 
не просто большая, а еще и, так сказать, неполная?</div>

        <div class="comment__footer">
    <a href="#reply" class="comment__footer-link reply_link" onclick="return comment_show_reply_form(20127442 )">Ответить</a>


</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-10" id="reply_comments_20127442">  <li class="content-list__item content-list__item_comment js-comment " rel="20127496">
    
    <span class="parent_id" data-parent_id="20127442"></span>
    <div class="comment" id="comment_20127496">
      <span class="comment__collapse" title="Свернуть/развернуть ветку комментариев" data-id="20127496"></span>
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head   " rel="20127496">
          <a href="https://habr.com/ru/users/mayorovp/" class="user-info user-info_inline" rel="user-popover" data-user-login="mayorovp">
    <svg class="default-image default-image_mini default-image_pink" width="24" height="24"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#slug"></use></svg>
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">mayorovp</span>
</a>

          
          <time class="comment__date-time comment__date-time_published">8 мая 2019 в 10:26</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="#comment_20127496" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="20127496" data-action="add" title="Добавить в закладки"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#book"></use></svg></a>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <span class="icon_comment-branch js-comment_tree" data-id="20127496" data-parent_id="20127442" title="Показать ветку комментариев"><svg width="8" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#tree"></use></svg></span>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#comment_20127442" class="icon_comment-arrow-up js-comment_parent" data-id="20127496" data-parent_id="20127442" title="Показать предыдущий комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
    </li>

  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="#comment_20127496" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="20127496" data-parent_id="20127442" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="20127496" data-post-target="450512" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="plus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter voting-wjt__counter_positive  js-score" title="Всего голосов +1: ↑1 и ↓0">+1</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message "><p>Если в документации на внешнюю
 dll не указано никакой информации о времени жизни своих объектов — 
такой dll, по-хорошему, вообще нельзя пользоваться.</p></div>

        <div class="comment__footer">
    <a href="#reply" class="comment__footer-link reply_link" onclick="return comment_show_reply_form(20127496 )">Ответить</a>


</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-11" id="reply_comments_20127496"></ul>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="content-list__item content-list__item_comment js-comment " rel="20128070">
    
    <span class="parent_id" data-parent_id="20127376"></span>
    <div class="comment" id="comment_20128070">
      <span class="comment__collapse" title="Свернуть/развернуть ветку комментариев" data-id="20128070"></span>
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head   " rel="20128070">
          <a href="https://habr.com/ru/users/PsyHaSTe/" class="user-info user-info_inline" rel="user-popover" data-user-login="PsyHaSTe">
    <img src="Swift%20%D0%BF%D1%80%D0%BE%D1%82%D0%B8%D0%B2%20Rust%20%E2%80%94%20%D0%B1%D0%B5%D0%BD%D1%87%D0%BC%D0%B0%D1%80%D0%BA%D0%B8%D0%BD%D0%B3%20%D0%BD%D0%B0%20Linux%20%D1%81%20(%D0%BD%D0%B5)%D0%BF%D0%BE%D0%BD%D1%8F%D1%82%D0%BD%D1%8B%D0%BC%20%D1%84%D0%B8%D0%BD%D0%B0%D0%BB%D0%BE%D0%BC%20_%20%D0%A5%D0%B0%D0%B1%D1%80_files/7631ac5e5a7e237a937f5f2a74ae4c9e.jpg" class="user-info__image-pic user-info__image-pic_small" width="24" height="24">
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">PsyHaSTe</span>
</a>

          
          <time class="comment__date-time comment__date-time_published">8 мая 2019 в 11:57</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="#comment_20128070" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="20128070" data-action="add" title="Добавить в закладки"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#book"></use></svg></a>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <span class="icon_comment-branch js-comment_tree" data-id="20128070" data-parent_id="20127376" title="Показать ветку комментариев"><svg width="8" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#tree"></use></svg></span>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#comment_20127376" class="icon_comment-arrow-up js-comment_parent" data-id="20128070" data-parent_id="20127376" title="Показать предыдущий комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
    </li>

  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="#comment_20128070" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="20128070" data-parent_id="20127376" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="20128070" data-post-target="450512" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="plus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter   js-score" title="Всего голосов 0: ↑0 и ↓0">0</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message "><p>Чужая dll это ансейф, и тут все то же самое, что в плюсах.</p><br>
<p>А где не ансейф, там гарантии работают.</p><br>
<p>Аргумент из разряда "а что если в компьютер с вашей программой прилетит метеорит".</p></div>

        <div class="comment__footer">
    <a href="#reply" class="comment__footer-link reply_link" onclick="return comment_show_reply_form(20128070 )">Ответить</a>


</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-9" id="reply_comments_20128070">  <li class="content-list__item content-list__item_comment js-comment " rel="20128114">
    
    <span class="parent_id" data-parent_id="20128070"></span>
    <div class="comment" id="comment_20128114">
      <span class="comment__collapse" title="Свернуть/развернуть ветку комментариев" data-id="20128114"></span>
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head   " rel="20128114">
          <a href="https://habr.com/ru/users/KanuTaH/" class="user-info user-info_inline" rel="user-popover" data-user-login="KanuTaH">
    <img src="Swift%20%D0%BF%D1%80%D0%BE%D1%82%D0%B8%D0%B2%20Rust%20%E2%80%94%20%D0%B1%D0%B5%D0%BD%D1%87%D0%BC%D0%B0%D1%80%D0%BA%D0%B8%D0%BD%D0%B3%20%D0%BD%D0%B0%20Linux%20%D1%81%20(%D0%BD%D0%B5)%D0%BF%D0%BE%D0%BD%D1%8F%D1%82%D0%BD%D1%8B%D0%BC%20%D1%84%D0%B8%D0%BD%D0%B0%D0%BB%D0%BE%D0%BC%20_%20%D0%A5%D0%B0%D0%B1%D1%80_files/de79b1dd4d8c2305b72dd794b21141d7.png" class="user-info__image-pic user-info__image-pic_small" width="24" height="24">
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">KanuTaH</span>
</a>

          
          <time class="comment__date-time comment__date-time_published">8 мая 2019 в 12:01</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="#comment_20128114" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="20128114" data-action="add" title="Добавить в закладки"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#book"></use></svg></a>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <span class="icon_comment-branch js-comment_tree" data-id="20128114" data-parent_id="20128070" title="Показать ветку комментариев"><svg width="8" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#tree"></use></svg></span>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#comment_20128070" class="icon_comment-arrow-up js-comment_parent" data-id="20128114" data-parent_id="20128070" title="Показать предыдущий комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
    </li>

  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="#comment_20128114" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="20128114" data-parent_id="20128070" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="20128114" data-post-target="450512" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="plus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter   js-score" title="Всего голосов 0: ↑0 и ↓0">0</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message ">Я к тому, что если вы пишете, 
прости господи, библиотеку, предоставляющую некий API, которую будут 
использовать как dll и, скорее всего, никто из использующих ее не будет 
ее каждый раз пересобирать, то вот эти вот все аргументы «а вдруг 
someone consuming the API might take a reference of an attribute and 
hold on to it long enough for it to become invalidated» — это как бы так
 себе аргумент, мягко говоря. Тут либо давать доступ к атрибутам через 
что-то вроде умных указателей, либо просто надеяться на то, что 
пользователи библиотеки напишут свой код аккуратно. Я думаю, в глубине 
души вы это и сами понимаете.</div>

        <div class="comment__footer">
    <a href="#reply" class="comment__footer-link reply_link" onclick="return comment_show_reply_form(20128114 )">Ответить</a>


</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-10" id="reply_comments_20128114">  <li class="content-list__item content-list__item_comment js-comment " rel="20128132">
    
    <span class="parent_id" data-parent_id="20128114"></span>
    <div class="comment" id="comment_20128132">
      <span class="comment__collapse" title="Свернуть/развернуть ветку комментариев" data-id="20128132"></span>
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head   " rel="20128132">
          <a href="https://habr.com/ru/users/PsyHaSTe/" class="user-info user-info_inline" rel="user-popover" data-user-login="PsyHaSTe">
    <img src="Swift%20%D0%BF%D1%80%D0%BE%D1%82%D0%B8%D0%B2%20Rust%20%E2%80%94%20%D0%B1%D0%B5%D0%BD%D1%87%D0%BC%D0%B0%D1%80%D0%BA%D0%B8%D0%BD%D0%B3%20%D0%BD%D0%B0%20Linux%20%D1%81%20(%D0%BD%D0%B5)%D0%BF%D0%BE%D0%BD%D1%8F%D1%82%D0%BD%D1%8B%D0%BC%20%D1%84%D0%B8%D0%BD%D0%B0%D0%BB%D0%BE%D0%BC%20_%20%D0%A5%D0%B0%D0%B1%D1%80_files/7631ac5e5a7e237a937f5f2a74ae4c9e.jpg" class="user-info__image-pic user-info__image-pic_small" width="24" height="24">
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">PsyHaSTe</span>
</a>

          
          <time class="comment__date-time comment__date-time_published">8 мая 2019 в 12:04</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="#comment_20128132" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="20128132" data-action="add" title="Добавить в закладки"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#book"></use></svg></a>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <span class="icon_comment-branch js-comment_tree" data-id="20128132" data-parent_id="20128114" title="Показать ветку комментариев"><svg width="8" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#tree"></use></svg></span>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#comment_20128114" class="icon_comment-arrow-up js-comment_parent" data-id="20128132" data-parent_id="20128114" title="Показать предыдущий комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
    </li>

  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="#comment_20128132" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="20128132" data-parent_id="20128114" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="20128132" data-post-target="450512" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="plus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter voting-wjt__counter_positive  js-score" title="Всего голосов +1: ↑1 и ↓0">+1</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message "><p>Если я буду вызывать чужую dll, то я как и в плюсах лучше сделаю копию, на всякий случай.</p><br>
<p>Только это пессимистичный сценарий.</p><br>
<p>Я прекрасно понимаю о чем говорит автор. Отследить в большой системе 
кто что меняет нереально. Я помню функцию forEach, в которой в 
реализации копировался итерируемая коллекция, чтобы работало в случае 
инвалидации.</p></div>

        <div class="comment__footer">
    <a href="#reply" class="comment__footer-link reply_link" onclick="return comment_show_reply_form(20128132 )">Ответить</a>


</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-11" id="reply_comments_20128132">  <li class="content-list__item content-list__item_comment js-comment " rel="20128156">
    
    <span class="parent_id" data-parent_id="20128132"></span>
    <div class="comment" id="comment_20128156">
      <span class="comment__collapse" title="Свернуть/развернуть ветку комментариев" data-id="20128156"></span>
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head   " rel="20128156">
          <a href="https://habr.com/ru/users/KanuTaH/" class="user-info user-info_inline" rel="user-popover" data-user-login="KanuTaH">
    <img src="Swift%20%D0%BF%D1%80%D0%BE%D1%82%D0%B8%D0%B2%20Rust%20%E2%80%94%20%D0%B1%D0%B5%D0%BD%D1%87%D0%BC%D0%B0%D1%80%D0%BA%D0%B8%D0%BD%D0%B3%20%D0%BD%D0%B0%20Linux%20%D1%81%20(%D0%BD%D0%B5)%D0%BF%D0%BE%D0%BD%D1%8F%D1%82%D0%BD%D1%8B%D0%BC%20%D1%84%D0%B8%D0%BD%D0%B0%D0%BB%D0%BE%D0%BC%20_%20%D0%A5%D0%B0%D0%B1%D1%80_files/de79b1dd4d8c2305b72dd794b21141d7.png" class="user-info__image-pic user-info__image-pic_small" width="24" height="24">
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">KanuTaH</span>
</a>

          <svg class="icon_comment-edit" title="Комментарий был изменен" width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#pencil"></use></svg>
          <time class="comment__date-time comment__date-time_published">8 мая 2019 в 12:07</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="#comment_20128156" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="20128156" data-action="add" title="Добавить в закладки"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#book"></use></svg></a>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <span class="icon_comment-branch js-comment_tree" data-id="20128156" data-parent_id="20128132" title="Показать ветку комментариев"><svg width="8" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#tree"></use></svg></span>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#comment_20128132" class="icon_comment-arrow-up js-comment_parent" data-id="20128156" data-parent_id="20128132" title="Показать предыдущий комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
    </li>

  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="#comment_20128156" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="20128156" data-parent_id="20128132" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="20128156" data-post-target="450512" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="plus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter   js-score" title="Всего голосов 0: ↑0 и ↓0">0</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message ">Если библиотека написана так, что
 ее функции принимают и возвращают умные указатели, то в «копии на 
всякий случай» смысла нет. Это лишний расход ресурсов.<br>
<br>
<blockquote>Я помню функцию forEach, в которой в реализации копировался итерируемая коллекция, чтобы работало в случае инвалидации</blockquote><br>
Если эта forEach рассчитана на вызов чего-то внешнего, что ты в общем 
случае контролировать не можешь, то копирование — да, разумная 
предосторожность, что на C++, что на расте. foreach из Qt (который 
Q_FOREACH), например, по-любому делает shallow copy итерируемого 
контейнера, но там, как я уже писал, все продумано, и это дешевая 
операция. Если автор кода, который вызывается из foreach, молодец — то 
практически никаких затрат не будет, если не молодец — ну, будет 
дополнительное копирование.</div>

        <div class="comment__footer">
    <a href="#reply" class="comment__footer-link reply_link" onclick="return comment_show_reply_form(20128156 )">Ответить</a>


</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-12" id="reply_comments_20128156">  <li class="content-list__item content-list__item_comment js-comment " rel="20128204">
    
    <span class="parent_id" data-parent_id="20128156"></span>
    <div class="comment" id="comment_20128204">
      <span class="comment__collapse" title="Свернуть/развернуть ветку комментариев" data-id="20128204"></span>
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head   " rel="20128204">
          <a href="https://habr.com/ru/users/PsyHaSTe/" class="user-info user-info_inline" rel="user-popover" data-user-login="PsyHaSTe">
    <img src="Swift%20%D0%BF%D1%80%D0%BE%D1%82%D0%B8%D0%B2%20Rust%20%E2%80%94%20%D0%B1%D0%B5%D0%BD%D1%87%D0%BC%D0%B0%D1%80%D0%BA%D0%B8%D0%BD%D0%B3%20%D0%BD%D0%B0%20Linux%20%D1%81%20(%D0%BD%D0%B5)%D0%BF%D0%BE%D0%BD%D1%8F%D1%82%D0%BD%D1%8B%D0%BC%20%D1%84%D0%B8%D0%BD%D0%B0%D0%BB%D0%BE%D0%BC%20_%20%D0%A5%D0%B0%D0%B1%D1%80_files/7631ac5e5a7e237a937f5f2a74ae4c9e.jpg" class="user-info__image-pic user-info__image-pic_small" width="24" height="24">
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">PsyHaSTe</span>
</a>

          <svg class="icon_comment-edit" title="Комментарий был изменен" width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#pencil"></use></svg>
          <time class="comment__date-time comment__date-time_published">8 мая 2019 в 12:15</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="#comment_20128204" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="20128204" data-action="add" title="Добавить в закладки"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#book"></use></svg></a>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <span class="icon_comment-branch js-comment_tree" data-id="20128204" data-parent_id="20128156" title="Показать ветку комментариев"><svg width="8" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#tree"></use></svg></span>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#comment_20128156" class="icon_comment-arrow-up js-comment_parent" data-id="20128204" data-parent_id="20128156" title="Показать предыдущий комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
    </li>

  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="#comment_20128204" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="20128204" data-parent_id="20128156" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="20128204" data-post-target="450512" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="plus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter   js-score" title="Всего голосов 0: ↑0 и ↓0">0</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message "><p>Библиотека обычно написана в 
стиле ANSI C, потому что это единственный популярный язык со стабильным 
ABI. Откуда там возьмутся умные указатели — загадка. </p><br>
<hr><br>
<p>А вообще, как я уже сказал, это все вилами по воде писано. Обычное 
приложение не линкуется к непонятным либам по звездам. Есть обычный 
пакетный менеджер, в нем есть нормальные зависимости, и вот это все. В 
таком сценарии компилятор все нормально проверит. И это дефолт.</p></div>

        <div class="comment__footer">
    <a href="#reply" class="comment__footer-link reply_link" onclick="return comment_show_reply_form(20128204 )">Ответить</a>


</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-13" id="reply_comments_20128204">  <li class="content-list__item content-list__item_comment js-comment " rel="20128244">
    
    <span class="parent_id" data-parent_id="20128204"></span>
    <div class="comment" id="comment_20128244">
      <span class="comment__collapse" title="Свернуть/развернуть ветку комментариев" data-id="20128244"></span>
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head   " rel="20128244">
          <a href="https://habr.com/ru/users/KanuTaH/" class="user-info user-info_inline" rel="user-popover" data-user-login="KanuTaH">
    <img src="Swift%20%D0%BF%D1%80%D0%BE%D1%82%D0%B8%D0%B2%20Rust%20%E2%80%94%20%D0%B1%D0%B5%D0%BD%D1%87%D0%BC%D0%B0%D1%80%D0%BA%D0%B8%D0%BD%D0%B3%20%D0%BD%D0%B0%20Linux%20%D1%81%20(%D0%BD%D0%B5)%D0%BF%D0%BE%D0%BD%D1%8F%D1%82%D0%BD%D1%8B%D0%BC%20%D1%84%D0%B8%D0%BD%D0%B0%D0%BB%D0%BE%D0%BC%20_%20%D0%A5%D0%B0%D0%B1%D1%80_files/de79b1dd4d8c2305b72dd794b21141d7.png" class="user-info__image-pic user-info__image-pic_small" width="24" height="24">
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">KanuTaH</span>
</a>

          
          <time class="comment__date-time comment__date-time_published">8 мая 2019 в 12:22</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="#comment_20128244" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="20128244" data-action="add" title="Добавить в закладки"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#book"></use></svg></a>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <span class="icon_comment-branch js-comment_tree" data-id="20128244" data-parent_id="20128204" title="Показать ветку комментариев"><svg width="8" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#tree"></use></svg></span>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#comment_20128204" class="icon_comment-arrow-up js-comment_parent" data-id="20128244" data-parent_id="20128204" title="Показать предыдущий комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
    </li>

  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="#comment_20128244" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="20128244" data-parent_id="20128204" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="20128244" data-post-target="450512" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="plus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter   js-score" title="Всего голосов 0: ↑0 и ↓0">0</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message ">Библиотеки разные бывают. 
Использовать ANSI C там никто не заставляет. Там может потребоваться 
собирать определенным компилятором, это да. А «обычное приложение» в 
моей практике сплошь и рядом линкуется к «непонятным либам», например, к
 Google AdMob, Firebase, Facebook SDK, и так далее.</div>

        <div class="comment__footer">
    <a href="#reply" class="comment__footer-link reply_link" onclick="return comment_show_reply_form(20128244 )">Ответить</a>


</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-14" id="reply_comments_20128244">  <li class="content-list__item content-list__item_comment js-comment " rel="20128268">
    
    <span class="parent_id" data-parent_id="20128244"></span>
    <div class="comment" id="comment_20128268">
      <span class="comment__collapse" title="Свернуть/развернуть ветку комментариев" data-id="20128268"></span>
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head   " rel="20128268">
          <a href="https://habr.com/ru/users/PsyHaSTe/" class="user-info user-info_inline" rel="user-popover" data-user-login="PsyHaSTe">
    <img src="Swift%20%D0%BF%D1%80%D0%BE%D1%82%D0%B8%D0%B2%20Rust%20%E2%80%94%20%D0%B1%D0%B5%D0%BD%D1%87%D0%BC%D0%B0%D1%80%D0%BA%D0%B8%D0%BD%D0%B3%20%D0%BD%D0%B0%20Linux%20%D1%81%20(%D0%BD%D0%B5)%D0%BF%D0%BE%D0%BD%D1%8F%D1%82%D0%BD%D1%8B%D0%BC%20%D1%84%D0%B8%D0%BD%D0%B0%D0%BB%D0%BE%D0%BC%20_%20%D0%A5%D0%B0%D0%B1%D1%80_files/7631ac5e5a7e237a937f5f2a74ae4c9e.jpg" class="user-info__image-pic user-info__image-pic_small" width="24" height="24">
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">PsyHaSTe</span>
</a>

          <svg class="icon_comment-edit" title="Комментарий был изменен" width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#pencil"></use></svg>
          <time class="comment__date-time comment__date-time_published">8 мая 2019 в 12:26</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="#comment_20128268" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="20128268" data-action="add" title="Добавить в закладки"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#book"></use></svg></a>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <span class="icon_comment-branch js-comment_tree" data-id="20128268" data-parent_id="20128244" title="Показать ветку комментариев"><svg width="8" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#tree"></use></svg></span>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#comment_20128244" class="icon_comment-arrow-up js-comment_parent" data-id="20128268" data-parent_id="20128244" title="Показать предыдущий комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
    </li>

  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="#comment_20128268" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="20128268" data-parent_id="20128244" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="20128268" data-post-target="450512" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="plus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter   js-score" title="Всего голосов 0: ↑0 и ↓0">0</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message "><blockquote>Библиотеки разные 
бывают. Использовать ANSI C там никто не заставляет. Там может 
потребоваться собирать определенным компилятором, это да.</blockquote><p>За
 пределами плюсов им собственно мало кто пользуется. Если я хочу из C# 
вызвать библиотечные функци апи с умными указателями мне никак не 
поможет.</p><br>
<blockquote>А «обычное приложение» в моей практике сплошь и рядом 
линкуется к «непонятным либам», например, к Google AdMob, Firebase, 
Facebook SDK, и так далее.</blockquote><p>Да пожалуйста </p><br>
<p><a href="https://www.nuget.org/packages/Google.Apis/">https://www.nuget.org/packages/Google.Apis/</a></p><br>
<p><a href="https://www.nuget.org/packages/Facebook">https://www.nuget.org/packages/Facebook</a><br>
...</p></div>

        <div class="comment__footer">
    <a href="#reply" class="comment__footer-link reply_link" onclick="return comment_show_reply_form(20128268 )">Ответить</a>


</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-15" id="reply_comments_20128268">  <li class="content-list__item content-list__item_comment js-comment " rel="20128294">
    
    <span class="parent_id" data-parent_id="20128268"></span>
    <div class="comment" id="comment_20128294">
      <span class="comment__collapse" title="Свернуть/развернуть ветку комментариев" data-id="20128294"></span>
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head   " rel="20128294">
          <a href="https://habr.com/ru/users/KanuTaH/" class="user-info user-info_inline" rel="user-popover" data-user-login="KanuTaH">
    <img src="Swift%20%D0%BF%D1%80%D0%BE%D1%82%D0%B8%D0%B2%20Rust%20%E2%80%94%20%D0%B1%D0%B5%D0%BD%D1%87%D0%BC%D0%B0%D1%80%D0%BA%D0%B8%D0%BD%D0%B3%20%D0%BD%D0%B0%20Linux%20%D1%81%20(%D0%BD%D0%B5)%D0%BF%D0%BE%D0%BD%D1%8F%D1%82%D0%BD%D1%8B%D0%BC%20%D1%84%D0%B8%D0%BD%D0%B0%D0%BB%D0%BE%D0%BC%20_%20%D0%A5%D0%B0%D0%B1%D1%80_files/de79b1dd4d8c2305b72dd794b21141d7.png" class="user-info__image-pic user-info__image-pic_small" width="24" height="24">
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">KanuTaH</span>
</a>

          
          <time class="comment__date-time comment__date-time_published">8 мая 2019 в 12:31</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="#comment_20128294" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="20128294" data-action="add" title="Добавить в закладки"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#book"></use></svg></a>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <span class="icon_comment-branch js-comment_tree" data-id="20128294" data-parent_id="20128268" title="Показать ветку комментариев"><svg width="8" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#tree"></use></svg></span>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#comment_20128268" class="icon_comment-arrow-up js-comment_parent" data-id="20128294" data-parent_id="20128268" title="Показать предыдущий комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
    </li>

  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="#comment_20128294" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="20128294" data-parent_id="20128268" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="20128294" data-post-target="450512" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="plus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter   js-score" title="Всего голосов 0: ↑0 и ↓0">0</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message ">Я к тому, что если у компилятора 
раста нет доступа к коду этих «непонятных либ» (хотя бы в виде IL), он 
вряд ли сможет что-то там прочекать с временем жизни объектов, 
передаваемых в них или возвращаемых из них. Даже если сами эти 
библиотеки будут написаны на Rust, а потом собраны в .dll, это никак им 
не поможет. Привет, unsafe.</div>

        <div class="comment__footer">
    <a href="#reply" class="comment__footer-link reply_link" onclick="return comment_show_reply_form(20128294 )">Ответить</a>


</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-16" id="reply_comments_20128294">  <li class="content-list__item content-list__item_comment js-comment " rel="20128300">
    
    <span class="parent_id" data-parent_id="20128294"></span>
    <div class="comment" id="comment_20128300">
      <span class="comment__collapse" title="Свернуть/развернуть ветку комментариев" data-id="20128300"></span>
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head   " rel="20128300">
          <a href="https://habr.com/ru/users/PsyHaSTe/" class="user-info user-info_inline" rel="user-popover" data-user-login="PsyHaSTe">
    <img src="Swift%20%D0%BF%D1%80%D0%BE%D1%82%D0%B8%D0%B2%20Rust%20%E2%80%94%20%D0%B1%D0%B5%D0%BD%D1%87%D0%BC%D0%B0%D1%80%D0%BA%D0%B8%D0%BD%D0%B3%20%D0%BD%D0%B0%20Linux%20%D1%81%20(%D0%BD%D0%B5)%D0%BF%D0%BE%D0%BD%D1%8F%D1%82%D0%BD%D1%8B%D0%BC%20%D1%84%D0%B8%D0%BD%D0%B0%D0%BB%D0%BE%D0%BC%20_%20%D0%A5%D0%B0%D0%B1%D1%80_files/7631ac5e5a7e237a937f5f2a74ae4c9e.jpg" class="user-info__image-pic user-info__image-pic_small" width="24" height="24">
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">PsyHaSTe</span>
</a>

          
          <time class="comment__date-time comment__date-time_published">8 мая 2019 в 12:32</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="#comment_20128300" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="20128300" data-action="add" title="Добавить в закладки"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#book"></use></svg></a>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <span class="icon_comment-branch js-comment_tree" data-id="20128300" data-parent_id="20128294" title="Показать ветку комментариев"><svg width="8" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#tree"></use></svg></span>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#comment_20128294" class="icon_comment-arrow-up js-comment_parent" data-id="20128300" data-parent_id="20128294" title="Показать предыдущий комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
    </li>

  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="#comment_20128300" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="20128300" data-parent_id="20128294" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="20128300" data-post-target="450512" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="plus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter voting-wjt__counter_positive  js-score" title="Всего голосов +1: ↑1 и ↓0">+1</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message "><p>Эмм, если мы на плюсах 
подключаем С++ либы, то на расте мы подключаем раст либы. Если либа 
написана на расте, то компилятор её уже провалидировал.</p><br>
<p>Я не понимаю поинта.</p></div>

        <div class="comment__footer">
    <a href="#reply" class="comment__footer-link reply_link" onclick="return comment_show_reply_form(20128300 )">Ответить</a>


</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-17" id="reply_comments_20128300">  <li class="content-list__item content-list__item_comment js-comment " rel="20128318">
    
    <span class="parent_id" data-parent_id="20128300"></span>
    <div class="comment" id="comment_20128318">
      <span class="comment__collapse" title="Свернуть/развернуть ветку комментариев" data-id="20128318"></span>
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head   " rel="20128318">
          <a href="https://habr.com/ru/users/KanuTaH/" class="user-info user-info_inline" rel="user-popover" data-user-login="KanuTaH">
    <img src="Swift%20%D0%BF%D1%80%D0%BE%D1%82%D0%B8%D0%B2%20Rust%20%E2%80%94%20%D0%B1%D0%B5%D0%BD%D1%87%D0%BC%D0%B0%D1%80%D0%BA%D0%B8%D0%BD%D0%B3%20%D0%BD%D0%B0%20Linux%20%D1%81%20(%D0%BD%D0%B5)%D0%BF%D0%BE%D0%BD%D1%8F%D1%82%D0%BD%D1%8B%D0%BC%20%D1%84%D0%B8%D0%BD%D0%B0%D0%BB%D0%BE%D0%BC%20_%20%D0%A5%D0%B0%D0%B1%D1%80_files/de79b1dd4d8c2305b72dd794b21141d7.png" class="user-info__image-pic user-info__image-pic_small" width="24" height="24">
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">KanuTaH</span>
</a>

          
          <time class="comment__date-time comment__date-time_published">8 мая 2019 в 12:35</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="#comment_20128318" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="20128318" data-action="add" title="Добавить в закладки"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#book"></use></svg></a>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <span class="icon_comment-branch js-comment_tree" data-id="20128318" data-parent_id="20128300" title="Показать ветку комментариев"><svg width="8" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#tree"></use></svg></span>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#comment_20128300" class="icon_comment-arrow-up js-comment_parent" data-id="20128318" data-parent_id="20128300" title="Показать предыдущий комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
    </li>

  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="#comment_20128318" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="20128318" data-parent_id="20128300" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="20128318" data-post-target="450512" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="plus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter   js-score" title="Всего голосов 0: ↑0 и ↓0">0</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message ">Внутри она, возможно, и 
провалидирована, но вот в этой библиотеке, скажем, есть экспортированная
 функция, которая возвращает указатель на что-то. Компилятор в момент 
сборки этой библиотеки не может знать, как дальше этот указатель будет 
использован, и не может проверить, какое у него будет время жизни.</div>

        <div class="comment__footer">
    <a href="#reply" class="comment__footer-link reply_link" onclick="return comment_show_reply_form(20128318 )">Ответить</a>


</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-18" id="reply_comments_20128318">  <li class="content-list__item content-list__item_comment js-comment " rel="20128496">
    
    <span class="parent_id" data-parent_id="20128318"></span>
    <div class="comment" id="comment_20128496">
      <span class="comment__collapse" title="Свернуть/развернуть ветку комментариев" data-id="20128496"></span>
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head   " rel="20128496">
          <a href="https://habr.com/ru/users/vitvakatu/" class="user-info user-info_inline" rel="user-popover" data-user-login="vitvakatu">
    <img src="Swift%20%D0%BF%D1%80%D0%BE%D1%82%D0%B8%D0%B2%20Rust%20%E2%80%94%20%D0%B1%D0%B5%D0%BD%D1%87%D0%BC%D0%B0%D1%80%D0%BA%D0%B8%D0%BD%D0%B3%20%D0%BD%D0%B0%20Linux%20%D1%81%20(%D0%BD%D0%B5)%D0%BF%D0%BE%D0%BD%D1%8F%D1%82%D0%BD%D1%8B%D0%BC%20%D1%84%D0%B8%D0%BD%D0%B0%D0%BB%D0%BE%D0%BC%20_%20%D0%A5%D0%B0%D0%B1%D1%80_files/ad8e29a353157cf829a8a65f4272e8fb.jpg" class="user-info__image-pic user-info__image-pic_small" width="24" height="24">
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">vitvakatu</span>
</a>

          
          <time class="comment__date-time comment__date-time_published">8 мая 2019 в 13:10</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="#comment_20128496" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="20128496" data-action="add" title="Добавить в закладки"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#book"></use></svg></a>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <span class="icon_comment-branch js-comment_tree" data-id="20128496" data-parent_id="20128318" title="Показать ветку комментариев"><svg width="8" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#tree"></use></svg></span>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#comment_20128318" class="icon_comment-arrow-up js-comment_parent" data-id="20128496" data-parent_id="20128318" title="Показать предыдущий комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
    </li>

  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="#comment_20128496" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="20128496" data-parent_id="20128318" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="20128496" data-post-target="450512" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="plus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter   js-score" title="Всего голосов 0: ↑0 и ↓0">0</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message "><p>Валидировать время жизни 
указателя будет, очевидно, компилятор при сборке приложения, которая эту
 библиотеку использует. Библиотеке само собой об этом знать не нужно. 
Инкапсуляция, все дела.</p></div>

        <div class="comment__footer">
    <a href="#reply" class="comment__footer-link reply_link" onclick="return comment_show_reply_form(20128496 )">Ответить</a>


</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-19" id="reply_comments_20128496">  <li class="content-list__item content-list__item_comment js-comment " rel="20128504">
    
    <span class="parent_id" data-parent_id="20128496"></span>
    <div class="comment" id="comment_20128504">
      <span class="comment__collapse" title="Свернуть/развернуть ветку комментариев" data-id="20128504"></span>
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head   " rel="20128504">
          <a href="https://habr.com/ru/users/KanuTaH/" class="user-info user-info_inline" rel="user-popover" data-user-login="KanuTaH">
    <img src="Swift%20%D0%BF%D1%80%D0%BE%D1%82%D0%B8%D0%B2%20Rust%20%E2%80%94%20%D0%B1%D0%B5%D0%BD%D1%87%D0%BC%D0%B0%D1%80%D0%BA%D0%B8%D0%BD%D0%B3%20%D0%BD%D0%B0%20Linux%20%D1%81%20(%D0%BD%D0%B5)%D0%BF%D0%BE%D0%BD%D1%8F%D1%82%D0%BD%D1%8B%D0%BC%20%D1%84%D0%B8%D0%BD%D0%B0%D0%BB%D0%BE%D0%BC%20_%20%D0%A5%D0%B0%D0%B1%D1%80_files/de79b1dd4d8c2305b72dd794b21141d7.png" class="user-info__image-pic user-info__image-pic_small" width="24" height="24">
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">KanuTaH</span>
</a>

          
          <time class="comment__date-time comment__date-time_published">8 мая 2019 в 13:11</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="#comment_20128504" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="20128504" data-action="add" title="Добавить в закладки"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#book"></use></svg></a>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <span class="icon_comment-branch js-comment_tree" data-id="20128504" data-parent_id="20128496" title="Показать ветку комментариев"><svg width="8" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#tree"></use></svg></span>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#comment_20128496" class="icon_comment-arrow-up js-comment_parent" data-id="20128504" data-parent_id="20128496" title="Показать предыдущий комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
    </li>

  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="#comment_20128504" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="20128504" data-parent_id="20128496" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="20128504" data-post-target="450512" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="plus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter   js-score" title="Всего голосов 0: ↑0 и ↓0">0</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message ">Очевидно, он не сможет этого 
сделать без исходного кода библиотеки в том или ином виде. Исходники 
коммерческих библиотек никто раздавать, само собой, не будет ради этого.</div>

        <div class="comment__footer">
    <a href="#reply" class="comment__footer-link reply_link" onclick="return comment_show_reply_form(20128504 )">Ответить</a>


</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-20" id="reply_comments_20128504">  <li class="content-list__item content-list__item_comment js-comment " rel="20128698">
    
    <span class="parent_id" data-parent_id="20128504"></span>
    <div class="comment" id="comment_20128698">
      <span class="comment__collapse" title="Свернуть/развернуть ветку комментариев" data-id="20128698"></span>
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head comment__head_topic-author comment__head_my-comment " rel="20128698">
          <a href="https://habr.com/ru/users/epishman/" class="user-info user-info_inline" rel="user-popover" data-user-login="epishman">
    <img src="Swift%20%D0%BF%D1%80%D0%BE%D1%82%D0%B8%D0%B2%20Rust%20%E2%80%94%20%D0%B1%D0%B5%D0%BD%D1%87%D0%BC%D0%B0%D1%80%D0%BA%D0%B8%D0%BD%D0%B3%20%D0%BD%D0%B0%20Linux%20%D1%81%20(%D0%BD%D0%B5)%D0%BF%D0%BE%D0%BD%D1%8F%D1%82%D0%BD%D1%8B%D0%BC%20%D1%84%D0%B8%D0%BD%D0%B0%D0%BB%D0%BE%D0%BC%20_%20%D0%A5%D0%B0%D0%B1%D1%80_files/ec0d88c4853c0d36d44bd0526dcfa8d7.png" class="user-info__image-pic user-info__image-pic_small" width="24" height="24">
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">epishman</span>
</a>

          
          <time class="comment__date-time comment__date-time_published">8 мая 2019 в 13:48</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="#comment_20128698" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="20128698" data-action="add" title="Добавить в закладки"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#book"></use></svg></a>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <span class="icon_comment-branch js-comment_tree" data-id="20128698" data-parent_id="20128504" title="Показать ветку комментариев"><svg width="8" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#tree"></use></svg></span>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#comment_20128504" class="icon_comment-arrow-up js-comment_parent" data-id="20128698" data-parent_id="20128504" title="Показать предыдущий комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
    </li>

  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="#comment_20128698" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="20128698" data-parent_id="20128504" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="20128698" data-post-target="450512" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="plus" onclick="comment_vote(this);" title="За свои комментарии голосовать нельзя" disabled="disabled"><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter   js-score" title="Всего голосов 0: ↑0 и ↓0">0</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="За свои комментарии голосовать нельзя" disabled="disabled"><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message ">Ничего не понял. Если либа 
возвращает растовую ссылку, то владелец этой ссылки должен быть не в 
либе, а в коде, использующем либу — он владельца и прибъет. Разве может 
быть ситуация, что из либы возвращается ссылка, и владелец этой ссылки 
сидит внутри либы? У меня компилятор ругается, что «объект не живет 
долго».</div>

        <div class="comment__footer">
    <a href="#reply" class="comment__footer-link reply_link" onclick="return comment_show_reply_form(20128698 )">Ответить</a>


</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-21" id="reply_comments_20128698">  <li class="content-list__item content-list__item_comment js-comment " rel="20128726">
    
    <span class="parent_id" data-parent_id="20128698"></span>
    <div class="comment" id="comment_20128726">
      <span class="comment__collapse" title="Свернуть/развернуть ветку комментариев" data-id="20128726"></span>
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head   " rel="20128726">
          <a href="https://habr.com/ru/users/KanuTaH/" class="user-info user-info_inline" rel="user-popover" data-user-login="KanuTaH">
    <img src="Swift%20%D0%BF%D1%80%D0%BE%D1%82%D0%B8%D0%B2%20Rust%20%E2%80%94%20%D0%B1%D0%B5%D0%BD%D1%87%D0%BC%D0%B0%D1%80%D0%BA%D0%B8%D0%BD%D0%B3%20%D0%BD%D0%B0%20Linux%20%D1%81%20(%D0%BD%D0%B5)%D0%BF%D0%BE%D0%BD%D1%8F%D1%82%D0%BD%D1%8B%D0%BC%20%D1%84%D0%B8%D0%BD%D0%B0%D0%BB%D0%BE%D0%BC%20_%20%D0%A5%D0%B0%D0%B1%D1%80_files/de79b1dd4d8c2305b72dd794b21141d7.png" class="user-info__image-pic user-info__image-pic_small" width="24" height="24">
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">KanuTaH</span>
</a>

          <svg class="icon_comment-edit" title="Комментарий был изменен" width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#pencil"></use></svg>
          <time class="comment__date-time comment__date-time_published">8 мая 2019 в 13:54</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="#comment_20128726" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="20128726" data-action="add" title="Добавить в закладки"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#book"></use></svg></a>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <span class="icon_comment-branch js-comment_tree" data-id="20128726" data-parent_id="20128698" title="Показать ветку комментариев"><svg width="8" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#tree"></use></svg></span>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#comment_20128698" class="icon_comment-arrow-up js-comment_parent" data-id="20128726" data-parent_id="20128698" title="Показать предыдущий комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
    </li>

  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="#comment_20128726" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="20128726" data-parent_id="20128698" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="20128726" data-post-target="450512" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="plus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter  voting-wjt__counter_negative js-score" title="Всего голосов –4: ↑0 и ↓4">–4</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message comment__message_downgrade comment__message_downgrade-4">:)))
 Да ужж, при таком подходе забавно было бы посмотреть на чисто 
растовский аналог обычной библиотечной функции для работы с памятью типа
 malloc(). Для библиотек вообще-то создавать некие свои ресурсы и 
возвращать на них указатели или хэндлы для дальнейшего использования в 
этой же библиотеке (а затем и освобождения) — это нормальная практика. 
Не всегда можно требовать, чтобы владелец ссылки в коде, использующем 
либу, вообще был в курсе, сколько памяти нужно выделить под 
соответствующий объект, например. Не его это собачье дело.<br>
<br>
P.S. И, кстати, что такое «владелец»? В графе, например, или в двусвязном списке, кто чей владелец?<br>
<br>
P.P.S. Растаман у меня (сорри, конечно, но не могу удержаться) 
ассоциируется с человеком в смирительной рубашке в кресле-каталке, 
который <s>ходит</s> ездит не туда, куда ему нужно, а туда, куда повезет
 санитар, но зато счастлив, что не может случайно упасть и ушибить 
коленку. При этом вероятность разбить коленку по факту все равно никуда 
не девается потому, что это в любой момент могут сделать многочисленные 
окружающие.</div>

        <div class="comment__footer">
    <a href="#reply" class="comment__footer-link reply_link" onclick="return comment_show_reply_form(20128726 )">Ответить</a>


</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-22" id="reply_comments_20128726">  <li class="content-list__item content-list__item_comment js-comment " rel="20128814">
    
    <span class="parent_id" data-parent_id="20128726"></span>
    <div class="comment" id="comment_20128814">
      <span class="comment__collapse" title="Свернуть/развернуть ветку комментариев" data-id="20128814"></span>
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head comment__head_topic-author comment__head_my-comment " rel="20128814">
          <a href="https://habr.com/ru/users/epishman/" class="user-info user-info_inline" rel="user-popover" data-user-login="epishman">
    <img src="Swift%20%D0%BF%D1%80%D0%BE%D1%82%D0%B8%D0%B2%20Rust%20%E2%80%94%20%D0%B1%D0%B5%D0%BD%D1%87%D0%BC%D0%B0%D1%80%D0%BA%D0%B8%D0%BD%D0%B3%20%D0%BD%D0%B0%20Linux%20%D1%81%20(%D0%BD%D0%B5)%D0%BF%D0%BE%D0%BD%D1%8F%D1%82%D0%BD%D1%8B%D0%BC%20%D1%84%D0%B8%D0%BD%D0%B0%D0%BB%D0%BE%D0%BC%20_%20%D0%A5%D0%B0%D0%B1%D1%80_files/ec0d88c4853c0d36d44bd0526dcfa8d7.png" class="user-info__image-pic user-info__image-pic_small" width="24" height="24">
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">epishman</span>
</a>

          <svg class="icon_comment-edit" title="Комментарий был изменен" width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#pencil"></use></svg>
          <time class="comment__date-time comment__date-time_published">8 мая 2019 в 14:10</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="#comment_20128814" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="20128814" data-action="add" title="Добавить в закладки"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#book"></use></svg></a>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <span class="icon_comment-branch js-comment_tree" data-id="20128814" data-parent_id="20128726" title="Показать ветку комментариев"><svg width="8" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#tree"></use></svg></span>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#comment_20128726" class="icon_comment-arrow-up js-comment_parent" data-id="20128814" data-parent_id="20128726" title="Показать предыдущий комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
    </li>

  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="#comment_20128814" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="20128814" data-parent_id="20128726" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="20128814" data-post-target="450512" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="plus" onclick="comment_vote(this);" title="За свои комментарии голосовать нельзя" disabled="disabled"><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter   js-score" title="Всего голосов 0: ↑0 и ↓0">0</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="За свои комментарии голосовать нельзя" disabled="disabled"><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message "><a href="https://habr.com/ru/users/psyhaste/" class="user_link">PsyHaSTe</a>
 более компетентен в расте, насколько моих знаний хватает — любая 
функция может вернуть либо копию данных, либо указатель на память, 
выделенную до вызова этой функции, возможно есть исключения, не знаю.<br>
Графы и списки — это ж известный траходром раста, там специальные контейнеры для этого запилили :)</div>

        <div class="comment__footer">
    <a href="#reply" class="comment__footer-link reply_link" onclick="return comment_show_reply_form(20128814 )">Ответить</a>


</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-23" id="reply_comments_20128814">  <li class="content-list__item content-list__item_comment js-comment " rel="20128822">
    
    <span class="parent_id" data-parent_id="20128814"></span>
    <div class="comment" id="comment_20128822">
      <span class="comment__collapse" title="Свернуть/развернуть ветку комментариев" data-id="20128822"></span>
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head   " rel="20128822">
          <a href="https://habr.com/ru/users/KanuTaH/" class="user-info user-info_inline" rel="user-popover" data-user-login="KanuTaH">
    <img src="Swift%20%D0%BF%D1%80%D0%BE%D1%82%D0%B8%D0%B2%20Rust%20%E2%80%94%20%D0%B1%D0%B5%D0%BD%D1%87%D0%BC%D0%B0%D1%80%D0%BA%D0%B8%D0%BD%D0%B3%20%D0%BD%D0%B0%20Linux%20%D1%81%20(%D0%BD%D0%B5)%D0%BF%D0%BE%D0%BD%D1%8F%D1%82%D0%BD%D1%8B%D0%BC%20%D1%84%D0%B8%D0%BD%D0%B0%D0%BB%D0%BE%D0%BC%20_%20%D0%A5%D0%B0%D0%B1%D1%80_files/de79b1dd4d8c2305b72dd794b21141d7.png" class="user-info__image-pic user-info__image-pic_small" width="24" height="24">
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">KanuTaH</span>
</a>

          
          <time class="comment__date-time comment__date-time_published">8 мая 2019 в 14:13</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="#comment_20128822" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="20128822" data-action="add" title="Добавить в закладки"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#book"></use></svg></a>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <span class="icon_comment-branch js-comment_tree" data-id="20128822" data-parent_id="20128814" title="Показать ветку комментариев"><svg width="8" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#tree"></use></svg></span>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#comment_20128814" class="icon_comment-arrow-up js-comment_parent" data-id="20128822" data-parent_id="20128814" title="Показать предыдущий комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
    </li>

  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="#comment_20128822" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="20128822" data-parent_id="20128814" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="20128822" data-post-target="450512" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="plus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter   js-score" title="Всего голосов 0: ↑0 и ↓0">0</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message "><blockquote>любая функция может 
вернуть либо копию данных, либо указатель на память, выделенную до 
вызова этой функции, возможно есть исключения, не знаю.</blockquote><br>
Видимо, через пресловутый unsafe исключения и запиливаются.<br>
<br>
<blockquote>Графы и списки — это ж известный траходром раста, там специальные контейнеры для этого запилили :)</blockquote><br>
Не удивлен вообще нисколько.</div>

        <div class="comment__footer">
    <a href="#reply" class="comment__footer-link reply_link" onclick="return comment_show_reply_form(20128822 )">Ответить</a>


</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-24" id="reply_comments_20128822"></ul>
  </li>
</ul>
  </li>
  <li class="content-list__item content-list__item_comment js-comment " rel="20128892">
    
    <span class="parent_id" data-parent_id="20128726"></span>
    <div class="comment" id="comment_20128892">
      <span class="comment__collapse" title="Свернуть/развернуть ветку комментариев" data-id="20128892"></span>
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head   " rel="20128892">
          <a href="https://habr.com/ru/users/PsyHaSTe/" class="user-info user-info_inline" rel="user-popover" data-user-login="PsyHaSTe">
    <img src="Swift%20%D0%BF%D1%80%D0%BE%D1%82%D0%B8%D0%B2%20Rust%20%E2%80%94%20%D0%B1%D0%B5%D0%BD%D1%87%D0%BC%D0%B0%D1%80%D0%BA%D0%B8%D0%BD%D0%B3%20%D0%BD%D0%B0%20Linux%20%D1%81%20(%D0%BD%D0%B5)%D0%BF%D0%BE%D0%BD%D1%8F%D1%82%D0%BD%D1%8B%D0%BC%20%D1%84%D0%B8%D0%BD%D0%B0%D0%BB%D0%BE%D0%BC%20_%20%D0%A5%D0%B0%D0%B1%D1%80_files/7631ac5e5a7e237a937f5f2a74ae4c9e.jpg" class="user-info__image-pic user-info__image-pic_small" width="24" height="24">
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">PsyHaSTe</span>
</a>

          <svg class="icon_comment-edit" title="Комментарий был изменен" width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#pencil"></use></svg>
          <time class="comment__date-time comment__date-time_published">8 мая 2019 в 14:22</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="#comment_20128892" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="20128892" data-action="add" title="Добавить в закладки"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#book"></use></svg></a>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <span class="icon_comment-branch js-comment_tree" data-id="20128892" data-parent_id="20128726" title="Показать ветку комментариев"><svg width="8" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#tree"></use></svg></span>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#comment_20128726" class="icon_comment-arrow-up js-comment_parent" data-id="20128892" data-parent_id="20128726" title="Показать предыдущий комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
    </li>

  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="#comment_20128892" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="20128892" data-parent_id="20128726" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="20128892" data-post-target="450512" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small voting-wjt__button_plus" data-action="plus" onclick="comment_vote(this);" title="Вы проголосовали положительно " disabled="disabled"><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter voting-wjt__counter_positive  js-score" title="Всего голосов +1: ↑1 и ↓0">+1</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="Вы проголосовали положительно , отменить голос нельзя" disabled="disabled"><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message "><blockquote>Да ужж, при таком 
подходе забавно было бы посмотреть на чисто растовский аналог обычной 
библиотечной функции для работы с памятью типа malloc().</blockquote><p>Да пожалуйста, <a href="https://github.com/rustwasm/wee_alloc">смотрите</a></p><br>
<blockquote>P.S. И, кстати, что такое «владелец»? В графе, например, или в двусвязном списке, кто чей владелец?</blockquote><p>В графе нет владельца, нужно использовать shared_ptr. — <code>Rc&lt;T&gt;</code>, арены и прочее. Пример как можно сделать <a href="https://github.com/SimonSapin/rust-forest">здесь</a>.</p><br>
<blockquote>P.P.S.</blockquote><p>Пишите на жс, там вообще все разрешено.</p></div>

        <div class="comment__footer">
    <a href="#reply" class="comment__footer-link reply_link" onclick="return comment_show_reply_form(20128892 )">Ответить</a>


</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-23" id="reply_comments_20128892">  <li class="content-list__item content-list__item_comment js-comment " rel="20128956">
    
    <span class="parent_id" data-parent_id="20128892"></span>
    <div class="comment" id="comment_20128956">
      <span class="comment__collapse" title="Свернуть/развернуть ветку комментариев" data-id="20128956"></span>
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head   " rel="20128956">
          <a href="https://habr.com/ru/users/KanuTaH/" class="user-info user-info_inline" rel="user-popover" data-user-login="KanuTaH">
    <img src="Swift%20%D0%BF%D1%80%D0%BE%D1%82%D0%B8%D0%B2%20Rust%20%E2%80%94%20%D0%B1%D0%B5%D0%BD%D1%87%D0%BC%D0%B0%D1%80%D0%BA%D0%B8%D0%BD%D0%B3%20%D0%BD%D0%B0%20Linux%20%D1%81%20(%D0%BD%D0%B5)%D0%BF%D0%BE%D0%BD%D1%8F%D1%82%D0%BD%D1%8B%D0%BC%20%D1%84%D0%B8%D0%BD%D0%B0%D0%BB%D0%BE%D0%BC%20_%20%D0%A5%D0%B0%D0%B1%D1%80_files/de79b1dd4d8c2305b72dd794b21141d7.png" class="user-info__image-pic user-info__image-pic_small" width="24" height="24">
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">KanuTaH</span>
</a>

          <svg class="icon_comment-edit" title="Комментарий был изменен" width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#pencil"></use></svg>
          <time class="comment__date-time comment__date-time_published">8 мая 2019 в 14:32</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="#comment_20128956" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="20128956" data-action="add" title="Добавить в закладки"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#book"></use></svg></a>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <span class="icon_comment-branch js-comment_tree" data-id="20128956" data-parent_id="20128892" title="Показать ветку комментариев"><svg width="8" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#tree"></use></svg></span>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#comment_20128892" class="icon_comment-arrow-up js-comment_parent" data-id="20128956" data-parent_id="20128892" title="Показать предыдущий комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
    </li>

  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="#comment_20128956" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="20128956" data-parent_id="20128892" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="20128956" data-post-target="450512" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="plus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter  voting-wjt__counter_negative js-score" title="Всего голосов –1: ↑0 и ↓1">–1</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message comment__message_downgrade comment__message_downgrade-1"><blockquote>Да пожалуйста, смотрите</blockquote><br>
Да, я посмотрел:<br>
<br>
<pre><code class="rust hljs"><span class="hljs-keyword"><span class="hljs-keyword">pub</span></span>(<span class="hljs-keyword"><span class="hljs-keyword">crate</span></span>) <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fn</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">alloc_pages</span></span></span></span>(pages: Pages) -&gt; <span class="hljs-built_in"><span class="hljs-built_in">Result</span></span>&lt;ptr::NonNull&lt;<span class="hljs-built_in"><span class="hljs-built_in">u8</span></span>&gt;, AllocErr&gt; {
    <span class="hljs-keyword"><span class="hljs-keyword">unsafe</span></span> {
        <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> bytes: Bytes = pages.into();
        <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> addr = libc::mmap(
            ptr::null_mut(),
            bytes.<span class="hljs-number"><span class="hljs-number">0</span></span>,
            libc::PROT_WRITE | libc::PROT_READ,
            libc::MAP_ANON | libc::MAP_PRIVATE,
            -<span class="hljs-number"><span class="hljs-number">1</span></span>,
            <span class="hljs-number"><span class="hljs-number">0</span></span>,
        );
        <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> addr == libc::MAP_FAILED {
            <span class="hljs-literal"><span class="hljs-literal">Err</span></span>(AllocErr)
        } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> {
            ptr::NonNull::new(addr <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> *<span class="hljs-keyword"><span class="hljs-keyword">mut</span></span> <span class="hljs-built_in"><span class="hljs-built_in">u8</span></span>).ok_or(AllocErr)
        }
    }
}
</code></pre><br>
Не агритесь вы так, я ничего не имею против Раста жеж. Нравится людям на
 нем писать — очень хорошо. Просто вот люди, которые на полном серьезе 
пишут, что «компилятор все за нас проверит», «компилятор гарантирует» — 
это… ну… Шаг влево — шаг вправо, нестандартная задача, вызов сисколла, 
сторонняя библиотека без исходного кода (даже и написанная внутри на том
 же Расте), и все — «гарантии компилятора» превращаются в тыкву сразу. 
Раздражает не раст, раздражает его неумелая и грубая пропаганда.</div>

        <div class="comment__footer">
    <a href="#reply" class="comment__footer-link reply_link" onclick="return comment_show_reply_form(20128956 )">Ответить</a>


</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-24" id="reply_comments_20128956">  <li class="content-list__item content-list__item_comment js-comment " rel="20128990">
    
    <span class="parent_id" data-parent_id="20128956"></span>
    <div class="comment" id="comment_20128990">
      <span class="comment__collapse" title="Свернуть/развернуть ветку комментариев" data-id="20128990"></span>
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head comment__head_topic-author comment__head_my-comment " rel="20128990">
          <a href="https://habr.com/ru/users/epishman/" class="user-info user-info_inline" rel="user-popover" data-user-login="epishman">
    <img src="Swift%20%D0%BF%D1%80%D0%BE%D1%82%D0%B8%D0%B2%20Rust%20%E2%80%94%20%D0%B1%D0%B5%D0%BD%D1%87%D0%BC%D0%B0%D1%80%D0%BA%D0%B8%D0%BD%D0%B3%20%D0%BD%D0%B0%20Linux%20%D1%81%20(%D0%BD%D0%B5)%D0%BF%D0%BE%D0%BD%D1%8F%D1%82%D0%BD%D1%8B%D0%BC%20%D1%84%D0%B8%D0%BD%D0%B0%D0%BB%D0%BE%D0%BC%20_%20%D0%A5%D0%B0%D0%B1%D1%80_files/ec0d88c4853c0d36d44bd0526dcfa8d7.png" class="user-info__image-pic user-info__image-pic_small" width="24" height="24">
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">epishman</span>
</a>

          <svg class="icon_comment-edit" title="Комментарий был изменен" width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#pencil"></use></svg>
          <time class="comment__date-time comment__date-time_published">8 мая 2019 в 14:37</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="#comment_20128990" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="20128990" data-action="add" title="Добавить в закладки"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#book"></use></svg></a>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <span class="icon_comment-branch js-comment_tree" data-id="20128990" data-parent_id="20128956" title="Показать ветку комментариев"><svg width="8" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#tree"></use></svg></span>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#comment_20128956" class="icon_comment-arrow-up js-comment_parent" data-id="20128990" data-parent_id="20128956" title="Показать предыдущий комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
    </li>

  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="#comment_20128990" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="20128990" data-parent_id="20128956" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="20128990" data-post-target="450512" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="plus" onclick="comment_vote(this);" title="За свои комментарии голосовать нельзя" disabled="disabled"><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter   js-score" title="Всего голосов 0: ↑0 и ↓0">0</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="За свои комментарии голосовать нельзя" disabled="disabled"><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message ">Если раст завоюет мир (что 
возможно), то набор паттернов проектирования, подозреваю, изменится 
настолько, что переживут не все :)))<br>
<a href="https://github.com/rust-unofficial/patterns">github.com/rust-unofficial/patterns</a></div>

        <div class="comment__footer">
    <a href="#reply" class="comment__footer-link reply_link" onclick="return comment_show_reply_form(20128990 )">Ответить</a>


</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-25" id="reply_comments_20128990">  <li class="content-list__item content-list__item_comment js-comment " rel="20129002">
    
    <span class="parent_id" data-parent_id="20128990"></span>
    <div class="comment" id="comment_20129002">
      <span class="comment__collapse" title="Свернуть/развернуть ветку комментариев" data-id="20129002"></span>
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head   " rel="20129002">
          <a href="https://habr.com/ru/users/KanuTaH/" class="user-info user-info_inline" rel="user-popover" data-user-login="KanuTaH">
    <img src="Swift%20%D0%BF%D1%80%D0%BE%D1%82%D0%B8%D0%B2%20Rust%20%E2%80%94%20%D0%B1%D0%B5%D0%BD%D1%87%D0%BC%D0%B0%D1%80%D0%BA%D0%B8%D0%BD%D0%B3%20%D0%BD%D0%B0%20Linux%20%D1%81%20(%D0%BD%D0%B5)%D0%BF%D0%BE%D0%BD%D1%8F%D1%82%D0%BD%D1%8B%D0%BC%20%D1%84%D0%B8%D0%BD%D0%B0%D0%BB%D0%BE%D0%BC%20_%20%D0%A5%D0%B0%D0%B1%D1%80_files/de79b1dd4d8c2305b72dd794b21141d7.png" class="user-info__image-pic user-info__image-pic_small" width="24" height="24">
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">KanuTaH</span>
</a>

          
          <time class="comment__date-time comment__date-time_published">8 мая 2019 в 14:40</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="#comment_20129002" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="20129002" data-action="add" title="Добавить в закладки"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#book"></use></svg></a>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <span class="icon_comment-branch js-comment_tree" data-id="20129002" data-parent_id="20128990" title="Показать ветку комментариев"><svg width="8" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#tree"></use></svg></span>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#comment_20128990" class="icon_comment-arrow-up js-comment_parent" data-id="20129002" data-parent_id="20128990" title="Показать предыдущий комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
    </li>

  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="#comment_20129002" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="20129002" data-parent_id="20128990" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="20129002" data-post-target="450512" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="plus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter   js-score" title="Всего голосов 0: ↑0 и ↓0">0</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message ">Там еще столько TODO, что до завоевания мира расту еще далеко :)</div>

        <div class="comment__footer">
    <a href="#reply" class="comment__footer-link reply_link" onclick="return comment_show_reply_form(20129002 )">Ответить</a>


</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-26" id="reply_comments_20129002">  <li class="content-list__item content-list__item_comment js-comment " rel="20129076">
    
    <span class="parent_id" data-parent_id="20129002"></span>
    <div class="comment" id="comment_20129076">
      <span class="comment__collapse" title="Свернуть/развернуть ветку комментариев" data-id="20129076"></span>
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head comment__head_topic-author comment__head_my-comment " rel="20129076">
          <a href="https://habr.com/ru/users/epishman/" class="user-info user-info_inline" rel="user-popover" data-user-login="epishman">
    <img src="Swift%20%D0%BF%D1%80%D0%BE%D1%82%D0%B8%D0%B2%20Rust%20%E2%80%94%20%D0%B1%D0%B5%D0%BD%D1%87%D0%BC%D0%B0%D1%80%D0%BA%D0%B8%D0%BD%D0%B3%20%D0%BD%D0%B0%20Linux%20%D1%81%20(%D0%BD%D0%B5)%D0%BF%D0%BE%D0%BD%D1%8F%D1%82%D0%BD%D1%8B%D0%BC%20%D1%84%D0%B8%D0%BD%D0%B0%D0%BB%D0%BE%D0%BC%20_%20%D0%A5%D0%B0%D0%B1%D1%80_files/ec0d88c4853c0d36d44bd0526dcfa8d7.png" class="user-info__image-pic user-info__image-pic_small" width="24" height="24">
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">epishman</span>
</a>

          
          <time class="comment__date-time comment__date-time_published">8 мая 2019 в 14:53</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="#comment_20129076" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="20129076" data-action="add" title="Добавить в закладки"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#book"></use></svg></a>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <span class="icon_comment-branch js-comment_tree" data-id="20129076" data-parent_id="20129002" title="Показать ветку комментариев"><svg width="8" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#tree"></use></svg></span>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#comment_20129002" class="icon_comment-arrow-up js-comment_parent" data-id="20129076" data-parent_id="20129002" title="Показать предыдущий комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
    </li>

  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="#comment_20129076" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="20129076" data-parent_id="20129002" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="20129076" data-post-target="450512" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="plus" onclick="comment_vote(this);" title="За свои комментарии голосовать нельзя" disabled="disabled"><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter   js-score" title="Всего голосов 0: ↑0 и ↓0">0</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="За свои комментарии голосовать нельзя" disabled="disabled"><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message ">У меня Redox не открывается дальше начальной страницы, может рокн-рол мертв, а мы еще нет?</div>

        <div class="comment__footer">
    <a href="#reply" class="comment__footer-link reply_link" onclick="return comment_show_reply_form(20129076 )">Ответить</a>


</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-27" id="reply_comments_20129076">  <li class="content-list__item content-list__item_comment js-comment " rel="20129108">
    
    <span class="parent_id" data-parent_id="20129076"></span>
    <div class="comment" id="comment_20129108">
      <span class="comment__collapse" title="Свернуть/развернуть ветку комментариев" data-id="20129108"></span>
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head   " rel="20129108">
          <a href="https://habr.com/ru/users/KanuTaH/" class="user-info user-info_inline" rel="user-popover" data-user-login="KanuTaH">
    <img src="Swift%20%D0%BF%D1%80%D0%BE%D1%82%D0%B8%D0%B2%20Rust%20%E2%80%94%20%D0%B1%D0%B5%D0%BD%D1%87%D0%BC%D0%B0%D1%80%D0%BA%D0%B8%D0%BD%D0%B3%20%D0%BD%D0%B0%20Linux%20%D1%81%20(%D0%BD%D0%B5)%D0%BF%D0%BE%D0%BD%D1%8F%D1%82%D0%BD%D1%8B%D0%BC%20%D1%84%D0%B8%D0%BD%D0%B0%D0%BB%D0%BE%D0%BC%20_%20%D0%A5%D0%B0%D0%B1%D1%80_files/de79b1dd4d8c2305b72dd794b21141d7.png" class="user-info__image-pic user-info__image-pic_small" width="24" height="24">
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">KanuTaH</span>
</a>

          
          <time class="comment__date-time comment__date-time_published">8 мая 2019 в 14:59</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="#comment_20129108" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="20129108" data-action="add" title="Добавить в закладки"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#book"></use></svg></a>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <span class="icon_comment-branch js-comment_tree" data-id="20129108" data-parent_id="20129076" title="Показать ветку комментариев"><svg width="8" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#tree"></use></svg></span>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#comment_20129076" class="icon_comment-arrow-up js-comment_parent" data-id="20129108" data-parent_id="20129076" title="Показать предыдущий комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
    </li>

  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="#comment_20129108" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="20129108" data-parent_id="20129076" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="20129108" data-post-target="450512" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="plus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter   js-score" title="Всего голосов 0: ↑0 и ↓0">0</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message ">У меня открывается вроде.</div>

        <div class="comment__footer">
    <a href="#reply" class="comment__footer-link reply_link" onclick="return comment_show_reply_form(20129108 )">Ответить</a>


</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-28" id="reply_comments_20129108">  <li class="content-list__item content-list__item_comment js-comment " rel="20129120">
    
    <span class="parent_id" data-parent_id="20129108"></span>
    <div class="comment" id="comment_20129120">
      <span class="comment__collapse" title="Свернуть/развернуть ветку комментариев" data-id="20129120"></span>
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head comment__head_topic-author comment__head_my-comment " rel="20129120">
          <a href="https://habr.com/ru/users/epishman/" class="user-info user-info_inline" rel="user-popover" data-user-login="epishman">
    <img src="Swift%20%D0%BF%D1%80%D0%BE%D1%82%D0%B8%D0%B2%20Rust%20%E2%80%94%20%D0%B1%D0%B5%D0%BD%D1%87%D0%BC%D0%B0%D1%80%D0%BA%D0%B8%D0%BD%D0%B3%20%D0%BD%D0%B0%20Linux%20%D1%81%20(%D0%BD%D0%B5)%D0%BF%D0%BE%D0%BD%D1%8F%D1%82%D0%BD%D1%8B%D0%BC%20%D1%84%D0%B8%D0%BD%D0%B0%D0%BB%D0%BE%D0%BC%20_%20%D0%A5%D0%B0%D0%B1%D1%80_files/ec0d88c4853c0d36d44bd0526dcfa8d7.png" class="user-info__image-pic user-info__image-pic_small" width="24" height="24">
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">epishman</span>
</a>

          
          <time class="comment__date-time comment__date-time_published">8 мая 2019 в 15:03</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="#comment_20129120" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="20129120" data-action="add" title="Добавить в закладки"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#book"></use></svg></a>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <span class="icon_comment-branch js-comment_tree" data-id="20129120" data-parent_id="20129108" title="Показать ветку комментариев"><svg width="8" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#tree"></use></svg></span>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#comment_20129108" class="icon_comment-arrow-up js-comment_parent" data-id="20129120" data-parent_id="20129108" title="Показать предыдущий комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
    </li>

  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="#comment_20129120" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="20129120" data-parent_id="20129108" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="20129120" data-post-target="450512" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="plus" onclick="comment_vote(this);" title="За свои комментарии голосовать нельзя" disabled="disabled"><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter   js-score" title="Всего голосов 0: ↑0 и ↓0">0</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="За свои комментарии голосовать нельзя" disabled="disabled"><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message ">Чертова цензура, у меня только через TOR, видимо там внутри сплошной прон…</div>

        <div class="comment__footer">
    <a href="#reply" class="comment__footer-link reply_link" onclick="return comment_show_reply_form(20129120 )">Ответить</a>


</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-29" id="reply_comments_20129120"></ul>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="content-list__item content-list__item_comment js-comment " rel="20129024">
    
    <span class="parent_id" data-parent_id="20128956"></span>
    <div class="comment" id="comment_20129024">
      <span class="comment__collapse" title="Свернуть/развернуть ветку комментариев" data-id="20129024"></span>
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head   " rel="20129024">
          <a href="https://habr.com/ru/users/PsyHaSTe/" class="user-info user-info_inline" rel="user-popover" data-user-login="PsyHaSTe">
    <img src="Swift%20%D0%BF%D1%80%D0%BE%D1%82%D0%B8%D0%B2%20Rust%20%E2%80%94%20%D0%B1%D0%B5%D0%BD%D1%87%D0%BC%D0%B0%D1%80%D0%BA%D0%B8%D0%BD%D0%B3%20%D0%BD%D0%B0%20Linux%20%D1%81%20(%D0%BD%D0%B5)%D0%BF%D0%BE%D0%BD%D1%8F%D1%82%D0%BD%D1%8B%D0%BC%20%D1%84%D0%B8%D0%BD%D0%B0%D0%BB%D0%BE%D0%BC%20_%20%D0%A5%D0%B0%D0%B1%D1%80_files/7631ac5e5a7e237a937f5f2a74ae4c9e.jpg" class="user-info__image-pic user-info__image-pic_small" width="24" height="24">
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">PsyHaSTe</span>
</a>

          <svg class="icon_comment-edit" title="Комментарий был изменен" width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#pencil"></use></svg>
          <time class="comment__date-time comment__date-time_published">8 мая 2019 в 14:44</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="#comment_20129024" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="20129024" data-action="add" title="Добавить в закладки"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#book"></use></svg></a>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <span class="icon_comment-branch js-comment_tree" data-id="20129024" data-parent_id="20128956" title="Показать ветку комментариев"><svg width="8" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#tree"></use></svg></span>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#comment_20128956" class="icon_comment-arrow-up js-comment_parent" data-id="20129024" data-parent_id="20128956" title="Показать предыдущий комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
    </li>

  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="#comment_20129024" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="20129024" data-parent_id="20128956" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="20129024" data-post-target="450512" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="plus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter   js-score" title="Всего голосов 0: ↑0 и ↓0">0</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message "><p>При чем тут пропаганда, если это работает? Да, чтобы реализовать низкоуровневую работу с памятью нужно unsafe, что дальше?</p><br>
<p>С тем же успехом весь haskell компилируется в машинный код, значит ли это что мы потеряли все что нам давали типы?..</p><br>
<p>В общем, спор ни о чем. </p><br>
<p><em>Programming Defeatism: No technique will remove all bugs, so let's go with what worked in the 70s.</em> ©</p><br>
<blockquote>Не агритесь вы так</blockquote><p>Когда мне начинают рассказывать про смирительные рубашки и невероятную свободу, которую он дает, я вспоминаю <a href="https://twitter.com/ID_AA_Carmack/status/1089286703817412608">слова кармака</a></p></div>

        <div class="comment__footer">
    <a href="#reply" class="comment__footer-link reply_link" onclick="return comment_show_reply_form(20129024 )">Ответить</a>


</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-25" id="reply_comments_20129024">  <li class="content-list__item content-list__item_comment js-comment " rel="20129056">
    
    <span class="parent_id" data-parent_id="20129024"></span>
    <div class="comment" id="comment_20129056">
      <span class="comment__collapse" title="Свернуть/развернуть ветку комментариев" data-id="20129056"></span>
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head   " rel="20129056">
          <a href="https://habr.com/ru/users/KanuTaH/" class="user-info user-info_inline" rel="user-popover" data-user-login="KanuTaH">
    <img src="Swift%20%D0%BF%D1%80%D0%BE%D1%82%D0%B8%D0%B2%20Rust%20%E2%80%94%20%D0%B1%D0%B5%D0%BD%D1%87%D0%BC%D0%B0%D1%80%D0%BA%D0%B8%D0%BD%D0%B3%20%D0%BD%D0%B0%20Linux%20%D1%81%20(%D0%BD%D0%B5)%D0%BF%D0%BE%D0%BD%D1%8F%D1%82%D0%BD%D1%8B%D0%BC%20%D1%84%D0%B8%D0%BD%D0%B0%D0%BB%D0%BE%D0%BC%20_%20%D0%A5%D0%B0%D0%B1%D1%80_files/de79b1dd4d8c2305b72dd794b21141d7.png" class="user-info__image-pic user-info__image-pic_small" width="24" height="24">
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">KanuTaH</span>
</a>

          <svg class="icon_comment-edit" title="Комментарий был изменен" width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#pencil"></use></svg>
          <time class="comment__date-time comment__date-time_published">8 мая 2019 в 14:50</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="#comment_20129056" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="20129056" data-action="add" title="Добавить в закладки"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#book"></use></svg></a>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <span class="icon_comment-branch js-comment_tree" data-id="20129056" data-parent_id="20129024" title="Показать ветку комментариев"><svg width="8" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#tree"></use></svg></span>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#comment_20129024" class="icon_comment-arrow-up js-comment_parent" data-id="20129056" data-parent_id="20129024" title="Показать предыдущий комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
    </li>

  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="#comment_20129056" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="20129056" data-parent_id="20129024" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="20129056" data-post-target="450512" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="plus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter voting-wjt__counter_positive  js-score" title="Всего голосов +1: ↑1 и ↓0">+1</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message "><blockquote>Когда мне начинают рассказывать про смирительные рубашки и невероятную свободу, которую он дает, я вспоминаю слова кармака</blockquote><br>
Ну товарищ, которому он отвечал, тоже в чем-то прав :)<br>
<blockquote>Game dev people discovering Rust is pure comedy. Tweeting 
out all the benefits, and I'm like «Yup, all the things you mentioned 
are also available in C++, and you've been ignoring and criticizing them
 for years». ¯\_(ツ)_/¯<br>
</blockquote></div>

        <div class="comment__footer">
    <a href="#reply" class="comment__footer-link reply_link" onclick="return comment_show_reply_form(20129056 )">Ответить</a>


</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-26" id="reply_comments_20129056"></ul>
  </li>
  <li class="content-list__item content-list__item_comment js-comment " rel="20158410">
    
    <span class="parent_id" data-parent_id="20129024"></span>
    <div class="comment" id="comment_20158410">
      <span class="comment__collapse" title="Свернуть/развернуть ветку комментариев" data-id="20158410"></span>
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head   " rel="20158410">
          <a href="https://habr.com/ru/users/twinklede/" class="user-info user-info_inline" rel="user-popover" data-user-login="twinklede">
    <svg class="default-image default-image_mini default-image_pink" width="24" height="24"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#slug"></use></svg>
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">twinklede</span>
</a>

          
          <time class="comment__date-time comment__date-time_published">15 мая 2019 в 22:27</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="#comment_20158410" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="20158410" data-action="add" title="Добавить в закладки"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#book"></use></svg></a>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <span class="icon_comment-branch js-comment_tree" data-id="20158410" data-parent_id="20129024" title="Показать ветку комментариев"><svg width="8" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#tree"></use></svg></span>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#comment_20129024" class="icon_comment-arrow-up js-comment_parent" data-id="20158410" data-parent_id="20129024" title="Показать предыдущий комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
    </li>

  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="#comment_20158410" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="20158410" data-parent_id="20129024" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="20158410" data-post-target="450512" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="plus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter   js-score" title="Всего голосов 0: ↑0 и ↓0">0</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message "><blockquote>Да, чтобы реализовать низкоуровневую работу с памятью нужно unsafe, что дальше?</blockquote><br>
Нужен не только unsafe, но и libc( в данном случае).</div>

        <div class="comment__footer">
    <a href="#reply" class="comment__footer-link reply_link" onclick="return comment_show_reply_form(20158410 )">Ответить</a>


</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-26" id="reply_comments_20158410"></ul>
  </li>
</ul>
  </li>
  <li class="content-list__item content-list__item_comment js-comment " rel="20129060">
    
    <span class="parent_id" data-parent_id="20128956"></span>
    <div class="comment" id="comment_20129060">
      <span class="comment__collapse" title="Свернуть/развернуть ветку комментариев" data-id="20129060"></span>
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head   " rel="20129060">
          <a href="https://habr.com/ru/users/mayorovp/" class="user-info user-info_inline" rel="user-popover" data-user-login="mayorovp">
    <svg class="default-image default-image_mini default-image_pink" width="24" height="24"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#slug"></use></svg>
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">mayorovp</span>
</a>

          
          <time class="comment__date-time comment__date-time_published">8 мая 2019 в 14:51</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="#comment_20129060" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="20129060" data-action="add" title="Добавить в закладки"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#book"></use></svg></a>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <span class="icon_comment-branch js-comment_tree" data-id="20129060" data-parent_id="20128956" title="Показать ветку комментариев"><svg width="8" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#tree"></use></svg></span>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#comment_20128956" class="icon_comment-arrow-up js-comment_parent" data-id="20129060" data-parent_id="20128956" title="Показать предыдущий комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
    </li>

  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="#comment_20129060" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="20129060" data-parent_id="20128956" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="20129060" data-post-target="450512" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="plus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter   js-score" title="Всего голосов 0: ↑0 и ↓0">0</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message "><p>А что не так с процитированным вами кодом?</p></div>

        <div class="comment__footer">
    <a href="#reply" class="comment__footer-link reply_link" onclick="return comment_show_reply_form(20129060 )">Ответить</a>


</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-25" id="reply_comments_20129060">  <li class="content-list__item content-list__item_comment js-comment " rel="20129066">
    
    <span class="parent_id" data-parent_id="20129060"></span>
    <div class="comment" id="comment_20129066">
      <span class="comment__collapse" title="Свернуть/развернуть ветку комментариев" data-id="20129066"></span>
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head   " rel="20129066">
          <a href="https://habr.com/ru/users/KanuTaH/" class="user-info user-info_inline" rel="user-popover" data-user-login="KanuTaH">
    <img src="Swift%20%D0%BF%D1%80%D0%BE%D1%82%D0%B8%D0%B2%20Rust%20%E2%80%94%20%D0%B1%D0%B5%D0%BD%D1%87%D0%BC%D0%B0%D1%80%D0%BA%D0%B8%D0%BD%D0%B3%20%D0%BD%D0%B0%20Linux%20%D1%81%20(%D0%BD%D0%B5)%D0%BF%D0%BE%D0%BD%D1%8F%D1%82%D0%BD%D1%8B%D0%BC%20%D1%84%D0%B8%D0%BD%D0%B0%D0%BB%D0%BE%D0%BC%20_%20%D0%A5%D0%B0%D0%B1%D1%80_files/de79b1dd4d8c2305b72dd794b21141d7.png" class="user-info__image-pic user-info__image-pic_small" width="24" height="24">
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">KanuTaH</span>
</a>

          <svg class="icon_comment-edit" title="Комментарий был изменен" width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#pencil"></use></svg>
          <time class="comment__date-time comment__date-time_published">8 мая 2019 в 14:52</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="#comment_20129066" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="20129066" data-action="add" title="Добавить в закладки"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#book"></use></svg></a>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <span class="icon_comment-branch js-comment_tree" data-id="20129066" data-parent_id="20129060" title="Показать ветку комментариев"><svg width="8" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#tree"></use></svg></span>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#comment_20129060" class="icon_comment-arrow-up js-comment_parent" data-id="20129066" data-parent_id="20129060" title="Показать предыдущий комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
    </li>

  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="#comment_20129066" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="20129066" data-parent_id="20129060" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="20129066" data-post-target="450512" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="plus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter   js-score" title="Всего голосов 0: ↑0 и ↓0">0</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message ">Ну он как бы unsafe полностью, все вот эти «компилятор гарантирует» на нем в пролете. А иначе никак.</div>

        <div class="comment__footer">
    <a href="#reply" class="comment__footer-link reply_link" onclick="return comment_show_reply_form(20129066 )">Ответить</a>


</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-26" id="reply_comments_20129066">  <li class="content-list__item content-list__item_comment js-comment " rel="20129110">
    
    <span class="parent_id" data-parent_id="20129066"></span>
    <div class="comment" id="comment_20129110">
      <span class="comment__collapse" title="Свернуть/развернуть ветку комментариев" data-id="20129110"></span>
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head   " rel="20129110">
          <a href="https://habr.com/ru/users/mayorovp/" class="user-info user-info_inline" rel="user-popover" data-user-login="mayorovp">
    <svg class="default-image default-image_mini default-image_pink" width="24" height="24"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#slug"></use></svg>
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">mayorovp</span>
</a>

          
          <time class="comment__date-time comment__date-time_published">8 мая 2019 в 15:00</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="#comment_20129110" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="20129110" data-action="add" title="Добавить в закладки"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#book"></use></svg></a>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <span class="icon_comment-branch js-comment_tree" data-id="20129110" data-parent_id="20129066" title="Показать ветку комментариев"><svg width="8" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#tree"></use></svg></span>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#comment_20129066" class="icon_comment-arrow-up js-comment_parent" data-id="20129110" data-parent_id="20129066" title="Показать предыдущий комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
    </li>

  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="#comment_20129110" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="20129110" data-parent_id="20129066" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="20129110" data-post-target="450512" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="plus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter   js-score" title="Всего голосов 0: ↑0 и ↓0">0</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message "><p>Этот код представляет собой аксиому, которой компилятор пользуется чтобы дать нужные гарантии относительно кода пользователя.</p><br>
<p>Иными словами, компилятор rust гарантирует что программа будет 
безопасно работать с памятью при условии что процитированный вами код не
 нарушает инвариантов.</p></div>

        <div class="comment__footer">
    <a href="#reply" class="comment__footer-link reply_link" onclick="return comment_show_reply_form(20129110 )">Ответить</a>


</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-27" id="reply_comments_20129110">  <li class="content-list__item content-list__item_comment js-comment " rel="20129118">
    
    <span class="parent_id" data-parent_id="20129110"></span>
    <div class="comment" id="comment_20129118">
      <span class="comment__collapse" title="Свернуть/развернуть ветку комментариев" data-id="20129118"></span>
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head   " rel="20129118">
          <a href="https://habr.com/ru/users/PsyHaSTe/" class="user-info user-info_inline" rel="user-popover" data-user-login="PsyHaSTe">
    <img src="Swift%20%D0%BF%D1%80%D0%BE%D1%82%D0%B8%D0%B2%20Rust%20%E2%80%94%20%D0%B1%D0%B5%D0%BD%D1%87%D0%BC%D0%B0%D1%80%D0%BA%D0%B8%D0%BD%D0%B3%20%D0%BD%D0%B0%20Linux%20%D1%81%20(%D0%BD%D0%B5)%D0%BF%D0%BE%D0%BD%D1%8F%D1%82%D0%BD%D1%8B%D0%BC%20%D1%84%D0%B8%D0%BD%D0%B0%D0%BB%D0%BE%D0%BC%20_%20%D0%A5%D0%B0%D0%B1%D1%80_files/7631ac5e5a7e237a937f5f2a74ae4c9e.jpg" class="user-info__image-pic user-info__image-pic_small" width="24" height="24">
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">PsyHaSTe</span>
</a>

          
          <time class="comment__date-time comment__date-time_published">8 мая 2019 в 15:02</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="#comment_20129118" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="20129118" data-action="add" title="Добавить в закладки"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#book"></use></svg></a>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <span class="icon_comment-branch js-comment_tree" data-id="20129118" data-parent_id="20129110" title="Показать ветку комментариев"><svg width="8" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#tree"></use></svg></span>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#comment_20129110" class="icon_comment-arrow-up js-comment_parent" data-id="20129118" data-parent_id="20129110" title="Показать предыдущий комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
    </li>

  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="#comment_20129118" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="20129118" data-parent_id="20129110" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="20129118" data-post-target="450512" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="plus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter   js-score" title="Всего голосов 0: ↑0 и ↓0">0</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message "><p>Поэтому есть программы вроде <a href="http://plv.mpi-sws.org/rustbelt/">rust belt</a>, которые валидируют unsafe. И иногда <a href="https://www.ralfj.de/blog/2017/06/09/mutexguard-sync.html">находят</a> там ошибки.</p></div>

        <div class="comment__footer">
    <a href="#reply" class="comment__footer-link reply_link" onclick="return comment_show_reply_form(20129118 )">Ответить</a>


</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-28" id="reply_comments_20129118"></ul>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="content-list__item content-list__item_comment js-comment " rel="20158400">
    
    <span class="parent_id" data-parent_id="20128892"></span>
    <div class="comment" id="comment_20158400">
      <span class="comment__collapse" title="Свернуть/развернуть ветку комментариев" data-id="20158400"></span>
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head   " rel="20158400">
          <a href="https://habr.com/ru/users/twinklede/" class="user-info user-info_inline" rel="user-popover" data-user-login="twinklede">
    <svg class="default-image default-image_mini default-image_pink" width="24" height="24"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#slug"></use></svg>
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">twinklede</span>
</a>

          
          <time class="comment__date-time comment__date-time_published">15 мая 2019 в 22:24</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="#comment_20158400" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="20158400" data-action="add" title="Добавить в закладки"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#book"></use></svg></a>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <span class="icon_comment-branch js-comment_tree" data-id="20158400" data-parent_id="20128892" title="Показать ветку комментариев"><svg width="8" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#tree"></use></svg></span>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#comment_20128892" class="icon_comment-arrow-up js-comment_parent" data-id="20158400" data-parent_id="20128892" title="Показать предыдущий комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
    </li>

  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="#comment_20158400" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="20158400" data-parent_id="20128892" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="20158400" data-post-target="450512" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="plus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter  voting-wjt__counter_negative js-score" title="Всего голосов –2: ↑0 и ↓2">–2</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message comment__message_downgrade comment__message_downgrade-2"><blockquote>Да пожалуйста, смотрите</blockquote><br>
Проблема подобных ответов заключается в том, что в понятия «аналог» 
входит то, что является сравнимым хотя-бы по каким-то основным 
критериям. В данном случае основном критерия аллокатора — работать 
быстро. Этот аллокатор неконкурентоспособен не то что каким-то лучшим 
аллокатора, а даже самым банальным.<br>
<br></div>

        <div class="comment__footer">
    <a href="#reply" class="comment__footer-link reply_link" onclick="return comment_show_reply_form(20158400 )">Ответить</a>


</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-24" id="reply_comments_20158400">  <li class="content-list__item content-list__item_comment js-comment " rel="20159054">
    
    <span class="parent_id" data-parent_id="20158400"></span>
    <div class="comment" id="comment_20159054">
      <span class="comment__collapse" title="Свернуть/развернуть ветку комментариев" data-id="20159054"></span>
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head   " rel="20159054">
          <a href="https://habr.com/ru/users/twinklede/" class="user-info user-info_inline" rel="user-popover" data-user-login="twinklede">
    <svg class="default-image default-image_mini default-image_pink" width="24" height="24"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#slug"></use></svg>
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">twinklede</span>
</a>

          
          <time class="comment__date-time comment__date-time_published">16 мая 2019 в 06:31</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="#comment_20159054" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="20159054" data-action="add" title="Добавить в закладки"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#book"></use></svg></a>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <span class="icon_comment-branch js-comment_tree" data-id="20159054" data-parent_id="20158400" title="Показать ветку комментариев"><svg width="8" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#tree"></use></svg></span>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#comment_20158400" class="icon_comment-arrow-up js-comment_parent" data-id="20159054" data-parent_id="20158400" title="Показать предыдущий комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
    </li>

  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="#comment_20159054" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="20159054" data-parent_id="20158400" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="20159054" data-post-target="450512" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="plus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter   js-score" title="Всего голосов 0: ↑0 и ↓0">0</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message ">А чего вы минусуете? У вас есть какая-то контр-аргументация? Я что-то неправильно сказал?</div>

        <div class="comment__footer">
    <a href="#reply" class="comment__footer-link reply_link" onclick="return comment_show_reply_form(20159054 )">Ответить</a>


</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-25" id="reply_comments_20159054"></ul>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="content-list__item content-list__item_comment js-comment " rel="20129730">
    
    <span class="parent_id" data-parent_id="20128318"></span>
    <div class="comment" id="comment_20129730">
      <span class="comment__collapse" title="Свернуть/развернуть ветку комментариев" data-id="20129730"></span>
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head   " rel="20129730">
          <a href="https://habr.com/ru/users/technic93/" class="user-info user-info_inline" rel="user-popover" data-user-login="technic93">
    <img src="Swift%20%D0%BF%D1%80%D0%BE%D1%82%D0%B8%D0%B2%20Rust%20%E2%80%94%20%D0%B1%D0%B5%D0%BD%D1%87%D0%BC%D0%B0%D1%80%D0%BA%D0%B8%D0%BD%D0%B3%20%D0%BD%D0%B0%20Linux%20%D1%81%20(%D0%BD%D0%B5)%D0%BF%D0%BE%D0%BD%D1%8F%D1%82%D0%BD%D1%8B%D0%BC%20%D1%84%D0%B8%D0%BD%D0%B0%D0%BB%D0%BE%D0%BC%20_%20%D0%A5%D0%B0%D0%B1%D1%80_files/4e796c6e9f932ba70d1af19b21f2b99a.png" class="user-info__image-pic user-info__image-pic_small" width="24" height="24">
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">technic93</span>
</a>

          
          <time class="comment__date-time comment__date-time_published">8 мая 2019 в 16:46</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="#comment_20129730" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#" class="icon_comment-bookmark icon_comment-bookmark_add" onclick="return comments_add_to_favorite(this)" data-type="3" data-id="20129730" data-action="remove" title="Убрать из закладок"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#book"></use></svg></a>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <span class="icon_comment-branch js-comment_tree" data-id="20129730" data-parent_id="20128318" title="Показать ветку комментариев"><svg width="8" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#tree"></use></svg></span>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#comment_20128318" class="icon_comment-arrow-up js-comment_parent" data-id="20129730" data-parent_id="20128318" title="Показать предыдущий комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
    </li>

  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="#comment_20129730" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="20129730" data-parent_id="20128318" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="20129730" data-post-target="450512" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small voting-wjt__button_plus" data-action="plus" onclick="comment_vote(this);" title="Вы проголосовали положительно " disabled="disabled"><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter voting-wjt__counter_positive  js-score" title="Всего голосов +2: ↑2 и ↓0">+2</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="Вы проголосовали положительно , отменить голос нельзя" disabled="disabled"><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message "><p>Почему нет? Все лайфтаймы и 
заимствование ссылок описаны в объявлении функции. Далее есть код по 
одну сторону интерфейса (клиент) и по другую (библитека). Им ничего не 
нужно знать про друг друга — они работают через интерфейс. Есть время 
жизни 'static для каких-то синглетонов библиотеке. Safe Раст не 
возвращает голый указатель. Если мы возвращаем ссылку из функции то 
должны объявить её время жизни, которое зависит от времени жизни входных
 параметров. Или мы можем передать владение объектом наверх.</p><br>
<p>Если мы имеем дело с dll которая на Cи то нужно писать обёртку через 
unsafe. Ну тут серебрянной пули не существует. Либо жить на си/плюсах 
либо писать обёртки либо переписывать всё на раст. Очевидно что в 
зависимтости от ситуации и количества кода то или иное решение 
оптимально.</p></div>

        <div class="comment__footer">
    <a href="#reply" class="comment__footer-link reply_link" onclick="return comment_show_reply_form(20129730 )">Ответить</a>


</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-19" id="reply_comments_20129730"></ul>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="content-list__item content-list__item_comment js-comment " rel="20129078">
    
    <span class="parent_id" data-parent_id="20127056"></span>
    <div class="comment" id="comment_20129078">
      <span class="comment__collapse" title="Свернуть/развернуть ветку комментариев" data-id="20129078"></span>
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head   " rel="20129078">
          <a href="https://habr.com/ru/users/Ryppka/" class="user-info user-info_inline" rel="user-popover" data-user-login="Ryppka">
    <img src="Swift%20%D0%BF%D1%80%D0%BE%D1%82%D0%B8%D0%B2%20Rust%20%E2%80%94%20%D0%B1%D0%B5%D0%BD%D1%87%D0%BC%D0%B0%D1%80%D0%BA%D0%B8%D0%BD%D0%B3%20%D0%BD%D0%B0%20Linux%20%D1%81%20(%D0%BD%D0%B5)%D0%BF%D0%BE%D0%BD%D1%8F%D1%82%D0%BD%D1%8B%D0%BC%20%D1%84%D0%B8%D0%BD%D0%B0%D0%BB%D0%BE%D0%BC%20_%20%D0%A5%D0%B0%D0%B1%D1%80_files/f1bb25676cfe8c0cd2bc5d55ccb72967.jpg" class="user-info__image-pic user-info__image-pic_small" width="24" height="24">
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">Ryppka</span>
</a>

          
          <time class="comment__date-time comment__date-time_published">8 мая 2019 в 14:54</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="#comment_20129078" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="20129078" data-action="add" title="Добавить в закладки"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#book"></use></svg></a>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <span class="icon_comment-branch js-comment_tree" data-id="20129078" data-parent_id="20127056" title="Показать ветку комментариев"><svg width="8" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#tree"></use></svg></span>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#comment_20127056" class="icon_comment-arrow-up js-comment_parent" data-id="20129078" data-parent_id="20127056" title="Показать предыдущий комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
    </li>

  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="#comment_20129078" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="20129078" data-parent_id="20127056" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="20129078" data-post-target="450512" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="plus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter   js-score" title="Всего голосов 0: ↑0 и ↓0">0</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message ">Что-то clang 8 под Windows другое вывел:<br>
<pre><code class="cpp hljs">Hello, UB!
<span class="hljs-number"><span class="hljs-number">1</span></span>
<span class="hljs-number"><span class="hljs-number">2</span></span>
<span class="hljs-number"><span class="hljs-number">1</span></span>
<span class="hljs-number"><span class="hljs-number">2</span></span></code></pre></div>

        <div class="comment__footer">
    <a href="#reply" class="comment__footer-link reply_link" onclick="return comment_show_reply_form(20129078 )">Ответить</a>


</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-6" id="reply_comments_20129078">  <li class="content-list__item content-list__item_comment js-comment " rel="20129114">
    
    <span class="parent_id" data-parent_id="20129078"></span>
    <div class="comment" id="comment_20129114">
      <span class="comment__collapse" title="Свернуть/развернуть ветку комментариев" data-id="20129114"></span>
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head   " rel="20129114">
          <a href="https://habr.com/ru/users/PsyHaSTe/" class="user-info user-info_inline" rel="user-popover" data-user-login="PsyHaSTe">
    <img src="Swift%20%D0%BF%D1%80%D0%BE%D1%82%D0%B8%D0%B2%20Rust%20%E2%80%94%20%D0%B1%D0%B5%D0%BD%D1%87%D0%BC%D0%B0%D1%80%D0%BA%D0%B8%D0%BD%D0%B3%20%D0%BD%D0%B0%20Linux%20%D1%81%20(%D0%BD%D0%B5)%D0%BF%D0%BE%D0%BD%D1%8F%D1%82%D0%BD%D1%8B%D0%BC%20%D1%84%D0%B8%D0%BD%D0%B0%D0%BB%D0%BE%D0%BC%20_%20%D0%A5%D0%B0%D0%B1%D1%80_files/7631ac5e5a7e237a937f5f2a74ae4c9e.jpg" class="user-info__image-pic user-info__image-pic_small" width="24" height="24">
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">PsyHaSTe</span>
</a>

          
          <time class="comment__date-time comment__date-time_published">8 мая 2019 в 15:01</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="#comment_20129114" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="20129114" data-action="add" title="Добавить в закладки"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#book"></use></svg></a>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <span class="icon_comment-branch js-comment_tree" data-id="20129114" data-parent_id="20129078" title="Показать ветку комментариев"><svg width="8" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#tree"></use></svg></span>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#comment_20129078" class="icon_comment-arrow-up js-comment_parent" data-id="20129114" data-parent_id="20129078" title="Показать предыдущий комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
    </li>

  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="#comment_20129114" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="20129114" data-parent_id="20129078" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="20129114" data-post-target="450512" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="plus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter voting-wjt__counter_positive  js-score" title="Всего голосов +1: ↑1 и ↓0">+1</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message "><p>И? Это ведь УБ, там хоть ханойские башни могут запуститься.</p></div>

        <div class="comment__footer">
    <a href="#reply" class="comment__footer-link reply_link" onclick="return comment_show_reply_form(20129114 )">Ответить</a>


</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-7" id="reply_comments_20129114">  <li class="content-list__item content-list__item_comment js-comment " rel="20130552">
    
    <span class="parent_id" data-parent_id="20129114"></span>
    <div class="comment" id="comment_20130552">
      <span class="comment__collapse" title="Свернуть/развернуть ветку комментариев" data-id="20130552"></span>
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head   " rel="20130552">
          <a href="https://habr.com/ru/users/masai/" class="user-info user-info_inline" rel="user-popover" data-user-login="masai">
    <svg class="default-image default-image_mini default-image_blue" width="24" height="24"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#slug"></use></svg>
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">masai</span>
</a>

          
          <time class="comment__date-time comment__date-time_published">8 мая 2019 в 19:30</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="#comment_20130552" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="20130552" data-action="add" title="Добавить в закладки"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#book"></use></svg></a>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <span class="icon_comment-branch js-comment_tree" data-id="20130552" data-parent_id="20129114" title="Показать ветку комментариев"><svg width="8" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#tree"></use></svg></span>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#comment_20129114" class="icon_comment-arrow-up js-comment_parent" data-id="20130552" data-parent_id="20129114" title="Показать предыдущий комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
    </li>

  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="#comment_20130552" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="20130552" data-parent_id="20129114" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="20130552" data-post-target="450512" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="plus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter   js-score" title="Всего голосов 0: ↑0 и ↓0">0</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message "><p>Или майнер биткоинов. :)</p></div>

        <div class="comment__footer">
    <a href="#reply" class="comment__footer-link reply_link" onclick="return comment_show_reply_form(20130552 )">Ответить</a>


</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-8" id="reply_comments_20130552"></ul>
  </li>
</ul>
  </li>
  <li class="content-list__item content-list__item_comment js-comment " rel="20129134">
    
    <span class="parent_id" data-parent_id="20129078"></span>
    <div class="comment" id="comment_20129134">
      <span class="comment__collapse" title="Свернуть/развернуть ветку комментариев" data-id="20129134"></span>
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head   " rel="20129134">
          <a href="https://habr.com/ru/users/mayorovp/" class="user-info user-info_inline" rel="user-popover" data-user-login="mayorovp">
    <svg class="default-image default-image_mini default-image_pink" width="24" height="24"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#slug"></use></svg>
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">mayorovp</span>
</a>

          
          <time class="comment__date-time comment__date-time_published">8 мая 2019 в 15:06</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="#comment_20129134" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="20129134" data-action="add" title="Добавить в закладки"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#book"></use></svg></a>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <span class="icon_comment-branch js-comment_tree" data-id="20129134" data-parent_id="20129078" title="Показать ветку комментариев"><svg width="8" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#tree"></use></svg></span>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#comment_20129078" class="icon_comment-arrow-up js-comment_parent" data-id="20129134" data-parent_id="20129078" title="Показать предыдущий комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
    </li>

  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="#comment_20129134" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="20129134" data-parent_id="20129078" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="20129134" data-post-target="450512" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="plus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter   js-score" title="Всего голосов 0: ↑0 и ↓0">0</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message "><p>На то оно и UB. Попробуйте количество элементов увеличить, или тип контейнера сменить.</p></div>

        <div class="comment__footer">
    <a href="#reply" class="comment__footer-link reply_link" onclick="return comment_show_reply_form(20129134 )">Ответить</a>


</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-7" id="reply_comments_20129134"></ul>
  </li>
  <li class="content-list__item content-list__item_comment js-comment " rel="20158334">
    
    <span class="parent_id" data-parent_id="20129078"></span>
    <div class="comment" id="comment_20158334">
      <span class="comment__collapse" title="Свернуть/развернуть ветку комментариев" data-id="20158334"></span>
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head   " rel="20158334">
          <a href="https://habr.com/ru/users/BlessMaster/" class="user-info user-info_inline" rel="user-popover" data-user-login="BlessMaster">
    <img src="Swift%20%D0%BF%D1%80%D0%BE%D1%82%D0%B8%D0%B2%20Rust%20%E2%80%94%20%D0%B1%D0%B5%D0%BD%D1%87%D0%BC%D0%B0%D1%80%D0%BA%D0%B8%D0%BD%D0%B3%20%D0%BD%D0%B0%20Linux%20%D1%81%20(%D0%BD%D0%B5)%D0%BF%D0%BE%D0%BD%D1%8F%D1%82%D0%BD%D1%8B%D0%BC%20%D1%84%D0%B8%D0%BD%D0%B0%D0%BB%D0%BE%D0%BC%20_%20%D0%A5%D0%B0%D0%B1%D1%80_files/b9986633b601d13c3e59c75de39c8dcb.png" class="user-info__image-pic user-info__image-pic_small" width="24" height="24">
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">BlessMaster</span>
</a>

          
          <time class="comment__date-time comment__date-time_published">15 мая 2019 в 21:58</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="#comment_20158334" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="20158334" data-action="add" title="Добавить в закладки"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#book"></use></svg></a>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <span class="icon_comment-branch js-comment_tree" data-id="20158334" data-parent_id="20129078" title="Показать ветку комментариев"><svg width="8" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#tree"></use></svg></span>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#comment_20129078" class="icon_comment-arrow-up js-comment_parent" data-id="20158334" data-parent_id="20129078" title="Показать предыдущий комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
    </li>

  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="#comment_20158334" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="20158334" data-parent_id="20129078" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="20158334" data-post-target="450512" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="plus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter   js-score" title="Всего голосов 0: ↑0 и ↓0">0</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message "><p>Оно ещё и от запуска к запуску может меняться.<br>
А может стабильно работать месяцами.<br>
Если <del>тестирование налажено хорошо на всех уровнях</del> повезёт, то странность в обработке данных возможно заметить до продакшна.<br>
Падение приложения вместо порчи важных данных можно считать <em>большой</em> удачей.</p></div>

        <div class="comment__footer">
    <a href="#reply" class="comment__footer-link reply_link" onclick="return comment_show_reply_form(20158334 )">Ответить</a>


</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-7" id="reply_comments_20158334"></ul>
  </li>
</ul>
  </li>
  <li class="content-list__item content-list__item_comment js-comment " rel="20158368">
    
    <span class="parent_id" data-parent_id="20127056"></span>
    <div class="comment" id="comment_20158368">
      <span class="comment__collapse" title="Свернуть/развернуть ветку комментариев" data-id="20158368"></span>
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head   " rel="20158368">
          <a href="https://habr.com/ru/users/twinklede/" class="user-info user-info_inline" rel="user-popover" data-user-login="twinklede">
    <svg class="default-image default-image_mini default-image_pink" width="24" height="24"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#slug"></use></svg>
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">twinklede</span>
</a>

          
          <time class="comment__date-time comment__date-time_published">15 мая 2019 в 22:13</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="#comment_20158368" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="20158368" data-action="add" title="Добавить в закладки"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#book"></use></svg></a>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <span class="icon_comment-branch js-comment_tree" data-id="20158368" data-parent_id="20127056" title="Показать ветку комментариев"><svg width="8" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#tree"></use></svg></span>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#comment_20127056" class="icon_comment-arrow-up js-comment_parent" data-id="20158368" data-parent_id="20127056" title="Показать предыдущий комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
    </li>

  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="#comment_20158368" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="20158368" data-parent_id="20127056" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="20158368" data-post-target="450512" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="plus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter   js-score" title="Всего голосов 0: ↑0 и ↓0">0</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message "><blockquote>Очень рекомендую проверить свой код на такие случаи.</blockquote><br>
Допустим, вот так: <a href="https://godbolt.org/z/qmzVyN">godbolt.org/z/qmzVyN</a></div>

        <div class="comment__footer">
    <a href="#reply" class="comment__footer-link reply_link" onclick="return comment_show_reply_form(20158368 )">Ответить</a>


</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-6" id="reply_comments_20158368"></ul>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="content-list__item content-list__item_comment js-comment " rel="20127428">
    
    <span class="parent_id" data-parent_id="20118128"></span>
    <div class="comment" id="comment_20127428">
      <span class="comment__collapse" title="Свернуть/развернуть ветку комментариев" data-id="20127428"></span>
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head   " rel="20127428">
          <a href="https://habr.com/ru/users/Ununtrium/" class="user-info user-info_inline" rel="user-popover" data-user-login="Ununtrium">
    <img src="Swift%20%D0%BF%D1%80%D0%BE%D1%82%D0%B8%D0%B2%20Rust%20%E2%80%94%20%D0%B1%D0%B5%D0%BD%D1%87%D0%BC%D0%B0%D1%80%D0%BA%D0%B8%D0%BD%D0%B3%20%D0%BD%D0%B0%20Linux%20%D1%81%20(%D0%BD%D0%B5)%D0%BF%D0%BE%D0%BD%D1%8F%D1%82%D0%BD%D1%8B%D0%BC%20%D1%84%D0%B8%D0%BD%D0%B0%D0%BB%D0%BE%D0%BC%20_%20%D0%A5%D0%B0%D0%B1%D1%80_files/b4c624c5c91b9fd62f70e615ec07913b.png" class="user-info__image-pic user-info__image-pic_small" width="24" height="24">
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">Ununtrium</span>
</a>

          <svg class="icon_comment-edit" title="Комментарий был изменен" width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#pencil"></use></svg>
          <time class="comment__date-time comment__date-time_published">8 мая 2019 в 10:18</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="#comment_20127428" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="20127428" data-action="add" title="Добавить в закладки"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#book"></use></svg></a>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <span class="icon_comment-branch js-comment_tree" data-id="20127428" data-parent_id="20118128" title="Показать ветку комментариев"><svg width="8" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#tree"></use></svg></span>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#comment_20118128" class="icon_comment-arrow-up js-comment_parent" data-id="20127428" data-parent_id="20118128" title="Показать предыдущий комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
    </li>

  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="#comment_20127428" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="20127428" data-parent_id="20118128" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="20127428" data-post-target="450512" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="plus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter voting-wjt__counter_positive  js-score" title="Всего голосов +1: ↑1 и ↓0">+1</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message "><blockquote>Везде и всюду видно обратное</blockquote><br>
<blockquote>Раст целиком и полностью состоит из костылей</blockquote><br>
<blockquote>жава</blockquote><br>
<blockquote>ненужен</blockquote><br>
<br>
Судя по качеству аргументов перед вами же типичный лоровец, зачем вы с ним спорите?</div>

        <div class="comment__footer">
    <a href="#reply" class="comment__footer-link reply_link" onclick="return comment_show_reply_form(20127428 )">Ответить</a>


</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-4" id="reply_comments_20127428">  <li class="content-list__item content-list__item_comment js-comment " rel="20128060">
    
    <span class="parent_id" data-parent_id="20127428"></span>
    <div class="comment" id="comment_20128060">
      <span class="comment__collapse" title="Свернуть/развернуть ветку комментариев" data-id="20128060"></span>
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head   " rel="20128060">
          <a href="https://habr.com/ru/users/PsyHaSTe/" class="user-info user-info_inline" rel="user-popover" data-user-login="PsyHaSTe">
    <img src="Swift%20%D0%BF%D1%80%D0%BE%D1%82%D0%B8%D0%B2%20Rust%20%E2%80%94%20%D0%B1%D0%B5%D0%BD%D1%87%D0%BC%D0%B0%D1%80%D0%BA%D0%B8%D0%BD%D0%B3%20%D0%BD%D0%B0%20Linux%20%D1%81%20(%D0%BD%D0%B5)%D0%BF%D0%BE%D0%BD%D1%8F%D1%82%D0%BD%D1%8B%D0%BC%20%D1%84%D0%B8%D0%BD%D0%B0%D0%BB%D0%BE%D0%BC%20_%20%D0%A5%D0%B0%D0%B1%D1%80_files/7631ac5e5a7e237a937f5f2a74ae4c9e.jpg" class="user-info__image-pic user-info__image-pic_small" width="24" height="24">
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">PsyHaSTe</span>
</a>

          
          <time class="comment__date-time comment__date-time_published">8 мая 2019 в 11:55</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="#comment_20128060" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="20128060" data-action="add" title="Добавить в закладки"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#book"></use></svg></a>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <span class="icon_comment-branch js-comment_tree" data-id="20128060" data-parent_id="20127428" title="Показать ветку комментариев"><svg width="8" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#tree"></use></svg></span>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#comment_20127428" class="icon_comment-arrow-up js-comment_parent" data-id="20128060" data-parent_id="20127428" title="Показать предыдущий комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
    </li>

  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="#comment_20128060" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="20128060" data-parent_id="20127428" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="20128060" data-post-target="450512" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="plus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter   js-score" title="Всего голосов 0: ↑0 и ↓0">0</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message "><p>С ним давно никто не спорит :)</p></div>

        <div class="comment__footer">
    <a href="#reply" class="comment__footer-link reply_link" onclick="return comment_show_reply_form(20128060 )">Ответить</a>


</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-5" id="reply_comments_20128060"></ul>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="content-list__item content-list__item_comment js-comment " rel="20118426">
    
    <span class="parent_id" data-parent_id="20118104"></span>
    <div class="comment" id="comment_20118426">
      <span class="comment__collapse" title="Свернуть/развернуть ветку комментариев" data-id="20118426"></span>
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head   " rel="20118426">
          <a href="https://habr.com/ru/users/frol/" class="user-info user-info_inline" rel="user-popover" data-user-login="frol">
    <img src="Swift%20%D0%BF%D1%80%D0%BE%D1%82%D0%B8%D0%B2%20Rust%20%E2%80%94%20%D0%B1%D0%B5%D0%BD%D1%87%D0%BC%D0%B0%D1%80%D0%BA%D0%B8%D0%BD%D0%B3%20%D0%BD%D0%B0%20Linux%20%D1%81%20(%D0%BD%D0%B5)%D0%BF%D0%BE%D0%BD%D1%8F%D1%82%D0%BD%D1%8B%D0%BC%20%D1%84%D0%B8%D0%BD%D0%B0%D0%BB%D0%BE%D0%BC%20_%20%D0%A5%D0%B0%D0%B1%D1%80_files/b01d02d99074813044746db10d6ec219.png" class="user-info__image-pic user-info__image-pic_small" width="24" height="24">
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">frol</span>
</a>

          
          <time class="comment__date-time comment__date-time_published">6 мая 2019 в 14:46</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="#comment_20118426" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="20118426" data-action="add" title="Добавить в закладки"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#book"></use></svg></a>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <span class="icon_comment-branch js-comment_tree" data-id="20118426" data-parent_id="20118104" title="Показать ветку комментариев"><svg width="8" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#tree"></use></svg></span>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#comment_20118104" class="icon_comment-arrow-up js-comment_parent" data-id="20118426" data-parent_id="20118104" title="Показать предыдущий комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
    </li>

  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="#comment_20118426" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="20118426" data-parent_id="20118104" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="20118426" data-post-target="450512" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small voting-wjt__button_plus" data-action="plus" onclick="comment_vote(this);" title="Вы проголосовали положительно " disabled="disabled"><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter voting-wjt__counter_positive  js-score" title="Всего голосов +5: ↑6 и ↓1">+5</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="Вы проголосовали положительно , отменить голос нельзя" disabled="disabled"><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message "><p>Ваш комментарий ниже куда-то делся, но я на него уже подготовил ответ...</p><br>
<blockquote>Целиком и полностью. Зависит от libc, от libc и любых других
 аллокаторов написаных на си. Использует компилятор и его рантайм 
написанный на С/С++. </blockquote><p>libc — это лишь абстракция, где "с" в названии — это лишь история. В <a href="https://redox-os.org/">Redox OS</a> (ОС на Rust) используется <a href="https://gitlab.redox-os.org/redox-os/relibc">relibc</a> (реализованная по большей части на Rust).</p><br>
<p>В <code>#[no_std]</code> вообще без алокаторов живут (реалии встаиваемых систем). При необходимости можно алокатор свой написать и <a href="https://doc.rust-lang.org/nightly/edition-guide/rust-2018/platform-and-target-support/global-allocators.html">переопределить</a>, только возникнет резонный вопрос: "а зачем?"</p><br>
<blockquote>Использует компилятор и его рантайм написанный на С/С++. </blockquote><p>Компилятор
 Rust написан на Rust. В дополнение (а там будет видно) к кодогенератору
 LLVM разрабатывают альтернативный кодогенератор на Rust — <a href="https://github.com/CraneStation/cranelift">Cranelift</a>
 (и всё-таки нет смысла сразу всё бросать и нестись всё переписывать на 
Rust, но планомерные качественные изменения очень даже происходят).</p><br>
<blockquote>А пока есть одни хлеворды и серво, которое не может 
нарисовать хелворд без артефактов — меня эти рассуждения волнуют мало и 
волновать вообще не должны.</blockquote><p><a href="https://smoliarm.livejournal.com/324310.html">"Вот когда будет..."</a></p><br>
<p><a href="https://www.reddit.com/r/rust/comments/bkobwf/one_billion_crates_downloaded_on_cratesio/">Ждите дальше.</a></p><br>
<blockquote>К тому же, раст состоит целиком и полностью из копирования. 
Там копируется всё и единственное, что ему позволяет существовать — это 
llvm и его оптимизации, которые выпиливают все эти копирования.</blockquote><p>В Rust используется move-семантика по умолчанию. О каком компировании речь вообще?</p><br>
<blockquote>Что, методичка сломалась и ответа нету?</blockquote><p>Ответа
 к чему? Вопроса не звучало. Я готов увидеть Ваши патчи в компиляторы 
перечисленных языков и тогда будем обсуждать по делу. Исходники Rust — 
это единственные исходники крупного языка программирования, которые не 
вызывают у меня ужаса, даже более того, компилятор реализован как самый 
"обычный" проект на Rust и всё логично расположено и код написан с 
минимальным использованием магии, хорошо документирован и покрыт 
тестами.</p><br>
<blockquote>Плохо это тем, что очередное пхп украв логику у llvm выдаёт 
достижения llvm за свои. Без это достижений — это бы пхп было пхп. А оно
 и было пхп.</blockquote><p>По Вашей логике выходит, что LLVM справедливо использовать только для компиляторов С++.</p></div>

        <div class="comment__footer">
    <a href="#reply" class="comment__footer-link reply_link" onclick="return comment_show_reply_form(20118426 )">Ответить</a>


</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-3" id="reply_comments_20118426">  <li class="content-list__item content-list__item_comment js-comment " rel="20118456">
    
    <span class="parent_id" data-parent_id="20118426"></span>
    <div class="comment" id="comment_20118456">
      <span class="comment__collapse" title="Свернуть/развернуть ветку комментариев" data-id="20118456"></span>
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head comment__head_topic-author comment__head_my-comment " rel="20118456">
          <a href="https://habr.com/ru/users/epishman/" class="user-info user-info_inline" rel="user-popover" data-user-login="epishman">
    <img src="Swift%20%D0%BF%D1%80%D0%BE%D1%82%D0%B8%D0%B2%20Rust%20%E2%80%94%20%D0%B1%D0%B5%D0%BD%D1%87%D0%BC%D0%B0%D1%80%D0%BA%D0%B8%D0%BD%D0%B3%20%D0%BD%D0%B0%20Linux%20%D1%81%20(%D0%BD%D0%B5)%D0%BF%D0%BE%D0%BD%D1%8F%D1%82%D0%BD%D1%8B%D0%BC%20%D1%84%D0%B8%D0%BD%D0%B0%D0%BB%D0%BE%D0%BC%20_%20%D0%A5%D0%B0%D0%B1%D1%80_files/ec0d88c4853c0d36d44bd0526dcfa8d7.png" class="user-info__image-pic user-info__image-pic_small" width="24" height="24">
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">epishman</span>
</a>

          <svg class="icon_comment-edit" title="Комментарий был изменен" width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#pencil"></use></svg>
          <time class="comment__date-time comment__date-time_published">6 мая 2019 в 14:50</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="#comment_20118456" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="20118456" data-action="add" title="Добавить в закладки"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#book"></use></svg></a>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <span class="icon_comment-branch js-comment_tree" data-id="20118456" data-parent_id="20118426" title="Показать ветку комментариев"><svg width="8" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#tree"></use></svg></span>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#comment_20118426" class="icon_comment-arrow-up js-comment_parent" data-id="20118456" data-parent_id="20118426" title="Показать предыдущий комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
    </li>

  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="#comment_20118456" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="20118456" data-parent_id="20118426" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="20118456" data-post-target="450512" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="plus" onclick="comment_vote(this);" title="За свои комментарии голосовать нельзя" disabled="disabled"><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter   js-score" title="Всего голосов 0: ↑0 и ↓0">0</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="За свои комментарии голосовать нельзя" disabled="disabled"><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message ">Похоже, админы забанили 
пользователя по чьей-то жалобе. У меня принцип — никого не минусовать, 
так что жалко его, смешно писал, и кое-что даже по делу было. По мне так
 форма выражения мыслей неважна — хоть матом, лишь бы Мысль была.<br>
PS<br>
Самое смешное, что Swift тоже зависит от LLVM :)</div>

        <div class="comment__footer">
    <a href="#reply" class="comment__footer-link reply_link" onclick="return comment_show_reply_form(20118456 )">Ответить</a>


</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-4" id="reply_comments_20118456">  <li class="content-list__item content-list__item_comment js-comment " rel="20118560">
    
    <span class="parent_id" data-parent_id="20118456"></span>
    <div class="comment" id="comment_20118560">
      <span class="comment__collapse" title="Свернуть/развернуть ветку комментариев" data-id="20118560"></span>
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head   " rel="20118560">
          <a href="https://habr.com/ru/users/Am0ralist/" class="user-info user-info_inline" rel="user-popover" data-user-login="Am0ralist">
    <img src="Swift%20%D0%BF%D1%80%D0%BE%D1%82%D0%B8%D0%B2%20Rust%20%E2%80%94%20%D0%B1%D0%B5%D0%BD%D1%87%D0%BC%D0%B0%D1%80%D0%BA%D0%B8%D0%BD%D0%B3%20%D0%BD%D0%B0%20Linux%20%D1%81%20(%D0%BD%D0%B5)%D0%BF%D0%BE%D0%BD%D1%8F%D1%82%D0%BD%D1%8B%D0%BC%20%D1%84%D0%B8%D0%BD%D0%B0%D0%BB%D0%BE%D0%BC%20_%20%D0%A5%D0%B0%D0%B1%D1%80_files/0c08f72a74dddc76c00901d0b6310aaa.jpg" class="user-info__image-pic user-info__image-pic_small" width="24" height="24">
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">Am0ralist</span>
</a>

          
          <time class="comment__date-time comment__date-time_published">6 мая 2019 в 15:03</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="#comment_20118560" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="20118560" data-action="add" title="Добавить в закладки"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#book"></use></svg></a>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <span class="icon_comment-branch js-comment_tree" data-id="20118560" data-parent_id="20118456" title="Показать ветку комментариев"><svg width="8" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#tree"></use></svg></span>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#comment_20118456" class="icon_comment-arrow-up js-comment_parent" data-id="20118560" data-parent_id="20118456" title="Показать предыдущий комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
    </li>

  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="#comment_20118560" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="20118560" data-parent_id="20118456" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="20118560" data-post-target="450512" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="plus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter   js-score" title="Всего голосов 0: ↑0 и ↓0">0</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message "><blockquote>Похоже, админы забанили пользователя по чьей-то жалобе.</blockquote>у
 меня было желание пожаловаться когда он уже окончательно скатился, но я
 только комментарий написал о том, что при такой подаче искать что-либо в
 тексте желания не возникает. Но либо сами админы нашли, либо кто-то ещё
 отписался…</div>

        <div class="comment__footer">
    <a href="#reply" class="comment__footer-link reply_link" onclick="return comment_show_reply_form(20118560 )">Ответить</a>


</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-5" id="reply_comments_20118560">  <li class="content-list__item content-list__item_comment js-comment " rel="20120858">
    
    <span class="parent_id" data-parent_id="20118560"></span>
    <div class="comment" id="comment_20120858">
      <span class="comment__collapse" title="Свернуть/развернуть ветку комментариев" data-id="20120858"></span>
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head   " rel="20120858">
          <a href="https://habr.com/ru/users/0xd34df00d/" class="user-info user-info_inline" rel="user-popover" data-user-login="0xd34df00d">
    <img src="Swift%20%D0%BF%D1%80%D0%BE%D1%82%D0%B8%D0%B2%20Rust%20%E2%80%94%20%D0%B1%D0%B5%D0%BD%D1%87%D0%BC%D0%B0%D1%80%D0%BA%D0%B8%D0%BD%D0%B3%20%D0%BD%D0%B0%20Linux%20%D1%81%20(%D0%BD%D0%B5)%D0%BF%D0%BE%D0%BD%D1%8F%D1%82%D0%BD%D1%8B%D0%BC%20%D1%84%D0%B8%D0%BD%D0%B0%D0%BB%D0%BE%D0%BC%20_%20%D0%A5%D0%B0%D0%B1%D1%80_files/44a281ed2f61cafb08b1d38e96e4998a.jpg" class="user-info__image-pic user-info__image-pic_small" width="24" height="24">
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">0xd34df00d</span>
</a>

          
          <time class="comment__date-time comment__date-time_published">6 мая 2019 в 22:34</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="#comment_20120858" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="20120858" data-action="add" title="Добавить в закладки"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#book"></use></svg></a>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <span class="icon_comment-branch js-comment_tree" data-id="20120858" data-parent_id="20118560" title="Показать ветку комментариев"><svg width="8" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#tree"></use></svg></span>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#comment_20118560" class="icon_comment-arrow-up js-comment_parent" data-id="20120858" data-parent_id="20118560" title="Показать предыдущий комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
    </li>

  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="#comment_20120858" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="20120858" data-parent_id="20118560" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="20120858" data-post-target="450512" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="plus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter   js-score" title="Всего голосов 0: ↑0 и ↓0">0</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message "><p>Тьфу ты, только я начал писать ответ на его комментарий недельной давности...</p></div>

        <div class="comment__footer">
    <a href="#reply" class="comment__footer-link reply_link" onclick="return comment_show_reply_form(20120858 )">Ответить</a>


</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-6" id="reply_comments_20120858"></ul>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="content-list__item content-list__item_comment js-comment " rel="20118536">
    
    <span class="parent_id" data-parent_id="20118426"></span>
    <div class="comment" id="comment_20118536">
      <span class="comment__collapse" title="Свернуть/развернуть ветку комментариев" data-id="20118536"></span>
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head comment__head_topic-author comment__head_my-comment " rel="20118536">
          <a href="https://habr.com/ru/users/epishman/" class="user-info user-info_inline" rel="user-popover" data-user-login="epishman">
    <img src="Swift%20%D0%BF%D1%80%D0%BE%D1%82%D0%B8%D0%B2%20Rust%20%E2%80%94%20%D0%B1%D0%B5%D0%BD%D1%87%D0%BC%D0%B0%D1%80%D0%BA%D0%B8%D0%BD%D0%B3%20%D0%BD%D0%B0%20Linux%20%D1%81%20(%D0%BD%D0%B5)%D0%BF%D0%BE%D0%BD%D1%8F%D1%82%D0%BD%D1%8B%D0%BC%20%D1%84%D0%B8%D0%BD%D0%B0%D0%BB%D0%BE%D0%BC%20_%20%D0%A5%D0%B0%D0%B1%D1%80_files/ec0d88c4853c0d36d44bd0526dcfa8d7.png" class="user-info__image-pic user-info__image-pic_small" width="24" height="24">
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">epishman</span>
</a>

          <svg class="icon_comment-edit" title="Комментарий был изменен" width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#pencil"></use></svg>
          <time class="comment__date-time comment__date-time_published">6 мая 2019 в 14:59</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="#comment_20118536" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="20118536" data-action="add" title="Добавить в закладки"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#book"></use></svg></a>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <span class="icon_comment-branch js-comment_tree" data-id="20118536" data-parent_id="20118426" title="Показать ветку комментариев"><svg width="8" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#tree"></use></svg></span>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#comment_20118426" class="icon_comment-arrow-up js-comment_parent" data-id="20118536" data-parent_id="20118426" title="Показать предыдущий комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
    </li>

  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="#comment_20118536" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="20118536" data-parent_id="20118426" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="20118536" data-post-target="450512" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="plus" onclick="comment_vote(this);" title="За свои комментарии голосовать нельзя" disabled="disabled"><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter   js-score" title="Всего голосов 0: ↑0 и ↓0">0</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="За свои комментарии голосовать нельзя" disabled="disabled"><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message ">&gt; В Rust используется move-семантика по умолчанию. <br>
========<br>
Тут путаница какая-то у меня в голове. Если я создю структуру внутри 
функции, а потом ее возвращаю вверх по стеку — какие есть варианты кроме
 копирования? Или в другой тред передаю. Получается, что компилятор сам 
определяет по ситуации — мув там или копи? Со ссылками то как раз все 
понятно, непонятно с передачей владения.</div>

        <div class="comment__footer">
    <a href="#reply" class="comment__footer-link reply_link" onclick="return comment_show_reply_form(20118536 )">Ответить</a>


</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-4" id="reply_comments_20118536">  <li class="content-list__item content-list__item_comment js-comment " rel="20118692">
    
    <span class="parent_id" data-parent_id="20118536"></span>
    <div class="comment" id="comment_20118692">
      <span class="comment__collapse" title="Свернуть/развернуть ветку комментариев" data-id="20118692"></span>
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head   " rel="20118692">
          <a href="https://habr.com/ru/users/frol/" class="user-info user-info_inline" rel="user-popover" data-user-login="frol">
    <img src="Swift%20%D0%BF%D1%80%D0%BE%D1%82%D0%B8%D0%B2%20Rust%20%E2%80%94%20%D0%B1%D0%B5%D0%BD%D1%87%D0%BC%D0%B0%D1%80%D0%BA%D0%B8%D0%BD%D0%B3%20%D0%BD%D0%B0%20Linux%20%D1%81%20(%D0%BD%D0%B5)%D0%BF%D0%BE%D0%BD%D1%8F%D1%82%D0%BD%D1%8B%D0%BC%20%D1%84%D0%B8%D0%BD%D0%B0%D0%BB%D0%BE%D0%BC%20_%20%D0%A5%D0%B0%D0%B1%D1%80_files/b01d02d99074813044746db10d6ec219.png" class="user-info__image-pic user-info__image-pic_small" width="24" height="24">
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">frol</span>
</a>

          
          <time class="comment__date-time comment__date-time_published">6 мая 2019 в 15:22</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="#comment_20118692" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="20118692" data-action="add" title="Добавить в закладки"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#book"></use></svg></a>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <span class="icon_comment-branch js-comment_tree" data-id="20118692" data-parent_id="20118536" title="Показать ветку комментариев"><svg width="8" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#tree"></use></svg></span>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#comment_20118536" class="icon_comment-arrow-up js-comment_parent" data-id="20118692" data-parent_id="20118536" title="Показать предыдущий комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
    </li>

  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="#comment_20118692" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="20118692" data-parent_id="20118536" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="20118692" data-post-target="450512" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small voting-wjt__button_plus" data-action="plus" onclick="comment_vote(this);" title="Вы проголосовали положительно " disabled="disabled"><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter voting-wjt__counter_positive  js-score" title="Всего голосов +3: ↑3 и ↓0">+3</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="Вы проголосовали положительно , отменить голос нельзя" disabled="disabled"><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message "><p>Семантика — это модель, 
которая предоставляется программисту, в рамках которой он(а) может 
создавать описывать логику своей программы. Move-семантика — это про то,
 что после передачи владения значения из переменной А в переменную Б, 
обращение к переменной А не имеет смысла (в Rust — это ошибка 
компиляции, а в С++ — поведение не определено [UB]). С точки зрения 
реализации — это уже вопрос другой. Можно Move-семантику оставить 
моделью, а асемблер будет производить копии, но чаще всего 
оптимизационные компиляторы достаточно умны чтобы пользоваться этим 
преимуществом и избегать копий. Однако, магии не существует и на 
границах функций (если они не заинлайнятся), данные должны как-то через 
регистры и стек попасть к вызываемой функции, так что если другого 
выхода не будет найдено, то данные будут "копироваться".</p></div>

        <div class="comment__footer">
    <a href="#reply" class="comment__footer-link reply_link" onclick="return comment_show_reply_form(20118692 )">Ответить</a>


</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-5" id="reply_comments_20118692">  <li class="content-list__item content-list__item_comment js-comment " rel="20119058">
    
    <span class="parent_id" data-parent_id="20118692"></span>
    <div class="comment" id="comment_20119058">
      <span class="comment__collapse" title="Свернуть/развернуть ветку комментариев" data-id="20119058"></span>
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head   " rel="20119058">
          <a href="https://habr.com/ru/users/Playa/" class="user-info user-info_inline" rel="user-popover" data-user-login="Playa">
    <img src="Swift%20%D0%BF%D1%80%D0%BE%D1%82%D0%B8%D0%B2%20Rust%20%E2%80%94%20%D0%B1%D0%B5%D0%BD%D1%87%D0%BC%D0%B0%D1%80%D0%BA%D0%B8%D0%BD%D0%B3%20%D0%BD%D0%B0%20Linux%20%D1%81%20(%D0%BD%D0%B5)%D0%BF%D0%BE%D0%BD%D1%8F%D1%82%D0%BD%D1%8B%D0%BC%20%D1%84%D0%B8%D0%BD%D0%B0%D0%BB%D0%BE%D0%BC%20_%20%D0%A5%D0%B0%D0%B1%D1%80_files/3db49484c53973baa6c24125aa62157d.jpg" class="user-info__image-pic user-info__image-pic_small" width="24" height="24">
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">Playa</span>
</a>

          <svg class="icon_comment-edit" title="Комментарий был изменен" width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#pencil"></use></svg>
          <time class="comment__date-time comment__date-time_published">6 мая 2019 в 16:10</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="#comment_20119058" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="20119058" data-action="add" title="Добавить в закладки"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#book"></use></svg></a>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <span class="icon_comment-branch js-comment_tree" data-id="20119058" data-parent_id="20118692" title="Показать ветку комментариев"><svg width="8" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#tree"></use></svg></span>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#comment_20118692" class="icon_comment-arrow-up js-comment_parent" data-id="20119058" data-parent_id="20118692" title="Показать предыдущий комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
    </li>

  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="#comment_20119058" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="20119058" data-parent_id="20118692" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="20119058" data-post-target="450512" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="plus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter   js-score" title="Всего голосов 0: ↑0 и ↓0">0</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message "><blockquote>в С++ — поведение не определено [UB]</blockquote><br>
Это не совсем так. Например, объекты классов из STL после перемещения являются «valid, but unspecified».</div>

        <div class="comment__footer">
    <a href="#reply" class="comment__footer-link reply_link" onclick="return comment_show_reply_form(20119058 )">Ответить</a>


</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-6" id="reply_comments_20119058">  <li class="content-list__item content-list__item_comment js-comment " rel="20119140">
    
    <span class="parent_id" data-parent_id="20119058"></span>
    <div class="comment" id="comment_20119140">
      <span class="comment__collapse" title="Свернуть/развернуть ветку комментариев" data-id="20119140"></span>
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head   " rel="20119140">
          <a href="https://habr.com/ru/users/frol/" class="user-info user-info_inline" rel="user-popover" data-user-login="frol">
    <img src="Swift%20%D0%BF%D1%80%D0%BE%D1%82%D0%B8%D0%B2%20Rust%20%E2%80%94%20%D0%B1%D0%B5%D0%BD%D1%87%D0%BC%D0%B0%D1%80%D0%BA%D0%B8%D0%BD%D0%B3%20%D0%BD%D0%B0%20Linux%20%D1%81%20(%D0%BD%D0%B5)%D0%BF%D0%BE%D0%BD%D1%8F%D1%82%D0%BD%D1%8B%D0%BC%20%D1%84%D0%B8%D0%BD%D0%B0%D0%BB%D0%BE%D0%BC%20_%20%D0%A5%D0%B0%D0%B1%D1%80_files/b01d02d99074813044746db10d6ec219.png" class="user-info__image-pic user-info__image-pic_small" width="24" height="24">
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">frol</span>
</a>

          
          <time class="comment__date-time comment__date-time_published">6 мая 2019 в 16:24</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="#comment_20119140" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="20119140" data-action="add" title="Добавить в закладки"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#book"></use></svg></a>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <span class="icon_comment-branch js-comment_tree" data-id="20119140" data-parent_id="20119058" title="Показать ветку комментариев"><svg width="8" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#tree"></use></svg></span>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#comment_20119058" class="icon_comment-arrow-up js-comment_parent" data-id="20119140" data-parent_id="20119058" title="Показать предыдущий комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
    </li>

  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="#comment_20119140" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="20119140" data-parent_id="20119058" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="20119140" data-post-target="450512" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="plus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter voting-wjt__counter_positive  js-score" title="Всего голосов +1: ↑1 и ↓0">+1</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message "><p>Не знал, спасибо за уточнение.
 Скажу честно, на С++ мне писать код просто страшно. Я думаю мне всей 
жизни не хватит чтобы устранить моё невежество в области специфики С++.</p></div>

        <div class="comment__footer">
    <a href="#reply" class="comment__footer-link reply_link" onclick="return comment_show_reply_form(20119140 )">Ответить</a>


</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-7" id="reply_comments_20119140"></ul>
  </li>
  <li class="content-list__item content-list__item_comment js-comment " rel="20120862">
    
    <span class="parent_id" data-parent_id="20119058"></span>
    <div class="comment" id="comment_20120862">
      <span class="comment__collapse" title="Свернуть/развернуть ветку комментариев" data-id="20120862"></span>
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head   " rel="20120862">
          <a href="https://habr.com/ru/users/0xd34df00d/" class="user-info user-info_inline" rel="user-popover" data-user-login="0xd34df00d">
    <img src="Swift%20%D0%BF%D1%80%D0%BE%D1%82%D0%B8%D0%B2%20Rust%20%E2%80%94%20%D0%B1%D0%B5%D0%BD%D1%87%D0%BC%D0%B0%D1%80%D0%BA%D0%B8%D0%BD%D0%B3%20%D0%BD%D0%B0%20Linux%20%D1%81%20(%D0%BD%D0%B5)%D0%BF%D0%BE%D0%BD%D1%8F%D1%82%D0%BD%D1%8B%D0%BC%20%D1%84%D0%B8%D0%BD%D0%B0%D0%BB%D0%BE%D0%BC%20_%20%D0%A5%D0%B0%D0%B1%D1%80_files/44a281ed2f61cafb08b1d38e96e4998a.jpg" class="user-info__image-pic user-info__image-pic_small" width="24" height="24">
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">0xd34df00d</span>
</a>

          
          <time class="comment__date-time comment__date-time_published">6 мая 2019 в 22:35</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="#comment_20120862" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="20120862" data-action="add" title="Добавить в закладки"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#book"></use></svg></a>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <span class="icon_comment-branch js-comment_tree" data-id="20120862" data-parent_id="20119058" title="Показать ветку комментариев"><svg width="8" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#tree"></use></svg></span>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#comment_20119058" class="icon_comment-arrow-up js-comment_parent" data-id="20120862" data-parent_id="20119058" title="Показать предыдущий комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
    </li>

  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="#comment_20120862" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="20120862" data-parent_id="20119058" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="20120862" data-post-target="450512" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="plus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter voting-wjt__counter_positive  js-score" title="Всего голосов +2: ↑3 и ↓1">+2</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message "><p>Что означает, что любые операции с ними, кроме вызова деструктора или оператора присваивания — UB.</p></div>

        <div class="comment__footer">
    <a href="#reply" class="comment__footer-link reply_link" onclick="return comment_show_reply_form(20120862 )">Ответить</a>


</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-7" id="reply_comments_20120862">  <li class="content-list__item content-list__item_comment js-comment " rel="20121602">
    
    <span class="parent_id" data-parent_id="20120862"></span>
    <div class="comment" id="comment_20121602">
      <span class="comment__collapse" title="Свернуть/развернуть ветку комментариев" data-id="20121602"></span>
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head   " rel="20121602">
          <a href="https://habr.com/ru/users/mayorovp/" class="user-info user-info_inline" rel="user-popover" data-user-login="mayorovp">
    <svg class="default-image default-image_mini default-image_pink" width="24" height="24"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#slug"></use></svg>
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">mayorovp</span>
</a>

          
          <time class="comment__date-time comment__date-time_published">7 мая 2019 в 06:59</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="#comment_20121602" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="20121602" data-action="add" title="Добавить в закладки"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#book"></use></svg></a>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <span class="icon_comment-branch js-comment_tree" data-id="20121602" data-parent_id="20120862" title="Показать ветку комментариев"><svg width="8" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#tree"></use></svg></span>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#comment_20120862" class="icon_comment-arrow-up js-comment_parent" data-id="20121602" data-parent_id="20120862" title="Показать предыдущий комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
    </li>

  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="#comment_20121602" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="20121602" data-parent_id="20120862" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="20121602" data-post-target="450512" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="plus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter voting-wjt__counter_positive  js-score" title="Всего голосов +2: ↑2 и ↓0">+2</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message "><p>Что означает, что любые операции с ними, кроме вызова деструктора или оператора присваивания — Unspecified Behavior.</p><br>
<p>Undefined Behavior тут неоткуда возникнуть.</p></div>

        <div class="comment__footer">
    <a href="#reply" class="comment__footer-link reply_link" onclick="return comment_show_reply_form(20121602 )">Ответить</a>


</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-8" id="reply_comments_20121602">  <li class="content-list__item content-list__item_comment js-comment " rel="20123798">
    
    <span class="parent_id" data-parent_id="20121602"></span>
    <div class="comment" id="comment_20123798">
      <span class="comment__collapse" title="Свернуть/развернуть ветку комментариев" data-id="20123798"></span>
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head   " rel="20123798">
          <a href="https://habr.com/ru/users/0xd34df00d/" class="user-info user-info_inline" rel="user-popover" data-user-login="0xd34df00d">
    <img src="Swift%20%D0%BF%D1%80%D0%BE%D1%82%D0%B8%D0%B2%20Rust%20%E2%80%94%20%D0%B1%D0%B5%D0%BD%D1%87%D0%BC%D0%B0%D1%80%D0%BA%D0%B8%D0%BD%D0%B3%20%D0%BD%D0%B0%20Linux%20%D1%81%20(%D0%BD%D0%B5)%D0%BF%D0%BE%D0%BD%D1%8F%D1%82%D0%BD%D1%8B%D0%BC%20%D1%84%D0%B8%D0%BD%D0%B0%D0%BB%D0%BE%D0%BC%20_%20%D0%A5%D0%B0%D0%B1%D1%80_files/44a281ed2f61cafb08b1d38e96e4998a.jpg" class="user-info__image-pic user-info__image-pic_small" width="24" height="24">
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">0xd34df00d</span>
</a>

          
          <time class="comment__date-time comment__date-time_published">7 мая 2019 в 14:53</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="#comment_20123798" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="20123798" data-action="add" title="Добавить в закладки"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#book"></use></svg></a>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <span class="icon_comment-branch js-comment_tree" data-id="20123798" data-parent_id="20121602" title="Показать ветку комментариев"><svg width="8" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#tree"></use></svg></span>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#comment_20121602" class="icon_comment-arrow-up js-comment_parent" data-id="20123798" data-parent_id="20121602" title="Показать предыдущий комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
    </li>

  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="#comment_20123798" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="20123798" data-parent_id="20121602" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="20123798" data-post-target="450512" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="plus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter voting-wjt__counter_positive  js-score" title="Всего голосов +2: ↑2 и ↓0">+2</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message "><p>Мы оба неправы.</p><br>
<p>Те операции, которые имеют предусловия — UB. Те, которые не имеют — unspecified.</p></div>

        <div class="comment__footer">
    <a href="#reply" class="comment__footer-link reply_link" onclick="return comment_show_reply_form(20123798 )">Ответить</a>


</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-9" id="reply_comments_20123798"></ul>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="content-list__item content-list__item_comment js-comment " rel="20118746">
    
    <span class="parent_id" data-parent_id="20118536"></span>
    <div class="comment" id="comment_20118746">
      <span class="comment__collapse" title="Свернуть/развернуть ветку комментариев" data-id="20118746"></span>
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head   " rel="20118746">
          <a href="https://habr.com/ru/users/PsyHaSTe/" class="user-info user-info_inline" rel="user-popover" data-user-login="PsyHaSTe">
    <img src="Swift%20%D0%BF%D1%80%D0%BE%D1%82%D0%B8%D0%B2%20Rust%20%E2%80%94%20%D0%B1%D0%B5%D0%BD%D1%87%D0%BC%D0%B0%D1%80%D0%BA%D0%B8%D0%BD%D0%B3%20%D0%BD%D0%B0%20Linux%20%D1%81%20(%D0%BD%D0%B5)%D0%BF%D0%BE%D0%BD%D1%8F%D1%82%D0%BD%D1%8B%D0%BC%20%D1%84%D0%B8%D0%BD%D0%B0%D0%BB%D0%BE%D0%BC%20_%20%D0%A5%D0%B0%D0%B1%D1%80_files/7631ac5e5a7e237a937f5f2a74ae4c9e.jpg" class="user-info__image-pic user-info__image-pic_small" width="24" height="24">
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">PsyHaSTe</span>
</a>

          <svg class="icon_comment-edit" title="Комментарий был изменен" width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#pencil"></use></svg>
          <time class="comment__date-time comment__date-time_published">6 мая 2019 в 15:28</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="#comment_20118746" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="20118746" data-action="add" title="Добавить в закладки"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#book"></use></svg></a>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <span class="icon_comment-branch js-comment_tree" data-id="20118746" data-parent_id="20118536" title="Показать ветку комментариев"><svg width="8" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#tree"></use></svg></span>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#comment_20118536" class="icon_comment-arrow-up js-comment_parent" data-id="20118746" data-parent_id="20118536" title="Показать предыдущий комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
    </li>

  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="#comment_20118746" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="20118746" data-parent_id="20118536" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="20118746" data-post-target="450512" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="plus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter   js-score" title="Всего голосов 0: ↑0 и ↓0">0</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message "><p>del</p></div>

        <div class="comment__footer">
    <a href="#reply" class="comment__footer-link reply_link" onclick="return comment_show_reply_form(20118746 )">Ответить</a>


</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-5" id="reply_comments_20118746">  <li class="content-list__item content-list__item_comment js-comment " rel="20118768">
    
    <span class="parent_id" data-parent_id="20118746"></span>
    <div class="comment" id="comment_20118768">
      <span class="comment__collapse" title="Свернуть/развернуть ветку комментариев" data-id="20118768"></span>
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head comment__head_topic-author comment__head_my-comment " rel="20118768">
          <a href="https://habr.com/ru/users/epishman/" class="user-info user-info_inline" rel="user-popover" data-user-login="epishman">
    <img src="Swift%20%D0%BF%D1%80%D0%BE%D1%82%D0%B8%D0%B2%20Rust%20%E2%80%94%20%D0%B1%D0%B5%D0%BD%D1%87%D0%BC%D0%B0%D1%80%D0%BA%D0%B8%D0%BD%D0%B3%20%D0%BD%D0%B0%20Linux%20%D1%81%20(%D0%BD%D0%B5)%D0%BF%D0%BE%D0%BD%D1%8F%D1%82%D0%BD%D1%8B%D0%BC%20%D1%84%D0%B8%D0%BD%D0%B0%D0%BB%D0%BE%D0%BC%20_%20%D0%A5%D0%B0%D0%B1%D1%80_files/ec0d88c4853c0d36d44bd0526dcfa8d7.png" class="user-info__image-pic user-info__image-pic_small" width="24" height="24">
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">epishman</span>
</a>

          <svg class="icon_comment-edit" title="Комментарий был изменен" width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#pencil"></use></svg>
          <time class="comment__date-time comment__date-time_published">6 мая 2019 в 15:32</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="#comment_20118768" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="20118768" data-action="add" title="Добавить в закладки"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#book"></use></svg></a>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <span class="icon_comment-branch js-comment_tree" data-id="20118768" data-parent_id="20118746" title="Показать ветку комментариев"><svg width="8" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#tree"></use></svg></span>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#comment_20118746" class="icon_comment-arrow-up js-comment_parent" data-id="20118768" data-parent_id="20118746" title="Показать предыдущий комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
    </li>

  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="#comment_20118768" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="20118768" data-parent_id="20118746" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="20118768" data-post-target="450512" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="plus" onclick="comment_vote(this);" title="За свои комментарии голосовать нельзя" disabled="disabled"><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter   js-score" title="Всего голосов 0: ↑0 и ↓0">0</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="За свои комментарии голосовать нельзя" disabled="disabled"><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message ">Ну, то есть String копируется всегда, хотя по сути это указатель?</div>

        <div class="comment__footer">
    <a href="#reply" class="comment__footer-link reply_link" onclick="return comment_show_reply_form(20118768 )">Ответить</a>


</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-6" id="reply_comments_20118768">  <li class="content-list__item content-list__item_comment js-comment " rel="20118778">
    
    <span class="parent_id" data-parent_id="20118768"></span>
    <div class="comment" id="comment_20118778">
      <span class="comment__collapse" title="Свернуть/развернуть ветку комментариев" data-id="20118778"></span>
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head   " rel="20118778">
          <a href="https://habr.com/ru/users/PsyHaSTe/" class="user-info user-info_inline" rel="user-popover" data-user-login="PsyHaSTe">
    <img src="Swift%20%D0%BF%D1%80%D0%BE%D1%82%D0%B8%D0%B2%20Rust%20%E2%80%94%20%D0%B1%D0%B5%D0%BD%D1%87%D0%BC%D0%B0%D1%80%D0%BA%D0%B8%D0%BD%D0%B3%20%D0%BD%D0%B0%20Linux%20%D1%81%20(%D0%BD%D0%B5)%D0%BF%D0%BE%D0%BD%D1%8F%D1%82%D0%BD%D1%8B%D0%BC%20%D1%84%D0%B8%D0%BD%D0%B0%D0%BB%D0%BE%D0%BC%20_%20%D0%A5%D0%B0%D0%B1%D1%80_files/7631ac5e5a7e237a937f5f2a74ae4c9e.jpg" class="user-info__image-pic user-info__image-pic_small" width="24" height="24">
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">PsyHaSTe</span>
</a>

          <svg class="icon_comment-edit" title="Комментарий был изменен" width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#pencil"></use></svg>
          <time class="comment__date-time comment__date-time_published">6 мая 2019 в 15:33</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="#comment_20118778" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="20118778" data-action="add" title="Добавить в закладки"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#book"></use></svg></a>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <span class="icon_comment-branch js-comment_tree" data-id="20118778" data-parent_id="20118768" title="Показать ветку комментариев"><svg width="8" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#tree"></use></svg></span>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#comment_20118768" class="icon_comment-arrow-up js-comment_parent" data-id="20118778" data-parent_id="20118768" title="Показать предыдущий комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
    </li>

  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="#comment_20118778" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="20118778" data-parent_id="20118768" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="20118778" data-post-target="450512" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small voting-wjt__button_plus" data-action="plus" onclick="comment_vote(this);" title="Вы проголосовали положительно " disabled="disabled"><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter voting-wjt__counter_positive  js-score" title="Всего голосов +1: ↑1 и ↓0">+1</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="Вы проголосовали положительно , отменить голос нельзя" disabled="disabled"><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message "><p>В случае String ничего копироваться не будет, потому что это значение из кучи</p><br>
<p><a href="https://play.rust-lang.org/?version=stable&amp;mode=release&amp;edition=2018&amp;gist=c78abc860e0e096c6f9aaeb909a92181">https://play.rust-lang.org/?version=stable&amp;mode=release&amp;edition=2018&amp;gist=c78abc860e0e096c6f9aaeb909a92181</a></p><br>
<p>Будет копироваться только сам адрес указателя, который простой int, а
 все инты как мы знаем проще скопировать. Контент строки остается 
нетронутым.</p></div>

        <div class="comment__footer">
    <a href="#reply" class="comment__footer-link reply_link" onclick="return comment_show_reply_form(20118778 )">Ответить</a>


</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-7" id="reply_comments_20118778">  <li class="content-list__item content-list__item_comment js-comment " rel="20119200">
    
    <span class="parent_id" data-parent_id="20118778"></span>
    <div class="comment" id="comment_20119200">
      <span class="comment__collapse" title="Свернуть/развернуть ветку комментариев" data-id="20119200"></span>
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head comment__head_topic-author comment__head_my-comment " rel="20119200">
          <a href="https://habr.com/ru/users/epishman/" class="user-info user-info_inline" rel="user-popover" data-user-login="epishman">
    <img src="Swift%20%D0%BF%D1%80%D0%BE%D1%82%D0%B8%D0%B2%20Rust%20%E2%80%94%20%D0%B1%D0%B5%D0%BD%D1%87%D0%BC%D0%B0%D1%80%D0%BA%D0%B8%D0%BD%D0%B3%20%D0%BD%D0%B0%20Linux%20%D1%81%20(%D0%BD%D0%B5)%D0%BF%D0%BE%D0%BD%D1%8F%D1%82%D0%BD%D1%8B%D0%BC%20%D1%84%D0%B8%D0%BD%D0%B0%D0%BB%D0%BE%D0%BC%20_%20%D0%A5%D0%B0%D0%B1%D1%80_files/ec0d88c4853c0d36d44bd0526dcfa8d7.png" class="user-info__image-pic user-info__image-pic_small" width="24" height="24">
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">epishman</span>
</a>

          <svg class="icon_comment-edit" title="Комментарий был изменен" width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#pencil"></use></svg>
          <time class="comment__date-time comment__date-time_published">6 мая 2019 в 16:35</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="#comment_20119200" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="20119200" data-action="add" title="Добавить в закладки"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#book"></use></svg></a>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <span class="icon_comment-branch js-comment_tree" data-id="20119200" data-parent_id="20118778" title="Показать ветку комментариев"><svg width="8" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#tree"></use></svg></span>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#comment_20118778" class="icon_comment-arrow-up js-comment_parent" data-id="20119200" data-parent_id="20118778" title="Показать предыдущий комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
    </li>

  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="#comment_20119200" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="20119200" data-parent_id="20118778" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="20119200" data-post-target="450512" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="plus" onclick="comment_vote(this);" title="За свои комментарии голосовать нельзя" disabled="disabled"><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter   js-score" title="Всего голосов 0: ↑0 и ↓0">0</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="За свои комментарии голосовать нельзя" disabled="disabled"><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message ">Например, функция из библиотеки 
serde_json возвращает мне не String а &amp;str. Я понимаю, что это 
аллоцировано где-то в куче, и владелец внутри библиотеки сидит. Но мне 
со ссылками неудобно, и я хочу из этого слайса сделать нормальный 
String. И вопрос — если я к этому &amp;str применю to_string(), не 
приведет ли это к новому выделению памяти? По доке получается что 
приведет, а по жизни?</div>

        <div class="comment__footer">
    <a href="#reply" class="comment__footer-link reply_link" onclick="return comment_show_reply_form(20119200 )">Ответить</a>


</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-8" id="reply_comments_20119200">  <li class="content-list__item content-list__item_comment js-comment " rel="20119240">
    
    <span class="parent_id" data-parent_id="20119200"></span>
    <div class="comment" id="comment_20119240">
      <span class="comment__collapse" title="Свернуть/развернуть ветку комментариев" data-id="20119240"></span>
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head   " rel="20119240">
          <a href="https://habr.com/ru/users/PsyHaSTe/" class="user-info user-info_inline" rel="user-popover" data-user-login="PsyHaSTe">
    <img src="Swift%20%D0%BF%D1%80%D0%BE%D1%82%D0%B8%D0%B2%20Rust%20%E2%80%94%20%D0%B1%D0%B5%D0%BD%D1%87%D0%BC%D0%B0%D1%80%D0%BA%D0%B8%D0%BD%D0%B3%20%D0%BD%D0%B0%20Linux%20%D1%81%20(%D0%BD%D0%B5)%D0%BF%D0%BE%D0%BD%D1%8F%D1%82%D0%BD%D1%8B%D0%BC%20%D1%84%D0%B8%D0%BD%D0%B0%D0%BB%D0%BE%D0%BC%20_%20%D0%A5%D0%B0%D0%B1%D1%80_files/7631ac5e5a7e237a937f5f2a74ae4c9e.jpg" class="user-info__image-pic user-info__image-pic_small" width="24" height="24">
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">PsyHaSTe</span>
</a>

          
          <time class="comment__date-time comment__date-time_published">6 мая 2019 в 16:42</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="#comment_20119240" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="20119240" data-action="add" title="Добавить в закладки"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#book"></use></svg></a>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <span class="icon_comment-branch js-comment_tree" data-id="20119240" data-parent_id="20119200" title="Показать ветку комментариев"><svg width="8" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#tree"></use></svg></span>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#comment_20119200" class="icon_comment-arrow-up js-comment_parent" data-id="20119240" data-parent_id="20119200" title="Показать предыдущий комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
    </li>

  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="#comment_20119240" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="20119240" data-parent_id="20119200" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="20119240" data-post-target="450512" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small voting-wjt__button_plus" data-action="plus" onclick="comment_vote(this);" title="Вы проголосовали положительно " disabled="disabled"><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter voting-wjt__counter_positive  js-score" title="Всего голосов +6: ↑6 и ↓0">+6</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="Вы проголосовали положительно , отменить голос нельзя" disabled="disabled"><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message "><p>Очень просто, serde-json 
ничего не аллоцирует. Функция не может вернуть &amp;str на локальный 
объект, потому что это была бы висячая ссылка. Отсюда получаем очевидный
 факт, что все &amp;str которые возвращает функция это просто слайсы, а 
владелец — строка, переданная в <code>from_str</code>. Зиро кост, аллокаций нет.</p></div>

        <div class="comment__footer">
    <a href="#reply" class="comment__footer-link reply_link" onclick="return comment_show_reply_form(20119240 )">Ответить</a>


</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-9" id="reply_comments_20119240">  <li class="content-list__item content-list__item_comment js-comment " rel="20119340">
    
    <span class="parent_id" data-parent_id="20119240"></span>
    <div class="comment" id="comment_20119340">
      <span class="comment__collapse" title="Свернуть/развернуть ветку комментариев" data-id="20119340"></span>
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head comment__head_topic-author comment__head_my-comment " rel="20119340">
          <a href="https://habr.com/ru/users/epishman/" class="user-info user-info_inline" rel="user-popover" data-user-login="epishman">
    <img src="Swift%20%D0%BF%D1%80%D0%BE%D1%82%D0%B8%D0%B2%20Rust%20%E2%80%94%20%D0%B1%D0%B5%D0%BD%D1%87%D0%BC%D0%B0%D1%80%D0%BA%D0%B8%D0%BD%D0%B3%20%D0%BD%D0%B0%20Linux%20%D1%81%20(%D0%BD%D0%B5)%D0%BF%D0%BE%D0%BD%D1%8F%D1%82%D0%BD%D1%8B%D0%BC%20%D1%84%D0%B8%D0%BD%D0%B0%D0%BB%D0%BE%D0%BC%20_%20%D0%A5%D0%B0%D0%B1%D1%80_files/ec0d88c4853c0d36d44bd0526dcfa8d7.png" class="user-info__image-pic user-info__image-pic_small" width="24" height="24">
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">epishman</span>
</a>

          <svg class="icon_comment-edit" title="Комментарий был изменен" width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#pencil"></use></svg>
          <time class="comment__date-time comment__date-time_published">6 мая 2019 в 16:53</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="#comment_20119340" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="20119340" data-action="add" title="Добавить в закладки"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#book"></use></svg></a>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <span class="icon_comment-branch js-comment_tree" data-id="20119340" data-parent_id="20119240" title="Показать ветку комментариев"><svg width="8" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#tree"></use></svg></span>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#comment_20119240" class="icon_comment-arrow-up js-comment_parent" data-id="20119340" data-parent_id="20119240" title="Показать предыдущий комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
    </li>

  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="#comment_20119340" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="20119340" data-parent_id="20119240" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="20119340" data-post-target="450512" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="plus" onclick="comment_vote(this);" title="За свои комментарии голосовать нельзя" disabled="disabled"><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter voting-wjt__counter_positive  js-score" title="Всего голосов +2: ↑2 и ↓0">+2</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="За свои комментарии голосовать нельзя" disabled="disabled"><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message ">То есть библиотека пробрасывает 
ссылки от входного слайса, полученного в from_slice() — на выход. Это 
очень круто, поэтому она такая быстрая.</div>

        <div class="comment__footer">
    <a href="#reply" class="comment__footer-link reply_link" onclick="return comment_show_reply_form(20119340 )">Ответить</a>


</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-10" id="reply_comments_20119340">  <li class="content-list__item content-list__item_comment js-comment " rel="20121382">
    
    <span class="parent_id" data-parent_id="20119340"></span>
    <div class="comment" id="comment_20121382">
      <span class="comment__collapse" title="Свернуть/развернуть ветку комментариев" data-id="20121382"></span>
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head   " rel="20121382">
          <a href="https://habr.com/ru/users/technic93/" class="user-info user-info_inline" rel="user-popover" data-user-login="technic93">
    <img src="Swift%20%D0%BF%D1%80%D0%BE%D1%82%D0%B8%D0%B2%20Rust%20%E2%80%94%20%D0%B1%D0%B5%D0%BD%D1%87%D0%BC%D0%B0%D1%80%D0%BA%D0%B8%D0%BD%D0%B3%20%D0%BD%D0%B0%20Linux%20%D1%81%20(%D0%BD%D0%B5)%D0%BF%D0%BE%D0%BD%D1%8F%D1%82%D0%BD%D1%8B%D0%BC%20%D1%84%D0%B8%D0%BD%D0%B0%D0%BB%D0%BE%D0%BC%20_%20%D0%A5%D0%B0%D0%B1%D1%80_files/4e796c6e9f932ba70d1af19b21f2b99a.png" class="user-info__image-pic user-info__image-pic_small" width="24" height="24">
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">technic93</span>
</a>

          
          <time class="comment__date-time comment__date-time_published">7 мая 2019 в 02:19</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="#comment_20121382" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="20121382" data-action="add" title="Добавить в закладки"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#book"></use></svg></a>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <span class="icon_comment-branch js-comment_tree" data-id="20121382" data-parent_id="20119340" title="Показать ветку комментариев"><svg width="8" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#tree"></use></svg></span>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#comment_20119340" class="icon_comment-arrow-up js-comment_parent" data-id="20121382" data-parent_id="20119340" title="Показать предыдущий комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
    </li>

  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="#comment_20121382" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="20121382" data-parent_id="20119340" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="20121382" data-post-target="450512" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="plus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter   js-score" title="Всего голосов 0: ↑0 и ↓0">0</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message "><p>В этом и фишка раст.</p></div>

        <div class="comment__footer">
    <a href="#reply" class="comment__footer-link reply_link" onclick="return comment_show_reply_form(20121382 )">Ответить</a>


</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-11" id="reply_comments_20121382"></ul>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="content-list__item content-list__item_comment js-comment " rel="20119246">
    
    <span class="parent_id" data-parent_id="20119200"></span>
    <div class="comment" id="comment_20119246">
      <span class="comment__collapse" title="Свернуть/развернуть ветку комментариев" data-id="20119246"></span>
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head   " rel="20119246">
          <a href="https://habr.com/ru/users/TargetSan/" class="user-info user-info_inline" rel="user-popover" data-user-login="TargetSan">
    <svg class="default-image default-image_mini default-image_blue" width="24" height="24"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#slug"></use></svg>
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">TargetSan</span>
</a>

          
          <time class="comment__date-time comment__date-time_published">6 мая 2019 в 16:42</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="#comment_20119246" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="20119246" data-action="add" title="Добавить в закладки"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#book"></use></svg></a>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <span class="icon_comment-branch js-comment_tree" data-id="20119246" data-parent_id="20119200" title="Показать ветку комментариев"><svg width="8" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#tree"></use></svg></span>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#comment_20119200" class="icon_comment-arrow-up js-comment_parent" data-id="20119246" data-parent_id="20119200" title="Показать предыдущий комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
    </li>

  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="#comment_20119246" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="20119246" data-parent_id="20119200" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="20119246" data-post-target="450512" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="plus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter   js-score" title="Всего голосов 0: ↑0 и ↓0">0</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message "><p>Естественно приведёт. Но вопрос в том, какая именно функция возвращает <code>&amp;str</code>. И нельзя ли эту строку "выковырять" из объекта. И надо ли вообще.</p></div>

        <div class="comment__footer">
    <a href="#reply" class="comment__footer-link reply_link" onclick="return comment_show_reply_form(20119246 )">Ответить</a>


</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-9" id="reply_comments_20119246">  <li class="content-list__item content-list__item_comment js-comment " rel="20119346">
    
    <span class="parent_id" data-parent_id="20119246"></span>
    <div class="comment" id="comment_20119346">
      <span class="comment__collapse" title="Свернуть/развернуть ветку комментариев" data-id="20119346"></span>
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head comment__head_topic-author comment__head_my-comment " rel="20119346">
          <a href="https://habr.com/ru/users/epishman/" class="user-info user-info_inline" rel="user-popover" data-user-login="epishman">
    <img src="Swift%20%D0%BF%D1%80%D0%BE%D1%82%D0%B8%D0%B2%20Rust%20%E2%80%94%20%D0%B1%D0%B5%D0%BD%D1%87%D0%BC%D0%B0%D1%80%D0%BA%D0%B8%D0%BD%D0%B3%20%D0%BD%D0%B0%20Linux%20%D1%81%20(%D0%BD%D0%B5)%D0%BF%D0%BE%D0%BD%D1%8F%D1%82%D0%BD%D1%8B%D0%BC%20%D1%84%D0%B8%D0%BD%D0%B0%D0%BB%D0%BE%D0%BC%20_%20%D0%A5%D0%B0%D0%B1%D1%80_files/ec0d88c4853c0d36d44bd0526dcfa8d7.png" class="user-info__image-pic user-info__image-pic_small" width="24" height="24">
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">epishman</span>
</a>

          
          <time class="comment__date-time comment__date-time_published">6 мая 2019 в 16:54</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="#comment_20119346" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="20119346" data-action="add" title="Добавить в закладки"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#book"></use></svg></a>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <span class="icon_comment-branch js-comment_tree" data-id="20119346" data-parent_id="20119246" title="Показать ветку комментариев"><svg width="8" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#tree"></use></svg></span>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#comment_20119246" class="icon_comment-arrow-up js-comment_parent" data-id="20119346" data-parent_id="20119246" title="Показать предыдущий комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
    </li>

  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="#comment_20119346" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="20119346" data-parent_id="20119246" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="20119346" data-post-target="450512" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="plus" onclick="comment_vote(this);" title="За свои комментарии голосовать нельзя" disabled="disabled"><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter voting-wjt__counter_positive  js-score" title="Всего голосов +1: ↑1 и ↓0">+1</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="За свои комментарии голосовать нельзя" disabled="disabled"><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message ">Да, я понял. Выше товарищ ответил, где владелец живет.</div>

        <div class="comment__footer">
    <a href="#reply" class="comment__footer-link reply_link" onclick="return comment_show_reply_form(20119346 )">Ответить</a>


</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-10" id="reply_comments_20119346"></ul>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="content-list__item content-list__item_comment js-comment " rel="20119184">
    
    <span class="parent_id" data-parent_id="20118426"></span>
    <div class="comment" id="comment_20119184">
      <span class="comment__collapse" title="Свернуть/развернуть ветку комментариев" data-id="20119184"></span>
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head   " rel="20119184">
          <a href="https://habr.com/ru/users/Antervis/" class="user-info user-info_inline" rel="user-popover" data-user-login="Antervis">
    <img src="Swift%20%D0%BF%D1%80%D0%BE%D1%82%D0%B8%D0%B2%20Rust%20%E2%80%94%20%D0%B1%D0%B5%D0%BD%D1%87%D0%BC%D0%B0%D1%80%D0%BA%D0%B8%D0%BD%D0%B3%20%D0%BD%D0%B0%20Linux%20%D1%81%20(%D0%BD%D0%B5)%D0%BF%D0%BE%D0%BD%D1%8F%D1%82%D0%BD%D1%8B%D0%BC%20%D1%84%D0%B8%D0%BD%D0%B0%D0%BB%D0%BE%D0%BC%20_%20%D0%A5%D0%B0%D0%B1%D1%80_files/642e096dc9c149dd052c474a9a360e7c.png" class="user-info__image-pic user-info__image-pic_small" width="24" height="24">
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">Antervis</span>
</a>

          
          <time class="comment__date-time comment__date-time_published">6 мая 2019 в 16:32</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="#comment_20119184" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="20119184" data-action="add" title="Добавить в закладки"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#book"></use></svg></a>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <span class="icon_comment-branch js-comment_tree" data-id="20119184" data-parent_id="20118426" title="Показать ветку комментариев"><svg width="8" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#tree"></use></svg></span>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#comment_20118426" class="icon_comment-arrow-up js-comment_parent" data-id="20119184" data-parent_id="20118426" title="Показать предыдущий комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
    </li>

  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="#comment_20119184" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="20119184" data-parent_id="20118426" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="20119184" data-post-target="450512" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="plus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter voting-wjt__counter_positive  js-score" title="Всего голосов +1: ↑1 и ↓0">+1</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message "><blockquote>Компилятор Rust написан на Rust</blockquote><br>
фронтенд* компилятора Rust</div>

        <div class="comment__footer">
    <a href="#reply" class="comment__footer-link reply_link" onclick="return comment_show_reply_form(20119184 )">Ответить</a>


</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-4" id="reply_comments_20119184">  <li class="content-list__item content-list__item_comment js-comment " rel="20119228">
    
    <span class="parent_id" data-parent_id="20119184"></span>
    <div class="comment" id="comment_20119228">
      <span class="comment__collapse" title="Свернуть/развернуть ветку комментариев" data-id="20119228"></span>
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head   " rel="20119228">
          <a href="https://habr.com/ru/users/PsyHaSTe/" class="user-info user-info_inline" rel="user-popover" data-user-login="PsyHaSTe">
    <img src="Swift%20%D0%BF%D1%80%D0%BE%D1%82%D0%B8%D0%B2%20Rust%20%E2%80%94%20%D0%B1%D0%B5%D0%BD%D1%87%D0%BC%D0%B0%D1%80%D0%BA%D0%B8%D0%BD%D0%B3%20%D0%BD%D0%B0%20Linux%20%D1%81%20(%D0%BD%D0%B5)%D0%BF%D0%BE%D0%BD%D1%8F%D1%82%D0%BD%D1%8B%D0%BC%20%D1%84%D0%B8%D0%BD%D0%B0%D0%BB%D0%BE%D0%BC%20_%20%D0%A5%D0%B0%D0%B1%D1%80_files/7631ac5e5a7e237a937f5f2a74ae4c9e.jpg" class="user-info__image-pic user-info__image-pic_small" width="24" height="24">
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">PsyHaSTe</span>
</a>

          
          <time class="comment__date-time comment__date-time_published">6 мая 2019 в 16:40</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="#comment_20119228" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="20119228" data-action="add" title="Добавить в закладки"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#book"></use></svg></a>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <span class="icon_comment-branch js-comment_tree" data-id="20119228" data-parent_id="20119184" title="Показать ветку комментариев"><svg width="8" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#tree"></use></svg></span>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#comment_20119184" class="icon_comment-arrow-up js-comment_parent" data-id="20119228" data-parent_id="20119184" title="Показать предыдущий комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
    </li>

  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="#comment_20119228" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="20119228" data-parent_id="20119184" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="20119228" data-post-target="450512" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="plus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter voting-wjt__counter_positive  js-score" title="Всего голосов +3: ↑4 и ↓1">+3</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message "><p>Да нет, весь компилятор. Никто не говорит, что таргетом компилятора должен быть машинный код. Таргет csc например это MSIL.</p></div>

        <div class="comment__footer">
    <a href="#reply" class="comment__footer-link reply_link" onclick="return comment_show_reply_form(20119228 )">Ответить</a>


</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-5" id="reply_comments_20119228">  <li class="content-list__item content-list__item_comment js-comment " rel="20124358">
    
    <span class="parent_id" data-parent_id="20119228"></span>
    <div class="comment" id="comment_20124358">
      <span class="comment__collapse" title="Свернуть/развернуть ветку комментариев" data-id="20124358"></span>
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head   " rel="20124358">
          <a href="https://habr.com/ru/users/Antervis/" class="user-info user-info_inline" rel="user-popover" data-user-login="Antervis">
    <img src="Swift%20%D0%BF%D1%80%D0%BE%D1%82%D0%B8%D0%B2%20Rust%20%E2%80%94%20%D0%B1%D0%B5%D0%BD%D1%87%D0%BC%D0%B0%D1%80%D0%BA%D0%B8%D0%BD%D0%B3%20%D0%BD%D0%B0%20Linux%20%D1%81%20(%D0%BD%D0%B5)%D0%BF%D0%BE%D0%BD%D1%8F%D1%82%D0%BD%D1%8B%D0%BC%20%D1%84%D0%B8%D0%BD%D0%B0%D0%BB%D0%BE%D0%BC%20_%20%D0%A5%D0%B0%D0%B1%D1%80_files/642e096dc9c149dd052c474a9a360e7c.png" class="user-info__image-pic user-info__image-pic_small" width="24" height="24">
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">Antervis</span>
</a>

          
          <time class="comment__date-time comment__date-time_published">7 мая 2019 в 16:08</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="#comment_20124358" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="20124358" data-action="add" title="Добавить в закладки"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#book"></use></svg></a>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <span class="icon_comment-branch js-comment_tree" data-id="20124358" data-parent_id="20119228" title="Показать ветку комментариев"><svg width="8" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#tree"></use></svg></span>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#comment_20119228" class="icon_comment-arrow-up js-comment_parent" data-id="20124358" data-parent_id="20119228" title="Показать предыдущий комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
    </li>

  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="#comment_20124358" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="20124358" data-parent_id="20119228" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="20124358" data-post-target="450512" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="plus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter   js-score" title="Всего голосов 0: ↑0 и ↓0">0</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message "><blockquote>Таргет csc например это MSIL.</blockquote><br>
Даже если бы это и имело практический смысл, в таком случае для запуска программы потребуется CLR, написанный на c/c++.</div>

        <div class="comment__footer">
    <a href="#reply" class="comment__footer-link reply_link" onclick="return comment_show_reply_form(20124358 )">Ответить</a>


</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-6" id="reply_comments_20124358">  <li class="content-list__item content-list__item_comment js-comment " rel="20124550">
    
    <span class="parent_id" data-parent_id="20124358"></span>
    <div class="comment" id="comment_20124550">
      <span class="comment__collapse" title="Свернуть/развернуть ветку комментариев" data-id="20124550"></span>
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head   " rel="20124550">
          <a href="https://habr.com/ru/users/PsyHaSTe/" class="user-info user-info_inline" rel="user-popover" data-user-login="PsyHaSTe">
    <img src="Swift%20%D0%BF%D1%80%D0%BE%D1%82%D0%B8%D0%B2%20Rust%20%E2%80%94%20%D0%B1%D0%B5%D0%BD%D1%87%D0%BC%D0%B0%D1%80%D0%BA%D0%B8%D0%BD%D0%B3%20%D0%BD%D0%B0%20Linux%20%D1%81%20(%D0%BD%D0%B5)%D0%BF%D0%BE%D0%BD%D1%8F%D1%82%D0%BD%D1%8B%D0%BC%20%D1%84%D0%B8%D0%BD%D0%B0%D0%BB%D0%BE%D0%BC%20_%20%D0%A5%D0%B0%D0%B1%D1%80_files/7631ac5e5a7e237a937f5f2a74ae4c9e.jpg" class="user-info__image-pic user-info__image-pic_small" width="24" height="24">
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">PsyHaSTe</span>
</a>

          
          <time class="comment__date-time comment__date-time_published">7 мая 2019 в 16:39</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="#comment_20124550" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="20124550" data-action="add" title="Добавить в закладки"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#book"></use></svg></a>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <span class="icon_comment-branch js-comment_tree" data-id="20124550" data-parent_id="20124358" title="Показать ветку комментариев"><svg width="8" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#tree"></use></svg></span>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#comment_20124358" class="icon_comment-arrow-up js-comment_parent" data-id="20124550" data-parent_id="20124358" title="Показать предыдущий комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
    </li>

  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="#comment_20124550" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="20124550" data-parent_id="20124358" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="20124550" data-post-target="450512" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="plus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter   js-score" title="Всего голосов 0: ↑0 и ↓0">0</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message "><p>Какая разница? Надеюсь, вы не будете спорить, что csc (C Sharp Compiler) это компилятор?</p></div>

        <div class="comment__footer">
    <a href="#reply" class="comment__footer-link reply_link" onclick="return comment_show_reply_form(20124550 )">Ответить</a>


</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-7" id="reply_comments_20124550">  <li class="content-list__item content-list__item_comment js-comment " rel="20124900">
    
    <span class="parent_id" data-parent_id="20124550"></span>
    <div class="comment" id="comment_20124900">
      <span class="comment__collapse" title="Свернуть/развернуть ветку комментариев" data-id="20124900"></span>
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head   " rel="20124900">
          <a href="https://habr.com/ru/users/Antervis/" class="user-info user-info_inline" rel="user-popover" data-user-login="Antervis">
    <img src="Swift%20%D0%BF%D1%80%D0%BE%D1%82%D0%B8%D0%B2%20Rust%20%E2%80%94%20%D0%B1%D0%B5%D0%BD%D1%87%D0%BC%D0%B0%D1%80%D0%BA%D0%B8%D0%BD%D0%B3%20%D0%BD%D0%B0%20Linux%20%D1%81%20(%D0%BD%D0%B5)%D0%BF%D0%BE%D0%BD%D1%8F%D1%82%D0%BD%D1%8B%D0%BC%20%D1%84%D0%B8%D0%BD%D0%B0%D0%BB%D0%BE%D0%BC%20_%20%D0%A5%D0%B0%D0%B1%D1%80_files/642e096dc9c149dd052c474a9a360e7c.png" class="user-info__image-pic user-info__image-pic_small" width="24" height="24">
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">Antervis</span>
</a>

          
          <time class="comment__date-time comment__date-time_published">7 мая 2019 в 17:31</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="#comment_20124900" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="20124900" data-action="add" title="Добавить в закладки"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#book"></use></svg></a>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <span class="icon_comment-branch js-comment_tree" data-id="20124900" data-parent_id="20124550" title="Показать ветку комментариев"><svg width="8" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#tree"></use></svg></span>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#comment_20124550" class="icon_comment-arrow-up js-comment_parent" data-id="20124900" data-parent_id="20124550" title="Показать предыдущий комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
    </li>

  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="#comment_20124900" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="20124900" data-parent_id="20124550" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="20124900" data-post-target="450512" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="plus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter   js-score" title="Всего голосов 0: ↑0 и ↓0">0</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message ">если брать наиболее широкое из 
возможных определений слова «компилятор», то формально вы правы. Но с 
такой терминологией препроцессор си тоже можно назвать отдельным 
компилятором, а clang так вообще целой пачкой. Если же говорить о 
компиляторе как о программе, преобразующий исходный код в исполняемые 
файлы, вдруг окажется, что csc — не компилятор.</div>

        <div class="comment__footer">
    <a href="#reply" class="comment__footer-link reply_link" onclick="return comment_show_reply_form(20124900 )">Ответить</a>


</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-8" id="reply_comments_20124900">  <li class="content-list__item content-list__item_comment js-comment " rel="20124994">
    
    <span class="parent_id" data-parent_id="20124900"></span>
    <div class="comment" id="comment_20124994">
      <span class="comment__collapse" title="Свернуть/развернуть ветку комментариев" data-id="20124994"></span>
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head   " rel="20124994">
          <a href="https://habr.com/ru/users/PsyHaSTe/" class="user-info user-info_inline" rel="user-popover" data-user-login="PsyHaSTe">
    <img src="Swift%20%D0%BF%D1%80%D0%BE%D1%82%D0%B8%D0%B2%20Rust%20%E2%80%94%20%D0%B1%D0%B5%D0%BD%D1%87%D0%BC%D0%B0%D1%80%D0%BA%D0%B8%D0%BD%D0%B3%20%D0%BD%D0%B0%20Linux%20%D1%81%20(%D0%BD%D0%B5)%D0%BF%D0%BE%D0%BD%D1%8F%D1%82%D0%BD%D1%8B%D0%BC%20%D1%84%D0%B8%D0%BD%D0%B0%D0%BB%D0%BE%D0%BC%20_%20%D0%A5%D0%B0%D0%B1%D1%80_files/7631ac5e5a7e237a937f5f2a74ae4c9e.jpg" class="user-info__image-pic user-info__image-pic_small" width="24" height="24">
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">PsyHaSTe</span>
</a>

          
          <time class="comment__date-time comment__date-time_published">7 мая 2019 в 17:48</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="#comment_20124994" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="20124994" data-action="add" title="Добавить в закладки"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#book"></use></svg></a>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <span class="icon_comment-branch js-comment_tree" data-id="20124994" data-parent_id="20124900" title="Показать ветку комментариев"><svg width="8" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#tree"></use></svg></span>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#comment_20124900" class="icon_comment-arrow-up js-comment_parent" data-id="20124994" data-parent_id="20124900" title="Показать предыдущий комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
    </li>

  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="#comment_20124994" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="20124994" data-parent_id="20124900" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="20124994" data-post-target="450512" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="plus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter   js-score" title="Всего голосов 0: ↑0 и ↓0">0</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message "><p>Спор об определениях мне не 
очень интересен. Майкрософт вряд ли планировал всех запутать или 
использовать маркетинговый трюк, чтобы все думали, что это компилятор, а
 на самом деле… Кстати, а что это тогда? Вроде не интерпретатор. А 
других вариантов и нет. Транспайлер частный случай компиляции, причем 
тут его правило одноуровневости языков не соблюдается, а на этом 
перечень исчерпан.</p></div>

        <div class="comment__footer">
    <a href="#reply" class="comment__footer-link reply_link" onclick="return comment_show_reply_form(20124994 )">Ответить</a>


</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-9" id="reply_comments_20124994"></ul>
  </li>
  <li class="content-list__item content-list__item_comment js-comment " rel="20125002">
    
    <span class="parent_id" data-parent_id="20124900"></span>
    <div class="comment" id="comment_20125002">
      <span class="comment__collapse" title="Свернуть/развернуть ветку комментариев" data-id="20125002"></span>
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head   " rel="20125002">
          <a href="https://habr.com/ru/users/masai/" class="user-info user-info_inline" rel="user-popover" data-user-login="masai">
    <svg class="default-image default-image_mini default-image_blue" width="24" height="24"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#slug"></use></svg>
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">masai</span>
</a>

          
          <time class="comment__date-time comment__date-time_published">7 мая 2019 в 17:49</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="#comment_20125002" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="20125002" data-action="add" title="Добавить в закладки"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#book"></use></svg></a>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <span class="icon_comment-branch js-comment_tree" data-id="20125002" data-parent_id="20124900" title="Показать ветку комментариев"><svg width="8" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#tree"></use></svg></span>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#comment_20124900" class="icon_comment-arrow-up js-comment_parent" data-id="20125002" data-parent_id="20124900" title="Показать предыдущий комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
    </li>

  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="#comment_20125002" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="20125002" data-parent_id="20124900" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="20125002" data-post-target="450512" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="plus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter   js-score" title="Всего голосов 0: ↑0 и ↓0">0</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message "><p>Ну вот в том-то и спор, 
считать ли байт-код .NET исполняемым. :) Это всё философские 
рассуждения, которые не очень-то и принципиальны на мой взгляд.</p></div>

        <div class="comment__footer">
    <a href="#reply" class="comment__footer-link reply_link" onclick="return comment_show_reply_form(20125002 )">Ответить</a>


</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-9" id="reply_comments_20125002">  <li class="content-list__item content-list__item_comment js-comment " rel="20128890">
    
    <span class="parent_id" data-parent_id="20125002"></span>
    <div class="comment" id="comment_20128890">
      <span class="comment__collapse" title="Свернуть/развернуть ветку комментариев" data-id="20128890"></span>
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head   " rel="20128890">
          <a href="https://habr.com/ru/users/Antervis/" class="user-info user-info_inline" rel="user-popover" data-user-login="Antervis">
    <img src="Swift%20%D0%BF%D1%80%D0%BE%D1%82%D0%B8%D0%B2%20Rust%20%E2%80%94%20%D0%B1%D0%B5%D0%BD%D1%87%D0%BC%D0%B0%D1%80%D0%BA%D0%B8%D0%BD%D0%B3%20%D0%BD%D0%B0%20Linux%20%D1%81%20(%D0%BD%D0%B5)%D0%BF%D0%BE%D0%BD%D1%8F%D1%82%D0%BD%D1%8B%D0%BC%20%D1%84%D0%B8%D0%BD%D0%B0%D0%BB%D0%BE%D0%BC%20_%20%D0%A5%D0%B0%D0%B1%D1%80_files/642e096dc9c149dd052c474a9a360e7c.png" class="user-info__image-pic user-info__image-pic_small" width="24" height="24">
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">Antervis</span>
</a>

          
          <time class="comment__date-time comment__date-time_published">8 мая 2019 в 14:22</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="#comment_20128890" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="20128890" data-action="add" title="Добавить в закладки"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#book"></use></svg></a>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <span class="icon_comment-branch js-comment_tree" data-id="20128890" data-parent_id="20125002" title="Показать ветку комментариев"><svg width="8" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#tree"></use></svg></span>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#comment_20125002" class="icon_comment-arrow-up js-comment_parent" data-id="20128890" data-parent_id="20125002" title="Показать предыдущий комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
    </li>

  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="#comment_20128890" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="20128890" data-parent_id="20125002" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="20128890" data-post-target="450512" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="plus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter  voting-wjt__counter_negative js-score" title="Всего голосов –1: ↑0 и ↓1">–1</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message comment__message_downgrade comment__message_downgrade-1">я бы назвал «исполняемым» «исполняемый процессором» код, а всё остальное — интерпретируемым.</div>

        <div class="comment__footer">
    <a href="#reply" class="comment__footer-link reply_link" onclick="return comment_show_reply_form(20128890 )">Ответить</a>


</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-10" id="reply_comments_20128890">  <li class="content-list__item content-list__item_comment js-comment " rel="20128904">
    
    <span class="parent_id" data-parent_id="20128890"></span>
    <div class="comment" id="comment_20128904">
      <span class="comment__collapse" title="Свернуть/развернуть ветку комментариев" data-id="20128904"></span>
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head   " rel="20128904">
          <a href="https://habr.com/ru/users/PsyHaSTe/" class="user-info user-info_inline" rel="user-popover" data-user-login="PsyHaSTe">
    <img src="Swift%20%D0%BF%D1%80%D0%BE%D1%82%D0%B8%D0%B2%20Rust%20%E2%80%94%20%D0%B1%D0%B5%D0%BD%D1%87%D0%BC%D0%B0%D1%80%D0%BA%D0%B8%D0%BD%D0%B3%20%D0%BD%D0%B0%20Linux%20%D1%81%20(%D0%BD%D0%B5)%D0%BF%D0%BE%D0%BD%D1%8F%D1%82%D0%BD%D1%8B%D0%BC%20%D1%84%D0%B8%D0%BD%D0%B0%D0%BB%D0%BE%D0%BC%20_%20%D0%A5%D0%B0%D0%B1%D1%80_files/7631ac5e5a7e237a937f5f2a74ae4c9e.jpg" class="user-info__image-pic user-info__image-pic_small" width="24" height="24">
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">PsyHaSTe</span>
</a>

          
          <time class="comment__date-time comment__date-time_published">8 мая 2019 в 14:23</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="#comment_20128904" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="20128904" data-action="add" title="Добавить в закладки"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#book"></use></svg></a>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <span class="icon_comment-branch js-comment_tree" data-id="20128904" data-parent_id="20128890" title="Показать ветку комментариев"><svg width="8" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#tree"></use></svg></span>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#comment_20128890" class="icon_comment-arrow-up js-comment_parent" data-id="20128904" data-parent_id="20128890" title="Показать предыдущий комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
    </li>

  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="#comment_20128904" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="20128904" data-parent_id="20128890" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="20128904" data-post-target="450512" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="plus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter voting-wjt__counter_positive  js-score" title="Всего голосов +1: ↑1 и ↓0">+1</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message "><p>Есть лисп-машины, с тем же успехом можно сделать процессор, выполняющий net код. Что дальше?</p><br>
<p>clang получается кстати тоже интерпретируемый?</p></div>

        <div class="comment__footer">
    <a href="#reply" class="comment__footer-link reply_link" onclick="return comment_show_reply_form(20128904 )">Ответить</a>


</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-11" id="reply_comments_20128904">  <li class="content-list__item content-list__item_comment js-comment " rel="20129296">
    
    <span class="parent_id" data-parent_id="20128904"></span>
    <div class="comment" id="comment_20129296">
      <span class="comment__collapse" title="Свернуть/развернуть ветку комментариев" data-id="20129296"></span>
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head   " rel="20129296">
          <a href="https://habr.com/ru/users/Antervis/" class="user-info user-info_inline" rel="user-popover" data-user-login="Antervis">
    <img src="Swift%20%D0%BF%D1%80%D0%BE%D1%82%D0%B8%D0%B2%20Rust%20%E2%80%94%20%D0%B1%D0%B5%D0%BD%D1%87%D0%BC%D0%B0%D1%80%D0%BA%D0%B8%D0%BD%D0%B3%20%D0%BD%D0%B0%20Linux%20%D1%81%20(%D0%BD%D0%B5)%D0%BF%D0%BE%D0%BD%D1%8F%D1%82%D0%BD%D1%8B%D0%BC%20%D1%84%D0%B8%D0%BD%D0%B0%D0%BB%D0%BE%D0%BC%20_%20%D0%A5%D0%B0%D0%B1%D1%80_files/642e096dc9c149dd052c474a9a360e7c.png" class="user-info__image-pic user-info__image-pic_small" width="24" height="24">
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">Antervis</span>
</a>

          
          <time class="comment__date-time comment__date-time_published">8 мая 2019 в 15:38</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="#comment_20129296" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="20129296" data-action="add" title="Добавить в закладки"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#book"></use></svg></a>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <span class="icon_comment-branch js-comment_tree" data-id="20129296" data-parent_id="20128904" title="Показать ветку комментариев"><svg width="8" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#tree"></use></svg></span>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#comment_20128904" class="icon_comment-arrow-up js-comment_parent" data-id="20129296" data-parent_id="20128904" title="Показать предыдущий комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
    </li>

  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="#comment_20129296" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="20129296" data-parent_id="20128904" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="20129296" data-post-target="450512" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="plus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter   js-score" title="Всего голосов 0: ↑0 и ↓0">0</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message ">вот когда появится такой процессор, тогда я поменяю свое мнение</div>

        <div class="comment__footer">
    <a href="#reply" class="comment__footer-link reply_link" onclick="return comment_show_reply_form(20129296 )">Ответить</a>


</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-12" id="reply_comments_20129296">  <li class="content-list__item content-list__item_comment js-comment " rel="20129328">
    
    <span class="parent_id" data-parent_id="20129296"></span>
    <div class="comment" id="comment_20129328">
      <span class="comment__collapse" title="Свернуть/развернуть ветку комментариев" data-id="20129328"></span>
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head   " rel="20129328">
          <a href="https://habr.com/ru/users/PsyHaSTe/" class="user-info user-info_inline" rel="user-popover" data-user-login="PsyHaSTe">
    <img src="Swift%20%D0%BF%D1%80%D0%BE%D1%82%D0%B8%D0%B2%20Rust%20%E2%80%94%20%D0%B1%D0%B5%D0%BD%D1%87%D0%BC%D0%B0%D1%80%D0%BA%D0%B8%D0%BD%D0%B3%20%D0%BD%D0%B0%20Linux%20%D1%81%20(%D0%BD%D0%B5)%D0%BF%D0%BE%D0%BD%D1%8F%D1%82%D0%BD%D1%8B%D0%BC%20%D1%84%D0%B8%D0%BD%D0%B0%D0%BB%D0%BE%D0%BC%20_%20%D0%A5%D0%B0%D0%B1%D1%80_files/7631ac5e5a7e237a937f5f2a74ae4c9e.jpg" class="user-info__image-pic user-info__image-pic_small" width="24" height="24">
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">PsyHaSTe</span>
</a>

          
          <time class="comment__date-time comment__date-time_published">8 мая 2019 в 15:42</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="#comment_20129328" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="20129328" data-action="add" title="Добавить в закладки"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#book"></use></svg></a>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <span class="icon_comment-branch js-comment_tree" data-id="20129328" data-parent_id="20129296" title="Показать ветку комментариев"><svg width="8" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#tree"></use></svg></span>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#comment_20129296" class="icon_comment-arrow-up js-comment_parent" data-id="20129328" data-parent_id="20129296" title="Показать предыдущий комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
    </li>

  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="#comment_20129328" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="20129328" data-parent_id="20129296" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="20129328" data-post-target="450512" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="plus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter   js-score" title="Всего голосов 0: ↑0 и ↓0">0</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message "><p>Свойство языка не меняется от того, что там где-то какой-то процессор кто-то сделал.</p><br>
<p>Кстати да, интерпретатор это штука, которой на вход поступает некий 
исходный код, а на выходе она его собстенно интерпретирует, выполняя 
команды. csc ничего не выполняет, он просто кладет некий файлик с 
IL-кодом. Вопрос, как так?</p><br>
<p>И про clang ответьте, пожалуйста. Тоже интерпретатор?</p></div>

        <div class="comment__footer">
    <a href="#reply" class="comment__footer-link reply_link" onclick="return comment_show_reply_form(20129328 )">Ответить</a>


</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-13" id="reply_comments_20129328">  <li class="content-list__item content-list__item_comment js-comment " rel="20129434">
    
    <span class="parent_id" data-parent_id="20129328"></span>
    <div class="comment" id="comment_20129434">
      <span class="comment__collapse" title="Свернуть/развернуть ветку комментариев" data-id="20129434"></span>
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head   " rel="20129434">
          <a href="https://habr.com/ru/users/Antervis/" class="user-info user-info_inline" rel="user-popover" data-user-login="Antervis">
    <img src="Swift%20%D0%BF%D1%80%D0%BE%D1%82%D0%B8%D0%B2%20Rust%20%E2%80%94%20%D0%B1%D0%B5%D0%BD%D1%87%D0%BC%D0%B0%D1%80%D0%BA%D0%B8%D0%BD%D0%B3%20%D0%BD%D0%B0%20Linux%20%D1%81%20(%D0%BD%D0%B5)%D0%BF%D0%BE%D0%BD%D1%8F%D1%82%D0%BD%D1%8B%D0%BC%20%D1%84%D0%B8%D0%BD%D0%B0%D0%BB%D0%BE%D0%BC%20_%20%D0%A5%D0%B0%D0%B1%D1%80_files/642e096dc9c149dd052c474a9a360e7c.png" class="user-info__image-pic user-info__image-pic_small" width="24" height="24">
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">Antervis</span>
</a>

          
          <time class="comment__date-time comment__date-time_published">8 мая 2019 в 16:04</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="#comment_20129434" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="20129434" data-action="add" title="Добавить в закладки"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#book"></use></svg></a>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <span class="icon_comment-branch js-comment_tree" data-id="20129434" data-parent_id="20129328" title="Показать ветку комментариев"><svg width="8" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#tree"></use></svg></span>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#comment_20129328" class="icon_comment-arrow-up js-comment_parent" data-id="20129434" data-parent_id="20129328" title="Показать предыдущий комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
    </li>

  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="#comment_20129434" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="20129434" data-parent_id="20129328" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="20129434" data-post-target="450512" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="plus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter  voting-wjt__counter_negative js-score" title="Всего голосов –1: ↑0 и ↓1">–1</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message comment__message_downgrade comment__message_downgrade-1">Программа
 имеет смысл только тогда, когда конкретное железо (target) способно её 
выполнить. И в конвеере от «исходного кода на языке Rust» до выполнения 
99% кода написано на с/с++. Вы комфортно обособили написанную на расте 
часть и обозвали её компилятором. Вот только самостоятельно эта часть не
 способна обеспечить выполнение кода, а значит, рассматривать её можно 
лишь как часть (причем очень малую) инфраструктуры.<br>
<br>
<blockquote>И про clang ответьте, пожалуйста. Тоже интерпретатор?</blockquote><br>
С чего бы ради то?</div>

        <div class="comment__footer">
    <a href="#reply" class="comment__footer-link reply_link" onclick="return comment_show_reply_form(20129434 )">Ответить</a>


</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-14" id="reply_comments_20129434">  <li class="content-list__item content-list__item_comment js-comment " rel="20129568">
    
    <span class="parent_id" data-parent_id="20129434"></span>
    <div class="comment" id="comment_20129568">
      <span class="comment__collapse" title="Свернуть/развернуть ветку комментариев" data-id="20129568"></span>
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head   " rel="20129568">
          <a href="https://habr.com/ru/users/PsyHaSTe/" class="user-info user-info_inline" rel="user-popover" data-user-login="PsyHaSTe">
    <img src="Swift%20%D0%BF%D1%80%D0%BE%D1%82%D0%B8%D0%B2%20Rust%20%E2%80%94%20%D0%B1%D0%B5%D0%BD%D1%87%D0%BC%D0%B0%D1%80%D0%BA%D0%B8%D0%BD%D0%B3%20%D0%BD%D0%B0%20Linux%20%D1%81%20(%D0%BD%D0%B5)%D0%BF%D0%BE%D0%BD%D1%8F%D1%82%D0%BD%D1%8B%D0%BC%20%D1%84%D0%B8%D0%BD%D0%B0%D0%BB%D0%BE%D0%BC%20_%20%D0%A5%D0%B0%D0%B1%D1%80_files/7631ac5e5a7e237a937f5f2a74ae4c9e.jpg" class="user-info__image-pic user-info__image-pic_small" width="24" height="24">
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">PsyHaSTe</span>
</a>

          
          <time class="comment__date-time comment__date-time_published">8 мая 2019 в 16:25</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="#comment_20129568" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="20129568" data-action="add" title="Добавить в закладки"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#book"></use></svg></a>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <span class="icon_comment-branch js-comment_tree" data-id="20129568" data-parent_id="20129434" title="Показать ветку комментариев"><svg width="8" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#tree"></use></svg></span>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#comment_20129434" class="icon_comment-arrow-up js-comment_parent" data-id="20129568" data-parent_id="20129434" title="Показать предыдущий комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
    </li>

  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="#comment_20129568" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="20129568" data-parent_id="20129434" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="20129568" data-post-target="450512" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="plus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter voting-wjt__counter_positive  js-score" title="Всего голосов +1: ↑1 и ↓0">+1</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message "><blockquote>С чего бы ради то?</blockquote><p>Ну потому что clang делает ровно то же, что и растовый компилятор — собирает llvm из сишного кода.</p></div>

        <div class="comment__footer">
    <a href="#reply" class="comment__footer-link reply_link" onclick="return comment_show_reply_form(20129568 )">Ответить</a>


</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-15" id="reply_comments_20129568">  <li class="content-list__item content-list__item_comment js-comment " rel="20129662">
    
    <span class="parent_id" data-parent_id="20129568"></span>
    <div class="comment" id="comment_20129662">
      <span class="comment__collapse" title="Свернуть/развернуть ветку комментариев" data-id="20129662"></span>
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head   " rel="20129662">
          <a href="https://habr.com/ru/users/Antervis/" class="user-info user-info_inline" rel="user-popover" data-user-login="Antervis">
    <img src="Swift%20%D0%BF%D1%80%D0%BE%D1%82%D0%B8%D0%B2%20Rust%20%E2%80%94%20%D0%B1%D0%B5%D0%BD%D1%87%D0%BC%D0%B0%D1%80%D0%BA%D0%B8%D0%BD%D0%B3%20%D0%BD%D0%B0%20Linux%20%D1%81%20(%D0%BD%D0%B5)%D0%BF%D0%BE%D0%BD%D1%8F%D1%82%D0%BD%D1%8B%D0%BC%20%D1%84%D0%B8%D0%BD%D0%B0%D0%BB%D0%BE%D0%BC%20_%20%D0%A5%D0%B0%D0%B1%D1%80_files/642e096dc9c149dd052c474a9a360e7c.png" class="user-info__image-pic user-info__image-pic_small" width="24" height="24">
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">Antervis</span>
</a>

          
          <time class="comment__date-time comment__date-time_published">8 мая 2019 в 16:38</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="#comment_20129662" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="20129662" data-action="add" title="Добавить в закладки"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#book"></use></svg></a>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <span class="icon_comment-branch js-comment_tree" data-id="20129662" data-parent_id="20129568" title="Показать ветку комментариев"><svg width="8" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#tree"></use></svg></span>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#comment_20129568" class="icon_comment-arrow-up js-comment_parent" data-id="20129662" data-parent_id="20129568" title="Показать предыдущий комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
    </li>

  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="#comment_20129662" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="20129662" data-parent_id="20129568" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="20129662" data-post-target="450512" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="plus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter  voting-wjt__counter_negative js-score" title="Всего голосов –2: ↑0 и ↓2">–2</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message comment__message_downgrade comment__message_downgrade-2">clang'ом
 обычно называют весь компилятор (набор утилит, обеспечивающих 
преобразование исходного кода в исполняемые файлы), включая llvm и 
линкер. Он написан в основном на с/с++. По аналогии, rustc написан… всё 
еще в основном на с/с++.</div>

        <div class="comment__footer">
    <a href="#reply" class="comment__footer-link reply_link" onclick="return comment_show_reply_form(20129662 )">Ответить</a>


</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-16" id="reply_comments_20129662">  <li class="content-list__item content-list__item_comment js-comment " rel="20129804">
    
    <span class="parent_id" data-parent_id="20129662"></span>
    <div class="comment" id="comment_20129804">
      <span class="comment__collapse" title="Свернуть/развернуть ветку комментариев" data-id="20129804"></span>
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head   " rel="20129804">
          <a href="https://habr.com/ru/users/PsyHaSTe/" class="user-info user-info_inline" rel="user-popover" data-user-login="PsyHaSTe">
    <img src="Swift%20%D0%BF%D1%80%D0%BE%D1%82%D0%B8%D0%B2%20Rust%20%E2%80%94%20%D0%B1%D0%B5%D0%BD%D1%87%D0%BC%D0%B0%D1%80%D0%BA%D0%B8%D0%BD%D0%B3%20%D0%BD%D0%B0%20Linux%20%D1%81%20(%D0%BD%D0%B5)%D0%BF%D0%BE%D0%BD%D1%8F%D1%82%D0%BD%D1%8B%D0%BC%20%D1%84%D0%B8%D0%BD%D0%B0%D0%BB%D0%BE%D0%BC%20_%20%D0%A5%D0%B0%D0%B1%D1%80_files/7631ac5e5a7e237a937f5f2a74ae4c9e.jpg" class="user-info__image-pic user-info__image-pic_small" width="24" height="24">
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">PsyHaSTe</span>
</a>

          
          <time class="comment__date-time comment__date-time_published">8 мая 2019 в 16:55</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="#comment_20129804" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="20129804" data-action="add" title="Добавить в закладки"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#book"></use></svg></a>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <span class="icon_comment-branch js-comment_tree" data-id="20129804" data-parent_id="20129662" title="Показать ветку комментариев"><svg width="8" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#tree"></use></svg></span>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#comment_20129662" class="icon_comment-arrow-up js-comment_parent" data-id="20129804" data-parent_id="20129662" title="Показать предыдущий комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
    </li>

  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="#comment_20129804" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="20129804" data-parent_id="20129662" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="20129804" data-post-target="450512" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="plus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter   js-score" title="Всего голосов 0: ↑0 и ↓0">0</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message "><blockquote>clang'ом обычно 
называют весь компилятор (набор утилит, обеспечивающих преобразование 
исходного кода в исполняемые файлы), включая llvm и линкер</blockquote><p>llvm это llvm. Линкер же и в расте есть.</p><br>
<blockquote>По аналогии, rustc написан… всё еще в основном на с/с++.</blockquote><p>Раст вообще никогда не был написан на С++. Раст написан на самом расте, и отбутстраплен с OCaml, а никак не с плюсов.</p></div>

        <div class="comment__footer">
    <a href="#reply" class="comment__footer-link reply_link" onclick="return comment_show_reply_form(20129804 )">Ответить</a>


</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-17" id="reply_comments_20129804">  <li class="content-list__item content-list__item_comment js-comment " rel="20159096">
    
    <span class="parent_id" data-parent_id="20129804"></span>
    <div class="comment" id="comment_20159096">
      <span class="comment__collapse" title="Свернуть/развернуть ветку комментариев" data-id="20159096"></span>
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head   " rel="20159096">
          <a href="https://habr.com/ru/users/twinklede/" class="user-info user-info_inline" rel="user-popover" data-user-login="twinklede">
    <svg class="default-image default-image_mini default-image_pink" width="24" height="24"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#slug"></use></svg>
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">twinklede</span>
</a>

          
          <time class="comment__date-time comment__date-time_published">16 мая 2019 в 07:14</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="#comment_20159096" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="20159096" data-action="add" title="Добавить в закладки"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#book"></use></svg></a>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <span class="icon_comment-branch js-comment_tree" data-id="20159096" data-parent_id="20129804" title="Показать ветку комментариев"><svg width="8" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#tree"></use></svg></span>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#comment_20129804" class="icon_comment-arrow-up js-comment_parent" data-id="20159096" data-parent_id="20129804" title="Показать предыдущий комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
    </li>

  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="#comment_20159096" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="20159096" data-parent_id="20129804" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="20159096" data-post-target="450512" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="plus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter  voting-wjt__counter_negative js-score" title="Всего голосов –1: ↑0 и ↓1">–1</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message comment__message_downgrade comment__message_downgrade-1"><blockquote>llvm это llvm. Линкер же и в расте есть.</blockquote><br>
Откуда же в rustc линкер, если у него нет бинарных таргетов? линкера в rustc нет. Линкером там является llvm.<br>
<br></div>

        <div class="comment__footer">
    <a href="#reply" class="comment__footer-link reply_link" onclick="return comment_show_reply_form(20159096 )">Ответить</a>


</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-18" id="reply_comments_20159096">  <li class="content-list__item content-list__item_comment js-comment " rel="20159420">
    
    <span class="parent_id" data-parent_id="20159096"></span>
    <div class="comment" id="comment_20159420">
      <span class="comment__collapse" title="Свернуть/развернуть ветку комментариев" data-id="20159420"></span>
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head   " rel="20159420">
          <a href="https://habr.com/ru/users/Ryppka/" class="user-info user-info_inline" rel="user-popover" data-user-login="Ryppka">
    <img src="Swift%20%D0%BF%D1%80%D0%BE%D1%82%D0%B8%D0%B2%20Rust%20%E2%80%94%20%D0%B1%D0%B5%D0%BD%D1%87%D0%BC%D0%B0%D1%80%D0%BA%D0%B8%D0%BD%D0%B3%20%D0%BD%D0%B0%20Linux%20%D1%81%20(%D0%BD%D0%B5)%D0%BF%D0%BE%D0%BD%D1%8F%D1%82%D0%BD%D1%8B%D0%BC%20%D1%84%D0%B8%D0%BD%D0%B0%D0%BB%D0%BE%D0%BC%20_%20%D0%A5%D0%B0%D0%B1%D1%80_files/f1bb25676cfe8c0cd2bc5d55ccb72967.jpg" class="user-info__image-pic user-info__image-pic_small" width="24" height="24">
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">Ryppka</span>
</a>

          
          <time class="comment__date-time comment__date-time_published">16 мая 2019 в 09:22</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="#comment_20159420" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="20159420" data-action="add" title="Добавить в закладки"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#book"></use></svg></a>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <span class="icon_comment-branch js-comment_tree" data-id="20159420" data-parent_id="20159096" title="Показать ветку комментариев"><svg width="8" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#tree"></use></svg></span>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#comment_20159096" class="icon_comment-arrow-up js-comment_parent" data-id="20159420" data-parent_id="20159096" title="Показать предыдущий комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
    </li>

  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="#comment_20159420" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="20159420" data-parent_id="20159096" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="20159420" data-post-target="450512" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="plus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter voting-wjt__counter_positive  js-score" title="Всего голосов +2: ↑2 и ↓0">+2</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message ">Ну, если придираться, то в llvm нет компоновщика. Компоновщик lld — отдельный проект в рамках llvm, как clang или lldb.<br>
Скомпилированные clang объектные файлы можно скомпоновать в бинарник и 
ld, и lld, и другими компоновщиками. Rust по умолчанию пользуется lld, 
но можно компоновать и ld.</div>

        <div class="comment__footer">
    <a href="#reply" class="comment__footer-link reply_link" onclick="return comment_show_reply_form(20159420 )">Ответить</a>


</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-19" id="reply_comments_20159420">  <li class="content-list__item content-list__item_comment js-comment " rel="20161822">
    
    <span class="parent_id" data-parent_id="20159420"></span>
    <div class="comment" id="comment_20161822">
      <span class="comment__collapse" title="Свернуть/развернуть ветку комментариев" data-id="20161822"></span>
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head   " rel="20161822">
          <a href="https://habr.com/ru/users/twinklede/" class="user-info user-info_inline" rel="user-popover" data-user-login="twinklede">
    <svg class="default-image default-image_mini default-image_pink" width="24" height="24"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#slug"></use></svg>
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">twinklede</span>
</a>

          
          <time class="comment__date-time comment__date-time_published">16 мая 2019 в 16:30</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="#comment_20161822" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="20161822" data-action="add" title="Добавить в закладки"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#book"></use></svg></a>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <span class="icon_comment-branch js-comment_tree" data-id="20161822" data-parent_id="20159420" title="Показать ветку комментариев"><svg width="8" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#tree"></use></svg></span>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#comment_20159420" class="icon_comment-arrow-up js-comment_parent" data-id="20161822" data-parent_id="20159420" title="Показать предыдущий комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
    </li>

  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="#comment_20161822" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="20161822" data-parent_id="20159420" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="20161822" data-post-target="450512" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="plus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter  voting-wjt__counter_negative js-score" title="Всего голосов –1: ↑0 и ↓1">–1</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message comment__message_downgrade comment__message_downgrade-1"><blockquote>Компоновщик lld — отдельный проект в рамках llvm, как clang или lldb.</blockquote><br>
<br>
<blockquote>в рамках llvm<br>
в llvm нет компоновщика.</blockquote><br>
Это явные противоречия. Да и попросту глупость, т.к. все проекты в рамках llvm зависят от llvm и являются его частью.<br>
<br>
<blockquote>Rust по умолчанию пользуется lld, но можно компоновать и ld.</blockquote><br>
И что же из этого следует? В rustc появился линкер на rust? Нет.<br></div>

        <div class="comment__footer">
    <a href="#reply" class="comment__footer-link reply_link" onclick="return comment_show_reply_form(20161822 )">Ответить</a>


</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-20" id="reply_comments_20161822"></ul>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="content-list__item content-list__item_comment js-comment " rel="20164066">
    
    <span class="parent_id" data-parent_id="20129804"></span>
    <div class="comment" id="comment_20164066">
      <span class="comment__collapse" title="Свернуть/развернуть ветку комментариев" data-id="20164066"></span>
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head   " rel="20164066">
          <a href="https://habr.com/ru/users/Antervis/" class="user-info user-info_inline" rel="user-popover" data-user-login="Antervis">
    <img src="Swift%20%D0%BF%D1%80%D0%BE%D1%82%D0%B8%D0%B2%20Rust%20%E2%80%94%20%D0%B1%D0%B5%D0%BD%D1%87%D0%BC%D0%B0%D1%80%D0%BA%D0%B8%D0%BD%D0%B3%20%D0%BD%D0%B0%20Linux%20%D1%81%20(%D0%BD%D0%B5)%D0%BF%D0%BE%D0%BD%D1%8F%D1%82%D0%BD%D1%8B%D0%BC%20%D1%84%D0%B8%D0%BD%D0%B0%D0%BB%D0%BE%D0%BC%20_%20%D0%A5%D0%B0%D0%B1%D1%80_files/642e096dc9c149dd052c474a9a360e7c.png" class="user-info__image-pic user-info__image-pic_small" width="24" height="24">
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">Antervis</span>
</a>

          
          <time class="comment__date-time comment__date-time_published">17 мая 2019 в 03:16</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="#comment_20164066" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="20164066" data-action="add" title="Добавить в закладки"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#book"></use></svg></a>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <span class="icon_comment-branch js-comment_tree" data-id="20164066" data-parent_id="20129804" title="Показать ветку комментариев"><svg width="8" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#tree"></use></svg></span>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#comment_20129804" class="icon_comment-arrow-up js-comment_parent" data-id="20164066" data-parent_id="20129804" title="Показать предыдущий комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
    </li>

  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="#comment_20164066" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="20164066" data-parent_id="20129804" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="20164066" data-post-target="450512" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="plus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter  voting-wjt__counter_negative js-score" title="Всего голосов –4: ↑0 и ↓4">–4</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message comment__message_downgrade comment__message_downgrade-4">Давайте
 тогда другой пример. Вот есть у меня исходный код программы на языке 
rust. Могу ли я запуская только компилятор(ы), написанный(е) на rust, 
получить из него нативный код процессора? Нет. Можно ли это сделать 
запуская компилятор(ы), написанный(е) в т.ч. и на с++? Да. Сколько кода 
такого комплекта написано на rust? Максимум пара процентов. Можно ли 
считать компилятор, в котором пара процентов кода написана на языке A, 
написанной только на языке A? Точно нет. Но это противоречит 
изначальному утверждению:<br>
<blockquote>Компилятор Rust написан на Rust</blockquote><br>
Вывод: изначальное утверждение неверно.</div>

        <div class="comment__footer">
    <a href="#reply" class="comment__footer-link reply_link" onclick="return comment_show_reply_form(20164066 )">Ответить</a>


</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-18" id="reply_comments_20164066">  <li class="content-list__item content-list__item_comment js-comment " rel="20164480">
    
    <span class="parent_id" data-parent_id="20164066"></span>
    <div class="comment" id="comment_20164480">
      <span class="comment__collapse" title="Свернуть/развернуть ветку комментариев" data-id="20164480"></span>
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head   " rel="20164480">
          <a href="https://habr.com/ru/users/PsyHaSTe/" class="user-info user-info_inline" rel="user-popover" data-user-login="PsyHaSTe">
    <img src="Swift%20%D0%BF%D1%80%D0%BE%D1%82%D0%B8%D0%B2%20Rust%20%E2%80%94%20%D0%B1%D0%B5%D0%BD%D1%87%D0%BC%D0%B0%D1%80%D0%BA%D0%B8%D0%BD%D0%B3%20%D0%BD%D0%B0%20Linux%20%D1%81%20(%D0%BD%D0%B5)%D0%BF%D0%BE%D0%BD%D1%8F%D1%82%D0%BD%D1%8B%D0%BC%20%D1%84%D0%B8%D0%BD%D0%B0%D0%BB%D0%BE%D0%BC%20_%20%D0%A5%D0%B0%D0%B1%D1%80_files/7631ac5e5a7e237a937f5f2a74ae4c9e.jpg" class="user-info__image-pic user-info__image-pic_small" width="24" height="24">
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">PsyHaSTe</span>
</a>

          
          <time class="comment__date-time comment__date-time_published">17 мая 2019 в 08:58</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="#comment_20164480" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="20164480" data-action="add" title="Добавить в закладки"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#book"></use></svg></a>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <span class="icon_comment-branch js-comment_tree" data-id="20164480" data-parent_id="20164066" title="Показать ветку комментариев"><svg width="8" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#tree"></use></svg></span>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#comment_20164066" class="icon_comment-arrow-up js-comment_parent" data-id="20164480" data-parent_id="20164066" title="Показать предыдущий комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
    </li>

  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="#comment_20164480" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="20164480" data-parent_id="20164066" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="20164480" data-post-target="450512" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="plus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter   js-score" title="Всего голосов 0: ↑0 и ↓0">0</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message "><p>Хорошо, давайте так. 
Компилятор раста — компилятор rust кода в байткод LLVM IR. Может ли он 
его сгенерировать (используя АПИ lLVM или еще как-то)? Может.</p><br>
<p>А нативный или нет уже вопрос конкретного процессора. Для ARM ваш x86
 плюсовый код не будет нативным, для итаниума тоже не будет. Да и для 
интела он не совсем нативный, если вспомнить как CISC команды в наше 
время работают. Вопрос, на какую глубину мы смотрим, вот и все.</p><br>
<p>С другой стороны можно сделать процессор, который нативно выполняет 
LLVM, для него раст будет нативный и без LLVM компилятора (да-да, все 
еще нужен LLVM чтобы генерировать вызовы с помощью апи, мы знаем), так 
же, как есть джава-процессоры, хотя в большинстве случаев байткод 
используется с jit-компилятором.</p></div>

        <div class="comment__footer">
    <a href="#reply" class="comment__footer-link reply_link" onclick="return comment_show_reply_form(20164480 )">Ответить</a>


</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-19" id="reply_comments_20164480">  <li class="content-list__item content-list__item_comment js-comment " rel="20178230">
    
    <span class="parent_id" data-parent_id="20164480"></span>
    <div class="comment" id="comment_20178230">
      <span class="comment__collapse" title="Свернуть/развернуть ветку комментариев" data-id="20178230"></span>
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head   " rel="20178230">
          <a href="https://habr.com/ru/users/Antervis/" class="user-info user-info_inline" rel="user-popover" data-user-login="Antervis">
    <img src="Swift%20%D0%BF%D1%80%D0%BE%D1%82%D0%B8%D0%B2%20Rust%20%E2%80%94%20%D0%B1%D0%B5%D0%BD%D1%87%D0%BC%D0%B0%D1%80%D0%BA%D0%B8%D0%BD%D0%B3%20%D0%BD%D0%B0%20Linux%20%D1%81%20(%D0%BD%D0%B5)%D0%BF%D0%BE%D0%BD%D1%8F%D1%82%D0%BD%D1%8B%D0%BC%20%D1%84%D0%B8%D0%BD%D0%B0%D0%BB%D0%BE%D0%BC%20_%20%D0%A5%D0%B0%D0%B1%D1%80_files/642e096dc9c149dd052c474a9a360e7c.png" class="user-info__image-pic user-info__image-pic_small" width="24" height="24">
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">Antervis</span>
</a>

          
          <time class="comment__date-time comment__date-time_published">21 мая 2019 в 01:36</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="#comment_20178230" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="20178230" data-action="add" title="Добавить в закладки"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#book"></use></svg></a>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <span class="icon_comment-branch js-comment_tree" data-id="20178230" data-parent_id="20164480" title="Показать ветку комментариев"><svg width="8" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#tree"></use></svg></span>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#comment_20164480" class="icon_comment-arrow-up js-comment_parent" data-id="20178230" data-parent_id="20164480" title="Показать предыдущий комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
    </li>

  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="#comment_20178230" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="20178230" data-parent_id="20164480" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="20178230" data-post-target="450512" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="plus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter   js-score" title="Всего голосов 0: ↑0 и ↓0">0</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message "><blockquote>А нативный или нет уже вопрос конкретного процессора</blockquote><br>
ну так мы обычно отталкиваемся от конкретного процессора (таргета), а 
потом смотрим, какой код будет для него нативным. И какой бы из 
существующих процессоров мы ни взяли, ни для одного из них байткод LLVM 
IR не будет нативным.<br>
<br>
<blockquote>С другой стороны можно сделать процессор, который нативно выполняет LLVM</blockquote><br>
теоретически можно, практически — это не нужно, ибо сложно и бесполезно. Я всё-таки говорю о чисто практическом аспекте.</div>

        <div class="comment__footer">
    <a href="#reply" class="comment__footer-link reply_link" onclick="return comment_show_reply_form(20178230 )">Ответить</a>


</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-20" id="reply_comments_20178230">  <li class="content-list__item content-list__item_comment js-comment " rel="20178662">
    
    <span class="parent_id" data-parent_id="20178230"></span>
    <div class="comment" id="comment_20178662">
      <span class="comment__collapse" title="Свернуть/развернуть ветку комментариев" data-id="20178662"></span>
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head   " rel="20178662">
          <a href="https://habr.com/ru/users/PsyHaSTe/" class="user-info user-info_inline" rel="user-popover" data-user-login="PsyHaSTe">
    <img src="Swift%20%D0%BF%D1%80%D0%BE%D1%82%D0%B8%D0%B2%20Rust%20%E2%80%94%20%D0%B1%D0%B5%D0%BD%D1%87%D0%BC%D0%B0%D1%80%D0%BA%D0%B8%D0%BD%D0%B3%20%D0%BD%D0%B0%20Linux%20%D1%81%20(%D0%BD%D0%B5)%D0%BF%D0%BE%D0%BD%D1%8F%D1%82%D0%BD%D1%8B%D0%BC%20%D1%84%D0%B8%D0%BD%D0%B0%D0%BB%D0%BE%D0%BC%20_%20%D0%A5%D0%B0%D0%B1%D1%80_files/7631ac5e5a7e237a937f5f2a74ae4c9e.jpg" class="user-info__image-pic user-info__image-pic_small" width="24" height="24">
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">PsyHaSTe</span>
</a>

          
          <time class="comment__date-time comment__date-time_published">21 мая 2019 в 08:56</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="#comment_20178662" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="20178662" data-action="add" title="Добавить в закладки"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#book"></use></svg></a>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <span class="icon_comment-branch js-comment_tree" data-id="20178662" data-parent_id="20178230" title="Показать ветку комментариев"><svg width="8" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#tree"></use></svg></span>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#comment_20178230" class="icon_comment-arrow-up js-comment_parent" data-id="20178662" data-parent_id="20178230" title="Показать предыдущий комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
    </li>

  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="#comment_20178662" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="20178662" data-parent_id="20178230" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="20178662" data-post-target="450512" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="plus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter   js-score" title="Всего голосов 0: ↑0 и ↓0">0</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message "><p>Ну а мы все же смотрим больше с
 точки зрения теории. А с точки зрения теории LLVM от x86 особо не 
отличается, и компиляторы и в то, и в другое в целом очень похожи, имеют
 одни и те же модули, и т.п.</p></div>

        <div class="comment__footer">
    <a href="#reply" class="comment__footer-link reply_link" onclick="return comment_show_reply_form(20178662 )">Ответить</a>


</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-21" id="reply_comments_20178662">  <li class="content-list__item content-list__item_comment js-comment " rel="20179812">
    
    <span class="parent_id" data-parent_id="20178662"></span>
    <div class="comment" id="comment_20179812">
      <span class="comment__collapse" title="Свернуть/развернуть ветку комментариев" data-id="20179812"></span>
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head   " rel="20179812">
          <a href="https://habr.com/ru/users/Antervis/" class="user-info user-info_inline" rel="user-popover" data-user-login="Antervis">
    <img src="Swift%20%D0%BF%D1%80%D0%BE%D1%82%D0%B8%D0%B2%20Rust%20%E2%80%94%20%D0%B1%D0%B5%D0%BD%D1%87%D0%BC%D0%B0%D1%80%D0%BA%D0%B8%D0%BD%D0%B3%20%D0%BD%D0%B0%20Linux%20%D1%81%20(%D0%BD%D0%B5)%D0%BF%D0%BE%D0%BD%D1%8F%D1%82%D0%BD%D1%8B%D0%BC%20%D1%84%D0%B8%D0%BD%D0%B0%D0%BB%D0%BE%D0%BC%20_%20%D0%A5%D0%B0%D0%B1%D1%80_files/642e096dc9c149dd052c474a9a360e7c.png" class="user-info__image-pic user-info__image-pic_small" width="24" height="24">
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">Antervis</span>
</a>

          <svg class="icon_comment-edit" title="Комментарий был изменен" width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#pencil"></use></svg>
          <time class="comment__date-time comment__date-time_published">21 мая 2019 в 12:44</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="#comment_20179812" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="20179812" data-action="add" title="Добавить в закладки"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#book"></use></svg></a>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <span class="icon_comment-branch js-comment_tree" data-id="20179812" data-parent_id="20178662" title="Показать ветку комментариев"><svg width="8" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#tree"></use></svg></span>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#comment_20178662" class="icon_comment-arrow-up js-comment_parent" data-id="20179812" data-parent_id="20178662" title="Показать предыдущий комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
    </li>

  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="#comment_20179812" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="20179812" data-parent_id="20178662" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="20179812" data-post-target="450512" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="plus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter   js-score" title="Всего голосов 0: ↑0 и ↓0">0</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message "><blockquote>Ну а мы все же смотрим больше с точки зрения теории</blockquote><br>
Кто «мы» то? Я вот буквально сообщением выше же написал:<br>
<blockquote>Я всё-таки говорю о чисто практическом аспекте.</blockquote><br>
И с самого начала спора я дал недвусмысленно понять, что меня интересует именно практический аспект вопроса:<br>
<blockquote>Даже если бы это и имело практический смысл...</blockquote><br>
Да и в других сообщениях мой посыл прослеживался… Почему вы постоянно спорите не читая написанное собеседником?</div>

        <div class="comment__footer">
    <a href="#reply" class="comment__footer-link reply_link" onclick="return comment_show_reply_form(20179812 )">Ответить</a>


</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-22" id="reply_comments_20179812">  <li class="content-list__item content-list__item_comment js-comment " rel="20182248">
    
    <span class="parent_id" data-parent_id="20179812"></span>
    <div class="comment" id="comment_20182248">
      <span class="comment__collapse" title="Свернуть/развернуть ветку комментариев" data-id="20182248"></span>
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head   " rel="20182248">
          <a href="https://habr.com/ru/users/red75prim/" class="user-info user-info_inline" rel="user-popover" data-user-login="red75prim">
    <svg class="default-image default-image_mini default-image_lilac" width="24" height="24"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#slug"></use></svg>
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">red75prim</span>
</a>

          
          <time class="comment__date-time comment__date-time_published">21 мая 2019 в 21:06</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="#comment_20182248" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="20182248" data-action="add" title="Добавить в закладки"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#book"></use></svg></a>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <span class="icon_comment-branch js-comment_tree" data-id="20182248" data-parent_id="20179812" title="Показать ветку комментариев"><svg width="8" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#tree"></use></svg></span>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#comment_20179812" class="icon_comment-arrow-up js-comment_parent" data-id="20182248" data-parent_id="20179812" title="Показать предыдущий комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
    </li>

  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="#comment_20182248" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="20182248" data-parent_id="20179812" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="20182248" data-post-target="450512" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="plus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter   js-score" title="Всего голосов 0: ↑0 и ↓0">0</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message "><blockquote>меня интересует именно практический аспект вопроса</blockquote><p>С практической точки зрения никто не будет переписывать то, что и так работает, <strong>только</strong> чтобы победить в интернет споре.</p></div>

        <div class="comment__footer">
    <a href="#reply" class="comment__footer-link reply_link" onclick="return comment_show_reply_form(20182248 )">Ответить</a>


</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-23" id="reply_comments_20182248">  <li class="content-list__item content-list__item_comment js-comment " rel="20182398">
    
    <span class="parent_id" data-parent_id="20182248"></span>
    <div class="comment" id="comment_20182398">
      <span class="comment__collapse" title="Свернуть/развернуть ветку комментариев" data-id="20182398"></span>
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head   " rel="20182398">
          <a href="https://habr.com/ru/users/Antervis/" class="user-info user-info_inline" rel="user-popover" data-user-login="Antervis">
    <img src="Swift%20%D0%BF%D1%80%D0%BE%D1%82%D0%B8%D0%B2%20Rust%20%E2%80%94%20%D0%B1%D0%B5%D0%BD%D1%87%D0%BC%D0%B0%D1%80%D0%BA%D0%B8%D0%BD%D0%B3%20%D0%BD%D0%B0%20Linux%20%D1%81%20(%D0%BD%D0%B5)%D0%BF%D0%BE%D0%BD%D1%8F%D1%82%D0%BD%D1%8B%D0%BC%20%D1%84%D0%B8%D0%BD%D0%B0%D0%BB%D0%BE%D0%BC%20_%20%D0%A5%D0%B0%D0%B1%D1%80_files/642e096dc9c149dd052c474a9a360e7c.png" class="user-info__image-pic user-info__image-pic_small" width="24" height="24">
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">Antervis</span>
</a>

          
          <time class="comment__date-time comment__date-time_published">21 мая 2019 в 21:57</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="#comment_20182398" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="20182398" data-action="add" title="Добавить в закладки"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#book"></use></svg></a>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <span class="icon_comment-branch js-comment_tree" data-id="20182398" data-parent_id="20182248" title="Показать ветку комментариев"><svg width="8" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#tree"></use></svg></span>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#comment_20182248" class="icon_comment-arrow-up js-comment_parent" data-id="20182398" data-parent_id="20182248" title="Показать предыдущий комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
    </li>

  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="#comment_20182398" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="20182398" data-parent_id="20182248" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="20182398" data-post-target="450512" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="plus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter   js-score" title="Всего голосов 0: ↑0 и ↓0">0</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message "><blockquote>С практической точки зрения никто не будет переписывать то, что и так работает, только чтобы победить в интернет споре.</blockquote><br>
ну я про это и говорю. Использовать по максимуму инфраструктуру LLVM 
разумно, спору нет. Но вот утверждать что компилятор раста, её 
использующий, написан только на rust — вот это прям перебор.</div>

        <div class="comment__footer">
    <a href="#reply" class="comment__footer-link reply_link" onclick="return comment_show_reply_form(20182398 )">Ответить</a>


</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-24" id="reply_comments_20182398"></ul>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="content-list__item content-list__item_comment js-comment " rel="20142342">
    
    <span class="parent_id" data-parent_id="20129328"></span>
    <div class="comment" id="comment_20142342">
      <span class="comment__collapse" title="Свернуть/развернуть ветку комментариев" data-id="20142342"></span>
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head   " rel="20142342">
          <a href="https://habr.com/ru/users/MikailBag/" class="user-info user-info_inline" rel="user-popover" data-user-login="MikailBag">
    <svg class="default-image default-image_mini default-image_blue" width="24" height="24"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#slug"></use></svg>
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">MikailBag</span>
</a>

          <svg class="icon_comment-edit" title="Комментарий был изменен" width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#pencil"></use></svg>
          <time class="comment__date-time comment__date-time_published">12 мая 2019 в 17:15</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="#comment_20142342" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="20142342" data-action="add" title="Добавить в закладки"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#book"></use></svg></a>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <span class="icon_comment-branch js-comment_tree" data-id="20142342" data-parent_id="20129328" title="Показать ветку комментариев"><svg width="8" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#tree"></use></svg></span>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#comment_20129328" class="icon_comment-arrow-up js-comment_parent" data-id="20142342" data-parent_id="20129328" title="Показать предыдущий комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
    </li>

  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="#comment_20142342" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="20142342" data-parent_id="20129328" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="20142342" data-post-target="450512" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="plus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter   js-score" title="Всего голосов 0: ↑0 и ↓0">0</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message "><blockquote>И про clang ответьте, пожалуйста. Тоже интерпретатор?</blockquote><p>Конечно)):</p><br>
<pre><code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">constexpr</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">int</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">foo</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{
    <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-number"><span class="hljs-number">2</span></span>*<span class="hljs-number"><span class="hljs-number">2</span></span>;
}</code></pre></div>

        <div class="comment__footer">
    <a href="#reply" class="comment__footer-link reply_link" onclick="return comment_show_reply_form(20142342 )">Ответить</a>


</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-14" id="reply_comments_20142342"></ul>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="content-list__item content-list__item_comment js-comment " rel="20159090">
    
    <span class="parent_id" data-parent_id="20128904"></span>
    <div class="comment" id="comment_20159090">
      <span class="comment__collapse" title="Свернуть/развернуть ветку комментариев" data-id="20159090"></span>
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head   " rel="20159090">
          <a href="https://habr.com/ru/users/twinklede/" class="user-info user-info_inline" rel="user-popover" data-user-login="twinklede">
    <svg class="default-image default-image_mini default-image_pink" width="24" height="24"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#slug"></use></svg>
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">twinklede</span>
</a>

          
          <time class="comment__date-time comment__date-time_published">16 мая 2019 в 07:10</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="#comment_20159090" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="20159090" data-action="add" title="Добавить в закладки"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#book"></use></svg></a>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <span class="icon_comment-branch js-comment_tree" data-id="20159090" data-parent_id="20128904" title="Показать ветку комментариев"><svg width="8" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#tree"></use></svg></span>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#comment_20128904" class="icon_comment-arrow-up js-comment_parent" data-id="20159090" data-parent_id="20128904" title="Показать предыдущий комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
    </li>

  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="#comment_20159090" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="20159090" data-parent_id="20128904" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="20159090" data-post-target="450512" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="plus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter  voting-wjt__counter_negative js-score" title="Всего голосов –2: ↑0 и ↓2">–2</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message comment__message_downgrade comment__message_downgrade-2"><blockquote>Есть лисп-машины</blockquote><br>
Нету. лисп-машина — это интерпретатор лиспа. Причём даже не хардварный. 
Об этом даже в википедии написано. Зачем люди продолжают повторять эту 
глупость(что лисп-машины исполняли какой-то лисп)? <br>
<br>
Так же, упускается из виду фундаментальное обстоятельство. Никому и 
никогда ненужно просто исполнение. Нужно эффективное исполнение. И 
именно этим лисп-машины и были. Просто хардварные оптимизации 
характерные для lisp. Такая же история есть с java-байткодом в 
каких-нибудь arm. <br>
<br>
Все эти ухищрения неэффективны. Именно поэтому они и умерли, а 
существовали только на начальных этапах. Как в том же arm. Исполнитель 
откровенно слаб, частота маленькая. Проще туда впихнуть побольше всякой 
логики и будет быстрее. Но чем дальше — тем хуже.<br>
<br>
Именно поэтому и умер циск. Когда-то это казалось хорошей идеей, а сейчас воспринимается за глупость. <br>
<br></div>

        <div class="comment__footer">
    <a href="#reply" class="comment__footer-link reply_link" onclick="return comment_show_reply_form(20159090 )">Ответить</a>


</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-12" id="reply_comments_20159090">  <li class="content-list__item content-list__item_comment js-comment " rel="20159734">
    
    <span class="parent_id" data-parent_id="20159090"></span>
    <div class="comment" id="comment_20159734">
      <span class="comment__collapse" title="Свернуть/развернуть ветку комментариев" data-id="20159734"></span>
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head   " rel="20159734">
          <a href="https://habr.com/ru/users/PsyHaSTe/" class="user-info user-info_inline" rel="user-popover" data-user-login="PsyHaSTe">
    <img src="Swift%20%D0%BF%D1%80%D0%BE%D1%82%D0%B8%D0%B2%20Rust%20%E2%80%94%20%D0%B1%D0%B5%D0%BD%D1%87%D0%BC%D0%B0%D1%80%D0%BA%D0%B8%D0%BD%D0%B3%20%D0%BD%D0%B0%20Linux%20%D1%81%20(%D0%BD%D0%B5)%D0%BF%D0%BE%D0%BD%D1%8F%D1%82%D0%BD%D1%8B%D0%BC%20%D1%84%D0%B8%D0%BD%D0%B0%D0%BB%D0%BE%D0%BC%20_%20%D0%A5%D0%B0%D0%B1%D1%80_files/7631ac5e5a7e237a937f5f2a74ae4c9e.jpg" class="user-info__image-pic user-info__image-pic_small" width="24" height="24">
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">PsyHaSTe</span>
</a>

          
          <time class="comment__date-time comment__date-time_published">16 мая 2019 в 10:21</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="#comment_20159734" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="20159734" data-action="add" title="Добавить в закладки"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#book"></use></svg></a>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <span class="icon_comment-branch js-comment_tree" data-id="20159734" data-parent_id="20159090" title="Показать ветку комментариев"><svg width="8" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#tree"></use></svg></span>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#comment_20159090" class="icon_comment-arrow-up js-comment_parent" data-id="20159734" data-parent_id="20159090" title="Показать предыдущий комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
    </li>

  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="#comment_20159734" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="20159734" data-parent_id="20159090" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="20159734" data-post-target="450512" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="plus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter voting-wjt__counter_positive  js-score" title="Всего голосов +1: ↑1 и ↓0">+1</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message "><blockquote>Так же, упускается из
 виду фундаментальное обстоятельство. Никому и никогда ненужно просто 
исполнение. Нужно эффективное исполнение. </blockquote><p>Вам кажется. В
 качестве контраргумента достаточно посмотреть на засилие электрона 
вокруг, которму до эффективности как до луны. Однако бизнесу он очень 
нравитяс. Как же так?</p></div>

        <div class="comment__footer">
    <a href="#reply" class="comment__footer-link reply_link" onclick="return comment_show_reply_form(20159734 )">Ответить</a>


</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-13" id="reply_comments_20159734">  <li class="content-list__item content-list__item_comment js-comment " rel="20161854">
    
    <span class="parent_id" data-parent_id="20159734"></span>
    <div class="comment" id="comment_20161854">
      <span class="comment__collapse" title="Свернуть/развернуть ветку комментариев" data-id="20161854"></span>
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head   " rel="20161854">
          <a href="https://habr.com/ru/users/twinklede/" class="user-info user-info_inline" rel="user-popover" data-user-login="twinklede">
    <svg class="default-image default-image_mini default-image_pink" width="24" height="24"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#slug"></use></svg>
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">twinklede</span>
</a>

          
          <time class="comment__date-time comment__date-time_published">16 мая 2019 в 16:36</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="#comment_20161854" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="20161854" data-action="add" title="Добавить в закладки"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#book"></use></svg></a>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <span class="icon_comment-branch js-comment_tree" data-id="20161854" data-parent_id="20159734" title="Показать ветку комментариев"><svg width="8" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#tree"></use></svg></span>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#comment_20159734" class="icon_comment-arrow-up js-comment_parent" data-id="20161854" data-parent_id="20159734" title="Показать предыдущий комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
    </li>

  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="#comment_20161854" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="20161854" data-parent_id="20159734" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="20161854" data-post-target="450512" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="plus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter   js-score" title="Всего голосов 0: ↑0 и ↓0">0</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message "><blockquote>Вам кажется. </blockquote><br>
Нет.<br>
<blockquote>В качестве контраргумента достаточно посмотреть на засилие электрона вокруг,</blockquote><br>
В качестве контр-аргумента подойдёт и rust. Но это не является 
контр-аргументом, т.к. и одно и второе не является исполнителем и не 
является хардварным.<br>
<br>
<blockquote>которму до эффективности как до луны. </blockquote><br>
Даже если я приму эти попытки, то они в любом случае неудачны. 
Исполнителем в случае с электроном является хром. Хром является самым 
эффективным броузером, v8 является самым эффективным исполнителем js.<br>
<br></div>

        <div class="comment__footer">
    <a href="#reply" class="comment__footer-link reply_link" onclick="return comment_show_reply_form(20161854 )">Ответить</a>


</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-14" id="reply_comments_20161854">  <li class="content-list__item content-list__item_comment js-comment " rel="20161868">
    
    <span class="parent_id" data-parent_id="20161854"></span>
    <div class="comment" id="comment_20161868">
      <span class="comment__collapse" title="Свернуть/развернуть ветку комментариев" data-id="20161868"></span>
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head   " rel="20161868">
          <a href="https://habr.com/ru/users/PsyHaSTe/" class="user-info user-info_inline" rel="user-popover" data-user-login="PsyHaSTe">
    <img src="Swift%20%D0%BF%D1%80%D0%BE%D1%82%D0%B8%D0%B2%20Rust%20%E2%80%94%20%D0%B1%D0%B5%D0%BD%D1%87%D0%BC%D0%B0%D1%80%D0%BA%D0%B8%D0%BD%D0%B3%20%D0%BD%D0%B0%20Linux%20%D1%81%20(%D0%BD%D0%B5)%D0%BF%D0%BE%D0%BD%D1%8F%D1%82%D0%BD%D1%8B%D0%BC%20%D1%84%D0%B8%D0%BD%D0%B0%D0%BB%D0%BE%D0%BC%20_%20%D0%A5%D0%B0%D0%B1%D1%80_files/7631ac5e5a7e237a937f5f2a74ae4c9e.jpg" class="user-info__image-pic user-info__image-pic_small" width="24" height="24">
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">PsyHaSTe</span>
</a>

          
          <time class="comment__date-time comment__date-time_published">16 мая 2019 в 16:39</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="#comment_20161868" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="20161868" data-action="add" title="Добавить в закладки"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#book"></use></svg></a>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <span class="icon_comment-branch js-comment_tree" data-id="20161868" data-parent_id="20161854" title="Показать ветку комментариев"><svg width="8" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#tree"></use></svg></span>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#comment_20161854" class="icon_comment-arrow-up js-comment_parent" data-id="20161868" data-parent_id="20161854" title="Показать предыдущий комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
    </li>

  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="#comment_20161868" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="20161868" data-parent_id="20161854" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="20161868" data-post-target="450512" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="plus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter   js-score" title="Всего голосов 0: ↑0 и ↓0">0</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message "><blockquote>Нет.</blockquote><p>Да.</p><br>
<blockquote>В качестве контр-аргумента подойдёт и rust. Но это не 
является контр-аргументом, т.к. и одно и второе не является исполнителем
 и не является хардварным.</blockquote><p>Ну ок, допустим не является. Дальше что? Какие из этого практические выводы полезные сделать можно?</p><br>
<blockquote>Даже если я приму эти попытки, то они в любом случае 
неудачны. Исполнителем в случае с электроном является хром. Хром 
является самым эффективным броузером, v8 является самым эффективным 
исполнителем js.</blockquote><p>От того что v8 является эффективным 
софтом на плюсах электрон не стал эффективным. Можно посмотреть на слак 
который гигабайты отжирает там, где телеграм обходится десятками 
мегабайт. А то можно дойти до того, что "весь код выполняется на 
процессоре, вылизанным десятками гениальных инженеров интела, значит 
весь код эффективный".</p></div>

        <div class="comment__footer">
    <a href="#reply" class="comment__footer-link reply_link" onclick="return comment_show_reply_form(20161868 )">Ответить</a>


</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-15" id="reply_comments_20161868">  <li class="content-list__item content-list__item_comment js-comment " rel="20161936">
    
    <span class="parent_id" data-parent_id="20161868"></span>
    <div class="comment" id="comment_20161936">
      <span class="comment__collapse" title="Свернуть/развернуть ветку комментариев" data-id="20161936"></span>
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head   " rel="20161936">
          <a href="https://habr.com/ru/users/twinklede/" class="user-info user-info_inline" rel="user-popover" data-user-login="twinklede">
    <svg class="default-image default-image_mini default-image_pink" width="24" height="24"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#slug"></use></svg>
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">twinklede</span>
</a>

          
          <time class="comment__date-time comment__date-time_published">16 мая 2019 в 16:52</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="#comment_20161936" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="20161936" data-action="add" title="Добавить в закладки"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#book"></use></svg></a>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <span class="icon_comment-branch js-comment_tree" data-id="20161936" data-parent_id="20161868" title="Показать ветку комментариев"><svg width="8" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#tree"></use></svg></span>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#comment_20161868" class="icon_comment-arrow-up js-comment_parent" data-id="20161936" data-parent_id="20161868" title="Показать предыдущий комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
    </li>

  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="#comment_20161936" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="20161936" data-parent_id="20161868" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="20161936" data-post-target="450512" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="plus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter  voting-wjt__counter_negative js-score" title="Всего голосов –2: ↑0 и ↓2">–2</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message comment__message_downgrade comment__message_downgrade-2"><blockquote>Ну ок, допустим не является. Дальше что? Какие из этого практические выводы полезные сделать можно?</blockquote><br>
Выводы я сделал выше. Я опроверг ваши наивные рассуждения про 
lisp-машины. Я опроверг ваши рассуждения про «можно сделать какой угодно
 исполнитель». Нельзя. Этим никто не будет заниматься. Это практический 
вывод.<br>
<br>
<blockquote>От того что v8 является эффективным софтом на плюсах электрон не стал эффективным. </blockquote><br>
Из этого ничего не следует. Разговор был о хардварных исполнителях. Я 
вам дал возможность подменить тему на софтварные исполнители. В 
очередной раз подменить тему я вам не дам.<br>
<br>
<blockquote> Можно посмотреть на слак который гигабайты отжирает там, где телеграм обходится десятками мегабайт.</blockquote><br>
Какое это имеет отношение к теме? Мы не обсуждали исполняемый код, а обсуждали исполнитель.<br>
<br>
Даже больше скажу. Я утверждал(и именно об этом я говорил), что 
исполнитель под «неэффективно» нельзя сделать эффективно. Это одно из 
следствий. И даже непросто «сделать эффективно» просто «сделать» нельзя.<br>
<br>
<blockquote>А то можно дойти до того, что «весь код выполняется на 
процессоре, вылизанным десятками гениальных инженеров интела, значит 
весь код эффективный».</blockquote><br>
Зачем это написано — я не знаю. <br>
<br></div>

        <div class="comment__footer">
    <a href="#reply" class="comment__footer-link reply_link" onclick="return comment_show_reply_form(20161936 )">Ответить</a>


</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-16" id="reply_comments_20161936">  <li class="content-list__item content-list__item_comment js-comment " rel="20162056">
    
    <span class="parent_id" data-parent_id="20161936"></span>
    <div class="comment" id="comment_20162056">
      <span class="comment__collapse" title="Свернуть/развернуть ветку комментариев" data-id="20162056"></span>
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head   " rel="20162056">
          <a href="https://habr.com/ru/users/PsyHaSTe/" class="user-info user-info_inline" rel="user-popover" data-user-login="PsyHaSTe">
    <img src="Swift%20%D0%BF%D1%80%D0%BE%D1%82%D0%B8%D0%B2%20Rust%20%E2%80%94%20%D0%B1%D0%B5%D0%BD%D1%87%D0%BC%D0%B0%D1%80%D0%BA%D0%B8%D0%BD%D0%B3%20%D0%BD%D0%B0%20Linux%20%D1%81%20(%D0%BD%D0%B5)%D0%BF%D0%BE%D0%BD%D1%8F%D1%82%D0%BD%D1%8B%D0%BC%20%D1%84%D0%B8%D0%BD%D0%B0%D0%BB%D0%BE%D0%BC%20_%20%D0%A5%D0%B0%D0%B1%D1%80_files/7631ac5e5a7e237a937f5f2a74ae4c9e.jpg" class="user-info__image-pic user-info__image-pic_small" width="24" height="24">
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">PsyHaSTe</span>
</a>

          
          <time class="comment__date-time comment__date-time_published">16 мая 2019 в 17:11</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="#comment_20162056" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="20162056" data-action="add" title="Добавить в закладки"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#book"></use></svg></a>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <span class="icon_comment-branch js-comment_tree" data-id="20162056" data-parent_id="20161936" title="Показать ветку комментариев"><svg width="8" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#tree"></use></svg></span>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#comment_20161936" class="icon_comment-arrow-up js-comment_parent" data-id="20162056" data-parent_id="20161936" title="Показать предыдущий комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
    </li>

  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="#comment_20162056" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="20162056" data-parent_id="20161936" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="20162056" data-post-target="450512" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="plus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter   js-score" title="Всего голосов 0: ↑0 и ↓0">0</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message "><blockquote>Выводы я сделал выше.
 Я опроверг ваши наивные рассуждения про lisp-машины. Я опроверг ваши 
рассуждения про «можно сделать какой угодно исполнитель». Нельзя. Этим 
никто не будет заниматься. Это практический вывод.</blockquote><p>Я раст выполняю нативно, очевидный контраргумент.</p><br>
<p>Остальное комментировать не буду, а то опять пожалуетесь на другую тему.</p></div>

        <div class="comment__footer">
    <a href="#reply" class="comment__footer-link reply_link" onclick="return comment_show_reply_form(20162056 )">Ответить</a>


</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-17" id="reply_comments_20162056">  <li class="content-list__item content-list__item_comment js-comment " rel="20162150">
    
    <span class="parent_id" data-parent_id="20162056"></span>
    <div class="comment" id="comment_20162150">
      <span class="comment__collapse" title="Свернуть/развернуть ветку комментариев" data-id="20162150"></span>
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head   " rel="20162150">
          <a href="https://habr.com/ru/users/twinklede/" class="user-info user-info_inline" rel="user-popover" data-user-login="twinklede">
    <svg class="default-image default-image_mini default-image_pink" width="24" height="24"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#slug"></use></svg>
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">twinklede</span>
</a>

          
          <time class="comment__date-time comment__date-time_published">16 мая 2019 в 17:24</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="#comment_20162150" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="20162150" data-action="add" title="Добавить в закладки"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#book"></use></svg></a>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <span class="icon_comment-branch js-comment_tree" data-id="20162150" data-parent_id="20162056" title="Показать ветку комментариев"><svg width="8" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#tree"></use></svg></span>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#comment_20162056" class="icon_comment-arrow-up js-comment_parent" data-id="20162150" data-parent_id="20162056" title="Показать предыдущий комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
    </li>

  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="#comment_20162150" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="20162150" data-parent_id="20162056" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="20162150" data-post-target="450512" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="plus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter  voting-wjt__counter_negative js-score" title="Всего голосов –3: ↑0 и ↓3">–3</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message comment__message_downgrade comment__message_downgrade-3"><blockquote>Я раст выполняю нативно, очевидный контраргумент.</blockquote><br>
Нет. Раст не выполняется нативно — нативном выполняется нативный код. Для того и нужен компилятор.<br>
<br>
<blockquote>Остальное комментировать не буду, а то опять пожалуетесь на другую тему.</blockquote><br>
Там уже нечего комментировать. Ваша аргументация зашла в тупик.</div>

        <div class="comment__footer">
    <a href="#reply" class="comment__footer-link reply_link" onclick="return comment_show_reply_form(20162150 )">Ответить</a>


</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-18" id="reply_comments_20162150">  <li class="content-list__item content-list__item_comment js-comment " rel="20162308">
    
    <span class="parent_id" data-parent_id="20162150"></span>
    <div class="comment" id="comment_20162308">
      <span class="comment__collapse" title="Свернуть/развернуть ветку комментариев" data-id="20162308"></span>
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head   " rel="20162308">
          <a href="https://habr.com/ru/users/PsyHaSTe/" class="user-info user-info_inline" rel="user-popover" data-user-login="PsyHaSTe">
    <img src="Swift%20%D0%BF%D1%80%D0%BE%D1%82%D0%B8%D0%B2%20Rust%20%E2%80%94%20%D0%B1%D0%B5%D0%BD%D1%87%D0%BC%D0%B0%D1%80%D0%BA%D0%B8%D0%BD%D0%B3%20%D0%BD%D0%B0%20Linux%20%D1%81%20(%D0%BD%D0%B5)%D0%BF%D0%BE%D0%BD%D1%8F%D1%82%D0%BD%D1%8B%D0%BC%20%D1%84%D0%B8%D0%BD%D0%B0%D0%BB%D0%BE%D0%BC%20_%20%D0%A5%D0%B0%D0%B1%D1%80_files/7631ac5e5a7e237a937f5f2a74ae4c9e.jpg" class="user-info__image-pic user-info__image-pic_small" width="24" height="24">
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">PsyHaSTe</span>
</a>

          
          <time class="comment__date-time comment__date-time_published">16 мая 2019 в 17:45</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="#comment_20162308" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="20162308" data-action="add" title="Добавить в закладки"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#book"></use></svg></a>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <span class="icon_comment-branch js-comment_tree" data-id="20162308" data-parent_id="20162150" title="Показать ветку комментариев"><svg width="8" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#tree"></use></svg></span>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#comment_20162150" class="icon_comment-arrow-up js-comment_parent" data-id="20162308" data-parent_id="20162150" title="Показать предыдущий комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
    </li>

  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="#comment_20162308" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="20162308" data-parent_id="20162150" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="20162308" data-post-target="450512" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="plus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter   js-score" title="Всего голосов 0: ↑0 и ↓0">0</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message "><blockquote>Нет. Раст не выполняется нативно — нативном выполняется нативный код. Для того и нужен компилятор.</blockquote><p>Ну вот я написал код на расте, получил нативный исполняемый файл. Могу его запустить где угодно? Могу. Так в чем трабл?</p><br>
<blockquote>Там уже нечего комментировать. Ваша аргументация зашла в тупик.</blockquote><p>Вот я пошел вам на встречу, а вы вот так. Некрасиво, однако )</p></div>

        <div class="comment__footer">
    <a href="#reply" class="comment__footer-link reply_link" onclick="return comment_show_reply_form(20162308 )">Ответить</a>


</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-19" id="reply_comments_20162308">  <li class="content-list__item content-list__item_comment js-comment " rel="20162380">
    
    <span class="parent_id" data-parent_id="20162308"></span>
    <div class="comment" id="comment_20162380">
      <span class="comment__collapse" title="Свернуть/развернуть ветку комментариев" data-id="20162380"></span>
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head   " rel="20162380">
          <a href="https://habr.com/ru/users/twinklede/" class="user-info user-info_inline" rel="user-popover" data-user-login="twinklede">
    <svg class="default-image default-image_mini default-image_pink" width="24" height="24"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#slug"></use></svg>
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">twinklede</span>
</a>

          
          <time class="comment__date-time comment__date-time_published">16 мая 2019 в 17:54</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="#comment_20162380" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="20162380" data-action="add" title="Добавить в закладки"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#book"></use></svg></a>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <span class="icon_comment-branch js-comment_tree" data-id="20162380" data-parent_id="20162308" title="Показать ветку комментариев"><svg width="8" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#tree"></use></svg></span>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#comment_20162308" class="icon_comment-arrow-up js-comment_parent" data-id="20162380" data-parent_id="20162308" title="Показать предыдущий комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
    </li>

  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="#comment_20162380" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="20162380" data-parent_id="20162308" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="20162380" data-post-target="450512" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="plus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter  voting-wjt__counter_negative js-score" title="Всего голосов –2: ↑0 и ↓2">–2</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message comment__message_downgrade comment__message_downgrade-2"><blockquote>Ну вот я написал код на расте, получил нативный исполняемый файл.</blockquote><br>
<blockquote>получил нативный исполняемый файл</blockquote><br>
На этом этапе раста уже нет. <br>
<br>
<blockquote>Вот я пошел вам на встречу, а вы вот так. Некрасиво, однако )<br>
</blockquote><br>
Это я пошел вам на встречу, а мог бы закончить на факапе с lisp-машинами. <br>
<br></div>

        <div class="comment__footer">
    <a href="#reply" class="comment__footer-link reply_link" onclick="return comment_show_reply_form(20162380 )">Ответить</a>


</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-20" id="reply_comments_20162380">  <li class="content-list__item content-list__item_comment js-comment " rel="20162400">
    
    <span class="parent_id" data-parent_id="20162380"></span>
    <div class="comment" id="comment_20162400">
      <span class="comment__collapse" title="Свернуть/развернуть ветку комментариев" data-id="20162400"></span>
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head   " rel="20162400">
          <a href="https://habr.com/ru/users/PsyHaSTe/" class="user-info user-info_inline" rel="user-popover" data-user-login="PsyHaSTe">
    <img src="Swift%20%D0%BF%D1%80%D0%BE%D1%82%D0%B8%D0%B2%20Rust%20%E2%80%94%20%D0%B1%D0%B5%D0%BD%D1%87%D0%BC%D0%B0%D1%80%D0%BA%D0%B8%D0%BD%D0%B3%20%D0%BD%D0%B0%20Linux%20%D1%81%20(%D0%BD%D0%B5)%D0%BF%D0%BE%D0%BD%D1%8F%D1%82%D0%BD%D1%8B%D0%BC%20%D1%84%D0%B8%D0%BD%D0%B0%D0%BB%D0%BE%D0%BC%20_%20%D0%A5%D0%B0%D0%B1%D1%80_files/7631ac5e5a7e237a937f5f2a74ae4c9e.jpg" class="user-info__image-pic user-info__image-pic_small" width="24" height="24">
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">PsyHaSTe</span>
</a>

          
          <time class="comment__date-time comment__date-time_published">16 мая 2019 в 17:56</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="#comment_20162400" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="20162400" data-action="add" title="Добавить в закладки"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#book"></use></svg></a>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <span class="icon_comment-branch js-comment_tree" data-id="20162400" data-parent_id="20162380" title="Показать ветку комментариев"><svg width="8" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#tree"></use></svg></span>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#comment_20162380" class="icon_comment-arrow-up js-comment_parent" data-id="20162400" data-parent_id="20162380" title="Показать предыдущий комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
    </li>

  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="#comment_20162400" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="20162400" data-parent_id="20162380" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="20162400" data-post-target="450512" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="plus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter   js-score" title="Всего голосов 0: ↑0 и ↓0">0</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message "><blockquote>На этом этапе раста уже нет. </blockquote><p>Допустим.
 Какой из этого вывод? Какая польза от этого утверждения? На этом этапе 
вообще никаких языков нет, ни сипипи, ни хаскеля.</p><br>
<blockquote>Это я пошел вам на встречу, а мог бы закончить на факапе с lisp-машинами. </blockquote><p>Последний раз я игнорирую ваши наезды.</p></div>

        <div class="comment__footer">
    <a href="#reply" class="comment__footer-link reply_link" onclick="return comment_show_reply_form(20162400 )">Ответить</a>


</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-21" id="reply_comments_20162400">  <li class="content-list__item content-list__item_comment js-comment " rel="20162476">
    
    <span class="parent_id" data-parent_id="20162400"></span>
    <div class="comment" id="comment_20162476">
      <span class="comment__collapse" title="Свернуть/развернуть ветку комментариев" data-id="20162476"></span>
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head   " rel="20162476">
          <a href="https://habr.com/ru/users/twinklede/" class="user-info user-info_inline" rel="user-popover" data-user-login="twinklede">
    <svg class="default-image default-image_mini default-image_pink" width="24" height="24"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#slug"></use></svg>
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">twinklede</span>
</a>

          
          <time class="comment__date-time comment__date-time_published">16 мая 2019 в 18:11</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="#comment_20162476" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="20162476" data-action="add" title="Добавить в закладки"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#book"></use></svg></a>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <span class="icon_comment-branch js-comment_tree" data-id="20162476" data-parent_id="20162400" title="Показать ветку комментариев"><svg width="8" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#tree"></use></svg></span>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#comment_20162400" class="icon_comment-arrow-up js-comment_parent" data-id="20162476" data-parent_id="20162400" title="Показать предыдущий комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
    </li>

  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="#comment_20162476" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="20162476" data-parent_id="20162400" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="20162476" data-post-target="450512" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="plus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter  voting-wjt__counter_negative js-score" title="Всего голосов –2: ↑0 и ↓2">–2</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message comment__message_downgrade comment__message_downgrade-2"><blockquote>Допустим.
 Какой из этого вывод? Какая польза от этого утверждения? На этом этапе 
вообще никаких языков нет, ни сипипи, ни хаскеля.</blockquote><br>
Очень простой вывод. <br>
<br>
Изначальный ваш тезис:<br>
<blockquote>Есть лисп-машины, с тем же успехом можно сделать процессор, выполняющий net код. Что дальше?</blockquote><br>
Я, конечно же, опроверг существование лисп-машин(в том виде, в котором 
декларировали их вы). Опроверг состоятельность попыток реализовать 
процессор выполняющий lisp/.net и вообще чего угодно. Мир не знает 
подобных примеров, а все попытки расширять даже архитектуру(привет циск)
 потерпели неудачу. <br>
<br>
Я подтвердил это:<br>
<br>
<blockquote>я бы назвал «исполняемым» «исполняемый процессором» код, а всё остальное — интерпретируемым.</blockquote><br>
Т.е. исполняемым может быть только нативный код. Нативный в привычном 
смысле. Никаких следов существования чего-либо кроме, либо существования
 каких-либо исполнителей высокоуровневых языков, не существовало и не 
существует. И даже если теоретически это сделать можно — это делать 
бесполезно.<br>
<br>
<blockquote>Последний раз я игнорирую ваши наезды.</blockquote><br>
В чём наезд? <br>
<br></div>

        <div class="comment__footer">
    <a href="#reply" class="comment__footer-link reply_link" onclick="return comment_show_reply_form(20162476 )">Ответить</a>


</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-22" id="reply_comments_20162476">  <li class="content-list__item content-list__item_comment js-comment " rel="20162530">
    
    <span class="parent_id" data-parent_id="20162476"></span>
    <div class="comment" id="comment_20162530">
      <span class="comment__collapse" title="Свернуть/развернуть ветку комментариев" data-id="20162530"></span>
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head   " rel="20162530">
          <a href="https://habr.com/ru/users/PsyHaSTe/" class="user-info user-info_inline" rel="user-popover" data-user-login="PsyHaSTe">
    <img src="Swift%20%D0%BF%D1%80%D0%BE%D1%82%D0%B8%D0%B2%20Rust%20%E2%80%94%20%D0%B1%D0%B5%D0%BD%D1%87%D0%BC%D0%B0%D1%80%D0%BA%D0%B8%D0%BD%D0%B3%20%D0%BD%D0%B0%20Linux%20%D1%81%20(%D0%BD%D0%B5)%D0%BF%D0%BE%D0%BD%D1%8F%D1%82%D0%BD%D1%8B%D0%BC%20%D1%84%D0%B8%D0%BD%D0%B0%D0%BB%D0%BE%D0%BC%20_%20%D0%A5%D0%B0%D0%B1%D1%80_files/7631ac5e5a7e237a937f5f2a74ae4c9e.jpg" class="user-info__image-pic user-info__image-pic_small" width="24" height="24">
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">PsyHaSTe</span>
</a>

          
          <time class="comment__date-time comment__date-time_published">16 мая 2019 в 18:22</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="#comment_20162530" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="20162530" data-action="add" title="Добавить в закладки"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#book"></use></svg></a>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <span class="icon_comment-branch js-comment_tree" data-id="20162530" data-parent_id="20162476" title="Показать ветку комментариев"><svg width="8" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#tree"></use></svg></span>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#comment_20162476" class="icon_comment-arrow-up js-comment_parent" data-id="20162530" data-parent_id="20162476" title="Показать предыдущий комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
    </li>

  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="#comment_20162530" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="20162530" data-parent_id="20162476" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="20162530" data-post-target="450512" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="plus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter   js-score" title="Всего голосов 0: ↑0 и ↓0">0</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message "><blockquote>Я, конечно же, 
опроверг существование лисп-машин(в том виде, в котором декларировали их
 вы). Опроверг состоятельность попыток реализовать процессор выполняющий
 lisp/.net и вообще чего угодно. Мир не знает подобных примеров, а все 
попытки расширять даже архитектуру(привет циск) потерпели неудачу. </blockquote><p>aJile: <a href="http://www.ajile.com/">http://www.ajile.com/</a><br>
Imsys: <a href="http://www.imsystech.com/">http://www.imsystech.com/</a><br>
JOP: <a href="http://www.jopdesign.com/index.jsp">http://www.jopdesign.com/index.jsp</a></p><br>
<p>Вот примеры ЦПУ способных выполнять JVM байткод напрямую, для которых
 Java — нативный язык. Так что не знаю, что вы там опровергли. 
Получается Java — нативный язык.</p></div>

        <div class="comment__footer">
    <a href="#reply" class="comment__footer-link reply_link" onclick="return comment_show_reply_form(20162530 )">Ответить</a>


</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-23" id="reply_comments_20162530">  <li class="content-list__item content-list__item_comment js-comment " rel="20162672">
    
    <span class="parent_id" data-parent_id="20162530"></span>
    <div class="comment" id="comment_20162672">
      <span class="comment__collapse" title="Свернуть/развернуть ветку комментариев" data-id="20162672"></span>
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head   " rel="20162672">
          <a href="https://habr.com/ru/users/twinklede/" class="user-info user-info_inline" rel="user-popover" data-user-login="twinklede">
    <svg class="default-image default-image_mini default-image_pink" width="24" height="24"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#slug"></use></svg>
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">twinklede</span>
</a>

          
          <time class="comment__date-time comment__date-time_published">16 мая 2019 в 18:52</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="#comment_20162672" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="20162672" data-action="add" title="Добавить в закладки"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#book"></use></svg></a>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <span class="icon_comment-branch js-comment_tree" data-id="20162672" data-parent_id="20162530" title="Показать ветку комментариев"><svg width="8" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#tree"></use></svg></span>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#comment_20162530" class="icon_comment-arrow-up js-comment_parent" data-id="20162672" data-parent_id="20162530" title="Показать предыдущий комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
    </li>

  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="#comment_20162672" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="20162672" data-parent_id="20162530" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="20162672" data-post-target="450512" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="plus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter  voting-wjt__counter_negative js-score" title="Всего голосов –3: ↑0 и ↓3">–3</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message comment__message_downgrade comment__message_downgrade-3">Опять попытка смерить тему, но неудачная. Про жава-байткод я уже говорил:<br>
<br>
<blockquote>Просто хардварные оптимизации характерные для lisp. Такая же история есть с java-байткодом в каких-нибудь arm. </blockquote><br>
Так же я там говорил и про причины их появления. Все эти ссылки из википедии — целиком и полностью ложатся на моё описание. <br>
<br>
По поводу самого «опровержения».<br>
<blockquote>JVM байткод напрямую, для которых Java — нативный язык.</blockquote><br>
Это полная чушь. java и jvm-байткод это разные вещи. Далее видна попытка дёргать фразы из контекста, хотя я уточнял:<br>
<br>
<blockquote>Никаких следов существования чего-либо кроме, либо 
существования каких-либо исполнителей высокоуровневых языков, не 
существовало и не существует. И даже если теоретически это сделать можно
 — это делать бесполезно.</blockquote><br>
jvm-байткод не является java, не является высокоуровневым языком. Так же требует компилятора/транслятора.<br>
<br>
Так же, такого понятия как java вообще не существует. Существует много 
версий всяких разных java. И та java, которая используется в embedded — 
это совершенно другая 
жава(https://en.wikipedia.org/wiki/Java_Platform,_Micro_Edition).<br>
<br>
Про эти акселераторы байткода я уже писал. Это существует только на 
уровне примитивной логики и ничего не умеет. Они не обладают какой-либо 
производительностью. Они не могут исполнять обычный jvm-байткод. <br>
<br>
<blockquote>Получается Java — нативный язык.</blockquote><br>
Нет, и это очевидно.<br>
<br></div>

        <div class="comment__footer">
    <a href="#reply" class="comment__footer-link reply_link" onclick="return comment_show_reply_form(20162672 )">Ответить</a>


</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-24" id="reply_comments_20162672">  <li class="content-list__item content-list__item_comment js-comment " rel="20162730">
    
    <span class="parent_id" data-parent_id="20162672"></span>
    <div class="comment" id="comment_20162730">
      <span class="comment__collapse" title="Свернуть/развернуть ветку комментариев" data-id="20162730"></span>
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head   " rel="20162730">
          <a href="https://habr.com/ru/users/PsyHaSTe/" class="user-info user-info_inline" rel="user-popover" data-user-login="PsyHaSTe">
    <img src="Swift%20%D0%BF%D1%80%D0%BE%D1%82%D0%B8%D0%B2%20Rust%20%E2%80%94%20%D0%B1%D0%B5%D0%BD%D1%87%D0%BC%D0%B0%D1%80%D0%BA%D0%B8%D0%BD%D0%B3%20%D0%BD%D0%B0%20Linux%20%D1%81%20(%D0%BD%D0%B5)%D0%BF%D0%BE%D0%BD%D1%8F%D1%82%D0%BD%D1%8B%D0%BC%20%D1%84%D0%B8%D0%BD%D0%B0%D0%BB%D0%BE%D0%BC%20_%20%D0%A5%D0%B0%D0%B1%D1%80_files/7631ac5e5a7e237a937f5f2a74ae4c9e.jpg" class="user-info__image-pic user-info__image-pic_small" width="24" height="24">
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">PsyHaSTe</span>
</a>

          
          <time class="comment__date-time comment__date-time_published">16 мая 2019 в 19:03</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="#comment_20162730" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="20162730" data-action="add" title="Добавить в закладки"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#book"></use></svg></a>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <span class="icon_comment-branch js-comment_tree" data-id="20162730" data-parent_id="20162672" title="Показать ветку комментариев"><svg width="8" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#tree"></use></svg></span>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#comment_20162672" class="icon_comment-arrow-up js-comment_parent" data-id="20162730" data-parent_id="20162672" title="Показать предыдущий комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
    </li>

  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="#comment_20162730" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="20162730" data-parent_id="20162672" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="20162730" data-post-target="450512" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="plus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter   js-score" title="Всего голосов 0: ↑0 и ↓0">0</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message "><p>С++ — нативный язык, потому что генерирует x86, исполняемый нативно<br>
Java — нативный язык, потому что генерирует JVM, исполняемый нативно.</p><br>
<p>Вы уж либо крестик, либо еще что.</p></div>

        <div class="comment__footer">
    <a href="#reply" class="comment__footer-link reply_link" onclick="return comment_show_reply_form(20162730 )">Ответить</a>


</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-25" id="reply_comments_20162730">  <li class="content-list__item content-list__item_comment js-comment " rel="20162842">
    
    <span class="parent_id" data-parent_id="20162730"></span>
    <div class="comment" id="comment_20162842">
      <span class="comment__collapse" title="Свернуть/развернуть ветку комментариев" data-id="20162842"></span>
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head   " rel="20162842">
          <a href="https://habr.com/ru/users/twinklede/" class="user-info user-info_inline" rel="user-popover" data-user-login="twinklede">
    <svg class="default-image default-image_mini default-image_pink" width="24" height="24"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#slug"></use></svg>
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">twinklede</span>
</a>

          
          <time class="comment__date-time comment__date-time_published">16 мая 2019 в 19:20</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="#comment_20162842" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="20162842" data-action="add" title="Добавить в закладки"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#book"></use></svg></a>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <span class="icon_comment-branch js-comment_tree" data-id="20162842" data-parent_id="20162730" title="Показать ветку комментариев"><svg width="8" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#tree"></use></svg></span>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#comment_20162730" class="icon_comment-arrow-up js-comment_parent" data-id="20162842" data-parent_id="20162730" title="Показать предыдущий комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
    </li>

  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="#comment_20162842" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="20162842" data-parent_id="20162730" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="20162842" data-post-target="450512" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="plus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter  voting-wjt__counter_negative js-score" title="Всего голосов –2: ↑0 и ↓2">–2</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message comment__message_downgrade comment__message_downgrade-2"><blockquote>Java — нативный язык, потому что генерирует JVM, исполняемый нативно.</blockquote><br>
Неверно. Нельзя генерировать jvm, да если имеет ввиду байткод, то 
байткод никто исполнять не умеет. Я уже говорил, что это embedded java, а
 не обычная Java. И она целиком и полностью несостоятельна для решения 
прикладных задач.<br>
<br>
<blockquote>С++ — нативный язык, потому что генерирует x86, исполняемый нативно</blockquote><br>
С++ не может исполняться. Именно об этом говорилось. Подобная 
формулировка вообще не имеет смысла, т.к. любой язык так или иначе 
преобразуется в нативный код. И именно нативный код исполняется.<br>
<br>
Под нативным в контексте С++ имеется ввиду не то, что он преобразуется в
 нативный код, а в том что он исполняется нативном на платформе. И 
противопоставляется это языкам, которые требуют эмуляции платформы. Это 
называется vm. Именно поэтому то, что исполняется в jvm по определению 
не может является нативным платформе. <br>
<br>
Так же, все эти рассуждения вообще не имеют смысла т.к. никаких 
хардварных исполнителей байткода не существует. Всё что существует — не 
является системами/языками общего назначения и вообще находится вне 
контекста. На этом уже можно закончить.<br>
<br>
Ведь я сразу это обозначил. Что на уровне примитивных исполнителей имеет
 смысл пихать что-то в железо. Но мы, в том числе и я, не обсуждаем тут 
примитивное/узкоспециализированное железо.</div>

        <div class="comment__footer">
    <a href="#reply" class="comment__footer-link reply_link" onclick="return comment_show_reply_form(20162842 )">Ответить</a>


</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-26" id="reply_comments_20162842">  <li class="content-list__item content-list__item_comment js-comment " rel="20163460">
    
    <span class="parent_id" data-parent_id="20162842"></span>
    <div class="comment" id="comment_20163460">
      <span class="comment__collapse" title="Свернуть/развернуть ветку комментариев" data-id="20163460"></span>
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head   " rel="20163460">
          <a href="https://habr.com/ru/users/PsyHaSTe/" class="user-info user-info_inline" rel="user-popover" data-user-login="PsyHaSTe">
    <img src="Swift%20%D0%BF%D1%80%D0%BE%D1%82%D0%B8%D0%B2%20Rust%20%E2%80%94%20%D0%B1%D0%B5%D0%BD%D1%87%D0%BC%D0%B0%D1%80%D0%BA%D0%B8%D0%BD%D0%B3%20%D0%BD%D0%B0%20Linux%20%D1%81%20(%D0%BD%D0%B5)%D0%BF%D0%BE%D0%BD%D1%8F%D1%82%D0%BD%D1%8B%D0%BC%20%D1%84%D0%B8%D0%BD%D0%B0%D0%BB%D0%BE%D0%BC%20_%20%D0%A5%D0%B0%D0%B1%D1%80_files/7631ac5e5a7e237a937f5f2a74ae4c9e.jpg" class="user-info__image-pic user-info__image-pic_small" width="24" height="24">
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">PsyHaSTe</span>
</a>

          
          <time class="comment__date-time comment__date-time_published">16 мая 2019 в 22:05</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="#comment_20163460" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="20163460" data-action="add" title="Добавить в закладки"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#book"></use></svg></a>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <span class="icon_comment-branch js-comment_tree" data-id="20163460" data-parent_id="20162842" title="Показать ветку комментариев"><svg width="8" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#tree"></use></svg></span>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#comment_20162842" class="icon_comment-arrow-up js-comment_parent" data-id="20163460" data-parent_id="20162842" title="Показать предыдущий комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
    </li>

  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="#comment_20163460" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="20163460" data-parent_id="20162842" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="20163460" data-post-target="450512" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="plus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter   js-score" title="Всего голосов 0: ↑0 и ↓0">0</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message "><blockquote>Неверно. Нельзя генерировать jvm, да если имеет ввиду байткод, то байткод никто исполнять не умеет.</blockquote><p>Вы ссылки выше прочитайте. Вон процессоры, выполняющие байткод. </p><br>
<blockquote>С++ не может исполняться. Именно об этом говорилось.</blockquote><p>А я этого не говорил. Перечитайте фразу "генерирует х86, исполняемый нативно"</p></div>

        <div class="comment__footer">
    <a href="#reply" class="comment__footer-link reply_link" onclick="return comment_show_reply_form(20163460 )">Ответить</a>


</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-27" id="reply_comments_20163460">  <li class="content-list__item content-list__item_comment js-comment " rel="20163544">
    
    <span class="parent_id" data-parent_id="20163460"></span>
    <div class="comment" id="comment_20163544">
      <span class="comment__collapse" title="Свернуть/развернуть ветку комментариев" data-id="20163544"></span>
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head   " rel="20163544">
          <a href="https://habr.com/ru/users/twinklede/" class="user-info user-info_inline" rel="user-popover" data-user-login="twinklede">
    <svg class="default-image default-image_mini default-image_pink" width="24" height="24"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#slug"></use></svg>
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">twinklede</span>
</a>

          
          <time class="comment__date-time comment__date-time_published">16 мая 2019 в 22:27</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="#comment_20163544" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="20163544" data-action="add" title="Добавить в закладки"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#book"></use></svg></a>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <span class="icon_comment-branch js-comment_tree" data-id="20163544" data-parent_id="20163460" title="Показать ветку комментариев"><svg width="8" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#tree"></use></svg></span>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#comment_20163460" class="icon_comment-arrow-up js-comment_parent" data-id="20163544" data-parent_id="20163460" title="Показать предыдущий комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
    </li>

  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="#comment_20163544" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="20163544" data-parent_id="20163460" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="20163544" data-post-target="450512" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="plus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter  voting-wjt__counter_negative js-score" title="Всего голосов –2: ↑0 и ↓2">–2</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message comment__message_downgrade comment__message_downgrade-2"><blockquote>Вы ссылки выше прочитайте. Вон процессоры, выполняющие байткод.</blockquote><br>
Ещё раз, байткод не жава. Зачем я повторю одно и тоже, одно и тоже тому,
 что попросту всё неудобное игнорирует и повторяет одни и те же фразы, 
на которые же был дан ответ.<br>
<br>
<blockquote>А я этого не говорил. Перечитайте фразу «генерирует х86, исполняемый нативно»</blockquote><br>
Ложь.<br>
<br>
<blockquote>Есть лисп-машины, с тем же успехом можно сделать процессор, выполняющий net код. Что дальше?</blockquote><br>
Говорилось именно про высокоуровневые языки и их байткод(хотя причём тут тогда лисп-машины?). <br>
<br>
<blockquote>Если же говорить о компиляторе как о программе, 
преобразующий исходный код в исполняемые файлы, вдруг окажется, что csc —
 не компилятор.</blockquote><br>
<br>
Т.е. вы уже сами себя опровергли, т.к. доказали изначальный тезис 
автора. Что для того, что-бы java-байткод был нативным — должен быть 
нативный его исполнитель. Очевидно, что вы тут тоже пытаетесь подменить 
понятия, т.к. javame не является java. <br>
<br>
Мой же тезис заключался в том, что 1) нативные реализации 
байткод/лист-акселераторов существуют. Я это сказал изначально. 2) они 
ненужны и несостоятельны в общем контексте. Это всё применяется на 
слабом железе, причём применяется редко и никак вверх не скалируется. 
Именно поэтому этого никогда за пределами примитивной логики не будет.<br>
<br>
К тому же, зачастую во всех эти байткод-акселераторах применяется 
обычная бинарная трансляция. Т.е. реальная архитектура железки иная. Она
 не исполняет напрямую байткод, а просто транслирует байткод в некий 
набор обычных инструкций.<br>
<br>
Делается это потому, что транслировать байткод софтварно дорого и 
непредсказуемо. Поэтому в подобных слабых(и)реалтайм решениях это может 
иметь(и имеет) какой-то смысл. <br>
<br>
Ничего из этого вы не опровергли. Вы начала мне кидать ссылки из 
википедии. Абсолютно непонятно зачем, ведь я ещё до вас вам сообщил, что
 подобные решения есть.<br>
<br></div>

        <div class="comment__footer">
    <a href="#reply" class="comment__footer-link reply_link" onclick="return comment_show_reply_form(20163544 )">Ответить</a>


</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-28" id="reply_comments_20163544">  <li class="content-list__item content-list__item_comment js-comment " rel="20163948">
    
    <span class="parent_id" data-parent_id="20163544"></span>
    <div class="comment" id="comment_20163948">
      <span class="comment__collapse" title="Свернуть/развернуть ветку комментариев" data-id="20163948"></span>
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head   " rel="20163948">
          <a href="https://habr.com/ru/users/PsyHaSTe/" class="user-info user-info_inline" rel="user-popover" data-user-login="PsyHaSTe">
    <img src="Swift%20%D0%BF%D1%80%D0%BE%D1%82%D0%B8%D0%B2%20Rust%20%E2%80%94%20%D0%B1%D0%B5%D0%BD%D1%87%D0%BC%D0%B0%D1%80%D0%BA%D0%B8%D0%BD%D0%B3%20%D0%BD%D0%B0%20Linux%20%D1%81%20(%D0%BD%D0%B5)%D0%BF%D0%BE%D0%BD%D1%8F%D1%82%D0%BD%D1%8B%D0%BC%20%D1%84%D0%B8%D0%BD%D0%B0%D0%BB%D0%BE%D0%BC%20_%20%D0%A5%D0%B0%D0%B1%D1%80_files/7631ac5e5a7e237a937f5f2a74ae4c9e.jpg" class="user-info__image-pic user-info__image-pic_small" width="24" height="24">
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">PsyHaSTe</span>
</a>

          
          <time class="comment__date-time comment__date-time_published">17 мая 2019 в 01:39</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="#comment_20163948" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="20163948" data-action="add" title="Добавить в закладки"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#book"></use></svg></a>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <span class="icon_comment-branch js-comment_tree" data-id="20163948" data-parent_id="20163544" title="Показать ветку комментариев"><svg width="8" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#tree"></use></svg></span>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#comment_20163544" class="icon_comment-arrow-up js-comment_parent" data-id="20163948" data-parent_id="20163544" title="Показать предыдущий комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
    </li>

  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="#comment_20163948" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="20163948" data-parent_id="20163544" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="20163948" data-post-target="450512" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="plus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter   js-score" title="Всего голосов 0: ↑0 и ↓0">0</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message "><blockquote>Ещё раз, байткод не 
жава. Зачем я повторю одно и тоже, одно и тоже тому, что попросту всё 
неудобное игнорирует и повторяет одни и те же фразы, на которые же был 
дан ответ.</blockquote><p>Javac выдает байткод из Java-исходника. Что в этом утверждении вам непонятно?</p><br>
<blockquote>Ложь.</blockquote><p>В каком месте? С++ не генерирут х86? Или х86 это не нативный код?</p><br>
<blockquote>Говорилось именно про высокоуровневые языки и их байткод(хотя причём тут тогда лисп-машины?). </blockquote><p>байткод джавы достаточно высокоуровневый. На одном уровне с LLVM или MSIL.</p><br>
<blockquote>Т.е. вы уже сами себя опровергли, т.к. доказали изначальный 
тезис автора. Что для того, что-бы java-байткод был нативным — должен 
быть нативный его исполнитель. Очевидно, что вы тут тоже пытаетесь 
подменить понятия, т.к. javame не является java</blockquote><p>Я выше скинул процессоры, для которых байткод — нативный формат.</p></div>

        <div class="comment__footer">
    <a href="#reply" class="comment__footer-link reply_link" onclick="return comment_show_reply_form(20163948 )">Ответить</a>


</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-29" id="reply_comments_20163948">  <li class="content-list__item content-list__item_comment js-comment " rel="20163962">
    
    <span class="parent_id" data-parent_id="20163948"></span>
    <div class="comment" id="comment_20163962">
      <span class="comment__collapse" title="Свернуть/развернуть ветку комментариев" data-id="20163962"></span>
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head   " rel="20163962">
          <a href="https://habr.com/ru/users/twinklede/" class="user-info user-info_inline" rel="user-popover" data-user-login="twinklede">
    <svg class="default-image default-image_mini default-image_pink" width="24" height="24"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#slug"></use></svg>
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">twinklede</span>
</a>

          
          <time class="comment__date-time comment__date-time_published">17 мая 2019 в 01:50</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="#comment_20163962" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="20163962" data-action="add" title="Добавить в закладки"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#book"></use></svg></a>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <span class="icon_comment-branch js-comment_tree" data-id="20163962" data-parent_id="20163948" title="Показать ветку комментариев"><svg width="8" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#tree"></use></svg></span>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#comment_20163948" class="icon_comment-arrow-up js-comment_parent" data-id="20163962" data-parent_id="20163948" title="Показать предыдущий комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
    </li>

  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="#comment_20163962" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="20163962" data-parent_id="20163948" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="20163962" data-post-target="450512" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="plus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter   js-score" title="Всего голосов 0: ↑0 и ↓0">0</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message ">Хорошо.<br>
<blockquote>Есть лисп-машины<br>
</blockquote><br>
Покажите мне машину, которая исполняет лисп.</div>

        <div class="comment__footer">
    <a href="#reply" class="comment__footer-link reply_link" onclick="return comment_show_reply_form(20163962 )">Ответить</a>


</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-30" id="reply_comments_20163962">  <li class="content-list__item content-list__item_comment js-comment " rel="20163970">
    
    <span class="parent_id" data-parent_id="20163962"></span>
    <div class="comment" id="comment_20163970">
      <span class="comment__collapse" title="Свернуть/развернуть ветку комментариев" data-id="20163970"></span>
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head   " rel="20163970">
          <a href="https://habr.com/ru/users/PsyHaSTe/" class="user-info user-info_inline" rel="user-popover" data-user-login="PsyHaSTe">
    <img src="Swift%20%D0%BF%D1%80%D0%BE%D1%82%D0%B8%D0%B2%20Rust%20%E2%80%94%20%D0%B1%D0%B5%D0%BD%D1%87%D0%BC%D0%B0%D1%80%D0%BA%D0%B8%D0%BD%D0%B3%20%D0%BD%D0%B0%20Linux%20%D1%81%20(%D0%BD%D0%B5)%D0%BF%D0%BE%D0%BD%D1%8F%D1%82%D0%BD%D1%8B%D0%BC%20%D1%84%D0%B8%D0%BD%D0%B0%D0%BB%D0%BE%D0%BC%20_%20%D0%A5%D0%B0%D0%B1%D1%80_files/7631ac5e5a7e237a937f5f2a74ae4c9e.jpg" class="user-info__image-pic user-info__image-pic_small" width="24" height="24">
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">PsyHaSTe</span>
</a>

          
          <time class="comment__date-time comment__date-time_published">17 мая 2019 в 01:52</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="#comment_20163970" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="20163970" data-action="add" title="Добавить в закладки"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#book"></use></svg></a>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <span class="icon_comment-branch js-comment_tree" data-id="20163970" data-parent_id="20163962" title="Показать ветку комментариев"><svg width="8" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#tree"></use></svg></span>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#comment_20163962" class="icon_comment-arrow-up js-comment_parent" data-id="20163970" data-parent_id="20163962" title="Показать предыдущий комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
    </li>

  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="#comment_20163970" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="20163970" data-parent_id="20163962" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="20163970" data-post-target="450512" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="plus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter   js-score" title="Всего голосов 0: ↑0 и ↓0">0</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message "><p>Окей, допустим про лисп вы 
меня уговорили. Нет его, и никогда не существовало, договорились. Но 
поинт остается. Вон есть джава-машины. Ничем не хуже пример.</p></div>

        <div class="comment__footer">
    <a href="#reply" class="comment__footer-link reply_link" onclick="return comment_show_reply_form(20163970 )">Ответить</a>


</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-31" id="reply_comments_20163970">  <li class="content-list__item content-list__item_comment js-comment " rel="20164012">
    
    <span class="parent_id" data-parent_id="20163970"></span>
    <div class="comment" id="comment_20164012">
      <span class="comment__collapse" title="Свернуть/развернуть ветку комментариев" data-id="20164012"></span>
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head   " rel="20164012">
          <a href="https://habr.com/ru/users/twinklede/" class="user-info user-info_inline" rel="user-popover" data-user-login="twinklede">
    <svg class="default-image default-image_mini default-image_pink" width="24" height="24"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#slug"></use></svg>
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">twinklede</span>
</a>

          
          <time class="comment__date-time comment__date-time_published">17 мая 2019 в 02:19</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="#comment_20164012" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="20164012" data-action="add" title="Добавить в закладки"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#book"></use></svg></a>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <span class="icon_comment-branch js-comment_tree" data-id="20164012" data-parent_id="20163970" title="Показать ветку комментариев"><svg width="8" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#tree"></use></svg></span>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#comment_20163970" class="icon_comment-arrow-up js-comment_parent" data-id="20164012" data-parent_id="20163970" title="Показать предыдущий комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
    </li>

  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="#comment_20164012" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="20164012" data-parent_id="20163970" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="20164012" data-post-target="450512" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="plus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter  voting-wjt__counter_negative js-score" title="Всего голосов –2: ↑0 и ↓2">–2</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message comment__message_downgrade comment__message_downgrade-2"><blockquote>Окей, допустим про лисп вы меня уговорили.</blockquote><br>
Со всем остальным будет тоже самое. Так было с машинами, ir и прочими аллокаторами.<br>
<br>
<blockquote>Вот примеры ЦПУ способных выполнять JVM байткод напрямую,</blockquote><br>
Нет. Но мы пока опустим это. Начнём с вопроса простого: <br>
<br>
<blockquote>Такая же история есть с java-байткодом в каких-нибудь arm. <br>
<br>
Все эти ухищрения неэффективны. Именно поэтому они и умерли, а 
существовали только на начальных этапах. Как в том же arm. Исполнитель 
откровенно слаб, частота маленькая. Проще туда впихнуть побольше всякой 
логики и будет быстрее. Но чем дальше — тем хуже.</blockquote><br>
<br>
На каком основании вы мне 1) показываете как контр-аргумент моим 
утверждения то, о чём я заранее и до вас сказал. 2) почему были 
проигнорированы мои объяснения по этому поводу?<br>
<br>
К тому же я не вижу от вас доказательств, что эти накиданные вами ссылки
 из википедии действительно исполняют jvm-байткод(весь) и целиком и 
полностью имплементируют jvm хардварно.<br></div>

        <div class="comment__footer">
    <a href="#reply" class="comment__footer-link reply_link" onclick="return comment_show_reply_form(20164012 )">Ответить</a>


</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-32" id="reply_comments_20164012">  <li class="content-list__item content-list__item_comment js-comment " rel="20164496">
    
    <span class="parent_id" data-parent_id="20164012"></span>
    <div class="comment" id="comment_20164496">
      <span class="comment__collapse" title="Свернуть/развернуть ветку комментариев" data-id="20164496"></span>
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head   " rel="20164496">
          <a href="https://habr.com/ru/users/PsyHaSTe/" class="user-info user-info_inline" rel="user-popover" data-user-login="PsyHaSTe">
    <img src="Swift%20%D0%BF%D1%80%D0%BE%D1%82%D0%B8%D0%B2%20Rust%20%E2%80%94%20%D0%B1%D0%B5%D0%BD%D1%87%D0%BC%D0%B0%D1%80%D0%BA%D0%B8%D0%BD%D0%B3%20%D0%BD%D0%B0%20Linux%20%D1%81%20(%D0%BD%D0%B5)%D0%BF%D0%BE%D0%BD%D1%8F%D1%82%D0%BD%D1%8B%D0%BC%20%D1%84%D0%B8%D0%BD%D0%B0%D0%BB%D0%BE%D0%BC%20_%20%D0%A5%D0%B0%D0%B1%D1%80_files/7631ac5e5a7e237a937f5f2a74ae4c9e.jpg" class="user-info__image-pic user-info__image-pic_small" width="24" height="24">
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">PsyHaSTe</span>
</a>

          
          <time class="comment__date-time comment__date-time_published">17 мая 2019 в 09:01</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="#comment_20164496" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="20164496" data-action="add" title="Добавить в закладки"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#book"></use></svg></a>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <span class="icon_comment-branch js-comment_tree" data-id="20164496" data-parent_id="20164012" title="Показать ветку комментариев"><svg width="8" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#tree"></use></svg></span>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#comment_20164012" class="icon_comment-arrow-up js-comment_parent" data-id="20164496" data-parent_id="20164012" title="Показать предыдущий комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
    </li>

  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="#comment_20164496" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="20164496" data-parent_id="20164012" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="20164496" data-post-target="450512" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="plus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter   js-score" title="Всего голосов 0: ↑0 и ↓0">0</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message "><p>А в данном вопросе меня не 
интересует вопрос эффективности, а только вопрос возможности. Ну 
примерно как факт, что в SystemF возможен фуллинференс. Не очень часто 
на практике используется, но для теоретических построений очень важный.</p><br>
<p>Какая спека байткода и в каком объеме реализована можете посмотреть 
по ссылкам, что я дал. Копаться там чтобы вам что-то доказать мне не 
хочется. Хотите убедиться — убеждайтесь. </p></div>

        <div class="comment__footer">
    <a href="#reply" class="comment__footer-link reply_link" onclick="return comment_show_reply_form(20164496 )">Ответить</a>


</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-33" id="reply_comments_20164496"></ul>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="content-list__item content-list__item_comment js-comment " rel="20159076">
    
    <span class="parent_id" data-parent_id="20119228"></span>
    <div class="comment" id="comment_20159076">
      <span class="comment__collapse" title="Свернуть/развернуть ветку комментариев" data-id="20159076"></span>
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head   " rel="20159076">
          <a href="https://habr.com/ru/users/twinklede/" class="user-info user-info_inline" rel="user-popover" data-user-login="twinklede">
    <svg class="default-image default-image_mini default-image_pink" width="24" height="24"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#slug"></use></svg>
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">twinklede</span>
</a>

          
          <time class="comment__date-time comment__date-time_published">16 мая 2019 в 06:51</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="#comment_20159076" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="20159076" data-action="add" title="Добавить в закладки"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#book"></use></svg></a>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <span class="icon_comment-branch js-comment_tree" data-id="20159076" data-parent_id="20119228" title="Показать ветку комментариев"><svg width="8" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#tree"></use></svg></span>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#comment_20119228" class="icon_comment-arrow-up js-comment_parent" data-id="20159076" data-parent_id="20119228" title="Показать предыдущий комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
    </li>

  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="#comment_20159076" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="20159076" data-parent_id="20119228" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="20159076" data-post-target="450512" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="plus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter  voting-wjt__counter_negative js-score" title="Всего голосов –4: ↑0 и ↓4">–4</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message comment__message_downgrade comment__message_downgrade-4">Никто
 rustc не декларирует как транслятор из rust в llvm-ir. Мало того, что 
это попросту глупо. Причин много. Начиная из того, что ir уже llvm, его 
внутренние представление. И это именно задача фронтенда генерировать 
промежуточное представление компилятора. Получается, что компилятор 
компилирует то, что потом компилирует компилятор. Какой смысл вообще 
разделять фронтенд и компилятор, если и то и компилятор? Заканчивая тем,
 что на уровне языка множество ссылок на именно генерацию программ. Те 
же модули существуют именно на бинарном уровне.<br>
<br>
Даже если всё это исключить и принять эту логику, то это ничего не 
изменит. Генератор ir в rustc зависим от llvm. Именно llvm генерирует 
ir, а фронтенд использует api для генерации ir. Таким образом те части, 
которая в rustc написаны на rust сами генерировать ir не могут.<br>
<br>
Единственная соломинка здесь — это mir. Но это тоже тупиковый путь. Это 
некая форма rust. Её ничто не умеет исполнять. Она декларируется как 
промежуточное представление. Это не таргет. Если это таргет, то зачем 
компилятору что-то делать с таргетом и куда-то его преобразовывать(пусть
 и внешней логикой)? <br>
<br></div>

        <div class="comment__footer">
    <a href="#reply" class="comment__footer-link reply_link" onclick="return comment_show_reply_form(20159076 )">Ответить</a>


</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-6" id="reply_comments_20159076">  <li class="content-list__item content-list__item_comment js-comment " rel="20159746">
    
    <span class="parent_id" data-parent_id="20159076"></span>
    <div class="comment" id="comment_20159746">
      <span class="comment__collapse" title="Свернуть/развернуть ветку комментариев" data-id="20159746"></span>
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head   " rel="20159746">
          <a href="https://habr.com/ru/users/PsyHaSTe/" class="user-info user-info_inline" rel="user-popover" data-user-login="PsyHaSTe">
    <img src="Swift%20%D0%BF%D1%80%D0%BE%D1%82%D0%B8%D0%B2%20Rust%20%E2%80%94%20%D0%B1%D0%B5%D0%BD%D1%87%D0%BC%D0%B0%D1%80%D0%BA%D0%B8%D0%BD%D0%B3%20%D0%BD%D0%B0%20Linux%20%D1%81%20(%D0%BD%D0%B5)%D0%BF%D0%BE%D0%BD%D1%8F%D1%82%D0%BD%D1%8B%D0%BC%20%D1%84%D0%B8%D0%BD%D0%B0%D0%BB%D0%BE%D0%BC%20_%20%D0%A5%D0%B0%D0%B1%D1%80_files/7631ac5e5a7e237a937f5f2a74ae4c9e.jpg" class="user-info__image-pic user-info__image-pic_small" width="24" height="24">
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">PsyHaSTe</span>
</a>

          
          <time class="comment__date-time comment__date-time_published">16 мая 2019 в 10:23</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="#comment_20159746" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="20159746" data-action="add" title="Добавить в закладки"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#book"></use></svg></a>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <span class="icon_comment-branch js-comment_tree" data-id="20159746" data-parent_id="20159076" title="Показать ветку комментариев"><svg width="8" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#tree"></use></svg></span>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#comment_20159076" class="icon_comment-arrow-up js-comment_parent" data-id="20159746" data-parent_id="20159076" title="Показать предыдущий комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
    </li>

  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="#comment_20159746" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="20159746" data-parent_id="20159076" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="20159746" data-post-target="450512" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="plus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter   js-score" title="Всего голосов 0: ↑0 и ↓0">0</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message "><blockquote>Единственная 
соломинка здесь — это mir. Но это тоже тупиковый путь. Это некая форма 
rust. Её ничто не умеет исполнять. Она декларируется как промежуточное 
представление. Это не таргет. Если это таргет, то зачем компилятору 
что-то делать с таргетом и куда-то его преобразовывать(пусть и внешней 
логикой)? </blockquote><p>Если бы вы почитали, зачем MIR вообще 
придумали, то увидели бы, что это сделано для более простых и глобальных
 оптимизаций и некоторых других вещей. Что насчет "внутренних 
представлений", то етсь такая штука, как абстракция, и они как матрешки 
нанизываюстя друг на друга. Есть HAL, который абстрагирует ОС, которую 
абстрагирует clib, которую абстрагирует фреймворк, который 
абстрагирует...</p></div>

        <div class="comment__footer">
    <a href="#reply" class="comment__footer-link reply_link" onclick="return comment_show_reply_form(20159746 )">Ответить</a>


</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-7" id="reply_comments_20159746">  <li class="content-list__item content-list__item_comment js-comment " rel="20161890">
    
    <span class="parent_id" data-parent_id="20159746"></span>
    <div class="comment" id="comment_20161890">
      <span class="comment__collapse" title="Свернуть/развернуть ветку комментариев" data-id="20161890"></span>
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head   " rel="20161890">
          <a href="https://habr.com/ru/users/twinklede/" class="user-info user-info_inline" rel="user-popover" data-user-login="twinklede">
    <svg class="default-image default-image_mini default-image_pink" width="24" height="24"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#slug"></use></svg>
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">twinklede</span>
</a>

          
          <time class="comment__date-time comment__date-time_published">16 мая 2019 в 16:43</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="#comment_20161890" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="20161890" data-action="add" title="Добавить в закладки"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#book"></use></svg></a>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <span class="icon_comment-branch js-comment_tree" data-id="20161890" data-parent_id="20159746" title="Показать ветку комментариев"><svg width="8" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#tree"></use></svg></span>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#comment_20159746" class="icon_comment-arrow-up js-comment_parent" data-id="20161890" data-parent_id="20159746" title="Показать предыдущий комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
    </li>

  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="#comment_20161890" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="20161890" data-parent_id="20159746" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="20161890" data-post-target="450512" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="plus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter  voting-wjt__counter_negative js-score" title="Всего голосов –2: ↑0 и ↓2">–2</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message comment__message_downgrade comment__message_downgrade-2"><blockquote>Если
 бы вы почитали, зачем MIR вообще придумали, то увидели бы, что это 
сделано для более простых и глобальных оптимизаций и некоторых других 
вещей. </blockquote><br>
Пруфы. К тому же, что вообще из этого следует? Я опроверг ваши 
рассуждения. Абсолютно неважно то, чем является mir. Таргетом в rustc 
может является только он, ведь только его генерирует rustc сам.<br>
<br>
<blockquote>Что насчет «внутренних представлений», то етсь такая штука, как абстракция, и они как матрешки нанизываюстя друг на друга. </blockquote><br>
Это набор слов. Узнайте значение понятия «таргет». Внутреннее 
представление, либо промежуточное представление — это по определению то,
 что находится до таргета. Если бы оно было таргетом — оно бы не 
называлось промежуточным/внутренним. <br>
<br>
<blockquote>Есть HAL, который абстрагирует ОС, которую абстрагирует clib, которую абстрагирует фреймворк, который абстрагирует...</blockquote><br>
И? Я вас где-то спрашивал про «что такое промежуточное представление»? Я
 вас где-то спрашивал про «что такое абстракции»? Нет и нет. Зачем вы 
мне это пишите? <br>
<br>
Вы пытались сказать, что в rustc rust-код генерирует ir. Это неправда. Вам нужно на это отвечать.</div>

        <div class="comment__footer">
    <a href="#reply" class="comment__footer-link reply_link" onclick="return comment_show_reply_form(20161890 )">Ответить</a>


</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-8" id="reply_comments_20161890">  <li class="content-list__item content-list__item_comment js-comment " rel="20161912">
    
    <span class="parent_id" data-parent_id="20161890"></span>
    <div class="comment" id="comment_20161912">
      <span class="comment__collapse" title="Свернуть/развернуть ветку комментариев" data-id="20161912"></span>
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head   " rel="20161912">
          <a href="https://habr.com/ru/users/PsyHaSTe/" class="user-info user-info_inline" rel="user-popover" data-user-login="PsyHaSTe">
    <img src="Swift%20%D0%BF%D1%80%D0%BE%D1%82%D0%B8%D0%B2%20Rust%20%E2%80%94%20%D0%B1%D0%B5%D0%BD%D1%87%D0%BC%D0%B0%D1%80%D0%BA%D0%B8%D0%BD%D0%B3%20%D0%BD%D0%B0%20Linux%20%D1%81%20(%D0%BD%D0%B5)%D0%BF%D0%BE%D0%BD%D1%8F%D1%82%D0%BD%D1%8B%D0%BC%20%D1%84%D0%B8%D0%BD%D0%B0%D0%BB%D0%BE%D0%BC%20_%20%D0%A5%D0%B0%D0%B1%D1%80_files/7631ac5e5a7e237a937f5f2a74ae4c9e.jpg" class="user-info__image-pic user-info__image-pic_small" width="24" height="24">
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">PsyHaSTe</span>
</a>

          
          <time class="comment__date-time comment__date-time_published">16 мая 2019 в 16:48</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="#comment_20161912" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="20161912" data-action="add" title="Добавить в закладки"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#book"></use></svg></a>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <span class="icon_comment-branch js-comment_tree" data-id="20161912" data-parent_id="20161890" title="Показать ветку комментариев"><svg width="8" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#tree"></use></svg></span>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#comment_20161890" class="icon_comment-arrow-up js-comment_parent" data-id="20161912" data-parent_id="20161890" title="Показать предыдущий комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
    </li>

  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="#comment_20161912" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="20161912" data-parent_id="20161890" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="20161912" data-post-target="450512" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="plus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter   js-score" title="Всего голосов 0: ↑0 и ↓0">0</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message "><p>rustc генерирует LLVM IR, 
который является IR. В процессе этой генерации он внутри себя проходит 
через промежуточное представление MIR.</p><br>
<p>И да, хамить в комментах последнее дело.</p></div>

        <div class="comment__footer">
    <a href="#reply" class="comment__footer-link reply_link" onclick="return comment_show_reply_form(20161912 )">Ответить</a>


</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-9" id="reply_comments_20161912">  <li class="content-list__item content-list__item_comment js-comment " rel="20161974">
    
    <span class="parent_id" data-parent_id="20161912"></span>
    <div class="comment" id="comment_20161974">
      <span class="comment__collapse" title="Свернуть/развернуть ветку комментариев" data-id="20161974"></span>
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head   " rel="20161974">
          <a href="https://habr.com/ru/users/twinklede/" class="user-info user-info_inline" rel="user-popover" data-user-login="twinklede">
    <svg class="default-image default-image_mini default-image_pink" width="24" height="24"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#slug"></use></svg>
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">twinklede</span>
</a>

          
          <time class="comment__date-time comment__date-time_published">16 мая 2019 в 16:58</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="#comment_20161974" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="20161974" data-action="add" title="Добавить в закладки"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#book"></use></svg></a>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <span class="icon_comment-branch js-comment_tree" data-id="20161974" data-parent_id="20161912" title="Показать ветку комментариев"><svg width="8" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#tree"></use></svg></span>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#comment_20161912" class="icon_comment-arrow-up js-comment_parent" data-id="20161974" data-parent_id="20161912" title="Показать предыдущий комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
    </li>

  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="#comment_20161974" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="20161974" data-parent_id="20161912" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="20161974" data-post-target="450512" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="plus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter  voting-wjt__counter_negative js-score" title="Всего голосов –4: ↑0 и ↓4">–4</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message comment__message_downgrade comment__message_downgrade-4"><blockquote>rustc генерирует LLVM IR</blockquote><br>
Нет. Контекст был «на rust». rustc не генерирует ir — его генерирует llvm.<br>
<br>
<blockquote>В процессе этой генерации он внутри себя проходит через промежуточное представление MIR.</blockquote><br>
Я уже это говорил. mir — это единственное, что генерирует rustc сам. Вы 
утверждали, что rustc является компилятором(транслятором) во что-то там.
 Вы не уточняли во что именно он транслируется(понятно что в ir).<br>
<br>
И вот, когда вы знаете, что rustc(сам) генерирует только mir. Таким образом отсюда:<br>
<br>
<blockquote>Да нет, весь компилятор. Никто не говорит, что таргетом компилятора должен быть машинный код.</blockquote><br>
Может следовать только «таргет == mir». Почему mir не может являться и таргетом и промежуточным представлениям понятно.<br>
<br>
Таким образом я доказал, что ваше утверждение некорректно и не имеет смысла.<br>
<br>
<blockquote>И да, хамить в комментах последнее дело.</blockquote><br>
Конкретика. Где «хамить» и в чём «хамить» заключается.<br>
<br></div>

        <div class="comment__footer">
    <a href="#reply" class="comment__footer-link reply_link" onclick="return comment_show_reply_form(20161974 )">Ответить</a>


</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-10" id="reply_comments_20161974">  <li class="content-list__item content-list__item_comment js-comment " rel="20162066">
    
    <span class="parent_id" data-parent_id="20161974"></span>
    <div class="comment" id="comment_20162066">
      <span class="comment__collapse" title="Свернуть/развернуть ветку комментариев" data-id="20162066"></span>
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head   " rel="20162066">
          <a href="https://habr.com/ru/users/PsyHaSTe/" class="user-info user-info_inline" rel="user-popover" data-user-login="PsyHaSTe">
    <img src="Swift%20%D0%BF%D1%80%D0%BE%D1%82%D0%B8%D0%B2%20Rust%20%E2%80%94%20%D0%B1%D0%B5%D0%BD%D1%87%D0%BC%D0%B0%D1%80%D0%BA%D0%B8%D0%BD%D0%B3%20%D0%BD%D0%B0%20Linux%20%D1%81%20(%D0%BD%D0%B5)%D0%BF%D0%BE%D0%BD%D1%8F%D1%82%D0%BD%D1%8B%D0%BC%20%D1%84%D0%B8%D0%BD%D0%B0%D0%BB%D0%BE%D0%BC%20_%20%D0%A5%D0%B0%D0%B1%D1%80_files/7631ac5e5a7e237a937f5f2a74ae4c9e.jpg" class="user-info__image-pic user-info__image-pic_small" width="24" height="24">
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">PsyHaSTe</span>
</a>

          
          <time class="comment__date-time comment__date-time_published">16 мая 2019 в 17:12</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="#comment_20162066" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="20162066" data-action="add" title="Добавить в закладки"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#book"></use></svg></a>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <span class="icon_comment-branch js-comment_tree" data-id="20162066" data-parent_id="20161974" title="Показать ветку комментариев"><svg width="8" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#tree"></use></svg></span>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#comment_20161974" class="icon_comment-arrow-up js-comment_parent" data-id="20162066" data-parent_id="20161974" title="Показать предыдущий комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
    </li>

  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="#comment_20162066" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="20162066" data-parent_id="20161974" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="20162066" data-post-target="450512" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="plus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter   js-score" title="Всего голосов 0: ↑0 и ↓0">0</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message "><blockquote>Нет. Контекст был «на rust». rustc не генерирует ir — его генерирует llvm.</blockquote><p>А что он тогда генерирует?</p><br>
<blockquote>Я уже это говорил. mir — это единственное, что генерирует 
rustc сам. Вы утверждали, что rustc является компилятором(транслятором) 
во что-то там. Вы не уточняли во что именно он транслируется(понятно что
 в ir).</blockquote><p>То есть LLVM понимает MIR, раз уж раст после него ничего не генерирует? Вот так новость.</p></div>

        <div class="comment__footer">
    <a href="#reply" class="comment__footer-link reply_link" onclick="return comment_show_reply_form(20162066 )">Ответить</a>


</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-11" id="reply_comments_20162066">  <li class="content-list__item content-list__item_comment js-comment " rel="20162180">
    
    <span class="parent_id" data-parent_id="20162066"></span>
    <div class="comment" id="comment_20162180">
      <span class="comment__collapse" title="Свернуть/развернуть ветку комментариев" data-id="20162180"></span>
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head   " rel="20162180">
          <a href="https://habr.com/ru/users/twinklede/" class="user-info user-info_inline" rel="user-popover" data-user-login="twinklede">
    <svg class="default-image default-image_mini default-image_pink" width="24" height="24"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#slug"></use></svg>
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">twinklede</span>
</a>

          
          <time class="comment__date-time comment__date-time_published">16 мая 2019 в 17:29</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="#comment_20162180" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="20162180" data-action="add" title="Добавить в закладки"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#book"></use></svg></a>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <span class="icon_comment-branch js-comment_tree" data-id="20162180" data-parent_id="20162066" title="Показать ветку комментариев"><svg width="8" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#tree"></use></svg></span>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#comment_20162066" class="icon_comment-arrow-up js-comment_parent" data-id="20162180" data-parent_id="20162066" title="Показать предыдущий комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
    </li>

  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="#comment_20162180" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="20162180" data-parent_id="20162066" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="20162180" data-post-target="450512" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="plus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter  voting-wjt__counter_negative js-score" title="Всего голосов –2: ↑0 и ↓2">–2</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message comment__message_downgrade comment__message_downgrade-2"><blockquote>А что он тогда генерирует?</blockquote><br>
Только mir.<br>
<br>
<blockquote>То есть LLVM понимает MIR, раз уж раст после него ничего не генерирует? Вот так новость.</blockquote><br>
Эту глупость, а не новость. Я уже всё объяснял. llvm предоставляет api 
для генерации ir. Если мы берём те части, которые в rustc написаны на 
rust(а именно об этом шла речь), то они никак не генерируют ir. Они 
используют хайлевел llvm-api через биндинги. <br>
<br>
Повторю ещё раз. Те части, которые в rustc написаны на rust могут 
генерировать ТОЛЬКО mir. Из этого факта никак не следует, что llvm 
должен начать понимать mir.</div>

        <div class="comment__footer">
    <a href="#reply" class="comment__footer-link reply_link" onclick="return comment_show_reply_form(20162180 )">Ответить</a>


</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-12" id="reply_comments_20162180">  <li class="content-list__item content-list__item_comment js-comment " rel="20162310">
    
    <span class="parent_id" data-parent_id="20162180"></span>
    <div class="comment" id="comment_20162310">
      <span class="comment__collapse" title="Свернуть/развернуть ветку комментариев" data-id="20162310"></span>
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head   " rel="20162310">
          <a href="https://habr.com/ru/users/PsyHaSTe/" class="user-info user-info_inline" rel="user-popover" data-user-login="PsyHaSTe">
    <img src="Swift%20%D0%BF%D1%80%D0%BE%D1%82%D0%B8%D0%B2%20Rust%20%E2%80%94%20%D0%B1%D0%B5%D0%BD%D1%87%D0%BC%D0%B0%D1%80%D0%BA%D0%B8%D0%BD%D0%B3%20%D0%BD%D0%B0%20Linux%20%D1%81%20(%D0%BD%D0%B5)%D0%BF%D0%BE%D0%BD%D1%8F%D1%82%D0%BD%D1%8B%D0%BC%20%D1%84%D0%B8%D0%BD%D0%B0%D0%BB%D0%BE%D0%BC%20_%20%D0%A5%D0%B0%D0%B1%D1%80_files/7631ac5e5a7e237a937f5f2a74ae4c9e.jpg" class="user-info__image-pic user-info__image-pic_small" width="24" height="24">
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">PsyHaSTe</span>
</a>

          <svg class="icon_comment-edit" title="Комментарий был изменен" width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#pencil"></use></svg>
          <time class="comment__date-time comment__date-time_published">16 мая 2019 в 17:46</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="#comment_20162310" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="20162310" data-action="add" title="Добавить в закладки"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#book"></use></svg></a>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <span class="icon_comment-branch js-comment_tree" data-id="20162310" data-parent_id="20162180" title="Показать ветку комментариев"><svg width="8" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#tree"></use></svg></span>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#comment_20162180" class="icon_comment-arrow-up js-comment_parent" data-id="20162310" data-parent_id="20162180" title="Показать предыдущий комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
    </li>

  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="#comment_20162310" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="20162310" data-parent_id="20162180" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="20162310" data-post-target="450512" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="plus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter   js-score" title="Всего голосов 0: ↑0 и ↓0">0</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message "><p>А как из MIR получается 
исполняемый x86 файл? LLVM не понимает MIR, сам раст из MIR ничего не 
генерирует. ПО идее мы должны были бы застрять на этапе MIR.</p><br>
<p><img src="Swift%20%D0%BF%D1%80%D0%BE%D1%82%D0%B8%D0%B2%20Rust%20%E2%80%94%20%D0%B1%D0%B5%D0%BD%D1%87%D0%BC%D0%B0%D1%80%D0%BA%D0%B8%D0%BD%D0%B3%20%D0%BD%D0%B0%20Linux%20%D1%81%20(%D0%BD%D0%B5)%D0%BF%D0%BE%D0%BD%D1%8F%D1%82%D0%BD%D1%8B%D0%BC%20%D1%84%D0%B8%D0%BD%D0%B0%D0%BB%D0%BE%D0%BC%20_%20%D0%A5%D0%B0%D0%B1%D1%80_files/5d80ed202fe08f57892413264e1fc1ce.png" alt="image"></p><br>
<p>Вот кто конкретно этот LLVM IR генерирует?</p></div>

        <div class="comment__footer">
    <a href="#reply" class="comment__footer-link reply_link" onclick="return comment_show_reply_form(20162310 )">Ответить</a>


</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-13" id="reply_comments_20162310">  <li class="content-list__item content-list__item_comment js-comment " rel="20162442">
    
    <span class="parent_id" data-parent_id="20162310"></span>
    <div class="comment" id="comment_20162442">
      <span class="comment__collapse" title="Свернуть/развернуть ветку комментариев" data-id="20162442"></span>
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head   " rel="20162442">
          <a href="https://habr.com/ru/users/twinklede/" class="user-info user-info_inline" rel="user-popover" data-user-login="twinklede">
    <svg class="default-image default-image_mini default-image_pink" width="24" height="24"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#slug"></use></svg>
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">twinklede</span>
</a>

          
          <time class="comment__date-time comment__date-time_published">16 мая 2019 в 18:03</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="#comment_20162442" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="20162442" data-action="add" title="Добавить в закладки"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#book"></use></svg></a>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <span class="icon_comment-branch js-comment_tree" data-id="20162442" data-parent_id="20162310" title="Показать ветку комментариев"><svg width="8" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#tree"></use></svg></span>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#comment_20162310" class="icon_comment-arrow-up js-comment_parent" data-id="20162442" data-parent_id="20162310" title="Показать предыдущий комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
    </li>

  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="#comment_20162442" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="20162442" data-parent_id="20162310" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="20162442" data-post-target="450512" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="plus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter  voting-wjt__counter_negative js-score" title="Всего голосов –2: ↑1 и ↓3">–2</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message comment__message_downgrade comment__message_downgrade-2"><blockquote>Вот кто конкретно этот LLVM IR генерирует?</blockquote><br>
llvm. Я уже отвечал на это. llvm-ir генерирует llvm-логика, которая 
написана не на расте. Далее эту внешнюю логику раст использует через 
биндинги. Так работает любой llvm-фронтенд. <br>
<br>
Эти рассуждения вообще не имеют смысла, ведь rustc попросту слинкован с 
llvm и без него в принципе существовать не может. Ваше утверждение 
изначально ложно. Но я пошел вам навстречу и говорю о том, что 
может(гипотетически) rustc в отрыве от llvm. Может он только 
генерировать mir(возможно ещё какие-то подобные промежуточные 
представления). <br>
<br>
<blockquote>Компилятор Rust написан на Rust</blockquote><br>
Начальный тезис был, все рассуждения ведутся в этом контексте. Вы так же на это явно указывали.<br>
<br>
Я думаю вы знаете, что из одного языка можно вызвать логику на другом языке. Именно таким механизмом пользуется rust.</div>

        <div class="comment__footer">
    <a href="#reply" class="comment__footer-link reply_link" onclick="return comment_show_reply_form(20162442 )">Ответить</a>


</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-14" id="reply_comments_20162442">  <li class="content-list__item content-list__item_comment js-comment " rel="20162734">
    
    <span class="parent_id" data-parent_id="20162442"></span>
    <div class="comment" id="comment_20162734">
      <span class="comment__collapse" title="Свернуть/развернуть ветку комментариев" data-id="20162734"></span>
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head   " rel="20162734">
          <a href="https://habr.com/ru/users/PsyHaSTe/" class="user-info user-info_inline" rel="user-popover" data-user-login="PsyHaSTe">
    <img src="Swift%20%D0%BF%D1%80%D0%BE%D1%82%D0%B8%D0%B2%20Rust%20%E2%80%94%20%D0%B1%D0%B5%D0%BD%D1%87%D0%BC%D0%B0%D1%80%D0%BA%D0%B8%D0%BD%D0%B3%20%D0%BD%D0%B0%20Linux%20%D1%81%20(%D0%BD%D0%B5)%D0%BF%D0%BE%D0%BD%D1%8F%D1%82%D0%BD%D1%8B%D0%BC%20%D1%84%D0%B8%D0%BD%D0%B0%D0%BB%D0%BE%D0%BC%20_%20%D0%A5%D0%B0%D0%B1%D1%80_files/7631ac5e5a7e237a937f5f2a74ae4c9e.jpg" class="user-info__image-pic user-info__image-pic_small" width="24" height="24">
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">PsyHaSTe</span>
</a>

          
          <time class="comment__date-time comment__date-time_published">16 мая 2019 в 19:03</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="#comment_20162734" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="20162734" data-action="add" title="Добавить в закладки"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#book"></use></svg></a>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <span class="icon_comment-branch js-comment_tree" data-id="20162734" data-parent_id="20162442" title="Показать ветку комментариев"><svg width="8" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#tree"></use></svg></span>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#comment_20162442" class="icon_comment-arrow-up js-comment_parent" data-id="20162734" data-parent_id="20162442" title="Показать предыдущий комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
    </li>

  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="#comment_20162734" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="20162734" data-parent_id="20162442" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="20162734" data-post-target="450512" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="plus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter   js-score" title="Всего голосов 0: ↑1 и ↓1">0</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message "><blockquote>llvm. Я уже отвечал 
на это. llvm-ir генерирует llvm-логика, которая написана не на расте. 
Далее эту внешнюю логику раст использует через биндинги. Так работает 
любой llvm-фронтенд. </blockquote><p>Давайте я вам скину MIR, а вы с 
помощью LLVM попробуете из него получить LLVM IR? Спойлер, у вас не 
выйдет, потому что это просто не так.</p></div>

        <div class="comment__footer">
    <a href="#reply" class="comment__footer-link reply_link" onclick="return comment_show_reply_form(20162734 )">Ответить</a>


</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-15" id="reply_comments_20162734">  <li class="content-list__item content-list__item_comment js-comment " rel="20162864">
    
    <span class="parent_id" data-parent_id="20162734"></span>
    <div class="comment" id="comment_20162864">
      <span class="comment__collapse" title="Свернуть/развернуть ветку комментариев" data-id="20162864"></span>
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head   " rel="20162864">
          <a href="https://habr.com/ru/users/twinklede/" class="user-info user-info_inline" rel="user-popover" data-user-login="twinklede">
    <svg class="default-image default-image_mini default-image_pink" width="24" height="24"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#slug"></use></svg>
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">twinklede</span>
</a>

          
          <time class="comment__date-time comment__date-time_published">16 мая 2019 в 19:25</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="#comment_20162864" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="20162864" data-action="add" title="Добавить в закладки"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#book"></use></svg></a>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <span class="icon_comment-branch js-comment_tree" data-id="20162864" data-parent_id="20162734" title="Показать ветку комментариев"><svg width="8" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#tree"></use></svg></span>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#comment_20162734" class="icon_comment-arrow-up js-comment_parent" data-id="20162864" data-parent_id="20162734" title="Показать предыдущий комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
    </li>

  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="#comment_20162864" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="20162864" data-parent_id="20162734" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="20162864" data-post-target="450512" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="plus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter   js-score" title="Всего голосов 0: ↑1 и ↓1">0</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message "><blockquote>Давайте я вам скину 
MIR, а вы с помощью LLVM попробуете из него получить LLVM IR? Спойлер, у
 вас не выйдет, потому что это просто не так.</blockquote><br>
Давайте мы поступим проще. Вы берёте rustc без llvm и генерируете ir. 
Если ваши рассуждения верны — вы сможете это сделать, ведь вы 
утверждали, что «rustc САМ(т.е. средствами кода написанного на rust) 
генерирует что-то там(как я понял — это IR)». Если сам — сгенерируйте.<br>
<br>
К тому же, зачем вы продолжаете повторять глупости про mir и игнорируете
 все мои контр-аргументы? Из того, что llvm не умеет mir не следует, что
 rustc умеет генерировать(сам) ir. Это очевидно.</div>

        <div class="comment__footer">
    <a href="#reply" class="comment__footer-link reply_link" onclick="return comment_show_reply_form(20162864 )">Ответить</a>


</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-16" id="reply_comments_20162864">  <li class="content-list__item content-list__item_comment js-comment " rel="20163468">
    
    <span class="parent_id" data-parent_id="20162864"></span>
    <div class="comment" id="comment_20163468">
      <span class="comment__collapse" title="Свернуть/развернуть ветку комментариев" data-id="20163468"></span>
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head   " rel="20163468">
          <a href="https://habr.com/ru/users/PsyHaSTe/" class="user-info user-info_inline" rel="user-popover" data-user-login="PsyHaSTe">
    <img src="Swift%20%D0%BF%D1%80%D0%BE%D1%82%D0%B8%D0%B2%20Rust%20%E2%80%94%20%D0%B1%D0%B5%D0%BD%D1%87%D0%BC%D0%B0%D1%80%D0%BA%D0%B8%D0%BD%D0%B3%20%D0%BD%D0%B0%20Linux%20%D1%81%20(%D0%BD%D0%B5)%D0%BF%D0%BE%D0%BD%D1%8F%D1%82%D0%BD%D1%8B%D0%BC%20%D1%84%D0%B8%D0%BD%D0%B0%D0%BB%D0%BE%D0%BC%20_%20%D0%A5%D0%B0%D0%B1%D1%80_files/7631ac5e5a7e237a937f5f2a74ae4c9e.jpg" class="user-info__image-pic user-info__image-pic_small" width="24" height="24">
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">PsyHaSTe</span>
</a>

          
          <time class="comment__date-time comment__date-time_published">16 мая 2019 в 22:07</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="#comment_20163468" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="20163468" data-action="add" title="Добавить в закладки"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#book"></use></svg></a>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <span class="icon_comment-branch js-comment_tree" data-id="20163468" data-parent_id="20162864" title="Показать ветку комментариев"><svg width="8" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#tree"></use></svg></span>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#comment_20162864" class="icon_comment-arrow-up js-comment_parent" data-id="20163468" data-parent_id="20162864" title="Показать предыдущий комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
    </li>

  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="#comment_20163468" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="20163468" data-parent_id="20162864" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="20163468" data-post-target="450512" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="plus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter  voting-wjt__counter_negative js-score" title="Всего голосов –1: ↑0 и ↓1">–1</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message comment__message_downgrade comment__message_downgrade-1"><p>Ну вон, пожалуйста, безо всякого LLVM сгенерил его.</p><br>
<p>Еще раз, раст это преобразователь Rust -&gt; LLVM IR. LLVM дальше 
компилирует LLVM IR в таргет код платформы. Естественно именно задача 
раста сгенерировать вход для LLVM, коим является LLVM IR. В этом и смысл
 всей технологии. Тем же самым занимается clang, который тоже является 
компилятором. И не потому, что он компилирует си.</p></div>

        <div class="comment__footer">
    <a href="#reply" class="comment__footer-link reply_link" onclick="return comment_show_reply_form(20163468 )">Ответить</a>


</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-17" id="reply_comments_20163468">  <li class="content-list__item content-list__item_comment js-comment " rel="20163606">
    
    <span class="parent_id" data-parent_id="20163468"></span>
    <div class="comment" id="comment_20163606">
      <span class="comment__collapse" title="Свернуть/развернуть ветку комментариев" data-id="20163606"></span>
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head   " rel="20163606">
          <a href="https://habr.com/ru/users/twinklede/" class="user-info user-info_inline" rel="user-popover" data-user-login="twinklede">
    <svg class="default-image default-image_mini default-image_pink" width="24" height="24"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#slug"></use></svg>
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">twinklede</span>
</a>

          
          <time class="comment__date-time comment__date-time_published">16 мая 2019 в 22:49</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="#comment_20163606" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="20163606" data-action="add" title="Добавить в закладки"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#book"></use></svg></a>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <span class="icon_comment-branch js-comment_tree" data-id="20163606" data-parent_id="20163468" title="Показать ветку комментариев"><svg width="8" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#tree"></use></svg></span>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#comment_20163468" class="icon_comment-arrow-up js-comment_parent" data-id="20163606" data-parent_id="20163468" title="Показать предыдущий комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
    </li>

  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="#comment_20163606" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="20163606" data-parent_id="20163468" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="20163606" data-post-target="450512" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="plus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter   js-score" title="Всего голосов 0: ↑1 и ↓1">0</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message "><blockquote>Ну вон, пожалуйста, безо всякого LLVM сгенерил его.<br>
</blockquote><br>
Покажите. Где? То, что вы там линкуете — генерирует rustc, который 
слинкован с llvm. Вам нужно убрать оттуда llvm и сгенерировать ir.<br>
<br>
<blockquote>Еще раз, раст это преобразователь Rust -&gt; LLVM IR. </blockquote><br>
Нет. Это глупость. <br>
<br>
<blockquote> Естественно именно задача раста сгенерировать вход для LLVM, коим является LLVM IR. </blockquote><br>
Неверно. Никакой раст никакой ir не генерирует. раст занимается вызовов 
llvm-api, который генерирует ir. Именно llvm генерирует ir.<br>
<br>
Я вам советую изучить тему перед тем как что-то утверждать. Начините отсюда <a href="https://github.com/rust-lang/rust/tree/master/src/rustllvm">github.com/rust-lang/rust/tree/master/src/rustllvm</a> Далее <a href="https://github.com/rust-lang/rust/tree/master/src/librustc_codegen_llvm">github.com/rust-lang/rust/tree/master/src/librustc_codegen_llvm</a> который напрямую забинден с rustllvm. <br>
<br>
<blockquote>В этом и смысл всей технологии.</blockquote><br>
Нет, вы не изучали вопрос. Изучите.<br>
<br>
IR является платформо-зависимым во многих аспектах. Он достаточно сложен. Именно поэтому никакой фронт его не генерирует. <br>
<br>
llvm предоставляет api, который и занимается генерацией ir. Именно этот 
api использует rustc и любой другой фронт. Я даже больше скажу. Сам llvm
 знает про раст. Без поддержки llvm никакой фронт существовать не может.
 <br>
<br>
<blockquote> Тем же самым занимается clang, который тоже является компилятором. И не потому, что он компилирует си.<br>
</blockquote><br>
Зачем вы ссылаетесь на clang? К чему это? Вы утверждали, что код на rust
 сам генерирует ir. Это неправда. В ситуации с clang это не работает. 
Да, тут так же ir генерирует llvm, но llvm написан на С++, а значит С++ 
генерирует для себя ir. И неважно где этот код лежит.<br>
<br>
К тому же, clang это неотъемлемая часть llvm. rustc же внешняя часть.</div>

        <div class="comment__footer">
    <a href="#reply" class="comment__footer-link reply_link" onclick="return comment_show_reply_form(20163606 )">Ответить</a>


</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-18" id="reply_comments_20163606">  <li class="content-list__item content-list__item_comment js-comment " rel="20163956">
    
    <span class="parent_id" data-parent_id="20163606"></span>
    <div class="comment" id="comment_20163956">
      <span class="comment__collapse" title="Свернуть/развернуть ветку комментариев" data-id="20163956"></span>
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head   " rel="20163956">
          <a href="https://habr.com/ru/users/PsyHaSTe/" class="user-info user-info_inline" rel="user-popover" data-user-login="PsyHaSTe">
    <img src="Swift%20%D0%BF%D1%80%D0%BE%D1%82%D0%B8%D0%B2%20Rust%20%E2%80%94%20%D0%B1%D0%B5%D0%BD%D1%87%D0%BC%D0%B0%D1%80%D0%BA%D0%B8%D0%BD%D0%B3%20%D0%BD%D0%B0%20Linux%20%D1%81%20(%D0%BD%D0%B5)%D0%BF%D0%BE%D0%BD%D1%8F%D1%82%D0%BD%D1%8B%D0%BC%20%D1%84%D0%B8%D0%BD%D0%B0%D0%BB%D0%BE%D0%BC%20_%20%D0%A5%D0%B0%D0%B1%D1%80_files/7631ac5e5a7e237a937f5f2a74ae4c9e.jpg" class="user-info__image-pic user-info__image-pic_small" width="24" height="24">
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">PsyHaSTe</span>
</a>

          
          <time class="comment__date-time comment__date-time_published">17 мая 2019 в 01:41</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="#comment_20163956" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="20163956" data-action="add" title="Добавить в закладки"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#book"></use></svg></a>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <span class="icon_comment-branch js-comment_tree" data-id="20163956" data-parent_id="20163606" title="Показать ветку комментариев"><svg width="8" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#tree"></use></svg></span>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#comment_20163606" class="icon_comment-arrow-up js-comment_parent" data-id="20163956" data-parent_id="20163606" title="Показать предыдущий комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
    </li>

  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="#comment_20163956" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="20163956" data-parent_id="20163606" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="20163956" data-post-target="450512" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="plus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter  voting-wjt__counter_negative js-score" title="Всего голосов –1: ↑0 и ↓1">–1</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message comment__message_downgrade comment__message_downgrade-1"><blockquote>Зачем
 вы ссылаетесь на clang? К чему это? Вы утверждали, что код на rust сам 
генерирует ir. Это неправда. В ситуации с clang это не работает. Да, тут
 так же ir генерирует llvm, но llvm написан на С++, а значит С++ 
генерирует для себя ir. И неважно где этот код лежит.</blockquote><p>Ну 
допустим. Какой вывод с этого? Вам так приятно, что софтина на плюсах 
написана? Раст изначально написан на окамле, должно ли окамловцам быть 
приятно? Должны ли они себя бить в грудь, что раст-то говорят не 
настоящий?</p></div>

        <div class="comment__footer">
    <a href="#reply" class="comment__footer-link reply_link" onclick="return comment_show_reply_form(20163956 )">Ответить</a>


</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-19" id="reply_comments_20163956">  <li class="content-list__item content-list__item_comment js-comment " rel="20164006">
    
    <span class="parent_id" data-parent_id="20163956"></span>
    <div class="comment" id="comment_20164006">
      <span class="comment__collapse" title="Свернуть/развернуть ветку комментариев" data-id="20164006"></span>
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head   " rel="20164006">
          <a href="https://habr.com/ru/users/twinklede/" class="user-info user-info_inline" rel="user-popover" data-user-login="twinklede">
    <svg class="default-image default-image_mini default-image_pink" width="24" height="24"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#slug"></use></svg>
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">twinklede</span>
</a>

          
          <time class="comment__date-time comment__date-time_published">17 мая 2019 в 02:10</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="#comment_20164006" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="20164006" data-action="add" title="Добавить в закладки"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#book"></use></svg></a>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <span class="icon_comment-branch js-comment_tree" data-id="20164006" data-parent_id="20163956" title="Показать ветку комментариев"><svg width="8" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#tree"></use></svg></span>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#comment_20163956" class="icon_comment-arrow-up js-comment_parent" data-id="20164006" data-parent_id="20163956" title="Показать предыдущий комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
    </li>

  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="#comment_20164006" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="20164006" data-parent_id="20163956" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="20164006" data-post-target="450512" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="plus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter   js-score" title="Всего голосов 0: ↑1 и ↓1">0</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message "><blockquote>Ну допустим. Какой вывод с этого?</blockquote><br>
Не допустим. Это так и есть. Это мною доказано, как и доказано враньё с вашей стороны.<br>
<br>
Вывод из этого очень просто, вы врали(ошибались) когда говорили, что 
rustc каким-то образом сам генерирует ir. С этим тезис я спорил. Его я 
опроверг.<br>
<br>
<blockquote>Вам так приятно, что софтина на плюсах написана? </blockquote><br>
Ну почему же. Мне это неприятно, наоборот. Но в основном мне неприятно 
вранье и клоунада. Уровень и методику спора своих оппонентов я знаю. И 
доказать мне это не составляет труда.<br>
<br>
Именно поэтому я могу доказывать, я могу выигрывать. Вы можете врать и гадить в карму/минусовать комменты.<br>
<br>
Я даже не знаю зачем я начал спор с вами. Это глупо. В конечном итоге 
мне тут смог оппонировать только один человек. Радует, что хоть один 
есть. Посоветовать могу только одно. Больше знать/уметь и меньше 
заниматься спорами без знаний/умения.<br>
<br>
<blockquote>Раст изначально написан на окамле, </blockquote><br>
Никакой раст не был написан на окамле. Это глупость. То, что оно 
называлось «rust» это не значит, что тот «rust» был сегодняшним rust.<br>
<br>
<blockquote>должно ли окамловцам быть приятно?</blockquote><br>
Да нет. Наоборот. Rust тогда ничего из себя не представлял. А вот когда ушел к llvm. Но уже совершенно другая история.<br>
<br>
<blockquote>Должны ли они себя бить в грудь, что раст-то говорят не настоящий?</blockquote><br>
Я не знаю кто что должен. Я знаю, что врать/утверждать не зная — плохо. 
Вы начали рассказывать всем, что rust может генерировать ir. Это ложь. 
Это я знаю. Остальное мне не интересно.<br>
<br></div>

        <div class="comment__footer">
    <a href="#reply" class="comment__footer-link reply_link" onclick="return comment_show_reply_form(20164006 )">Ответить</a>


</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-20" id="reply_comments_20164006">  <li class="content-list__item content-list__item_comment js-comment " rel="20164470">
    
    <span class="parent_id" data-parent_id="20164006"></span>
    <div class="comment" id="comment_20164470">
      <span class="comment__collapse" title="Свернуть/развернуть ветку комментариев" data-id="20164470"></span>
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head   " rel="20164470">
          <a href="https://habr.com/ru/users/PsyHaSTe/" class="user-info user-info_inline" rel="user-popover" data-user-login="PsyHaSTe">
    <img src="Swift%20%D0%BF%D1%80%D0%BE%D1%82%D0%B8%D0%B2%20Rust%20%E2%80%94%20%D0%B1%D0%B5%D0%BD%D1%87%D0%BC%D0%B0%D1%80%D0%BA%D0%B8%D0%BD%D0%B3%20%D0%BD%D0%B0%20Linux%20%D1%81%20(%D0%BD%D0%B5)%D0%BF%D0%BE%D0%BD%D1%8F%D1%82%D0%BD%D1%8B%D0%BC%20%D1%84%D0%B8%D0%BD%D0%B0%D0%BB%D0%BE%D0%BC%20_%20%D0%A5%D0%B0%D0%B1%D1%80_files/7631ac5e5a7e237a937f5f2a74ae4c9e.jpg" class="user-info__image-pic user-info__image-pic_small" width="24" height="24">
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">PsyHaSTe</span>
</a>

          
          <time class="comment__date-time comment__date-time_published">17 мая 2019 в 08:54</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="#comment_20164470" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="20164470" data-action="add" title="Добавить в закладки"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#book"></use></svg></a>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <span class="icon_comment-branch js-comment_tree" data-id="20164470" data-parent_id="20164006" title="Показать ветку комментариев"><svg width="8" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#tree"></use></svg></span>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#comment_20164006" class="icon_comment-arrow-up js-comment_parent" data-id="20164470" data-parent_id="20164006" title="Показать предыдущий комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
    </li>

  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="#comment_20164470" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="20164470" data-parent_id="20164006" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="20164470" data-post-target="450512" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="plus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter   js-score" title="Всего голосов 0: ↑0 и ↓0">0</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message "><blockquote>Вывод из этого очень 
просто, вы врали(ошибались) когда говорили, что rustc каким-то образом 
сам генерирует ir. С этим тезис я спорил. Его я опроверг.</blockquote><p>Хорошо,
 а есть ли какой-то способ генерировать IR не через апи? Потому что если
 нет, то это демагогия в стиле "это пули убивают людей, а снайпер не при
 чем".</p><br>
<blockquote>Да нет. Наоборот. Rust тогда ничего из себя не представлял. А вот когда ушел к llvm. Но уже совершенно другая история.</blockquote><p>Емнип раст с самого начала компилился в llvm. Просто первая версия была написана не на расте, очевидно.</p><br>
<hr><br>
<p>Энивей, я думал ллвм немного иначе работает. Спасибо за информацию.</p></div>

        <div class="comment__footer">
    <a href="#reply" class="comment__footer-link reply_link" onclick="return comment_show_reply_form(20164470 )">Ответить</a>


</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-21" id="reply_comments_20164470"></ul>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="content-list__item content-list__item_comment js-comment " rel="20164028">
    
    <span class="parent_id" data-parent_id="20162310"></span>
    <div class="comment" id="comment_20164028">
      <span class="comment__collapse" title="Свернуть/развернуть ветку комментариев" data-id="20164028"></span>
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head   " rel="20164028">
          <a href="https://habr.com/ru/users/humbug/" class="user-info user-info_inline" rel="user-popover" data-user-login="humbug">
    <img src="Swift%20%D0%BF%D1%80%D0%BE%D1%82%D0%B8%D0%B2%20Rust%20%E2%80%94%20%D0%B1%D0%B5%D0%BD%D1%87%D0%BC%D0%B0%D1%80%D0%BA%D0%B8%D0%BD%D0%B3%20%D0%BD%D0%B0%20Linux%20%D1%81%20(%D0%BD%D0%B5)%D0%BF%D0%BE%D0%BD%D1%8F%D1%82%D0%BD%D1%8B%D0%BC%20%D1%84%D0%B8%D0%BD%D0%B0%D0%BB%D0%BE%D0%BC%20_%20%D0%A5%D0%B0%D0%B1%D1%80_files/08b630a09b5e92ca37ee388932101770.jpg" class="user-info__image-pic user-info__image-pic_small" width="24" height="24">
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">humbug</span>
</a>

          <svg class="icon_comment-edit" title="Комментарий был изменен" width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#pencil"></use></svg>
          <time class="comment__date-time comment__date-time_published">17 мая 2019 в 02:31</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="#comment_20164028" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="20164028" data-action="add" title="Добавить в закладки"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#book"></use></svg></a>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <span class="icon_comment-branch js-comment_tree" data-id="20164028" data-parent_id="20162310" title="Показать ветку комментариев"><svg width="8" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#tree"></use></svg></span>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#comment_20162310" class="icon_comment-arrow-up js-comment_parent" data-id="20164028" data-parent_id="20162310" title="Показать предыдущий комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
    </li>

  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="#comment_20164028" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="20164028" data-parent_id="20162310" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="20164028" data-post-target="450512" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="plus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter  voting-wjt__counter_negative js-score" title="Всего голосов –1: ↑0 и ↓1">–1</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message comment__message_downgrade comment__message_downgrade-1"><blockquote>Вот кто конкретно этот LLVM IR генерирует?</blockquote><p>Очевидно, что этот LLVM IR генерирует сам llvm. Очевидно для всех, кто работал с llvm.</p></div>

        <div class="comment__footer">
    <a href="#reply" class="comment__footer-link reply_link" onclick="return comment_show_reply_form(20164028 )">Ответить</a>


</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-14" id="reply_comments_20164028"></ul>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="content-list__item content-list__item_comment js-comment " rel="20158466">
    
    <span class="parent_id" data-parent_id="20117328"></span>
    <div class="comment" id="comment_20158466">
      <span class="comment__collapse" title="Свернуть/развернуть ветку комментариев" data-id="20158466"></span>
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head   " rel="20158466">
          <a href="https://habr.com/ru/users/twinklede/" class="user-info user-info_inline" rel="user-popover" data-user-login="twinklede">
    <svg class="default-image default-image_mini default-image_pink" width="24" height="24"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#slug"></use></svg>
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">twinklede</span>
</a>

          
          <time class="comment__date-time comment__date-time_published">15 мая 2019 в 22:47</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="#comment_20158466" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="20158466" data-action="add" title="Добавить в закладки"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#book"></use></svg></a>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <span class="icon_comment-branch js-comment_tree" data-id="20158466" data-parent_id="20117328" title="Показать ветку комментариев"><svg width="8" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#tree"></use></svg></span>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#comment_20117328" class="icon_comment-arrow-up js-comment_parent" data-id="20158466" data-parent_id="20117328" title="Показать предыдущий комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
    </li>

  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="#comment_20158466" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="20158466" data-parent_id="20117328" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="20158466" data-post-target="450512" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="plus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter voting-wjt__counter_positive  js-score" title="Всего голосов +1: ↑1 и ↓0">+1</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message "><blockquote>C++ проиграет, если на Rust писать чисто. </blockquote><br>
Вопрос. Проиграл ли С++?<br>
<br>
<blockquote>ни один программист C++ в здравом уме не решится и будет копировать строки.</blockquote><br>
Я не решился. Копировал строки. С++ не проиграл. Как вы это объясните?</div>

        <div class="comment__footer">
    <a href="#reply" class="comment__footer-link reply_link" onclick="return comment_show_reply_form(20158466 )">Ответить</a>


</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-2" id="reply_comments_20158466"></ul>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="content-list__item content-list__item_comment js-comment " rel="20117568">
    
    <span class="parent_id" data-parent_id="0"></span>
    <div class="comment" id="comment_20117568">
      <span class="comment__collapse" title="Свернуть/развернуть ветку комментариев" data-id="20117568"></span>
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head   " rel="20117568">
          <a href="https://habr.com/ru/users/creker/" class="user-info user-info_inline" rel="user-popover" data-user-login="creker">
    <img src="Swift%20%D0%BF%D1%80%D0%BE%D1%82%D0%B8%D0%B2%20Rust%20%E2%80%94%20%D0%B1%D0%B5%D0%BD%D1%87%D0%BC%D0%B0%D1%80%D0%BA%D0%B8%D0%BD%D0%B3%20%D0%BD%D0%B0%20Linux%20%D1%81%20(%D0%BD%D0%B5)%D0%BF%D0%BE%D0%BD%D1%8F%D1%82%D0%BD%D1%8B%D0%BC%20%D1%84%D0%B8%D0%BD%D0%B0%D0%BB%D0%BE%D0%BC%20_%20%D0%A5%D0%B0%D0%B1%D1%80_files/58738e1e5c93e6de80dc66bb4fbef5bd.png" class="user-info__image-pic user-info__image-pic_small" width="24" height="24">
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">creker</span>
</a>

          
          <time class="comment__date-time comment__date-time_published">6 мая 2019 в 12:43</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="#comment_20117568" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="20117568" data-action="add" title="Добавить в закладки"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#book"></use></svg></a>
    </li>


  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="#comment_20117568" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="20117568" data-parent_id="0" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="20117568" data-post-target="450512" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="plus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter voting-wjt__counter_positive  js-score" title="Всего голосов +1: ↑1 и ↓0">+1</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message ">В первую очередь тут не так 
допущение, что в свифте нет сборщика мусора. Он есть и зовётся 
автоматическим подсчётом ссылок или ARC. Как показывает теория и 
практика это один из самых медленных видов сборки мусора. Не так давно 
была любопытная работа о реализации юзерлевел драйвера сетевой карты. 
Свифт проиграл всем — си, расту, сишарпу, гоу. Чрезвычайно сильно 
проиграл. Как раз из-за подсчёта ссылок. Последние два при этом были 
недалеко от раста что по скорости, что по латентности. Сишарп только 
посильнее проигрывал</div>

        <div class="comment__footer">
    <a href="#reply" class="comment__footer-link reply_link" onclick="return comment_show_reply_form(20117568 )">Ответить</a>


</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-0" id="reply_comments_20117568">  <li class="content-list__item content-list__item_comment js-comment " rel="20117744">
    
    <span class="parent_id" data-parent_id="20117568"></span>
    <div class="comment" id="comment_20117744">
      <span class="comment__collapse" title="Свернуть/развернуть ветку комментариев" data-id="20117744"></span>
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head comment__head_topic-author comment__head_my-comment " rel="20117744">
          <a href="https://habr.com/ru/users/epishman/" class="user-info user-info_inline" rel="user-popover" data-user-login="epishman">
    <img src="Swift%20%D0%BF%D1%80%D0%BE%D1%82%D0%B8%D0%B2%20Rust%20%E2%80%94%20%D0%B1%D0%B5%D0%BD%D1%87%D0%BC%D0%B0%D1%80%D0%BA%D0%B8%D0%BD%D0%B3%20%D0%BD%D0%B0%20Linux%20%D1%81%20(%D0%BD%D0%B5)%D0%BF%D0%BE%D0%BD%D1%8F%D1%82%D0%BD%D1%8B%D0%BC%20%D1%84%D0%B8%D0%BD%D0%B0%D0%BB%D0%BE%D0%BC%20_%20%D0%A5%D0%B0%D0%B1%D1%80_files/ec0d88c4853c0d36d44bd0526dcfa8d7.png" class="user-info__image-pic user-info__image-pic_small" width="24" height="24">
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">epishman</span>
</a>

          
          <time class="comment__date-time comment__date-time_published">6 мая 2019 в 13:06</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="#comment_20117744" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="20117744" data-action="add" title="Добавить в закладки"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#book"></use></svg></a>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <span class="icon_comment-branch js-comment_tree" data-id="20117744" data-parent_id="20117568" title="Показать ветку комментариев"><svg width="8" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#tree"></use></svg></span>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#comment_20117568" class="icon_comment-arrow-up js-comment_parent" data-id="20117744" data-parent_id="20117568" title="Показать предыдущий комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
    </li>

  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="#comment_20117744" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="20117744" data-parent_id="20117568" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="20117744" data-post-target="450512" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="plus" onclick="comment_vote(this);" title="За свои комментарии голосовать нельзя" disabled="disabled"><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter   js-score" title="Всего голосов 0: ↑0 и ↓0">0</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="За свои комментарии голосовать нельзя" disabled="disabled"><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message ">Спасибо. Я почему заинтересовался
 — в Rust ведь тоже активно пользуют счетчики ссылок Rc и Arc, особенно в
 многопоточном программировании с разделяемым состоянием. Теперь буду 
избегать счетчиков всеми силами :)</div>

        <div class="comment__footer">
    <a href="#reply" class="comment__footer-link reply_link" onclick="return comment_show_reply_form(20117744 )">Ответить</a>


</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-1" id="reply_comments_20117744">  <li class="content-list__item content-list__item_comment js-comment " rel="20117788">
    
    <span class="parent_id" data-parent_id="20117744"></span>
    <div class="comment" id="comment_20117788">
      <span class="comment__collapse" title="Свернуть/развернуть ветку комментариев" data-id="20117788"></span>
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head   " rel="20117788">
          <a href="https://habr.com/ru/users/TargetSan/" class="user-info user-info_inline" rel="user-popover" data-user-login="TargetSan">
    <svg class="default-image default-image_mini default-image_blue" width="24" height="24"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#slug"></use></svg>
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">TargetSan</span>
</a>

          
          <time class="comment__date-time comment__date-time_published">6 мая 2019 в 13:14</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="#comment_20117788" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="20117788" data-action="add" title="Добавить в закладки"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#book"></use></svg></a>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <span class="icon_comment-branch js-comment_tree" data-id="20117788" data-parent_id="20117744" title="Показать ветку комментариев"><svg width="8" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#tree"></use></svg></span>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#comment_20117744" class="icon_comment-arrow-up js-comment_parent" data-id="20117788" data-parent_id="20117744" title="Показать предыдущий комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
    </li>

  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="#comment_20117788" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="20117788" data-parent_id="20117744" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="20117788" data-post-target="450512" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small voting-wjt__button_plus" data-action="plus" onclick="comment_vote(this);" title="Вы проголосовали положительно " disabled="disabled"><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter voting-wjt__counter_positive  js-score" title="Всего голосов +5: ↑5 и ↓0">+5</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="Вы проголосовали положительно , отменить голос нельзя" disabled="disabled"><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message "><p>В Rust их в очень многих 
случаях можно избежать. В многопоточке они используются для целей 
шаринга состояния. Обычно это одна копия на задачу, что, как правило, 
почти незаметно. А вот в Swift, насколько я понимаю, любое ссылочное 
значение это <code>Arc&lt;_&gt;</code>.</p></div>

        <div class="comment__footer">
    <a href="#reply" class="comment__footer-link reply_link" onclick="return comment_show_reply_form(20117788 )">Ответить</a>


</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-2" id="reply_comments_20117788"></ul>
  </li>
  <li class="content-list__item content-list__item_comment js-comment " rel="20118548">
    
    <span class="parent_id" data-parent_id="20117744"></span>
    <div class="comment" id="comment_20118548">
      <span class="comment__collapse" title="Свернуть/развернуть ветку комментариев" data-id="20118548"></span>
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head   " rel="20118548">
          <a href="https://habr.com/ru/users/creker/" class="user-info user-info_inline" rel="user-popover" data-user-login="creker">
    <img src="Swift%20%D0%BF%D1%80%D0%BE%D1%82%D0%B8%D0%B2%20Rust%20%E2%80%94%20%D0%B1%D0%B5%D0%BD%D1%87%D0%BC%D0%B0%D1%80%D0%BA%D0%B8%D0%BD%D0%B3%20%D0%BD%D0%B0%20Linux%20%D1%81%20(%D0%BD%D0%B5)%D0%BF%D0%BE%D0%BD%D1%8F%D1%82%D0%BD%D1%8B%D0%BC%20%D1%84%D0%B8%D0%BD%D0%B0%D0%BB%D0%BE%D0%BC%20_%20%D0%A5%D0%B0%D0%B1%D1%80_files/58738e1e5c93e6de80dc66bb4fbef5bd.png" class="user-info__image-pic user-info__image-pic_small" width="24" height="24">
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">creker</span>
</a>

          
          <time class="comment__date-time comment__date-time_published">6 мая 2019 в 15:02</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="#comment_20118548" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="20118548" data-action="add" title="Добавить в закладки"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#book"></use></svg></a>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <span class="icon_comment-branch js-comment_tree" data-id="20118548" data-parent_id="20117744" title="Показать ветку комментариев"><svg width="8" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#tree"></use></svg></span>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#comment_20117744" class="icon_comment-arrow-up js-comment_parent" data-id="20118548" data-parent_id="20117744" title="Показать предыдущий комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
    </li>

  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="#comment_20118548" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="20118548" data-parent_id="20117744" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="20118548" data-post-target="450512" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small voting-wjt__button_plus" data-action="plus" onclick="comment_vote(this);" title="Вы проголосовали положительно " disabled="disabled"><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter   js-score" title="Всего голосов 0: ↑1 и ↓1">0</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="Вы проголосовали положительно , отменить голос нельзя" disabled="disabled"><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message ">Счетчики разные бывают и есть 
подозрение, что причина тормозов в их универсальности в свифт. Там же 
сразу сделано с прицелом на потокобезопаность, а значит куча атомарных 
операций. Если посмотреть на swift_retain и swift_release, то там 
найдется довольно нетривиальный код даже в fast-path с атомарными 
инструкциями и циклами. Это при том, что еще есть slow-path. И такие 
вызовы компилятор пачками повсюду вставляет везде, где хоть как-то 
фигурируют объекты, покрываемые ARC. Да еще и не инлайнится это все что,
 как правило, делают в более продвинутых сборщиках мусора, где есть 
барьеры.<br>
<br>
В С++ shared_ptr тоже не жалуют по той же причине — он медленный.<br>
<br>
В Rust все таки философия такая, что правила владения максимально 
исключают необходимость в ручном управлении памятью, а счетчики вообще 
как крайний вариант используются.</div>

        <div class="comment__footer">
    <a href="#reply" class="comment__footer-link reply_link" onclick="return comment_show_reply_form(20118548 )">Ответить</a>


</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-2" id="reply_comments_20118548"></ul>
  </li>
  <li class="content-list__item content-list__item_comment js-comment " rel="20118668">
    
    <span class="parent_id" data-parent_id="20117744"></span>
    <div class="comment" id="comment_20118668">
      <span class="comment__collapse" title="Свернуть/развернуть ветку комментариев" data-id="20118668"></span>
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head   " rel="20118668">
          <a href="https://habr.com/ru/users/modest_man/" class="user-info user-info_inline" rel="user-popover" data-user-login="modest_man">
    <svg class="default-image default-image_mini default-image_pink" width="24" height="24"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#slug"></use></svg>
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">modest_man</span>
</a>

          
          <time class="comment__date-time comment__date-time_published">6 мая 2019 в 15:19</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="#comment_20118668" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="20118668" data-action="add" title="Добавить в закладки"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#book"></use></svg></a>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <span class="icon_comment-branch js-comment_tree" data-id="20118668" data-parent_id="20117744" title="Показать ветку комментариев"><svg width="8" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#tree"></use></svg></span>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#comment_20117744" class="icon_comment-arrow-up js-comment_parent" data-id="20118668" data-parent_id="20117744" title="Показать предыдущий комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
    </li>

  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="#comment_20118668" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="20118668" data-parent_id="20117744" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="20118668" data-post-target="450512" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small voting-wjt__button_plus" data-action="plus" onclick="comment_vote(this);" title="Вы проголосовали положительно " disabled="disabled"><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter voting-wjt__counter_positive  js-score" title="Всего голосов +3: ↑3 и ↓0">+3</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="Вы проголосовали положительно , отменить голос нельзя" disabled="disabled"><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message ">В вашей реализации тормозят не счетчики ссылок, а сравнение строк, хэширование и преобразование типов. <br>
См. скриншот из профайлера: <a href="https://habrastorage.org/webt/9z/ja/gv/9zjagvgpfto07vw_mwsdav40zts.png">habrastorage.org/webt/9z/ja/gv/9zjagvgpfto07vw_mwsdav40zts.png</a></div>

        <div class="comment__footer">
    <a href="#reply" class="comment__footer-link reply_link" onclick="return comment_show_reply_form(20118668 )">Ответить</a>


</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-2" id="reply_comments_20118668">  <li class="content-list__item content-list__item_comment js-comment " rel="20118726">
    
    <span class="parent_id" data-parent_id="20118668"></span>
    <div class="comment" id="comment_20118726">
      <span class="comment__collapse" title="Свернуть/развернуть ветку комментариев" data-id="20118726"></span>
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head comment__head_topic-author comment__head_my-comment " rel="20118726">
          <a href="https://habr.com/ru/users/epishman/" class="user-info user-info_inline" rel="user-popover" data-user-login="epishman">
    <img src="Swift%20%D0%BF%D1%80%D0%BE%D1%82%D0%B8%D0%B2%20Rust%20%E2%80%94%20%D0%B1%D0%B5%D0%BD%D1%87%D0%BC%D0%B0%D1%80%D0%BA%D0%B8%D0%BD%D0%B3%20%D0%BD%D0%B0%20Linux%20%D1%81%20(%D0%BD%D0%B5)%D0%BF%D0%BE%D0%BD%D1%8F%D1%82%D0%BD%D1%8B%D0%BC%20%D1%84%D0%B8%D0%BD%D0%B0%D0%BB%D0%BE%D0%BC%20_%20%D0%A5%D0%B0%D0%B1%D1%80_files/ec0d88c4853c0d36d44bd0526dcfa8d7.png" class="user-info__image-pic user-info__image-pic_small" width="24" height="24">
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">epishman</span>
</a>

          <svg class="icon_comment-edit" title="Комментарий был изменен" width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#pencil"></use></svg>
          <time class="comment__date-time comment__date-time_published">6 мая 2019 в 15:26</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="#comment_20118726" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="20118726" data-action="add" title="Добавить в закладки"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#book"></use></svg></a>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <span class="icon_comment-branch js-comment_tree" data-id="20118726" data-parent_id="20118668" title="Показать ветку комментариев"><svg width="8" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#tree"></use></svg></span>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#comment_20118668" class="icon_comment-arrow-up js-comment_parent" data-id="20118726" data-parent_id="20118668" title="Показать предыдущий комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
    </li>

  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="#comment_20118726" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="20118726" data-parent_id="20118668" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="20118726" data-post-target="450512" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="plus" onclick="comment_vote(this);" title="За свои комментарии голосовать нельзя" disabled="disabled"><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter   js-score" title="Всего голосов 0: ↑0 и ↓0">0</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="За свои комментарии голосовать нельзя" disabled="disabled"><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message ">Класс. Ну, сравнение строк и 
хеширование не отменить, а про приведение типов я догадывался. Непонятно
 правда, как работать с Any иначе, чем описано в документации is? / as?,
 это ж общее место для всех языков — Object в Java, interface{} в Go, 
возможно это грабли конкретной реализации Any в конкретном Swift, я-то 
этот язык толком не знаю.</div>

        <div class="comment__footer">
    <a href="#reply" class="comment__footer-link reply_link" onclick="return comment_show_reply_form(20118726 )">Ответить</a>


</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-3" id="reply_comments_20118726"></ul>
  </li>
  <li class="content-list__item content-list__item_comment js-comment " rel="20118910">
    
    <span class="parent_id" data-parent_id="20118668"></span>
    <div class="comment" id="comment_20118910">
      <span class="comment__collapse" title="Свернуть/развернуть ветку комментариев" data-id="20118910"></span>
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head   " rel="20118910">
          <a href="https://habr.com/ru/users/creker/" class="user-info user-info_inline" rel="user-popover" data-user-login="creker">
    <img src="Swift%20%D0%BF%D1%80%D0%BE%D1%82%D0%B8%D0%B2%20Rust%20%E2%80%94%20%D0%B1%D0%B5%D0%BD%D1%87%D0%BC%D0%B0%D1%80%D0%BA%D0%B8%D0%BD%D0%B3%20%D0%BD%D0%B0%20Linux%20%D1%81%20(%D0%BD%D0%B5)%D0%BF%D0%BE%D0%BD%D1%8F%D1%82%D0%BD%D1%8B%D0%BC%20%D1%84%D0%B8%D0%BD%D0%B0%D0%BB%D0%BE%D0%BC%20_%20%D0%A5%D0%B0%D0%B1%D1%80_files/58738e1e5c93e6de80dc66bb4fbef5bd.png" class="user-info__image-pic user-info__image-pic_small" width="24" height="24">
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">creker</span>
</a>

          
          <time class="comment__date-time comment__date-time_published">6 мая 2019 в 15:50</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="#comment_20118910" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="20118910" data-action="add" title="Добавить в закладки"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#book"></use></svg></a>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <span class="icon_comment-branch js-comment_tree" data-id="20118910" data-parent_id="20118668" title="Показать ветку комментариев"><svg width="8" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#tree"></use></svg></span>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#comment_20118668" class="icon_comment-arrow-up js-comment_parent" data-id="20118910" data-parent_id="20118668" title="Показать предыдущий комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
    </li>

  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="#comment_20118910" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="20118910" data-parent_id="20118668" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="20118910" data-post-target="450512" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="plus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter   js-score" title="Всего голосов 0: ↑0 и ↓0">0</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message ">Ну да, но подсчет ссылок подкосил
 результаты тоже прилично. Если копнуть глубже, то везде в профайле 
фигурируют вызовы рантайма с довольно приличными паузами. Еще хуже в 
самой процедуре хэширования — почти половину ее времени выполнения 
занимают манипуляции со ссылками, которые уходят аж в CoreFoundation. 
Тоже самое со сравнением — на манипуляции райнтайма уходят секунды. Хотя
 тут стоит признать, что если бы все бриджи до Foundation и 
CoreFoundation убрать, то эти бы секунды скорее всего исчезли.</div>

        <div class="comment__footer">
    <a href="#reply" class="comment__footer-link reply_link" onclick="return comment_show_reply_form(20118910 )">Ответить</a>


</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-3" id="reply_comments_20118910"></ul>
  </li>
  <li class="content-list__item content-list__item_comment js-comment " rel="20121158">
    
    <span class="parent_id" data-parent_id="20118668"></span>
    <div class="comment" id="comment_20121158">
      <span class="comment__collapse" title="Свернуть/развернуть ветку комментариев" data-id="20121158"></span>
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head   " rel="20121158">
          <a href="https://habr.com/ru/users/iushakov/" class="user-info user-info_inline" rel="user-popover" data-user-login="iushakov">
    <svg class="default-image default-image_mini default-image_pink" width="24" height="24"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#slug"></use></svg>
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">iushakov</span>
</a>

          <svg class="icon_comment-edit" title="Комментарий был изменен" width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#pencil"></use></svg>
          <time class="comment__date-time comment__date-time_published">7 мая 2019 в 00:03</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="#comment_20121158" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="20121158" data-action="add" title="Добавить в закладки"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#book"></use></svg></a>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <span class="icon_comment-branch js-comment_tree" data-id="20121158" data-parent_id="20118668" title="Показать ветку комментариев"><svg width="8" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#tree"></use></svg></span>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#comment_20118668" class="icon_comment-arrow-up js-comment_parent" data-id="20121158" data-parent_id="20118668" title="Показать предыдущий комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
    </li>

  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="#comment_20121158" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="20121158" data-parent_id="20118668" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="20121158" data-post-target="450512" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="plus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter   js-score" title="Всего голосов 0: ↑0 и ↓0">0</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message ">Это для какой версии macOS и 
Swift? У меня вот так 
(https://habrastorage.org/webt/tk/4e/ji/tk4ejimhubxqfrilanvyrje_rlm.png),
 правда я исправлял несколько проблем.</div>

        <div class="comment__footer">
    <a href="#reply" class="comment__footer-link reply_link" onclick="return comment_show_reply_form(20121158 )">Ответить</a>


</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-3" id="reply_comments_20121158"></ul>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="content-list__item content-list__item_comment js-comment " rel="20117852">
    
    <span class="parent_id" data-parent_id="0"></span>
    <div class="comment" id="comment_20117852">
      <span class="comment__collapse" title="Свернуть/развернуть ветку комментариев" data-id="20117852"></span>
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head   " rel="20117852">
          <a href="https://habr.com/ru/users/Mistand/" class="user-info user-info_inline" rel="user-popover" data-user-login="Mistand">
    <svg class="default-image default-image_mini default-image_blue" width="24" height="24"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#slug"></use></svg>
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">Mistand</span>
</a>

          
          <time class="comment__date-time comment__date-time_published">6 мая 2019 в 13:26</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="#comment_20117852" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="20117852" data-action="add" title="Добавить в закладки"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#book"></use></svg></a>
    </li>


  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="#comment_20117852" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="20117852" data-parent_id="0" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="20117852" data-post-target="450512" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="plus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter voting-wjt__counter_positive  js-score" title="Всего голосов +1: ↑1 и ↓0">+1</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message "><blockquote>5) В Rust встречаются
 кривые синтаксические конструкции, например если нужно проверить 
значение JSON на пустоту, приходится писать один из 2-х смешных бредов:<br>
</blockquote><br>
<br>
<a href="https://docs.serde.rs/serde_json/value/enum.Value.html#method.is_null">docs.serde.rs/serde_json/value/enum.Value.html#method.is_null</a><br>
<br>
Зачем?</div>

        <div class="comment__footer">
    <a href="#reply" class="comment__footer-link reply_link" onclick="return comment_show_reply_form(20117852 )">Ответить</a>


</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-0" id="reply_comments_20117852">  <li class="content-list__item content-list__item_comment js-comment " rel="20117862">
    
    <span class="parent_id" data-parent_id="20117852"></span>
    <div class="comment" id="comment_20117862">
      <span class="comment__collapse" title="Свернуть/развернуть ветку комментариев" data-id="20117862"></span>
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head comment__head_topic-author comment__head_my-comment " rel="20117862">
          <a href="https://habr.com/ru/users/epishman/" class="user-info user-info_inline" rel="user-popover" data-user-login="epishman">
    <img src="Swift%20%D0%BF%D1%80%D0%BE%D1%82%D0%B8%D0%B2%20Rust%20%E2%80%94%20%D0%B1%D0%B5%D0%BD%D1%87%D0%BC%D0%B0%D1%80%D0%BA%D0%B8%D0%BD%D0%B3%20%D0%BD%D0%B0%20Linux%20%D1%81%20(%D0%BD%D0%B5)%D0%BF%D0%BE%D0%BD%D1%8F%D1%82%D0%BD%D1%8B%D0%BC%20%D1%84%D0%B8%D0%BD%D0%B0%D0%BB%D0%BE%D0%BC%20_%20%D0%A5%D0%B0%D0%B1%D1%80_files/ec0d88c4853c0d36d44bd0526dcfa8d7.png" class="user-info__image-pic user-info__image-pic_small" width="24" height="24">
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">epishman</span>
</a>

          
          <time class="comment__date-time comment__date-time_published">6 мая 2019 в 13:27</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="#comment_20117862" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="20117862" data-action="add" title="Добавить в закладки"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#book"></use></svg></a>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <span class="icon_comment-branch js-comment_tree" data-id="20117862" data-parent_id="20117852" title="Показать ветку комментариев"><svg width="8" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#tree"></use></svg></span>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#comment_20117852" class="icon_comment-arrow-up js-comment_parent" data-id="20117862" data-parent_id="20117852" title="Показать предыдущий комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
    </li>

  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="#comment_20117862" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="20117862" data-parent_id="20117852" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="20117862" data-post-target="450512" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="plus" onclick="comment_vote(this);" title="За свои комментарии голосовать нельзя" disabled="disabled"><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter   js-score" title="Всего голосов 0: ↑0 и ↓0">0</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="За свои комментарии голосовать нельзя" disabled="disabled"><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message ">Ну понятно, добрый дядя 
реализовал этот метод. Но хочется поддержки языка. Были обсуждения 
сделать опции енама отдельными типами, но статус сего непонятен.</div>

        <div class="comment__footer">
    <a href="#reply" class="comment__footer-link reply_link" onclick="return comment_show_reply_form(20117862 )">Ответить</a>


</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-1" id="reply_comments_20117862">  <li class="content-list__item content-list__item_comment js-comment " rel="20118012">
    
    <span class="parent_id" data-parent_id="20117862"></span>
    <div class="comment" id="comment_20118012">
      <span class="comment__collapse" title="Свернуть/развернуть ветку комментариев" data-id="20118012"></span>
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head   " rel="20118012">
          <a href="https://habr.com/ru/users/domix32/" class="user-info user-info_inline" rel="user-popover" data-user-login="domix32">
    <img src="Swift%20%D0%BF%D1%80%D0%BE%D1%82%D0%B8%D0%B2%20Rust%20%E2%80%94%20%D0%B1%D0%B5%D0%BD%D1%87%D0%BC%D0%B0%D1%80%D0%BA%D0%B8%D0%BD%D0%B3%20%D0%BD%D0%B0%20Linux%20%D1%81%20(%D0%BD%D0%B5)%D0%BF%D0%BE%D0%BD%D1%8F%D1%82%D0%BD%D1%8B%D0%BC%20%D1%84%D0%B8%D0%BD%D0%B0%D0%BB%D0%BE%D0%BC%20_%20%D0%A5%D0%B0%D0%B1%D1%80_files/7e2a2827914de22fc9d32a5dc7976361.png" class="user-info__image-pic user-info__image-pic_small" width="24" height="24">
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">domix32</span>
</a>

          <svg class="icon_comment-edit" title="Комментарий был изменен" width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#pencil"></use></svg>
          <time class="comment__date-time comment__date-time_published">6 мая 2019 в 13:46</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="#comment_20118012" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="20118012" data-action="add" title="Добавить в закладки"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#book"></use></svg></a>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <span class="icon_comment-branch js-comment_tree" data-id="20118012" data-parent_id="20117862" title="Показать ветку комментариев"><svg width="8" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#tree"></use></svg></span>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#comment_20117862" class="icon_comment-arrow-up js-comment_parent" data-id="20118012" data-parent_id="20117862" title="Показать предыдущий комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
    </li>

  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="#comment_20118012" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="20118012" data-parent_id="20117862" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="20118012" data-post-target="450512" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="plus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter   js-score" title="Всего голосов 0: ↑0 и ↓0">0</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message "><p>Мне кажется немного покурив доку можно при помощи процедурных макросов избавиться от подобного, оставив обработку недрам <code>serde</code>. Правда не уверен, что это можно сделать потоково. </p></div>

        <div class="comment__footer">
    <a href="#reply" class="comment__footer-link reply_link" onclick="return comment_show_reply_form(20118012 )">Ответить</a>


</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-2" id="reply_comments_20118012"></ul>
  </li>
  <li class="content-list__item content-list__item_comment js-comment " rel="20118072">
    
    <span class="parent_id" data-parent_id="20117862"></span>
    <div class="comment" id="comment_20118072">
      <span class="comment__collapse" title="Свернуть/развернуть ветку комментариев" data-id="20118072"></span>
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head   " rel="20118072">
          <a href="https://habr.com/ru/users/PsyHaSTe/" class="user-info user-info_inline" rel="user-popover" data-user-login="PsyHaSTe">
    <img src="Swift%20%D0%BF%D1%80%D0%BE%D1%82%D0%B8%D0%B2%20Rust%20%E2%80%94%20%D0%B1%D0%B5%D0%BD%D1%87%D0%BC%D0%B0%D1%80%D0%BA%D0%B8%D0%BD%D0%B3%20%D0%BD%D0%B0%20Linux%20%D1%81%20(%D0%BD%D0%B5)%D0%BF%D0%BE%D0%BD%D1%8F%D1%82%D0%BD%D1%8B%D0%BC%20%D1%84%D0%B8%D0%BD%D0%B0%D0%BB%D0%BE%D0%BC%20_%20%D0%A5%D0%B0%D0%B1%D1%80_files/7631ac5e5a7e237a937f5f2a74ae4c9e.jpg" class="user-info__image-pic user-info__image-pic_small" width="24" height="24">
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">PsyHaSTe</span>
</a>

          
          <time class="comment__date-time comment__date-time_published">6 мая 2019 в 13:55</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="#comment_20118072" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="20118072" data-action="add" title="Добавить в закладки"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#book"></use></svg></a>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <span class="icon_comment-branch js-comment_tree" data-id="20118072" data-parent_id="20117862" title="Показать ветку комментариев"><svg width="8" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#tree"></use></svg></span>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#comment_20117862" class="icon_comment-arrow-up js-comment_parent" data-id="20118072" data-parent_id="20117862" title="Показать предыдущий комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
    </li>

  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="#comment_20118072" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="20118072" data-parent_id="20117862" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="20118072" data-post-target="450512" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="plus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter   js-score" title="Всего голосов 0: ↑1 и ↓1">0</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message "><p>А смысл? Что отдельные типы дадут?</p></div>

        <div class="comment__footer">
    <a href="#reply" class="comment__footer-link reply_link" onclick="return comment_show_reply_form(20118072 )">Ответить</a>


</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-2" id="reply_comments_20118072"></ul>
  </li>
  <li class="content-list__item content-list__item_comment js-comment " rel="20158460">
    
    <span class="parent_id" data-parent_id="20117862"></span>
    <div class="comment" id="comment_20158460">
      <span class="comment__collapse" title="Свернуть/развернуть ветку комментариев" data-id="20158460"></span>
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head   " rel="20158460">
          <a href="https://habr.com/ru/users/BlessMaster/" class="user-info user-info_inline" rel="user-popover" data-user-login="BlessMaster">
    <img src="Swift%20%D0%BF%D1%80%D0%BE%D1%82%D0%B8%D0%B2%20Rust%20%E2%80%94%20%D0%B1%D0%B5%D0%BD%D1%87%D0%BC%D0%B0%D1%80%D0%BA%D0%B8%D0%BD%D0%B3%20%D0%BD%D0%B0%20Linux%20%D1%81%20(%D0%BD%D0%B5)%D0%BF%D0%BE%D0%BD%D1%8F%D1%82%D0%BD%D1%8B%D0%BC%20%D1%84%D0%B8%D0%BD%D0%B0%D0%BB%D0%BE%D0%BC%20_%20%D0%A5%D0%B0%D0%B1%D1%80_files/b9986633b601d13c3e59c75de39c8dcb.png" class="user-info__image-pic user-info__image-pic_small" width="24" height="24">
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">BlessMaster</span>
</a>

          
          <time class="comment__date-time comment__date-time_published">15 мая 2019 в 22:45</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="#comment_20158460" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="20158460" data-action="add" title="Добавить в закладки"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#book"></use></svg></a>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <span class="icon_comment-branch js-comment_tree" data-id="20158460" data-parent_id="20117862" title="Показать ветку комментариев"><svg width="8" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#tree"></use></svg></span>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#comment_20117862" class="icon_comment-arrow-up js-comment_parent" data-id="20158460" data-parent_id="20117862" title="Показать предыдущий комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
    </li>

  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="#comment_20158460" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="20158460" data-parent_id="20117862" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="20158460" data-post-target="450512" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="plus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter voting-wjt__counter_positive  js-score" title="Всего голосов +1: ↑1 и ↓0">+1</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message "><p>В языке есть поддержка. Варианты без значений можно сравнивать как обычно.</p><br>
<pre><code class="rust hljs"><span class="hljs-keyword"><span class="hljs-keyword">if</span></span> x == <span class="hljs-literal"><span class="hljs-literal">None</span></span> { <span class="hljs-comment"><span class="hljs-comment">/* ... */</span></span> }</code></pre><br>
<p>Варианты со значениями — только через <code>if let Some(_) = x</code>.
 Просто потому, что здесь уже нужно решать, что мы делаем с запакованным
 значением: перемещаем, ссылаемся, просто игнорируем. В этом случае 
отдельный метод <code>if x.is_some()</code> вполне адекватен. Тем более, что его можно использовать в каком-нибудь функциональном контексте вроде <code>it.filter(Option::is_some)</code> или <code>it.filter(Result::is_ok)</code>.</p><br>
<p>Конечно, в части случаев может показаться удобным писать в духе <code>if x is Some</code>.
 Но это настолько частный случай… Ведь декомпозиция это очень мощный 
инструмент, здесь и более сложные выражения можно использовать, 
например: <code>if let Some(Err(_)) = x</code>. Тут над адекватным синтаксисом для <code>is</code> уже стоит хорошо подумать.</p><br>
<p>А надо ли оно, что-то другое, когда есть уже универсальная 
декомпозиция, общая и для присваивания, и для матчинга, и для аргументов
 функций, у которой <code>if let</code> — это лишь частный случай распаковки не всех вариантов?</p><br>
<p>Может быть. Но над этим нужно действительно хорошо подумать. Первое 
впечатление "хотелось бы как в ..." может оказаться обманчивым.</p></div>

        <div class="comment__footer">
    <a href="#reply" class="comment__footer-link reply_link" onclick="return comment_show_reply_form(20158460 )">Ответить</a>


</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-2" id="reply_comments_20158460">  <li class="content-list__item content-list__item_comment js-comment " rel="20158596">
    
    <span class="parent_id" data-parent_id="20158460"></span>
    <div class="comment" id="comment_20158596">
      <span class="comment__collapse" title="Свернуть/развернуть ветку комментариев" data-id="20158596"></span>
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head   " rel="20158596">
          <a href="https://habr.com/ru/users/BlessMaster/" class="user-info user-info_inline" rel="user-popover" data-user-login="BlessMaster">
    <img src="Swift%20%D0%BF%D1%80%D0%BE%D1%82%D0%B8%D0%B2%20Rust%20%E2%80%94%20%D0%B1%D0%B5%D0%BD%D1%87%D0%BC%D0%B0%D1%80%D0%BA%D0%B8%D0%BD%D0%B3%20%D0%BD%D0%B0%20Linux%20%D1%81%20(%D0%BD%D0%B5)%D0%BF%D0%BE%D0%BD%D1%8F%D1%82%D0%BD%D1%8B%D0%BC%20%D1%84%D0%B8%D0%BD%D0%B0%D0%BB%D0%BE%D0%BC%20_%20%D0%A5%D0%B0%D0%B1%D1%80_files/b9986633b601d13c3e59c75de39c8dcb.png" class="user-info__image-pic user-info__image-pic_small" width="24" height="24">
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">BlessMaster</span>
</a>

          <svg class="icon_comment-edit" title="Комментарий был изменен" width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#pencil"></use></svg>
          <time class="comment__date-time comment__date-time_published">15 мая 2019 в 23:39</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="#comment_20158596" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="20158596" data-action="add" title="Добавить в закладки"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#book"></use></svg></a>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <span class="icon_comment-branch js-comment_tree" data-id="20158596" data-parent_id="20158460" title="Показать ветку комментариев"><svg width="8" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#tree"></use></svg></span>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#comment_20158460" class="icon_comment-arrow-up js-comment_parent" data-id="20158596" data-parent_id="20158460" title="Показать предыдущий комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
    </li>

  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="#comment_20158596" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="20158596" data-parent_id="20158460" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="20158596" data-post-target="450512" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="plus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter   js-score" title="Всего голосов 0: ↑0 и ↓0">0</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message "><blockquote>Варианты со значениями — только через <code>if let</code></blockquote><p>Прошу прощения, здесь стоит уточнить: "если мы не ожидаем какое-то конкретное значение".<br>
<code>if x == Some(42)</code> и более сложные — точно так же прекрасно работают.</p></div>

        <div class="comment__footer">
    <a href="#reply" class="comment__footer-link reply_link" onclick="return comment_show_reply_form(20158596 )">Ответить</a>


</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-3" id="reply_comments_20158596"></ul>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="content-list__item content-list__item_comment js-comment " rel="20118028">
    
    <span class="parent_id" data-parent_id="0"></span>
    <div class="comment" id="comment_20118028">
      <span class="comment__collapse" title="Свернуть/развернуть ветку комментариев" data-id="20118028"></span>
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head   " rel="20118028">
          <a href="https://habr.com/ru/users/PsyHaSTe/" class="user-info user-info_inline" rel="user-popover" data-user-login="PsyHaSTe">
    <img src="Swift%20%D0%BF%D1%80%D0%BE%D1%82%D0%B8%D0%B2%20Rust%20%E2%80%94%20%D0%B1%D0%B5%D0%BD%D1%87%D0%BC%D0%B0%D1%80%D0%BA%D0%B8%D0%BD%D0%B3%20%D0%BD%D0%B0%20Linux%20%D1%81%20(%D0%BD%D0%B5)%D0%BF%D0%BE%D0%BD%D1%8F%D1%82%D0%BD%D1%8B%D0%BC%20%D1%84%D0%B8%D0%BD%D0%B0%D0%BB%D0%BE%D0%BC%20_%20%D0%A5%D0%B0%D0%B1%D1%80_files/7631ac5e5a7e237a937f5f2a74ae4c9e.jpg" class="user-info__image-pic user-info__image-pic_small" width="24" height="24">
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">PsyHaSTe</span>
</a>

          
          <time class="comment__date-time comment__date-time_published">6 мая 2019 в 13:50</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="#comment_20118028" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="20118028" data-action="add" title="Добавить в закладки"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#book"></use></svg></a>
    </li>


  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="#comment_20118028" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="20118028" data-parent_id="0" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="20118028" data-post-target="450512" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="plus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter voting-wjt__counter_positive  js-score" title="Всего голосов +3: ↑3 и ↓0">+3</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message "><blockquote>Бинарник получился не маленким — 1,9 Мб, зато он один (про тупой линковщик Rust известно давно, обещaют починить).</blockquote><p>Запускали с lto=true? Дебажные символы оставляли? Все это дает размер. Подробнее <a href="https://lifthrasiir.github.io/rustlog/why-is-a-rust-executable-large.html">здесь</a>.</p><br>
<blockquote>Опциональный тип данных Swift (а также оператор приведения 
типов) сделаны синтаксически более изящно, через постфиксы ?! — в 
отличие от неуклюжего растового unwrap()</blockquote><p>В коде не должно
 быть unwrap, если только вы не знаете чего-то, чего не знает 
компилятор, например, что значение всегда есть. Да и вообще в программе 
встречается 2 раза, и хорошо, что видно, где программа может упасть.</p><br>
<blockquote>В Rust встречаются кривые синтаксические конструкции, 
например если нужно проверить значение JSON на пустоту, приходится 
писать один из 2-х смешных бредов:<br>
<br>
…<br>
<br>
хотя напрашиваются очевидные варианты:</blockquote><p>Зачем плодить сахар на ровном месте? Зачем писать <code>if myVal is Null</code> если <code>if let Null = myVal</code>
 именно это и делает? Два одинаковых способа в языке делать одно и то же
 обычно не поощряется, особенно когда разница в одно ключевое слово.</p><br>
<hr><br>
<p>Попробую в свободное время покрутить реализацию, вам рекомендую добавить по крайней мере lto=true и сравнить еще разок.</p></div>

        <div class="comment__footer">
    <a href="#reply" class="comment__footer-link reply_link" onclick="return comment_show_reply_form(20118028 )">Ответить</a>


</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-0" id="reply_comments_20118028">  <li class="content-list__item content-list__item_comment js-comment " rel="20118070">
    
    <span class="parent_id" data-parent_id="20118028"></span>
    <div class="comment" id="comment_20118070">
      <span class="comment__collapse" title="Свернуть/развернуть ветку комментариев" data-id="20118070"></span>
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head comment__head_topic-author comment__head_my-comment " rel="20118070">
          <a href="https://habr.com/ru/users/epishman/" class="user-info user-info_inline" rel="user-popover" data-user-login="epishman">
    <img src="Swift%20%D0%BF%D1%80%D0%BE%D1%82%D0%B8%D0%B2%20Rust%20%E2%80%94%20%D0%B1%D0%B5%D0%BD%D1%87%D0%BC%D0%B0%D1%80%D0%BA%D0%B8%D0%BD%D0%B3%20%D0%BD%D0%B0%20Linux%20%D1%81%20(%D0%BD%D0%B5)%D0%BF%D0%BE%D0%BD%D1%8F%D1%82%D0%BD%D1%8B%D0%BC%20%D1%84%D0%B8%D0%BD%D0%B0%D0%BB%D0%BE%D0%BC%20_%20%D0%A5%D0%B0%D0%B1%D1%80_files/ec0d88c4853c0d36d44bd0526dcfa8d7.png" class="user-info__image-pic user-info__image-pic_small" width="24" height="24">
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">epishman</span>
</a>

          
          <time class="comment__date-time comment__date-time_published">6 мая 2019 в 13:55</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="#comment_20118070" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="20118070" data-action="add" title="Добавить в закладки"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#book"></use></svg></a>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <span class="icon_comment-branch js-comment_tree" data-id="20118070" data-parent_id="20118028" title="Показать ветку комментариев"><svg width="8" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#tree"></use></svg></span>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#comment_20118028" class="icon_comment-arrow-up js-comment_parent" data-id="20118070" data-parent_id="20118028" title="Показать предыдущий комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
    </li>

  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="#comment_20118070" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="20118070" data-parent_id="20118028" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="20118070" data-post-target="450512" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="plus" onclick="comment_vote(this);" title="За свои комментарии голосовать нельзя" disabled="disabled"><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter   js-score" title="Всего голосов 0: ↑0 и ↓0">0</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="За свои комментарии голосовать нельзя" disabled="disabled"><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message ">Спасибо, со всем согласен, но как сказать расту, что я хочу сделать проверку на НЕ-НАЛ?<br>
if !(let Null = myVal)<br>
или<br>
if let Null != myVal<br>
возможно, конечно, что это единственные грабли, или я чего не знаю.</div>

        <div class="comment__footer">
    <a href="#reply" class="comment__footer-link reply_link" onclick="return comment_show_reply_form(20118070 )">Ответить</a>


</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-1" id="reply_comments_20118070">  <li class="content-list__item content-list__item_comment js-comment " rel="20118080">
    
    <span class="parent_id" data-parent_id="20118070"></span>
    <div class="comment" id="comment_20118080">
      <span class="comment__collapse" title="Свернуть/развернуть ветку комментариев" data-id="20118080"></span>
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head   " rel="20118080">
          <a href="https://habr.com/ru/users/PsyHaSTe/" class="user-info user-info_inline" rel="user-popover" data-user-login="PsyHaSTe">
    <img src="Swift%20%D0%BF%D1%80%D0%BE%D1%82%D0%B8%D0%B2%20Rust%20%E2%80%94%20%D0%B1%D0%B5%D0%BD%D1%87%D0%BC%D0%B0%D1%80%D0%BA%D0%B8%D0%BD%D0%B3%20%D0%BD%D0%B0%20Linux%20%D1%81%20(%D0%BD%D0%B5)%D0%BF%D0%BE%D0%BD%D1%8F%D1%82%D0%BD%D1%8B%D0%BC%20%D1%84%D0%B8%D0%BD%D0%B0%D0%BB%D0%BE%D0%BC%20_%20%D0%A5%D0%B0%D0%B1%D1%80_files/7631ac5e5a7e237a937f5f2a74ae4c9e.jpg" class="user-info__image-pic user-info__image-pic_small" width="24" height="24">
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">PsyHaSTe</span>
</a>

          
          <time class="comment__date-time comment__date-time_published">6 мая 2019 в 13:56</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="#comment_20118080" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="20118080" data-action="add" title="Добавить в закладки"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#book"></use></svg></a>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <span class="icon_comment-branch js-comment_tree" data-id="20118080" data-parent_id="20118070" title="Показать ветку комментариев"><svg width="8" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#tree"></use></svg></span>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#comment_20118070" class="icon_comment-arrow-up js-comment_parent" data-id="20118080" data-parent_id="20118070" title="Показать предыдущий комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
    </li>

  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="#comment_20118080" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="20118080" data-parent_id="20118070" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="20118080" data-post-target="450512" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="plus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter voting-wjt__counter_positive  js-score" title="Всего голосов +1: ↑1 и ↓0">+1</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message "><p>Есть пропозал, но его статус пока не очень понятен: <a href="https://github.com/mbrubeck/rfcs/blob/if-not-let/text/0000-let-else.md">https://github.com/mbrubeck/rfcs/blob/if-not-let/text/0000-let-else.md</a></p></div>

        <div class="comment__footer">
    <a href="#reply" class="comment__footer-link reply_link" onclick="return comment_show_reply_form(20118080 )">Ответить</a>


</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-2" id="reply_comments_20118080">  <li class="content-list__item content-list__item_comment js-comment " rel="20118090">
    
    <span class="parent_id" data-parent_id="20118080"></span>
    <div class="comment" id="comment_20118090">
      <span class="comment__collapse" title="Свернуть/развернуть ветку комментариев" data-id="20118090"></span>
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head comment__head_topic-author comment__head_my-comment " rel="20118090">
          <a href="https://habr.com/ru/users/epishman/" class="user-info user-info_inline" rel="user-popover" data-user-login="epishman">
    <img src="Swift%20%D0%BF%D1%80%D0%BE%D1%82%D0%B8%D0%B2%20Rust%20%E2%80%94%20%D0%B1%D0%B5%D0%BD%D1%87%D0%BC%D0%B0%D1%80%D0%BA%D0%B8%D0%BD%D0%B3%20%D0%BD%D0%B0%20Linux%20%D1%81%20(%D0%BD%D0%B5)%D0%BF%D0%BE%D0%BD%D1%8F%D1%82%D0%BD%D1%8B%D0%BC%20%D1%84%D0%B8%D0%BD%D0%B0%D0%BB%D0%BE%D0%BC%20_%20%D0%A5%D0%B0%D0%B1%D1%80_files/ec0d88c4853c0d36d44bd0526dcfa8d7.png" class="user-info__image-pic user-info__image-pic_small" width="24" height="24">
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">epishman</span>
</a>

          
          <time class="comment__date-time comment__date-time_published">6 мая 2019 в 13:58</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="#comment_20118090" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="20118090" data-action="add" title="Добавить в закладки"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#book"></use></svg></a>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <span class="icon_comment-branch js-comment_tree" data-id="20118090" data-parent_id="20118080" title="Показать ветку комментариев"><svg width="8" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#tree"></use></svg></span>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#comment_20118080" class="icon_comment-arrow-up js-comment_parent" data-id="20118090" data-parent_id="20118080" title="Показать предыдущий комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
    </li>

  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="#comment_20118090" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="20118090" data-parent_id="20118080" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="20118090" data-post-target="450512" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="plus" onclick="comment_vote(this);" title="За свои комментарии голосовать нельзя" disabled="disabled"><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter   js-score" title="Всего голосов 0: ↑0 и ↓0">0</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="За свои комментарии голосовать нельзя" disabled="disabled"><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message ">Супер!</div>

        <div class="comment__footer">
    <a href="#reply" class="comment__footer-link reply_link" onclick="return comment_show_reply_form(20118090 )">Ответить</a>


</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-3" id="reply_comments_20118090">  <li class="content-list__item content-list__item_comment js-comment " rel="20118112">
    
    <span class="parent_id" data-parent_id="20118090"></span>
    <div class="comment" id="comment_20118112">
      <span class="comment__collapse" title="Свернуть/развернуть ветку комментариев" data-id="20118112"></span>
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head   " rel="20118112">
          <a href="https://habr.com/ru/users/PsyHaSTe/" class="user-info user-info_inline" rel="user-popover" data-user-login="PsyHaSTe">
    <img src="Swift%20%D0%BF%D1%80%D0%BE%D1%82%D0%B8%D0%B2%20Rust%20%E2%80%94%20%D0%B1%D0%B5%D0%BD%D1%87%D0%BC%D0%B0%D1%80%D0%BA%D0%B8%D0%BD%D0%B3%20%D0%BD%D0%B0%20Linux%20%D1%81%20(%D0%BD%D0%B5)%D0%BF%D0%BE%D0%BD%D1%8F%D1%82%D0%BD%D1%8B%D0%BC%20%D1%84%D0%B8%D0%BD%D0%B0%D0%BB%D0%BE%D0%BC%20_%20%D0%A5%D0%B0%D0%B1%D1%80_files/7631ac5e5a7e237a937f5f2a74ae4c9e.jpg" class="user-info__image-pic user-info__image-pic_small" width="24" height="24">
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">PsyHaSTe</span>
</a>

          
          <time class="comment__date-time comment__date-time_published">6 мая 2019 в 14:00</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="#comment_20118112" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="20118112" data-action="add" title="Добавить в закладки"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#book"></use></svg></a>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <span class="icon_comment-branch js-comment_tree" data-id="20118112" data-parent_id="20118090" title="Показать ветку комментариев"><svg width="8" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#tree"></use></svg></span>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#comment_20118090" class="icon_comment-arrow-up js-comment_parent" data-id="20118112" data-parent_id="20118090" title="Показать предыдущий комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
    </li>

  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="#comment_20118112" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="20118112" data-parent_id="20118090" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="20118112" data-post-target="450512" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small voting-wjt__button_plus" data-action="plus" onclick="comment_vote(this);" title="Вы проголосовали положительно " disabled="disabled"><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter voting-wjt__counter_positive  js-score" title="Всего голосов +3: ↑3 и ↓0">+3</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="Вы проголосовали положительно , отменить голос нельзя" disabled="disabled"><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message "><p>Ну и да, всегда можно написать макрос, в данном случае сделано за нас: <a href="https://crates.io/crates/derive_is_enum_variant">https://crates.io/crates/derive_is_enum_variant</a></p></div>

        <div class="comment__footer">
    <a href="#reply" class="comment__footer-link reply_link" onclick="return comment_show_reply_form(20118112 )">Ответить</a>


</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-4" id="reply_comments_20118112"></ul>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="content-list__item content-list__item_comment js-comment " rel="20158516">
    
    <span class="parent_id" data-parent_id="20118070"></span>
    <div class="comment" id="comment_20158516">
      <span class="comment__collapse" title="Свернуть/развернуть ветку комментариев" data-id="20158516"></span>
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head   " rel="20158516">
          <a href="https://habr.com/ru/users/BlessMaster/" class="user-info user-info_inline" rel="user-popover" data-user-login="BlessMaster">
    <img src="Swift%20%D0%BF%D1%80%D0%BE%D1%82%D0%B8%D0%B2%20Rust%20%E2%80%94%20%D0%B1%D0%B5%D0%BD%D1%87%D0%BC%D0%B0%D1%80%D0%BA%D0%B8%D0%BD%D0%B3%20%D0%BD%D0%B0%20Linux%20%D1%81%20(%D0%BD%D0%B5)%D0%BF%D0%BE%D0%BD%D1%8F%D1%82%D0%BD%D1%8B%D0%BC%20%D1%84%D0%B8%D0%BD%D0%B0%D0%BB%D0%BE%D0%BC%20_%20%D0%A5%D0%B0%D0%B1%D1%80_files/b9986633b601d13c3e59c75de39c8dcb.png" class="user-info__image-pic user-info__image-pic_small" width="24" height="24">
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">BlessMaster</span>
</a>

          
          <time class="comment__date-time comment__date-time_published">15 мая 2019 в 23:08</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="#comment_20158516" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="20158516" data-action="add" title="Добавить в закладки"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#book"></use></svg></a>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <span class="icon_comment-branch js-comment_tree" data-id="20158516" data-parent_id="20118070" title="Показать ветку комментариев"><svg width="8" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#tree"></use></svg></span>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#comment_20118070" class="icon_comment-arrow-up js-comment_parent" data-id="20158516" data-parent_id="20118070" title="Показать предыдущий комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
    </li>

  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="#comment_20158516" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="20158516" data-parent_id="20118070" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="20158516" data-post-target="450512" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="plus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter   js-score" title="Всего голосов 0: ↑0 и ↓0">0</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message "><p>Как я в другом комментарии написал, можно таки полноценно сравнивать в духе <code>if my_val != None</code> с вариантами без значений. Плюс всегда есть <code>else</code>,
 хотя он плох по двум причинам. С одной стороны — действительно не так 
красиво, и хорошо, что есть альтернатива. С другой — если там какое-то 
запакованное значение, его очень редко нужно игнорировать, поэтому 
знание о том, что "здесь не вариант А" — мало/редко полезно. Более того,
 и это самое важное, открытое множество вариантов перечисления — это 
антипаттерн. Лучше всего обрабатывать все варианты явно, а не полагаться
 на неизменность (ну, допустим, с некоторыми вроде Option, Result, 
Either мы себе это можем позволить, потому что они точно никогда не 
поменяются, но это скорее счастливые исключения). Перечисление может 
отрефакториться (добавятся варианты) и логика "открытого множества" 
может неявно поломаться. При полном перечислении вариантов в образце — 
компилятор нам просто сообщит, что какой-то вариант не обработан, и это —
 ошибка которую обязательно нужно исправить. При открытом множестве — не
 будет даже предупреждения. Разве что линтер в очередной раз 
незамеченный вздохнёт про "место для битья головой", но это не будет 
ничем отличаться от всех предыдущих раз.</p></div>

        <div class="comment__footer">
    <a href="#reply" class="comment__footer-link reply_link" onclick="return comment_show_reply_form(20158516 )">Ответить</a>


</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-2" id="reply_comments_20158516">  <li class="content-list__item content-list__item_comment js-comment " rel="20158920">
    
    <span class="parent_id" data-parent_id="20158516"></span>
    <div class="comment" id="comment_20158920">
      <span class="comment__collapse" title="Свернуть/развернуть ветку комментариев" data-id="20158920"></span>
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head   " rel="20158920">
          <a href="https://habr.com/ru/users/PsyHaSTe/" class="user-info user-info_inline" rel="user-popover" data-user-login="PsyHaSTe">
    <img src="Swift%20%D0%BF%D1%80%D0%BE%D1%82%D0%B8%D0%B2%20Rust%20%E2%80%94%20%D0%B1%D0%B5%D0%BD%D1%87%D0%BC%D0%B0%D1%80%D0%BA%D0%B8%D0%BD%D0%B3%20%D0%BD%D0%B0%20Linux%20%D1%81%20(%D0%BD%D0%B5)%D0%BF%D0%BE%D0%BD%D1%8F%D1%82%D0%BD%D1%8B%D0%BC%20%D1%84%D0%B8%D0%BD%D0%B0%D0%BB%D0%BE%D0%BC%20_%20%D0%A5%D0%B0%D0%B1%D1%80_files/7631ac5e5a7e237a937f5f2a74ae4c9e.jpg" class="user-info__image-pic user-info__image-pic_small" width="24" height="24">
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">PsyHaSTe</span>
</a>

          
          <time class="comment__date-time comment__date-time_published">16 мая 2019 в 02:50</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="#comment_20158920" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="20158920" data-action="add" title="Добавить в закладки"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#book"></use></svg></a>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <span class="icon_comment-branch js-comment_tree" data-id="20158920" data-parent_id="20158516" title="Показать ветку комментариев"><svg width="8" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#tree"></use></svg></span>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#comment_20158516" class="icon_comment-arrow-up js-comment_parent" data-id="20158920" data-parent_id="20158516" title="Показать предыдущий комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
    </li>

  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="#comment_20158920" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="20158920" data-parent_id="20158516" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="20158920" data-post-target="450512" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="plus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter   js-score" title="Всего голосов 0: ↑0 и ↓0">0</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message "><p>Как раз наоборот, для обратной
 совместимости есть специальный способ заставить писать дефолт матчер, 
даже если все ветки обрабатываются, на тот случай, если в будущем 
появится новый вариант. <a href="https://github.com/rust-lang/rfcs/blob/master/text/2008-non-exhaustive.md">См линк</a></p></div>

        <div class="comment__footer">
    <a href="#reply" class="comment__footer-link reply_link" onclick="return comment_show_reply_form(20158920 )">Ответить</a>


</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-3" id="reply_comments_20158920">  <li class="content-list__item content-list__item_comment js-comment " rel="20167656">
    
    <span class="parent_id" data-parent_id="20158920"></span>
    <div class="comment" id="comment_20167656">
      <span class="comment__collapse" title="Свернуть/развернуть ветку комментариев" data-id="20167656"></span>
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head   " rel="20167656">
          <a href="https://habr.com/ru/users/freecoder_xx/" class="user-info user-info_inline" rel="user-popover" data-user-login="freecoder_xx">
    <img src="Swift%20%D0%BF%D1%80%D0%BE%D1%82%D0%B8%D0%B2%20Rust%20%E2%80%94%20%D0%B1%D0%B5%D0%BD%D1%87%D0%BC%D0%B0%D1%80%D0%BA%D0%B8%D0%BD%D0%B3%20%D0%BD%D0%B0%20Linux%20%D1%81%20(%D0%BD%D0%B5)%D0%BF%D0%BE%D0%BD%D1%8F%D1%82%D0%BD%D1%8B%D0%BC%20%D1%84%D0%B8%D0%BD%D0%B0%D0%BB%D0%BE%D0%BC%20_%20%D0%A5%D0%B0%D0%B1%D1%80_files/0c40b0aab930790cf75c1321e40a9912.jpg" class="user-info__image-pic user-info__image-pic_small" width="24" height="24">
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">freecoder_xx</span>
</a>

          
          <time class="comment__date-time comment__date-time_published">17 мая 2019 в 18:44</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="#comment_20167656" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="20167656" data-action="add" title="Добавить в закладки"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#book"></use></svg></a>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <span class="icon_comment-branch js-comment_tree" data-id="20167656" data-parent_id="20158920" title="Показать ветку комментариев"><svg width="8" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#tree"></use></svg></span>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#comment_20158920" class="icon_comment-arrow-up js-comment_parent" data-id="20167656" data-parent_id="20158920" title="Показать предыдущий комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
    </li>

  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="#comment_20167656" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="20167656" data-parent_id="20158920" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="20167656" data-post-target="450512" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="plus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter   js-score" title="Всего голосов 0: ↑0 и ↓0">0</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message "><p>Просто это другое 
использование. В разных случаях пропуск вариантов может быть как 
желаемым поведением, так и местом потенциальной ошибки. Зависит от целей
 обработки перечисления.</p></div>

        <div class="comment__footer">
    <a href="#reply" class="comment__footer-link reply_link" onclick="return comment_show_reply_form(20167656 )">Ответить</a>


</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-4" id="reply_comments_20167656"></ul>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="content-list__item content-list__item_comment js-comment " rel="20118150">
    
    <span class="parent_id" data-parent_id="20118028"></span>
    <div class="comment" id="comment_20118150">
      <span class="comment__collapse" title="Свернуть/развернуть ветку комментариев" data-id="20118150"></span>
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head   " rel="20118150">
          <a href="https://habr.com/ru/users/veslemay/" class="user-info user-info_inline" rel="user-popover" data-user-login="veslemay">
    <svg class="default-image default-image_mini default-image_pink" width="24" height="24"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#slug"></use></svg>
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">veslemay</span>
</a>

          
          <time class="comment__date-time comment__date-time_published">6 мая 2019 в 14:06</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="#comment_20118150" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="20118150" data-action="add" title="Добавить в закладки"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#book"></use></svg></a>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <span class="icon_comment-branch js-comment_tree" data-id="20118150" data-parent_id="20118028" title="Показать ветку комментариев"><svg width="8" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#tree"></use></svg></span>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#comment_20118028" class="icon_comment-arrow-up js-comment_parent" data-id="20118150" data-parent_id="20118028" title="Показать предыдущий комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
    </li>

  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="#comment_20118150" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="20118150" data-parent_id="20118028" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="20118150" data-post-target="450512" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="plus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter  voting-wjt__counter_negative js-score" title="Всего голосов –12: ↑0 и ↓12">–12</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message comment__message_downgrade comment__message_downgrade-5"><blockquote>Запускали с lto=true?</blockquote><br>
Это не лто, а «лто» — оно не особо поможет. А даже если бы это было 
настоящие лто, то оно бы расту так же не помогло, ведь он состоит из 
косвенных вызовов на 99%, а значит llvm без девиртуализации никакогда не
 узнает — какую именно функцию код может вызвать.<br>
<br>
<blockquote>В коде не должно быть unwrap</blockquote><br>
unwrap — это основа раст-пропаганды. Без unwrap через unwrap 
раст-портянки будут попросту километровым нечто. Аналогично с expect, 
когда его везде пихают в надежде, что неофиты/сторонние наблюдатели 
подумают, что там есть исключения.</div>

        <div class="comment__footer">
    <a href="#reply" class="comment__footer-link reply_link" onclick="return comment_show_reply_form(20118150 )">Ответить</a>


</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-1" id="reply_comments_20118150">  <li class="content-list__item content-list__item_comment js-comment " rel="20118176">
    
    <span class="parent_id" data-parent_id="20118150"></span>
    <div class="comment" id="comment_20118176">
      <span class="comment__collapse" title="Свернуть/развернуть ветку комментариев" data-id="20118176"></span>
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head   " rel="20118176">
          <a href="https://habr.com/ru/users/PsyHaSTe/" class="user-info user-info_inline" rel="user-popover" data-user-login="PsyHaSTe">
    <img src="Swift%20%D0%BF%D1%80%D0%BE%D1%82%D0%B8%D0%B2%20Rust%20%E2%80%94%20%D0%B1%D0%B5%D0%BD%D1%87%D0%BC%D0%B0%D1%80%D0%BA%D0%B8%D0%BD%D0%B3%20%D0%BD%D0%B0%20Linux%20%D1%81%20(%D0%BD%D0%B5)%D0%BF%D0%BE%D0%BD%D1%8F%D1%82%D0%BD%D1%8B%D0%BC%20%D1%84%D0%B8%D0%BD%D0%B0%D0%BB%D0%BE%D0%BC%20_%20%D0%A5%D0%B0%D0%B1%D1%80_files/7631ac5e5a7e237a937f5f2a74ae4c9e.jpg" class="user-info__image-pic user-info__image-pic_small" width="24" height="24">
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">PsyHaSTe</span>
</a>

          
          <time class="comment__date-time comment__date-time_published">6 мая 2019 в 14:12</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="#comment_20118176" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="20118176" data-action="add" title="Добавить в закладки"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#book"></use></svg></a>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <span class="icon_comment-branch js-comment_tree" data-id="20118176" data-parent_id="20118150" title="Показать ветку комментариев"><svg width="8" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#tree"></use></svg></span>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#comment_20118150" class="icon_comment-arrow-up js-comment_parent" data-id="20118176" data-parent_id="20118150" title="Показать предыдущий комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
    </li>

  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="#comment_20118176" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="20118176" data-parent_id="20118150" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="20118176" data-post-target="450512" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="plus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter voting-wjt__counter_positive  js-score" title="Всего голосов +4: ↑4 и ↓0">+4</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message "><blockquote>Это не лто, а «лто» —
 оно не особо поможет. А даже если бы это было настоящие лто, то оно бы 
расту так же не помогло, ведь он состоит из косвенных вызовов на 99%, а 
значит llvm без девиртуализации никакогда не узнает — какую именно 
функцию код может вызвать.</blockquote><p>Эмм, это вообще какой-то поток сознания.</p><br>
<p>Вы сейчас линкуете все подряд, и жалуетесь на большой бинарь.</p><br>
<p>Для сравнения, когда я писал бота с http сервисом, релиз сборка 
весила 130 мегабайт, с lto — 6. Как по мне, разница существенная.</p><br>
<blockquote>unwrap — это основа раст-пропаганды. Без unwrap через unwrap
 раст-портянки будут попросту километровым нечто. Аналогично с expect, 
когда его везде пихают в надежде, что неофиты/сторонние наблюдатели 
подумают, что там есть исключения.</blockquote><p>Да ну? Открываем <a href="https://doc.rust-lang.org/std/option/enum.Option.html#method.unwrap">https://doc.rust-lang.org/std/option/enum.Option.html#method.unwrap</a></p><br>
<blockquote>In general, because this function may panic, its use is 
discouraged. Instead, prefer to use pattern matching and handle the None
 case explicitly.</blockquote><p>Где же раст пропаганда?</p></div>

        <div class="comment__footer">
    <a href="#reply" class="comment__footer-link reply_link" onclick="return comment_show_reply_form(20118176 )">Ответить</a>


</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-2" id="reply_comments_20118176">  <li class="content-list__item content-list__item_comment js-comment " rel="20118210">
    
    <span class="parent_id" data-parent_id="20118176"></span>
    <div class="comment" id="comment_20118210">
      <span class="comment__collapse" title="Свернуть/развернуть ветку комментариев" data-id="20118210"></span>
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head   " rel="20118210">
          <a href="https://habr.com/ru/users/PsyHaSTe/" class="user-info user-info_inline" rel="user-popover" data-user-login="PsyHaSTe">
    <img src="Swift%20%D0%BF%D1%80%D0%BE%D1%82%D0%B8%D0%B2%20Rust%20%E2%80%94%20%D0%B1%D0%B5%D0%BD%D1%87%D0%BC%D0%B0%D1%80%D0%BA%D0%B8%D0%BD%D0%B3%20%D0%BD%D0%B0%20Linux%20%D1%81%20(%D0%BD%D0%B5)%D0%BF%D0%BE%D0%BD%D1%8F%D1%82%D0%BD%D1%8B%D0%BC%20%D1%84%D0%B8%D0%BD%D0%B0%D0%BB%D0%BE%D0%BC%20_%20%D0%A5%D0%B0%D0%B1%D1%80_files/7631ac5e5a7e237a937f5f2a74ae4c9e.jpg" class="user-info__image-pic user-info__image-pic_small" width="24" height="24">
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">PsyHaSTe</span>
</a>

          <svg class="icon_comment-edit" title="Комментарий был изменен" width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#pencil"></use></svg>
          <time class="comment__date-time comment__date-time_published">6 мая 2019 в 14:17</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="#comment_20118210" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="20118210" data-action="add" title="Добавить в закладки"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#book"></use></svg></a>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <span class="icon_comment-branch js-comment_tree" data-id="20118210" data-parent_id="20118176" title="Показать ветку комментариев"><svg width="8" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#tree"></use></svg></span>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#comment_20118176" class="icon_comment-arrow-up js-comment_parent" data-id="20118210" data-parent_id="20118176" title="Показать предыдущий комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
    </li>

  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="#comment_20118210" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="20118210" data-parent_id="20118176" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="20118210" data-post-target="450512" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="plus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter voting-wjt__counter_positive  js-score" title="Всего голосов +4: ↑4 и ↓0">+4</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message "><p>Только что проверил,<br>
без lto: <code>2,61 MB (2&nbsp;737&nbsp;543 bytes)</code><br>
с lto: <code>1,04 MB (1&nbsp;101&nbsp;258 bytes)</code></p><br>
<p>Собирал <code>stable-x86_64-pc-windows-gnu - rustc 1.34.1 (fc50f328b 2019-04-24)</code></p></div>

        <div class="comment__footer">
    <a href="#reply" class="comment__footer-link reply_link" onclick="return comment_show_reply_form(20118210 )">Ответить</a>


</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-3" id="reply_comments_20118210"></ul>
  </li>
  <li class="content-list__item content-list__item_comment js-comment " rel="20118222">
    
    <span class="parent_id" data-parent_id="20118176"></span>
    <div class="comment" id="comment_20118222">
      <span class="comment__collapse" title="Свернуть/развернуть ветку комментариев" data-id="20118222"></span>
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head   " rel="20118222">
          <a href="https://habr.com/ru/users/veslemay/" class="user-info user-info_inline" rel="user-popover" data-user-login="veslemay">
    <svg class="default-image default-image_mini default-image_pink" width="24" height="24"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#slug"></use></svg>
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">veslemay</span>
</a>

          
          <time class="comment__date-time comment__date-time_published">6 мая 2019 в 14:18</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="#comment_20118222" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="20118222" data-action="add" title="Добавить в закладки"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#book"></use></svg></a>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <span class="icon_comment-branch js-comment_tree" data-id="20118222" data-parent_id="20118176" title="Показать ветку комментариев"><svg width="8" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#tree"></use></svg></span>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#comment_20118176" class="icon_comment-arrow-up js-comment_parent" data-id="20118222" data-parent_id="20118176" title="Показать предыдущий комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
    </li>

  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="#comment_20118222" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="20118222" data-parent_id="20118176" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="20118222" data-post-target="450512" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="plus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter  voting-wjt__counter_negative js-score" title="Всего голосов –18: ↑0 и ↓18">–18</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message comment__message_downgrade comment__message_downgrade-5"><blockquote>Эмм, это вообще какой-то поток сознания.<br>
</blockquote><br>
Т.е. адепт раста не осилил понять, вернее осилил и слился, а проблема 
моя? Почему адепт не знает что такое thinlto и какие у него есть 
ограничения, но пытается со мною спорить? Мануал есть, написан.<br>
<br>
<blockquote>Вы сейчас линкуете все подряд, и жалуетесь на большой бинарь.</blockquote><br>
Лично я ничего не линкую.<br>
<br>
<blockquote>Да ну? Открываем <a href="https://doc.rust-lang.org/std/option/enum.Option.html#method.unwrap">doc.rust-lang.org/std/option/enum.Option.html#method.unwrap</a></blockquote><br>
Ну, открываем и? Открываем любой раст-портянку из любой раст-агитки и видим там unwrap через unwrap через expect.<br>
<br>
<blockquote>Где же раст пропаганда?</blockquote><br>
К чему вы это процитировали? Очевидно, что у любой пропаганды созданы 
пути отхода. В этом суть пропаганды, что она неявная. Эта портянка не 
являются частью любой раст-портянке, которая используется в пропаганде. В
 этом смысл.<br>
<br>
Что человек, который привык к исключениям и прочему видя это думает, что
 «так пишут код», но так код не пишут. И именно этим занимается 
пропаганда, что она выдаёт неюзабельные портянки за «полноценные».<br>
<br>
А если мы начинаем заменять всё это на матчи, то портянка из 100строк превращается в 250. На это и делается расчёт.<br>
<br></div>

        <div class="comment__footer">
    <a href="#reply" class="comment__footer-link reply_link" onclick="return comment_show_reply_form(20118222 )">Ответить</a>


</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-3" id="reply_comments_20118222"></ul>
  </li>
</ul>
  </li>
  <li class="content-list__item content-list__item_comment js-comment " rel="20118490">
    
    <span class="parent_id" data-parent_id="20118150"></span>
    <div class="comment" id="comment_20118490">
      <span class="comment__collapse" title="Свернуть/развернуть ветку комментариев" data-id="20118490"></span>
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head   " rel="20118490">
          <a href="https://habr.com/ru/users/PsyHaSTe/" class="user-info user-info_inline" rel="user-popover" data-user-login="PsyHaSTe">
    <img src="Swift%20%D0%BF%D1%80%D0%BE%D1%82%D0%B8%D0%B2%20Rust%20%E2%80%94%20%D0%B1%D0%B5%D0%BD%D1%87%D0%BC%D0%B0%D1%80%D0%BA%D0%B8%D0%BD%D0%B3%20%D0%BD%D0%B0%20Linux%20%D1%81%20(%D0%BD%D0%B5)%D0%BF%D0%BE%D0%BD%D1%8F%D1%82%D0%BD%D1%8B%D0%BC%20%D1%84%D0%B8%D0%BD%D0%B0%D0%BB%D0%BE%D0%BC%20_%20%D0%A5%D0%B0%D0%B1%D1%80_files/7631ac5e5a7e237a937f5f2a74ae4c9e.jpg" class="user-info__image-pic user-info__image-pic_small" width="24" height="24">
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">PsyHaSTe</span>
</a>

          
          <time class="comment__date-time comment__date-time_published">6 мая 2019 в 14:55</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="#comment_20118490" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="20118490" data-action="add" title="Добавить в закладки"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#book"></use></svg></a>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <span class="icon_comment-branch js-comment_tree" data-id="20118490" data-parent_id="20118150" title="Показать ветку комментариев"><svg width="8" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#tree"></use></svg></span>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#comment_20118150" class="icon_comment-arrow-up js-comment_parent" data-id="20118490" data-parent_id="20118150" title="Показать предыдущий комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
    </li>

  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="#comment_20118490" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="20118490" data-parent_id="20118150" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="20118490" data-post-target="450512" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small voting-wjt__button_plus" data-action="plus" onclick="comment_vote(this);" title="Вы проголосовали положительно " disabled="disabled"><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter voting-wjt__counter_positive  js-score" title="Всего голосов +3: ↑3 и ↓0">+3</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="Вы проголосовали положительно , отменить голос нельзя" disabled="disabled"><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message "><p>Вообще отвечать хаму такое себе, но завершая начатое</p><br>
<blockquote>Это не лто, а «лто» — оно не особо поможет. А даже если бы 
это было настоящие лто, то оно бы расту так же не помогло, ведь он 
состоит из косвенных вызовов на 99%, а значит llvm без девиртуализации 
никакогда не узнает — какую именно функцию код может вызвать.</blockquote><p>На всю стандартную библиотеку динамическая диспетчеризация используется ровно в 38 файлах:</p><br>
<p><a href="https://www.google.com/search?q=site%3Agithub.com%2Frust-lang%2Frust%2Fblob%2Fmaster%2Fsrc%2Flibstd+dyn&amp;oq=site%3Agithub.com%2Frust-lang%2Frust%2Fblob%2Fmaster%2Fsrc%2Flibstd+dyn&amp;aqs=chrome..69i64.2936j0j7&amp;sourceid=chrome&amp;ie=UTF-8">https://www.google.com/search?q=site%3Agithub.com%2Frust-lang%2Frust%2Fblob%2Fmaster%2Fsrc%2Flibstd+dyn&amp;oq=site%3Agithub.com%2Frust-lang%2Frust%2Fblob%2Fmaster%2Fsrc%2Flibstd+dyn&amp;aqs=chrome..69i64.2936j0j7&amp;sourceid=chrome&amp;ie=UTF-8</a></p></div>

        <div class="comment__footer">
    <a href="#reply" class="comment__footer-link reply_link" onclick="return comment_show_reply_form(20118490 )">Ответить</a>


</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-2" id="reply_comments_20118490"></ul>
  </li>
</ul>
  </li>
  <li class="content-list__item content-list__item_comment js-comment " rel="20118330">
    
    <span class="parent_id" data-parent_id="20118028"></span>
    <div class="comment" id="comment_20118330">
      <span class="comment__collapse" title="Свернуть/развернуть ветку комментариев" data-id="20118330"></span>
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head comment__head_topic-author comment__head_my-comment " rel="20118330">
          <a href="https://habr.com/ru/users/epishman/" class="user-info user-info_inline" rel="user-popover" data-user-login="epishman">
    <img src="Swift%20%D0%BF%D1%80%D0%BE%D1%82%D0%B8%D0%B2%20Rust%20%E2%80%94%20%D0%B1%D0%B5%D0%BD%D1%87%D0%BC%D0%B0%D1%80%D0%BA%D0%B8%D0%BD%D0%B3%20%D0%BD%D0%B0%20Linux%20%D1%81%20(%D0%BD%D0%B5)%D0%BF%D0%BE%D0%BD%D1%8F%D1%82%D0%BD%D1%8B%D0%BC%20%D1%84%D0%B8%D0%BD%D0%B0%D0%BB%D0%BE%D0%BC%20_%20%D0%A5%D0%B0%D0%B1%D1%80_files/ec0d88c4853c0d36d44bd0526dcfa8d7.png" class="user-info__image-pic user-info__image-pic_small" width="24" height="24">
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">epishman</span>
</a>

          <svg class="icon_comment-edit" title="Комментарий был изменен" width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#pencil"></use></svg>
          <time class="comment__date-time comment__date-time_published">6 мая 2019 в 14:33</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="#comment_20118330" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="20118330" data-action="add" title="Добавить в закладки"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#book"></use></svg></a>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <span class="icon_comment-branch js-comment_tree" data-id="20118330" data-parent_id="20118028" title="Показать ветку комментариев"><svg width="8" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#tree"></use></svg></span>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#comment_20118028" class="icon_comment-arrow-up js-comment_parent" data-id="20118330" data-parent_id="20118028" title="Показать предыдущий комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
    </li>

  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="#comment_20118330" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="20118330" data-parent_id="20118028" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="20118330" data-post-target="450512" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="plus" onclick="comment_vote(this);" title="За свои комментарии голосовать нельзя" disabled="disabled"><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter voting-wjt__counter_positive  js-score" title="Всего голосов +2: ↑2 и ↓0">+2</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="За свои комментарии голосовать нельзя" disabled="disabled"><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message ">lto=true<br>
Бинарь 940 Кб, то есть экономия более чем в 2 раза<br>
Почему-то прохождение теста немного ускорилось — 3.95 сек, возможно экономия на чтении бинаря.</div>

        <div class="comment__footer">
    <a href="#reply" class="comment__footer-link reply_link" onclick="return comment_show_reply_form(20118330 )">Ответить</a>


</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-1" id="reply_comments_20118330">  <li class="content-list__item content-list__item_comment js-comment " rel="20118350">
    
    <span class="parent_id" data-parent_id="20118330"></span>
    <div class="comment" id="comment_20118350">
      <span class="comment__collapse" title="Свернуть/развернуть ветку комментариев" data-id="20118350"></span>
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head   " rel="20118350">
          <a href="https://habr.com/ru/users/PsyHaSTe/" class="user-info user-info_inline" rel="user-popover" data-user-login="PsyHaSTe">
    <img src="Swift%20%D0%BF%D1%80%D0%BE%D1%82%D0%B8%D0%B2%20Rust%20%E2%80%94%20%D0%B1%D0%B5%D0%BD%D1%87%D0%BC%D0%B0%D1%80%D0%BA%D0%B8%D0%BD%D0%B3%20%D0%BD%D0%B0%20Linux%20%D1%81%20(%D0%BD%D0%B5)%D0%BF%D0%BE%D0%BD%D1%8F%D1%82%D0%BD%D1%8B%D0%BC%20%D1%84%D0%B8%D0%BD%D0%B0%D0%BB%D0%BE%D0%BC%20_%20%D0%A5%D0%B0%D0%B1%D1%80_files/7631ac5e5a7e237a937f5f2a74ae4c9e.jpg" class="user-info__image-pic user-info__image-pic_small" width="24" height="24">
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">PsyHaSTe</span>
</a>

          <svg class="icon_comment-edit" title="Комментарий был изменен" width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#pencil"></use></svg>
          <time class="comment__date-time comment__date-time_published">6 мая 2019 в 14:35</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="#comment_20118350" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="20118350" data-action="add" title="Добавить в закладки"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#book"></use></svg></a>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <span class="icon_comment-branch js-comment_tree" data-id="20118350" data-parent_id="20118330" title="Показать ветку комментариев"><svg width="8" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#tree"></use></svg></span>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#comment_20118330" class="icon_comment-arrow-up js-comment_parent" data-id="20118350" data-parent_id="20118330" title="Показать предыдущий комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
    </li>

  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="#comment_20118350" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="20118350" data-parent_id="20118330" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="20118350" data-post-target="450512" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small voting-wjt__button_plus" data-action="plus" onclick="comment_vote(this);" title="Вы проголосовали положительно " disabled="disabled"><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter voting-wjt__counter_positive  js-score" title="Всего голосов +6: ↑6 и ↓0">+6</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="Вы проголосовали положительно , отменить голос нельзя" disabled="disabled"><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message "><p>Компактный бинарь всегда более кэш-френдли, это имеет небольшое влияние на производительность.</p><br>
<hr><br>
<p>Кстати, для замеров раста рекомендую использовать <a href="https://bheisler.github.io/criterion.rs/book/index.html">criterion</a>.</p></div>

        <div class="comment__footer">
    <a href="#reply" class="comment__footer-link reply_link" onclick="return comment_show_reply_form(20118350 )">Ответить</a>


</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-2" id="reply_comments_20118350">  <li class="content-list__item content-list__item_comment js-comment " rel="20120874">
    
    <span class="parent_id" data-parent_id="20118350"></span>
    <div class="comment" id="comment_20120874">
      <span class="comment__collapse" title="Свернуть/развернуть ветку комментариев" data-id="20120874"></span>
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head   " rel="20120874">
          <a href="https://habr.com/ru/users/0xd34df00d/" class="user-info user-info_inline" rel="user-popover" data-user-login="0xd34df00d">
    <img src="Swift%20%D0%BF%D1%80%D0%BE%D1%82%D0%B8%D0%B2%20Rust%20%E2%80%94%20%D0%B1%D0%B5%D0%BD%D1%87%D0%BC%D0%B0%D1%80%D0%BA%D0%B8%D0%BD%D0%B3%20%D0%BD%D0%B0%20Linux%20%D1%81%20(%D0%BD%D0%B5)%D0%BF%D0%BE%D0%BD%D1%8F%D1%82%D0%BD%D1%8B%D0%BC%20%D1%84%D0%B8%D0%BD%D0%B0%D0%BB%D0%BE%D0%BC%20_%20%D0%A5%D0%B0%D0%B1%D1%80_files/44a281ed2f61cafb08b1d38e96e4998a.jpg" class="user-info__image-pic user-info__image-pic_small" width="24" height="24">
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">0xd34df00d</span>
</a>

          
          <time class="comment__date-time comment__date-time_published">6 мая 2019 в 22:39</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="#comment_20120874" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="20120874" data-action="add" title="Добавить в закладки"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#book"></use></svg></a>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <span class="icon_comment-branch js-comment_tree" data-id="20120874" data-parent_id="20118350" title="Показать ветку комментариев"><svg width="8" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#tree"></use></svg></span>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#comment_20118350" class="icon_comment-arrow-up js-comment_parent" data-id="20120874" data-parent_id="20118350" title="Показать предыдущий комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
    </li>

  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="#comment_20120874" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="20120874" data-parent_id="20118350" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="20120874" data-post-target="450512" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="plus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter   js-score" title="Всего голосов 0: ↑0 и ↓0">0</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message "><p>Нет, не всегда. У вас же нет цели весь бинарь в кеш загнать.</p><br>
<p>Гы, в раст портировали хаскелевский критерион, прикольно.</p></div>

        <div class="comment__footer">
    <a href="#reply" class="comment__footer-link reply_link" onclick="return comment_show_reply_form(20120874 )">Ответить</a>


</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-3" id="reply_comments_20120874"></ul>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="content-list__item content-list__item_comment js-comment " rel="20118966">
    
    <span class="parent_id" data-parent_id="0"></span>
    <div class="comment" id="comment_20118966">
      <span class="comment__collapse" title="Свернуть/развернуть ветку комментариев" data-id="20118966"></span>
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head   " rel="20118966">
          <a href="https://habr.com/ru/users/potan/" class="user-info user-info_inline" rel="user-popover" data-user-login="potan">
    <img src="Swift%20%D0%BF%D1%80%D0%BE%D1%82%D0%B8%D0%B2%20Rust%20%E2%80%94%20%D0%B1%D0%B5%D0%BD%D1%87%D0%BC%D0%B0%D1%80%D0%BA%D0%B8%D0%BD%D0%B3%20%D0%BD%D0%B0%20Linux%20%D1%81%20(%D0%BD%D0%B5)%D0%BF%D0%BE%D0%BD%D1%8F%D1%82%D0%BD%D1%8B%D0%BC%20%D1%84%D0%B8%D0%BD%D0%B0%D0%BB%D0%BE%D0%BC%20_%20%D0%A5%D0%B0%D0%B1%D1%80_files/e8ac1727160b43d0140bf8a6b72581ff.jpg" class="user-info__image-pic user-info__image-pic_small" width="24" height="24">
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">potan</span>
</a>

          
          <time class="comment__date-time comment__date-time_published">6 мая 2019 в 15:57</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="#comment_20118966" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="20118966" data-action="add" title="Добавить в закладки"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#book"></use></svg></a>
    </li>


  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="#comment_20118966" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="20118966" data-parent_id="0" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="20118966" data-post-target="450512" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="plus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter   js-score" title="Всего голосов 0: ↑0 и ↓0">0</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message ">Подсчет ссылок часто медленнее — 
ссылки надо инкрементить/декрементить при каждом присваивании и выходе 
из области видимости, хуже того, это надо делать атомарными операциями.<br>
Преимущество в том, что накладные расходы размазаны по времени работы, а
 у gc они появляются в самый неожиданный момент времени (вообще говоря у
 счетчика ссылок тоже может возникнуть непредсказуемая задержка, если 
освобождается сразу длинная цепочка объектов, но все-таки это меньше, 
чем в GC).</div>

        <div class="comment__footer">
    <a href="#reply" class="comment__footer-link reply_link" onclick="return comment_show_reply_form(20118966 )">Ответить</a>


</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-0" id="reply_comments_20118966">  <li class="content-list__item content-list__item_comment js-comment " rel="20118996">
    
    <span class="parent_id" data-parent_id="20118966"></span>
    <div class="comment" id="comment_20118996">
      <span class="comment__collapse" title="Свернуть/развернуть ветку комментариев" data-id="20118996"></span>
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head   " rel="20118996">
          <a href="https://habr.com/ru/users/creker/" class="user-info user-info_inline" rel="user-popover" data-user-login="creker">
    <img src="Swift%20%D0%BF%D1%80%D0%BE%D1%82%D0%B8%D0%B2%20Rust%20%E2%80%94%20%D0%B1%D0%B5%D0%BD%D1%87%D0%BC%D0%B0%D1%80%D0%BA%D0%B8%D0%BD%D0%B3%20%D0%BD%D0%B0%20Linux%20%D1%81%20(%D0%BD%D0%B5)%D0%BF%D0%BE%D0%BD%D1%8F%D1%82%D0%BD%D1%8B%D0%BC%20%D1%84%D0%B8%D0%BD%D0%B0%D0%BB%D0%BE%D0%BC%20_%20%D0%A5%D0%B0%D0%B1%D1%80_files/58738e1e5c93e6de80dc66bb4fbef5bd.png" class="user-info__image-pic user-info__image-pic_small" width="24" height="24">
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">creker</span>
</a>

          
          <time class="comment__date-time comment__date-time_published">6 мая 2019 в 16:02</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="#comment_20118996" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="20118996" data-action="add" title="Добавить в закладки"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#book"></use></svg></a>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <span class="icon_comment-branch js-comment_tree" data-id="20118996" data-parent_id="20118966" title="Показать ветку комментариев"><svg width="8" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#tree"></use></svg></span>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#comment_20118966" class="icon_comment-arrow-up js-comment_parent" data-id="20118996" data-parent_id="20118966" title="Показать предыдущий комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
    </li>

  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="#comment_20118996" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="20118996" data-parent_id="20118966" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="20118996" data-post-target="450512" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="plus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter   js-score" title="Всего голосов 0: ↑0 и ↓0">0</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message ">У современных параллельных 
сборщиков расходы тоже размазаны по времени и практически все этапы идут
 параллельно выполнению кода. Нужные только где-то две паузы на 
считанные миллисекунды, а то и сотни микросекунд. <br>
Преимущество подсчета ссылок только в том, что расход памяти под 
контролем и предскауемые задержки. Тем не менее эти задержки могут быть 
очень большие из-за упомянутых цепочек объектов. Да и циклические ссылки
 не имеет разруливать.</div>

        <div class="comment__footer">
    <a href="#reply" class="comment__footer-link reply_link" onclick="return comment_show_reply_form(20118996 )">Ответить</a>


</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-1" id="reply_comments_20118996"></ul>
  </li>
</ul>
  </li>
  <li class="content-list__item content-list__item_comment js-comment " rel="20119038">
    
    <span class="parent_id" data-parent_id="0"></span>
    <div class="comment" id="comment_20119038">
      <span class="comment__collapse" title="Свернуть/развернуть ветку комментариев" data-id="20119038"></span>
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head   " rel="20119038">
          <a href="https://habr.com/ru/users/nuclight/" class="user-info user-info_inline" rel="user-popover" data-user-login="nuclight">
    <img src="Swift%20%D0%BF%D1%80%D0%BE%D1%82%D0%B8%D0%B2%20Rust%20%E2%80%94%20%D0%B1%D0%B5%D0%BD%D1%87%D0%BC%D0%B0%D1%80%D0%BA%D0%B8%D0%BD%D0%B3%20%D0%BD%D0%B0%20Linux%20%D1%81%20(%D0%BD%D0%B5)%D0%BF%D0%BE%D0%BD%D1%8F%D1%82%D0%BD%D1%8B%D0%BC%20%D1%84%D0%B8%D0%BD%D0%B0%D0%BB%D0%BE%D0%BC%20_%20%D0%A5%D0%B0%D0%B1%D1%80_files/51aef69b8e5d8b70290a2c07e825f274.jpg" class="user-info__image-pic user-info__image-pic_small" width="24" height="24">
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">nuclight</span>
</a>

          <svg class="icon_comment-edit" title="Комментарий был изменен" width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#pencil"></use></svg>
          <time class="comment__date-time comment__date-time_published">6 мая 2019 в 16:08</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="#comment_20119038" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="20119038" data-action="add" title="Добавить в закладки"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#book"></use></svg></a>
    </li>


  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="#comment_20119038" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="20119038" data-parent_id="0" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="20119038" data-post-target="450512" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small voting-wjt__button_plus" data-action="plus" onclick="comment_vote(this);" title="Вы проголосовали положительно " disabled="disabled"><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter voting-wjt__counter_positive  js-score" title="Всего голосов +3: ↑3 и ↓0">+3</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="Вы проголосовали положительно , отменить голос нельзя" disabled="disabled"><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message ">Протестируйте на своём железе 
версию на Perl — у меня менее 10 секунд, хотя язык скриптовый, сборщик 
мусора тоже подсчетом ссылок (как и Swift), и код значительно короче 
обеих в статье.<br>
<pre><code class="perl hljs"><span class="hljs-comment"><span class="hljs-comment">#!/usr/bin/perl</span></span>

<span class="hljs-keyword"><span class="hljs-keyword">use</span></span> v5.<span class="hljs-number"><span class="hljs-number">12</span></span>;
<span class="hljs-keyword"><span class="hljs-keyword">use</span></span> warnings;

<span class="hljs-keyword"><span class="hljs-keyword">use</span></span> JSON::XS;
<span class="hljs-keyword"><span class="hljs-keyword">use</span></span> List::Util <span class="hljs-string"><span class="hljs-string">qw(first)</span></span>;
<span class="hljs-keyword"><span class="hljs-keyword">use</span></span> Time::HiRes <span class="hljs-string"><span class="hljs-string">'time'</span></span>;

<span class="hljs-keyword"><span class="hljs-keyword">my</span></span> $jsontext;

<span class="hljs-keyword"><span class="hljs-keyword">my</span></span> $t0 = <span class="hljs-keyword"><span class="hljs-keyword">time</span></span>;

<span class="hljs-keyword"><span class="hljs-keyword">die</span></span> <span class="hljs-string"><span class="hljs-string">"Specify input file as first argument"</span></span> <span class="hljs-keyword"><span class="hljs-keyword">unless</span></span> <span class="hljs-keyword"><span class="hljs-keyword">defined</span></span> $ARGV[<span class="hljs-number"><span class="hljs-number">0</span></span>] &amp;&amp; -f $ARGV[<span class="hljs-number"><span class="hljs-number">0</span></span>];
<span class="hljs-keyword"><span class="hljs-keyword">open</span></span> FH, <span class="hljs-string"><span class="hljs-string">"&lt;"</span></span>, $ARGV[<span class="hljs-number"><span class="hljs-number">0</span></span>] <span class="hljs-keyword"><span class="hljs-keyword">or</span></span> <span class="hljs-keyword"><span class="hljs-keyword">die</span></span> <span class="hljs-string"><span class="hljs-string">"Can't open input file $ARGV[0]: $!"</span></span>;
<span class="hljs-comment"><span class="hljs-comment"># slurp all file at once :)</span></span>
{
    <span class="hljs-keyword"><span class="hljs-keyword">local</span></span> $/ = <span class="hljs-keyword"><span class="hljs-keyword">undef</span></span>;
    $jsontext = &lt;FH&gt;;
    <span class="hljs-keyword"><span class="hljs-keyword">close</span></span> FH;
}
<span class="hljs-keyword"><span class="hljs-keyword">my</span></span> $t1 = <span class="hljs-keyword"><span class="hljs-keyword">time</span></span>;

<span class="hljs-keyword"><span class="hljs-keyword">say</span></span> <span class="hljs-string"><span class="hljs-string">"read file in "</span></span> . ($t1-$t0) . <span class="hljs-string"><span class="hljs-string">" sec"</span></span>;

<span class="hljs-keyword"><span class="hljs-keyword">my</span></span> $data = decode_json $jsontext;

<span class="hljs-keyword"><span class="hljs-keyword">my</span></span> $t2 = <span class="hljs-keyword"><span class="hljs-keyword">time</span></span>;
<span class="hljs-keyword"><span class="hljs-keyword">say</span></span> <span class="hljs-string"><span class="hljs-string">"decoded JSON in "</span></span> . ($t2-$t1) . <span class="hljs-string"><span class="hljs-string">" sec"</span></span>;

<span class="hljs-keyword"><span class="hljs-keyword">my</span></span> (@debtors, %by_phone);

<span class="hljs-keyword"><span class="hljs-keyword">for</span></span> <span class="hljs-keyword"><span class="hljs-keyword">my</span></span> $rec (@$data) {
    <span class="hljs-keyword"><span class="hljs-keyword">my</span></span> ($name, @phones, $di);

    <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">ref</span></span> $rec-&gt;{company}) {  <span class="hljs-comment"><span class="hljs-comment"># XXX only HASH</span></span>
        $name = $rec-&gt;{company}-&gt;{name};
    } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> {
        $name = $rec-&gt;{company};
    }

    <span class="hljs-keyword"><span class="hljs-keyword">push</span></span> @phones, $rec-&gt;{phone} <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> <span class="hljs-keyword"><span class="hljs-keyword">exists</span></span> $rec-&gt;{phone};
    <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">ref</span></span> $rec-&gt;{phones}) {
        <span class="hljs-keyword"><span class="hljs-keyword">push</span></span> @phones, @{ $rec-&gt;{phones} };
    } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> {
        <span class="hljs-keyword"><span class="hljs-keyword">push</span></span> @phones, $rec-&gt;{phones};
    }

    <span class="hljs-keyword"><span class="hljs-keyword">my</span></span> $ph = first { <span class="hljs-keyword"><span class="hljs-keyword">exists</span></span> $by_phone{$_} } @phones;
    <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">not</span></span> <span class="hljs-keyword"><span class="hljs-keyword">defined</span></span> $ph) {
        <span class="hljs-keyword"><span class="hljs-keyword">push</span></span> @debtors, {
            <span class="hljs-string"><span class="hljs-string">companies   =&gt;</span></span> [ $name ],
            <span class="hljs-string"><span class="hljs-string">debt        =&gt;</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span>,
            <span class="hljs-string"><span class="hljs-string">phones      =&gt;</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">map</span></span> { $_ =&gt; <span class="hljs-number"><span class="hljs-number">1</span></span> } @phones },
        };
        $di = $#debtors;
        $by_phone{$_} = $di <span class="hljs-keyword"><span class="hljs-keyword">foreach</span></span> @phones;
    } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> {
        $di = $by_phone{$ph};
        <span class="hljs-keyword"><span class="hljs-keyword">push</span></span> @{ $debtors[$di]-&gt;{companies} }, $name
            <span class="hljs-keyword"><span class="hljs-keyword">unless</span></span> <span class="hljs-keyword"><span class="hljs-keyword">scalar</span></span> <span class="hljs-keyword"><span class="hljs-keyword">grep</span></span> { $_ eq $name } @{ $debtors[$di]-&gt;{companies} };
        $debtors[$di]-&gt;{phones}-&gt;{$ph} = <span class="hljs-number"><span class="hljs-number">1</span></span>;
        <span class="hljs-keyword"><span class="hljs-keyword">foreach</span></span> (@phones) {
            <span class="hljs-keyword"><span class="hljs-keyword">die</span></span> <span class="hljs-string"><span class="hljs-string">"Oops! consistency error... $_ $di"</span></span>
                <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> <span class="hljs-keyword"><span class="hljs-keyword">defined</span></span> $by_phone{$_} <span class="hljs-keyword"><span class="hljs-keyword">and</span></span> $by_phone{$_} != $di; 
            $by_phone{$_} = $di;
            $debtors[$di]-&gt;{phones}-&gt;{$_} = <span class="hljs-number"><span class="hljs-number">1</span></span>;
        }
    } 
    $debtors[$di]-&gt;{debt} += $rec-&gt;{debt};
}

<span class="hljs-keyword"><span class="hljs-keyword">my</span></span> $t3 = <span class="hljs-keyword"><span class="hljs-keyword">time</span></span>;
<span class="hljs-keyword"><span class="hljs-keyword">say</span></span> <span class="hljs-string"><span class="hljs-string">"aggregated in "</span></span> . ($t3-$t2) . <span class="hljs-string"><span class="hljs-string">" sec"</span></span>;

$" = <span class="hljs-string"><span class="hljs-string">", "</span></span>;
<span class="hljs-keyword"><span class="hljs-keyword">for</span></span> <span class="hljs-keyword"><span class="hljs-keyword">my</span></span> $debtor (@debtors) {
    <span class="hljs-keyword"><span class="hljs-keyword">say</span></span> <span class="hljs-string"><span class="hljs-string">"\nCompany names:\t</span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">@{ $debtor-&gt;{companies} }</span></span></span><span class="hljs-string">"</span></span>;
    <span class="hljs-keyword"><span class="hljs-keyword">say</span></span> <span class="hljs-string"><span class="hljs-string">"Total debt:\t$debtor-&gt;{debt}"</span></span>;
    <span class="hljs-keyword"><span class="hljs-keyword">say</span></span> <span class="hljs-string"><span class="hljs-string">"Phone numbers:\t</span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">@{[</span></span><span class="hljs-keyword"><span class="hljs-string"><span class="hljs-subst"><span class="hljs-keyword">sort</span></span></span></span><span class="hljs-string"><span class="hljs-subst"> </span></span><span class="hljs-keyword"><span class="hljs-string"><span class="hljs-subst"><span class="hljs-keyword">keys</span></span></span></span><span class="hljs-string"><span class="hljs-subst"> %{ $debtor-&gt;{phones} }</span></span></span><span class="hljs-string">]}"</span></span>;
}

<span class="hljs-keyword"><span class="hljs-keyword">say</span></span> <span class="hljs-string"><span class="hljs-string">"\nTotal "</span></span> . (<span class="hljs-keyword"><span class="hljs-keyword">time</span></span>-$t0) . <span class="hljs-string"><span class="hljs-string">" sec"</span></span>;</code></pre></div>

        <div class="comment__footer">
    <a href="#reply" class="comment__footer-link reply_link" onclick="return comment_show_reply_form(20119038 )">Ответить</a>


</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-0" id="reply_comments_20119038">  <li class="content-list__item content-list__item_comment js-comment " rel="20119274">
    
    <span class="parent_id" data-parent_id="20119038"></span>
    <div class="comment" id="comment_20119274">
      <span class="comment__collapse" title="Свернуть/развернуть ветку комментариев" data-id="20119274"></span>
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head comment__head_topic-author comment__head_my-comment " rel="20119274">
          <a href="https://habr.com/ru/users/epishman/" class="user-info user-info_inline" rel="user-popover" data-user-login="epishman">
    <img src="Swift%20%D0%BF%D1%80%D0%BE%D1%82%D0%B8%D0%B2%20Rust%20%E2%80%94%20%D0%B1%D0%B5%D0%BD%D1%87%D0%BC%D0%B0%D1%80%D0%BA%D0%B8%D0%BD%D0%B3%20%D0%BD%D0%B0%20Linux%20%D1%81%20(%D0%BD%D0%B5)%D0%BF%D0%BE%D0%BD%D1%8F%D1%82%D0%BD%D1%8B%D0%BC%20%D1%84%D0%B8%D0%BD%D0%B0%D0%BB%D0%BE%D0%BC%20_%20%D0%A5%D0%B0%D0%B1%D1%80_files/ec0d88c4853c0d36d44bd0526dcfa8d7.png" class="user-info__image-pic user-info__image-pic_small" width="24" height="24">
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">epishman</span>
</a>

          <svg class="icon_comment-edit" title="Комментарий был изменен" width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#pencil"></use></svg>
          <time class="comment__date-time comment__date-time_published">6 мая 2019 в 16:46</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="#comment_20119274" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="20119274" data-action="add" title="Добавить в закладки"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#book"></use></svg></a>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <span class="icon_comment-branch js-comment_tree" data-id="20119274" data-parent_id="20119038" title="Показать ветку комментариев"><svg width="8" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#tree"></use></svg></span>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#comment_20119038" class="icon_comment-arrow-up js-comment_parent" data-id="20119274" data-parent_id="20119038" title="Показать предыдущий комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
    </li>

  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="#comment_20119274" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="20119274" data-parent_id="20119038" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="20119274" data-post-target="450512" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="plus" onclick="comment_vote(this);" title="За свои комментарии голосовать нельзя" disabled="disabled"><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter   js-score" title="Всего голосов 0: ↑0 и ↓0">0</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="За свои комментарии голосовать нельзя" disabled="disabled"><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message ">read file in 0.0822980403900146 sec<br>
decoded JSON in 1.64080214500427 sec<br>
aggregated in 7.59123682975769 sec<br>
Wide character in say at ./fastpivot.pl line 78.<br>
…<br>
Total 9.31448316574097 sec<br>
==================<br>
Это похоже на правду, подобные цифры демонстрирует у меня Javascript. 
Что ставит вопрос — а так ли уж нужны компилируемые языки для 
прикладного программирования (го ?). А что касается перла — да, он очень
 крут.<br></div>

        <div class="comment__footer">
    <a href="#reply" class="comment__footer-link reply_link" onclick="return comment_show_reply_form(20119274 )">Ответить</a>


</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-1" id="reply_comments_20119274">  <li class="content-list__item content-list__item_comment js-comment " rel="20119350">
    
    <span class="parent_id" data-parent_id="20119274"></span>
    <div class="comment" id="comment_20119350">
      <span class="comment__collapse" title="Свернуть/развернуть ветку комментариев" data-id="20119350"></span>
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head   " rel="20119350">
          <a href="https://habr.com/ru/users/nuclight/" class="user-info user-info_inline" rel="user-popover" data-user-login="nuclight">
    <img src="Swift%20%D0%BF%D1%80%D0%BE%D1%82%D0%B8%D0%B2%20Rust%20%E2%80%94%20%D0%B1%D0%B5%D0%BD%D1%87%D0%BC%D0%B0%D1%80%D0%BA%D0%B8%D0%BD%D0%B3%20%D0%BD%D0%B0%20Linux%20%D1%81%20(%D0%BD%D0%B5)%D0%BF%D0%BE%D0%BD%D1%8F%D1%82%D0%BD%D1%8B%D0%BC%20%D1%84%D0%B8%D0%BD%D0%B0%D0%BB%D0%BE%D0%BC%20_%20%D0%A5%D0%B0%D0%B1%D1%80_files/51aef69b8e5d8b70290a2c07e825f274.jpg" class="user-info__image-pic user-info__image-pic_small" width="24" height="24">
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">nuclight</span>
</a>

          
          <time class="comment__date-time comment__date-time_published">6 мая 2019 в 16:54</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="#comment_20119350" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="20119350" data-action="add" title="Добавить в закладки"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#book"></use></svg></a>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <span class="icon_comment-branch js-comment_tree" data-id="20119350" data-parent_id="20119274" title="Показать ветку комментариев"><svg width="8" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#tree"></use></svg></span>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#comment_20119274" class="icon_comment-arrow-up js-comment_parent" data-id="20119350" data-parent_id="20119274" title="Показать предыдущий комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
    </li>

  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="#comment_20119350" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="20119350" data-parent_id="20119274" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="20119350" data-post-target="450512" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="plus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter voting-wjt__counter_positive  js-score" title="Всего голосов +1: ↑1 и ↓0">+1</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message ">Ну, на самом деле, там модуль 
JSON::XS написан на Си — впрочем, Javascript поступает аналогично. Если 
заменить на JSON::PP, на моем железе парсинг был 143 секунды и около 
полгигабайта памяти. Но агрегация всё равно остается около 7 секунд, 
т.е. шаги 3+4 в статье — непонятно, почему Swift, будучи более 
типизированным, не ускоряется от этого.</div>

        <div class="comment__footer">
    <a href="#reply" class="comment__footer-link reply_link" onclick="return comment_show_reply_form(20119350 )">Ответить</a>


</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-2" id="reply_comments_20119350">  <li class="content-list__item content-list__item_comment js-comment " rel="20119372">
    
    <span class="parent_id" data-parent_id="20119350"></span>
    <div class="comment" id="comment_20119372">
      <span class="comment__collapse" title="Свернуть/развернуть ветку комментариев" data-id="20119372"></span>
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head comment__head_topic-author comment__head_my-comment " rel="20119372">
          <a href="https://habr.com/ru/users/epishman/" class="user-info user-info_inline" rel="user-popover" data-user-login="epishman">
    <img src="Swift%20%D0%BF%D1%80%D0%BE%D1%82%D0%B8%D0%B2%20Rust%20%E2%80%94%20%D0%B1%D0%B5%D0%BD%D1%87%D0%BC%D0%B0%D1%80%D0%BA%D0%B8%D0%BD%D0%B3%20%D0%BD%D0%B0%20Linux%20%D1%81%20(%D0%BD%D0%B5)%D0%BF%D0%BE%D0%BD%D1%8F%D1%82%D0%BD%D1%8B%D0%BC%20%D1%84%D0%B8%D0%BD%D0%B0%D0%BB%D0%BE%D0%BC%20_%20%D0%A5%D0%B0%D0%B1%D1%80_files/ec0d88c4853c0d36d44bd0526dcfa8d7.png" class="user-info__image-pic user-info__image-pic_small" width="24" height="24">
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">epishman</span>
</a>

          <svg class="icon_comment-edit" title="Комментарий был изменен" width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#pencil"></use></svg>
          <time class="comment__date-time comment__date-time_published">6 мая 2019 в 16:59</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="#comment_20119372" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="20119372" data-action="add" title="Добавить в закладки"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#book"></use></svg></a>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <span class="icon_comment-branch js-comment_tree" data-id="20119372" data-parent_id="20119350" title="Показать ветку комментариев"><svg width="8" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#tree"></use></svg></span>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#comment_20119350" class="icon_comment-arrow-up js-comment_parent" data-id="20119372" data-parent_id="20119350" title="Показать предыдущий комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
    </li>

  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="#comment_20119372" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="20119372" data-parent_id="20119350" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="20119372" data-post-target="450512" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="plus" onclick="comment_vote(this);" title="За свои комментарии голосовать нельзя" disabled="disabled"><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter   js-score" title="Всего голосов 0: ↑0 и ↓0">0</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="За свои комментарии голосовать нельзя" disabled="disabled"><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message ">Тут приводили скрин профайлера — 
видно что именно кастинг типов и тормозит, изначально то мы имеем Any, 
который нужно приводить к строкам и числам, а дайнамик кастинг — это 
видно сильная сторона именно перла.</div>

        <div class="comment__footer">
    <a href="#reply" class="comment__footer-link reply_link" onclick="return comment_show_reply_form(20119372 )">Ответить</a>


</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-3" id="reply_comments_20119372">  <li class="content-list__item content-list__item_comment js-comment " rel="20119460">
    
    <span class="parent_id" data-parent_id="20119372"></span>
    <div class="comment" id="comment_20119460">
      <span class="comment__collapse" title="Свернуть/развернуть ветку комментариев" data-id="20119460"></span>
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head   " rel="20119460">
          <a href="https://habr.com/ru/users/creker/" class="user-info user-info_inline" rel="user-popover" data-user-login="creker">
    <img src="Swift%20%D0%BF%D1%80%D0%BE%D1%82%D0%B8%D0%B2%20Rust%20%E2%80%94%20%D0%B1%D0%B5%D0%BD%D1%87%D0%BC%D0%B0%D1%80%D0%BA%D0%B8%D0%BD%D0%B3%20%D0%BD%D0%B0%20Linux%20%D1%81%20(%D0%BD%D0%B5)%D0%BF%D0%BE%D0%BD%D1%8F%D1%82%D0%BD%D1%8B%D0%BC%20%D1%84%D0%B8%D0%BD%D0%B0%D0%BB%D0%BE%D0%BC%20_%20%D0%A5%D0%B0%D0%B1%D1%80_files/58738e1e5c93e6de80dc66bb4fbef5bd.png" class="user-info__image-pic user-info__image-pic_small" width="24" height="24">
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">creker</span>
</a>

          
          <time class="comment__date-time comment__date-time_published">6 мая 2019 в 17:14</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="#comment_20119460" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="20119460" data-action="add" title="Добавить в закладки"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#book"></use></svg></a>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <span class="icon_comment-branch js-comment_tree" data-id="20119460" data-parent_id="20119372" title="Показать ветку комментариев"><svg width="8" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#tree"></use></svg></span>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#comment_20119372" class="icon_comment-arrow-up js-comment_parent" data-id="20119460" data-parent_id="20119372" title="Показать предыдущий комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
    </li>

  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="#comment_20119460" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="20119460" data-parent_id="20119372" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="20119460" data-post-target="450512" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small voting-wjt__button_plus" data-action="plus" onclick="comment_vote(this);" title="Вы проголосовали положительно " disabled="disabled"><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter voting-wjt__counter_positive  js-score" title="Всего голосов +1: ↑1 и ↓0">+1</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="Вы проголосовали положительно , отменить голос нельзя" disabled="disabled"><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message ">Там все сложнее. Многие вызовы 
свифта уходят в недра Foundation и CoreFoundation библиотек, а это ObjC и
 С. Там куча рантайм вызовов, жрущих буквально секунды времени на 
бриджинг между разными языками.</div>

        <div class="comment__footer">
    <a href="#reply" class="comment__footer-link reply_link" onclick="return comment_show_reply_form(20119460 )">Ответить</a>


</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-4" id="reply_comments_20119460">  <li class="content-list__item content-list__item_comment js-comment " rel="20120192">
    
    <span class="parent_id" data-parent_id="20119460"></span>
    <div class="comment" id="comment_20120192">
      <span class="comment__collapse" title="Свернуть/развернуть ветку комментариев" data-id="20120192"></span>
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head   " rel="20120192">
          <a href="https://habr.com/ru/users/RomanKerimov/" class="user-info user-info_inline" rel="user-popover" data-user-login="RomanKerimov">
    <svg class="default-image default-image_mini default-image_pink" width="24" height="24"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#slug"></use></svg>
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">RomanKerimov</span>
</a>

          
          <time class="comment__date-time comment__date-time_published">6 мая 2019 в 19:53</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="#comment_20120192" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="20120192" data-action="add" title="Добавить в закладки"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#book"></use></svg></a>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <span class="icon_comment-branch js-comment_tree" data-id="20120192" data-parent_id="20119460" title="Показать ветку комментариев"><svg width="8" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#tree"></use></svg></span>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#comment_20119460" class="icon_comment-arrow-up js-comment_parent" data-id="20120192" data-parent_id="20119460" title="Показать предыдущий комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
    </li>

  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="#comment_20120192" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="20120192" data-parent_id="20119460" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="20120192" data-post-target="450512" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="plus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter   js-score" title="Всего голосов 0: ↑0 и ↓0">0</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message ">Так в линуксовской реализации Foundation вроде ж нет ObjC.</div>

        <div class="comment__footer">
    <a href="#reply" class="comment__footer-link reply_link" onclick="return comment_show_reply_form(20120192 )">Ответить</a>


</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-5" id="reply_comments_20120192">  <li class="content-list__item content-list__item_comment js-comment " rel="20120218">
    
    <span class="parent_id" data-parent_id="20120192"></span>
    <div class="comment" id="comment_20120218">
      <span class="comment__collapse" title="Свернуть/развернуть ветку комментариев" data-id="20120218"></span>
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head   " rel="20120218">
          <a href="https://habr.com/ru/users/creker/" class="user-info user-info_inline" rel="user-popover" data-user-login="creker">
    <img src="Swift%20%D0%BF%D1%80%D0%BE%D1%82%D0%B8%D0%B2%20Rust%20%E2%80%94%20%D0%B1%D0%B5%D0%BD%D1%87%D0%BC%D0%B0%D1%80%D0%BA%D0%B8%D0%BD%D0%B3%20%D0%BD%D0%B0%20Linux%20%D1%81%20(%D0%BD%D0%B5)%D0%BF%D0%BE%D0%BD%D1%8F%D1%82%D0%BD%D1%8B%D0%BC%20%D1%84%D0%B8%D0%BD%D0%B0%D0%BB%D0%BE%D0%BC%20_%20%D0%A5%D0%B0%D0%B1%D1%80_files/58738e1e5c93e6de80dc66bb4fbef5bd.png" class="user-info__image-pic user-info__image-pic_small" width="24" height="24">
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">creker</span>
</a>

          
          <time class="comment__date-time comment__date-time_published">6 мая 2019 в 20:01</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="#comment_20120218" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="20120218" data-action="add" title="Добавить в закладки"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#book"></use></svg></a>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <span class="icon_comment-branch js-comment_tree" data-id="20120218" data-parent_id="20120192" title="Показать ветку комментариев"><svg width="8" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#tree"></use></svg></span>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#comment_20120192" class="icon_comment-arrow-up js-comment_parent" data-id="20120218" data-parent_id="20120192" title="Показать предыдущий комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
    </li>

  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="#comment_20120218" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="20120218" data-parent_id="20120192" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="20120218" data-post-target="450512" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="plus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter   js-score" title="Всего голосов 0: ↑0 и ↓0">0</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message ">Я запускал под макосью, как и 
товарищ со скрином выше, чтобы профайл посмотреть. Что там будет под 
линуксом это вопрос хороший. Тот же JSON парсер под максью уходит в 
NSJSONSerialization.</div>

        <div class="comment__footer">
    <a href="#reply" class="comment__footer-link reply_link" onclick="return comment_show_reply_form(20120218 )">Ответить</a>


</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-6" id="reply_comments_20120218"></ul>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="content-list__item content-list__item_comment js-comment " rel="20128248">
    
    <span class="parent_id" data-parent_id="20119274"></span>
    <div class="comment" id="comment_20128248">
      <span class="comment__collapse" title="Свернуть/развернуть ветку комментариев" data-id="20128248"></span>
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head   " rel="20128248">
          <a href="https://habr.com/ru/users/PsyHaSTe/" class="user-info user-info_inline" rel="user-popover" data-user-login="PsyHaSTe">
    <img src="Swift%20%D0%BF%D1%80%D0%BE%D1%82%D0%B8%D0%B2%20Rust%20%E2%80%94%20%D0%B1%D0%B5%D0%BD%D1%87%D0%BC%D0%B0%D1%80%D0%BA%D0%B8%D0%BD%D0%B3%20%D0%BD%D0%B0%20Linux%20%D1%81%20(%D0%BD%D0%B5)%D0%BF%D0%BE%D0%BD%D1%8F%D1%82%D0%BD%D1%8B%D0%BC%20%D1%84%D0%B8%D0%BD%D0%B0%D0%BB%D0%BE%D0%BC%20_%20%D0%A5%D0%B0%D0%B1%D1%80_files/7631ac5e5a7e237a937f5f2a74ae4c9e.jpg" class="user-info__image-pic user-info__image-pic_small" width="24" height="24">
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">PsyHaSTe</span>
</a>

          
          <time class="comment__date-time comment__date-time_published">8 мая 2019 в 12:23</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="#comment_20128248" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="20128248" data-action="add" title="Добавить в закладки"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#book"></use></svg></a>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <span class="icon_comment-branch js-comment_tree" data-id="20128248" data-parent_id="20119274" title="Показать ветку комментариев"><svg width="8" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#tree"></use></svg></span>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#comment_20119274" class="icon_comment-arrow-up js-comment_parent" data-id="20128248" data-parent_id="20119274" title="Показать предыдущий комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
    </li>

  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="#comment_20128248" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="20128248" data-parent_id="20119274" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="20128248" data-post-target="450512" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="plus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter voting-wjt__counter_positive  js-score" title="Всего голосов +2: ↑2 и ↓0">+2</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message "><blockquote>Что ставит вопрос — а так ли уж нужны компилируемые языки для прикладного программирования (го ?)</blockquote><p>Интерпретируемые языки всегда очень быстры, когда все, что они делают — вызывают скомпилированный сишный код.</p></div>

        <div class="comment__footer">
    <a href="#reply" class="comment__footer-link reply_link" onclick="return comment_show_reply_form(20128248 )">Ответить</a>


</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-2" id="reply_comments_20128248"></ul>
  </li>
</ul>
  </li>
  <li class="content-list__item content-list__item_comment js-comment " rel="20120522">
    
    <span class="parent_id" data-parent_id="20119038"></span>
    <div class="comment" id="comment_20120522">
      <span class="comment__collapse" title="Свернуть/развернуть ветку комментариев" data-id="20120522"></span>
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head   " rel="20120522">
          <a href="https://habr.com/ru/users/nuclight/" class="user-info user-info_inline" rel="user-popover" data-user-login="nuclight">
    <img src="Swift%20%D0%BF%D1%80%D0%BE%D1%82%D0%B8%D0%B2%20Rust%20%E2%80%94%20%D0%B1%D0%B5%D0%BD%D1%87%D0%BC%D0%B0%D1%80%D0%BA%D0%B8%D0%BD%D0%B3%20%D0%BD%D0%B0%20Linux%20%D1%81%20(%D0%BD%D0%B5)%D0%BF%D0%BE%D0%BD%D1%8F%D1%82%D0%BD%D1%8B%D0%BC%20%D1%84%D0%B8%D0%BD%D0%B0%D0%BB%D0%BE%D0%BC%20_%20%D0%A5%D0%B0%D0%B1%D1%80_files/51aef69b8e5d8b70290a2c07e825f274.jpg" class="user-info__image-pic user-info__image-pic_small" width="24" height="24">
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">nuclight</span>
</a>

          
          <time class="comment__date-time comment__date-time_published">6 мая 2019 в 21:13</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="#comment_20120522" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="20120522" data-action="add" title="Добавить в закладки"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#book"></use></svg></a>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <span class="icon_comment-branch js-comment_tree" data-id="20120522" data-parent_id="20119038" title="Показать ветку комментариев"><svg width="8" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#tree"></use></svg></span>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#comment_20119038" class="icon_comment-arrow-up js-comment_parent" data-id="20120522" data-parent_id="20119038" title="Показать предыдущий комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
    </li>

  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="#comment_20120522" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="20120522" data-parent_id="20119038" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="20120522" data-post-target="450512" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small voting-wjt__button_plus" data-action="plus" onclick="comment_vote(this);" title="Вы проголосовали положительно " disabled="disabled"><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter voting-wjt__counter_positive  js-score" title="Всего голосов +1: ↑1 и ↓0">+1</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="Вы проголосовали положительно , отменить голос нельзя" disabled="disabled"><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message ">В Telegram подкинули более быстрый вариант, который решает задачу «как хотели», не читая файл целиком: <a href="https://gist.github.com/jef-sure/dba9779610505f30d70e5c3d82be1ea6">gist.github.com/jef-sure/dba9779610505f30d70e5c3d82be1ea6</a> (правда, там использован другой трюк — отображение файла сразу в память)</div>

        <div class="comment__footer">
    <a href="#reply" class="comment__footer-link reply_link" onclick="return comment_show_reply_form(20120522 )">Ответить</a>


</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-1" id="reply_comments_20120522">  <li class="content-list__item content-list__item_comment js-comment " rel="20120576">
    
    <span class="parent_id" data-parent_id="20120522"></span>
    <div class="comment" id="comment_20120576">
      <span class="comment__collapse" title="Свернуть/развернуть ветку комментариев" data-id="20120576"></span>
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head comment__head_topic-author comment__head_my-comment " rel="20120576">
          <a href="https://habr.com/ru/users/epishman/" class="user-info user-info_inline" rel="user-popover" data-user-login="epishman">
    <img src="Swift%20%D0%BF%D1%80%D0%BE%D1%82%D0%B8%D0%B2%20Rust%20%E2%80%94%20%D0%B1%D0%B5%D0%BD%D1%87%D0%BC%D0%B0%D1%80%D0%BA%D0%B8%D0%BD%D0%B3%20%D0%BD%D0%B0%20Linux%20%D1%81%20(%D0%BD%D0%B5)%D0%BF%D0%BE%D0%BD%D1%8F%D1%82%D0%BD%D1%8B%D0%BC%20%D1%84%D0%B8%D0%BD%D0%B0%D0%BB%D0%BE%D0%BC%20_%20%D0%A5%D0%B0%D0%B1%D1%80_files/ec0d88c4853c0d36d44bd0526dcfa8d7.png" class="user-info__image-pic user-info__image-pic_small" width="24" height="24">
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">epishman</span>
</a>

          
          <time class="comment__date-time comment__date-time_published">6 мая 2019 в 21:26</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="#comment_20120576" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="20120576" data-action="add" title="Добавить в закладки"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#book"></use></svg></a>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <span class="icon_comment-branch js-comment_tree" data-id="20120576" data-parent_id="20120522" title="Показать ветку комментариев"><svg width="8" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#tree"></use></svg></span>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#comment_20120522" class="icon_comment-arrow-up js-comment_parent" data-id="20120576" data-parent_id="20120522" title="Показать предыдущий комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
    </li>

  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="#comment_20120576" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="20120576" data-parent_id="20120522" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="20120576" data-post-target="450512" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="plus" onclick="comment_vote(this);" title="За свои комментарии голосовать нельзя" disabled="disabled"><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter voting-wjt__counter_positive  js-score" title="Всего голосов +1: ↑1 и ↓0">+1</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="За свои комментарии голосовать нельзя" disabled="disabled"><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message ">Ну вот, Perl и Rust реальные конкуренты на хайлоад, остальные языки слились :)</div>

        <div class="comment__footer">
    <a href="#reply" class="comment__footer-link reply_link" onclick="return comment_show_reply_form(20120576 )">Ответить</a>


</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-2" id="reply_comments_20120576">  <li class="content-list__item content-list__item_comment js-comment " rel="20120712">
    
    <span class="parent_id" data-parent_id="20120576"></span>
    <div class="comment" id="comment_20120712">
      <span class="comment__collapse" title="Свернуть/развернуть ветку комментариев" data-id="20120712"></span>
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head   " rel="20120712">
          <a href="https://habr.com/ru/users/nuclight/" class="user-info user-info_inline" rel="user-popover" data-user-login="nuclight">
    <img src="Swift%20%D0%BF%D1%80%D0%BE%D1%82%D0%B8%D0%B2%20Rust%20%E2%80%94%20%D0%B1%D0%B5%D0%BD%D1%87%D0%BC%D0%B0%D1%80%D0%BA%D0%B8%D0%BD%D0%B3%20%D0%BD%D0%B0%20Linux%20%D1%81%20(%D0%BD%D0%B5)%D0%BF%D0%BE%D0%BD%D1%8F%D1%82%D0%BD%D1%8B%D0%BC%20%D1%84%D0%B8%D0%BD%D0%B0%D0%BB%D0%BE%D0%BC%20_%20%D0%A5%D0%B0%D0%B1%D1%80_files/51aef69b8e5d8b70290a2c07e825f274.jpg" class="user-info__image-pic user-info__image-pic_small" width="24" height="24">
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">nuclight</span>
</a>

          
          <time class="comment__date-time comment__date-time_published">6 мая 2019 в 21:55</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="#comment_20120712" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="20120712" data-action="add" title="Добавить в закладки"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#book"></use></svg></a>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <span class="icon_comment-branch js-comment_tree" data-id="20120712" data-parent_id="20120576" title="Показать ветку комментариев"><svg width="8" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#tree"></use></svg></span>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#comment_20120576" class="icon_comment-arrow-up js-comment_parent" data-id="20120712" data-parent_id="20120576" title="Показать предыдущий комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
    </li>

  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="#comment_20120712" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="20120712" data-parent_id="20120576" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="20120712" data-post-target="450512" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="plus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter   js-score" title="Всего голосов 0: ↑0 и ↓0">0</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message ">А как же модные JavaScript и Go?</div>

        <div class="comment__footer">
    <a href="#reply" class="comment__footer-link reply_link" onclick="return comment_show_reply_form(20120712 )">Ответить</a>


</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-3" id="reply_comments_20120712">  <li class="content-list__item content-list__item_comment js-comment " rel="20120756">
    
    <span class="parent_id" data-parent_id="20120712"></span>
    <div class="comment" id="comment_20120756">
      <span class="comment__collapse" title="Свернуть/развернуть ветку комментариев" data-id="20120756"></span>
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head comment__head_topic-author comment__head_my-comment " rel="20120756">
          <a href="https://habr.com/ru/users/epishman/" class="user-info user-info_inline" rel="user-popover" data-user-login="epishman">
    <img src="Swift%20%D0%BF%D1%80%D0%BE%D1%82%D0%B8%D0%B2%20Rust%20%E2%80%94%20%D0%B1%D0%B5%D0%BD%D1%87%D0%BC%D0%B0%D1%80%D0%BA%D0%B8%D0%BD%D0%B3%20%D0%BD%D0%B0%20Linux%20%D1%81%20(%D0%BD%D0%B5)%D0%BF%D0%BE%D0%BD%D1%8F%D1%82%D0%BD%D1%8B%D0%BC%20%D1%84%D0%B8%D0%BD%D0%B0%D0%BB%D0%BE%D0%BC%20_%20%D0%A5%D0%B0%D0%B1%D1%80_files/ec0d88c4853c0d36d44bd0526dcfa8d7.png" class="user-info__image-pic user-info__image-pic_small" width="24" height="24">
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">epishman</span>
</a>

          <svg class="icon_comment-edit" title="Комментарий был изменен" width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#pencil"></use></svg>
          <time class="comment__date-time comment__date-time_published">6 мая 2019 в 22:07</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="#comment_20120756" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="20120756" data-action="add" title="Добавить в закладки"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#book"></use></svg></a>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <span class="icon_comment-branch js-comment_tree" data-id="20120756" data-parent_id="20120712" title="Показать ветку комментариев"><svg width="8" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#tree"></use></svg></span>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#comment_20120712" class="icon_comment-arrow-up js-comment_parent" data-id="20120756" data-parent_id="20120712" title="Показать предыдущий комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
    </li>

  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="#comment_20120756" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="20120756" data-parent_id="20120712" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="20120756" data-post-target="450512" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="plus" onclick="comment_vote(this);" title="За свои комментарии голосовать нельзя" disabled="disabled"><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter   js-score" title="Всего голосов 0: ↑0 и ↓0">0</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="За свои комментарии голосовать нельзя" disabled="disabled"><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message ">По жаваскрипту я делал замеры, у 
меня в блоге 3 статьи на эту тему, короче, миллион объектов он за 9 
секунд агрегирует, то есть где-то в 2.5 раза медленнее раста получается.
 На гошке я почти не писал, может изнасилую себя и сделаю тест, не знаю.</div>

        <div class="comment__footer">
    <a href="#reply" class="comment__footer-link reply_link" onclick="return comment_show_reply_form(20120756 )">Ответить</a>


</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-4" id="reply_comments_20120756">  <li class="content-list__item content-list__item_comment js-comment " rel="20123106">
    
    <span class="parent_id" data-parent_id="20120756"></span>
    <div class="comment" id="comment_20123106">
      <span class="comment__collapse" title="Свернуть/развернуть ветку комментариев" data-id="20123106"></span>
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head   " rel="20123106">
          <a href="https://habr.com/ru/users/domix32/" class="user-info user-info_inline" rel="user-popover" data-user-login="domix32">
    <img src="Swift%20%D0%BF%D1%80%D0%BE%D1%82%D0%B8%D0%B2%20Rust%20%E2%80%94%20%D0%B1%D0%B5%D0%BD%D1%87%D0%BC%D0%B0%D1%80%D0%BA%D0%B8%D0%BD%D0%B3%20%D0%BD%D0%B0%20Linux%20%D1%81%20(%D0%BD%D0%B5)%D0%BF%D0%BE%D0%BD%D1%8F%D1%82%D0%BD%D1%8B%D0%BC%20%D1%84%D0%B8%D0%BD%D0%B0%D0%BB%D0%BE%D0%BC%20_%20%D0%A5%D0%B0%D0%B1%D1%80_files/7e2a2827914de22fc9d32a5dc7976361.png" class="user-info__image-pic user-info__image-pic_small" width="24" height="24">
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">domix32</span>
</a>

          
          <time class="comment__date-time comment__date-time_published">7 мая 2019 в 13:07</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="#comment_20123106" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="20123106" data-action="add" title="Добавить в закладки"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#book"></use></svg></a>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <span class="icon_comment-branch js-comment_tree" data-id="20123106" data-parent_id="20120756" title="Показать ветку комментариев"><svg width="8" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#tree"></use></svg></span>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#comment_20120756" class="icon_comment-arrow-up js-comment_parent" data-id="20123106" data-parent_id="20120756" title="Показать предыдущий комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
    </li>

  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="#comment_20123106" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="20123106" data-parent_id="20120756" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="20123106" data-post-target="450512" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="plus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter   js-score" title="Всего голосов 0: ↑0 и ↓0">0</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message "><p>А сколько по используемой памяти разница при этом?</p></div>

        <div class="comment__footer">
    <a href="#reply" class="comment__footer-link reply_link" onclick="return comment_show_reply_form(20123106 )">Ответить</a>


</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-5" id="reply_comments_20123106">  <li class="content-list__item content-list__item_comment js-comment " rel="20123302">
    
    <span class="parent_id" data-parent_id="20123106"></span>
    <div class="comment" id="comment_20123302">
      <span class="comment__collapse" title="Свернуть/развернуть ветку комментариев" data-id="20123302"></span>
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head comment__head_topic-author comment__head_my-comment " rel="20123302">
          <a href="https://habr.com/ru/users/epishman/" class="user-info user-info_inline" rel="user-popover" data-user-login="epishman">
    <img src="Swift%20%D0%BF%D1%80%D0%BE%D1%82%D0%B8%D0%B2%20Rust%20%E2%80%94%20%D0%B1%D0%B5%D0%BD%D1%87%D0%BC%D0%B0%D1%80%D0%BA%D0%B8%D0%BD%D0%B3%20%D0%BD%D0%B0%20Linux%20%D1%81%20(%D0%BD%D0%B5)%D0%BF%D0%BE%D0%BD%D1%8F%D1%82%D0%BD%D1%8B%D0%BC%20%D1%84%D0%B8%D0%BD%D0%B0%D0%BB%D0%BE%D0%BC%20_%20%D0%A5%D0%B0%D0%B1%D1%80_files/ec0d88c4853c0d36d44bd0526dcfa8d7.png" class="user-info__image-pic user-info__image-pic_small" width="24" height="24">
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">epishman</span>
</a>

          
          <time class="comment__date-time comment__date-time_published">7 мая 2019 в 13:42</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="#comment_20123302" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="20123302" data-action="add" title="Добавить в закладки"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#book"></use></svg></a>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <span class="icon_comment-branch js-comment_tree" data-id="20123302" data-parent_id="20123106" title="Показать ветку комментариев"><svg width="8" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#tree"></use></svg></span>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#comment_20123106" class="icon_comment-arrow-up js-comment_parent" data-id="20123302" data-parent_id="20123106" title="Показать предыдущий комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
    </li>

  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="#comment_20123302" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="20123302" data-parent_id="20123106" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="20123302" data-post-target="450512" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="plus" onclick="comment_vote(this);" title="За свои комментарии голосовать нельзя" disabled="disabled"><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter   js-score" title="Всего голосов 0: ↑0 и ↓0">0</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="За свои комментарии голосовать нельзя" disabled="disabled"><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message ">Непонятно как в хромиуме это померять, понятно что на порядок.</div>

        <div class="comment__footer">
    <a href="#reply" class="comment__footer-link reply_link" onclick="return comment_show_reply_form(20123302 )">Ответить</a>


</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-6" id="reply_comments_20123302">  <li class="content-list__item content-list__item_comment js-comment " rel="20131452">
    
    <span class="parent_id" data-parent_id="20123302"></span>
    <div class="comment" id="comment_20131452">
      <span class="comment__collapse" title="Свернуть/развернуть ветку комментариев" data-id="20131452"></span>
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head   " rel="20131452">
          <a href="https://habr.com/ru/users/domix32/" class="user-info user-info_inline" rel="user-popover" data-user-login="domix32">
    <img src="Swift%20%D0%BF%D1%80%D0%BE%D1%82%D0%B8%D0%B2%20Rust%20%E2%80%94%20%D0%B1%D0%B5%D0%BD%D1%87%D0%BC%D0%B0%D1%80%D0%BA%D0%B8%D0%BD%D0%B3%20%D0%BD%D0%B0%20Linux%20%D1%81%20(%D0%BD%D0%B5)%D0%BF%D0%BE%D0%BD%D1%8F%D1%82%D0%BD%D1%8B%D0%BC%20%D1%84%D0%B8%D0%BD%D0%B0%D0%BB%D0%BE%D0%BC%20_%20%D0%A5%D0%B0%D0%B1%D1%80_files/7e2a2827914de22fc9d32a5dc7976361.png" class="user-info__image-pic user-info__image-pic_small" width="24" height="24">
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">domix32</span>
</a>

          <svg class="icon_comment-edit" title="Комментарий был изменен" width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#pencil"></use></svg>
          <time class="comment__date-time comment__date-time_published">8 мая 2019 в 23:26</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="#comment_20131452" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="20131452" data-action="add" title="Добавить в закладки"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#book"></use></svg></a>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <span class="icon_comment-branch js-comment_tree" data-id="20131452" data-parent_id="20123302" title="Показать ветку комментариев"><svg width="8" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#tree"></use></svg></span>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#comment_20123302" class="icon_comment-arrow-up js-comment_parent" data-id="20131452" data-parent_id="20123302" title="Показать предыдущий комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
    </li>

  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="#comment_20131452" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="20131452" data-parent_id="20123302" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="20131452" data-post-target="450512" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="plus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter   js-score" title="Всего голосов 0: ↑0 и ↓0">0</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message "><p>Я думал оно нодой 
обрабатывалось. А так можно посмотреть в диспечере задач сколько 
вкладка/devtool памяти кушает. Или через профайлинг пытаться выяснять.</p></div>

        <div class="comment__footer">
    <a href="#reply" class="comment__footer-link reply_link" onclick="return comment_show_reply_form(20131452 )">Ответить</a>


</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-7" id="reply_comments_20131452"></ul>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="content-list__item content-list__item_comment js-comment " rel="20119542">
    
    <span class="parent_id" data-parent_id="0"></span>
    <div class="comment" id="comment_20119542">
      <span class="comment__collapse" title="Свернуть/развернуть ветку комментариев" data-id="20119542"></span>
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head   " rel="20119542">
          <a href="https://habr.com/ru/users/frol/" class="user-info user-info_inline" rel="user-popover" data-user-login="frol">
    <img src="Swift%20%D0%BF%D1%80%D0%BE%D1%82%D0%B8%D0%B2%20Rust%20%E2%80%94%20%D0%B1%D0%B5%D0%BD%D1%87%D0%BC%D0%B0%D1%80%D0%BA%D0%B8%D0%BD%D0%B3%20%D0%BD%D0%B0%20Linux%20%D1%81%20(%D0%BD%D0%B5)%D0%BF%D0%BE%D0%BD%D1%8F%D1%82%D0%BD%D1%8B%D0%BC%20%D1%84%D0%B8%D0%BD%D0%B0%D0%BB%D0%BE%D0%BC%20_%20%D0%A5%D0%B0%D0%B1%D1%80_files/b01d02d99074813044746db10d6ec219.png" class="user-info__image-pic user-info__image-pic_small" width="24" height="24">
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">frol</span>
</a>

          <svg class="icon_comment-edit" title="Комментарий был изменен" width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#pencil"></use></svg>
          <time class="comment__date-time comment__date-time_published">6 мая 2019 в 17:29</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="#comment_20119542" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="20119542" data-action="add" title="Добавить в закладки"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#book"></use></svg></a>
    </li>


  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="#comment_20119542" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="20119542" data-parent_id="0" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="20119542" data-post-target="450512" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small voting-wjt__button_plus" data-action="plus" onclick="comment_vote(this);" title="Вы проголосовали положительно " disabled="disabled"><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter voting-wjt__counter_positive  js-score" title="Всего голосов +4: ↑4 и ↓0">+4</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="Вы проголосовали положительно , отменить голос нельзя" disabled="disabled"><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message "><p>Я немного подчистил Rust реализацию в плане идиоматических конструкций (как я это вижу): <a href="https://gist.github.com/frol/547f36c5f736f3651dfeac53d8fde34e">https://gist.github.com/frol/547f36c5f736f3651dfeac53d8fde34e</a> (174 строки кода, если это важно)</p><br>
<p>Мне всё ещё не нравится:</p><br>
<ul>
<li>именование переменных</li>
<li>обработка ошибок</li>
<li>глубина лесенки в некоторых местах (но я не стал дробить код)</li>
</ul><br>
<p>P.S. <code>obj.clear()</code> вместо <code>obj = Vec::new()</code> дало ~13% ускорение за счёт переиспользования буфера вместо деалокации старого и алокации нового буфера.</p></div>

        <div class="comment__footer">
    <a href="#reply" class="comment__footer-link reply_link" onclick="return comment_show_reply_form(20119542 )">Ответить</a>


</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-0" id="reply_comments_20119542">  <li class="content-list__item content-list__item_comment js-comment " rel="20119980">
    
    <span class="parent_id" data-parent_id="20119542"></span>
    <div class="comment" id="comment_20119980">
      <span class="comment__collapse" title="Свернуть/развернуть ветку комментариев" data-id="20119980"></span>
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head comment__head_topic-author comment__head_my-comment " rel="20119980">
          <a href="https://habr.com/ru/users/epishman/" class="user-info user-info_inline" rel="user-popover" data-user-login="epishman">
    <img src="Swift%20%D0%BF%D1%80%D0%BE%D1%82%D0%B8%D0%B2%20Rust%20%E2%80%94%20%D0%B1%D0%B5%D0%BD%D1%87%D0%BC%D0%B0%D1%80%D0%BA%D0%B8%D0%BD%D0%B3%20%D0%BD%D0%B0%20Linux%20%D1%81%20(%D0%BD%D0%B5)%D0%BF%D0%BE%D0%BD%D1%8F%D1%82%D0%BD%D1%8B%D0%BC%20%D1%84%D0%B8%D0%BD%D0%B0%D0%BB%D0%BE%D0%BC%20_%20%D0%A5%D0%B0%D0%B1%D1%80_files/ec0d88c4853c0d36d44bd0526dcfa8d7.png" class="user-info__image-pic user-info__image-pic_small" width="24" height="24">
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">epishman</span>
</a>

          
          <time class="comment__date-time comment__date-time_published">6 мая 2019 в 18:49</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="#comment_20119980" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="20119980" data-action="add" title="Добавить в закладки"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#book"></use></svg></a>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <span class="icon_comment-branch js-comment_tree" data-id="20119980" data-parent_id="20119542" title="Показать ветку комментариев"><svg width="8" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#tree"></use></svg></span>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#comment_20119542" class="icon_comment-arrow-up js-comment_parent" data-id="20119980" data-parent_id="20119542" title="Показать предыдущий комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
    </li>

  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="#comment_20119980" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="20119980" data-parent_id="20119542" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="20119980" data-post-target="450512" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="plus" onclick="comment_vote(this);" title="За свои комментарии голосовать нельзя" disabled="disabled"><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter   js-score" title="Всего голосов 0: ↑0 и ↓0">0</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="За свои комментарии голосовать нельзя" disabled="disabled"><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message ">Спасибо, очень приятный код. Исполнение 3.5 секунды. Про clear() не знал.<br>
PS<br>
Что касается map — ну не люблю я этого, в JS объелся. Цикл же нагляднее,
 понятно в каком месте преждевременно выходим, не нужно помнить 
спецификации map() на всех языках. Единственное ЗА — это возможность 
оптимизации (в т.ч. распараллеливания), но похоже Rust этого не умеет?</div>

        <div class="comment__footer">
    <a href="#reply" class="comment__footer-link reply_link" onclick="return comment_show_reply_form(20119980 )">Ответить</a>


</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-1" id="reply_comments_20119980">  <li class="content-list__item content-list__item_comment js-comment " rel="20120036">
    
    <span class="parent_id" data-parent_id="20119980"></span>
    <div class="comment" id="comment_20120036">
      <span class="comment__collapse" title="Свернуть/развернуть ветку комментариев" data-id="20120036"></span>
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head   " rel="20120036">
          <a href="https://habr.com/ru/users/vitvakatu/" class="user-info user-info_inline" rel="user-popover" data-user-login="vitvakatu">
    <img src="Swift%20%D0%BF%D1%80%D0%BE%D1%82%D0%B8%D0%B2%20Rust%20%E2%80%94%20%D0%B1%D0%B5%D0%BD%D1%87%D0%BC%D0%B0%D1%80%D0%BA%D0%B8%D0%BD%D0%B3%20%D0%BD%D0%B0%20Linux%20%D1%81%20(%D0%BD%D0%B5)%D0%BF%D0%BE%D0%BD%D1%8F%D1%82%D0%BD%D1%8B%D0%BC%20%D1%84%D0%B8%D0%BD%D0%B0%D0%BB%D0%BE%D0%BC%20_%20%D0%A5%D0%B0%D0%B1%D1%80_files/ad8e29a353157cf829a8a65f4272e8fb.jpg" class="user-info__image-pic user-info__image-pic_small" width="24" height="24">
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">vitvakatu</span>
</a>

          
          <time class="comment__date-time comment__date-time_published">6 мая 2019 в 19:06</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="#comment_20120036" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="20120036" data-action="add" title="Добавить в закладки"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#book"></use></svg></a>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <span class="icon_comment-branch js-comment_tree" data-id="20120036" data-parent_id="20119980" title="Показать ветку комментариев"><svg width="8" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#tree"></use></svg></span>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#comment_20119980" class="icon_comment-arrow-up js-comment_parent" data-id="20120036" data-parent_id="20119980" title="Показать предыдущий комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
    </li>

  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="#comment_20120036" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="20120036" data-parent_id="20119980" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="20120036" data-post-target="450512" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="plus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter voting-wjt__counter_positive  js-score" title="Всего голосов +2: ↑2 и ↓0">+2</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message "><p>Умеет, с помощью библиотеки Rayon, например. Насчет итераторы vs циклы я с вами не соглашусь.<br>
Во-первых, во всех языках map действует одинаково и поддерживает вполне 
определенные инварианты. Чтобы понять, что получается в цикле — надо его
 полностью распарсить глазами. Чтобы понять, что на выходе итератора — 
достаточно прочитать только названия методов и убедиться в том, что map,
 например, трансформирует каждый элемент из одного типа в другой, но 
никогда не добавляет новых элементов и не удаляет старых.</p><br>
<p>Кроме того, Rust отлично оптимизирует итераторы, убирая проверки на выход за границы коллекций.</p></div>

        <div class="comment__footer">
    <a href="#reply" class="comment__footer-link reply_link" onclick="return comment_show_reply_form(20120036 )">Ответить</a>


</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-2" id="reply_comments_20120036">  <li class="content-list__item content-list__item_comment js-comment " rel="20120182">
    
    <span class="parent_id" data-parent_id="20120036"></span>
    <div class="comment" id="comment_20120182">
      <span class="comment__collapse" title="Свернуть/развернуть ветку комментариев" data-id="20120182"></span>
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head comment__head_topic-author comment__head_my-comment " rel="20120182">
          <a href="https://habr.com/ru/users/epishman/" class="user-info user-info_inline" rel="user-popover" data-user-login="epishman">
    <img src="Swift%20%D0%BF%D1%80%D0%BE%D1%82%D0%B8%D0%B2%20Rust%20%E2%80%94%20%D0%B1%D0%B5%D0%BD%D1%87%D0%BC%D0%B0%D1%80%D0%BA%D0%B8%D0%BD%D0%B3%20%D0%BD%D0%B0%20Linux%20%D1%81%20(%D0%BD%D0%B5)%D0%BF%D0%BE%D0%BD%D1%8F%D1%82%D0%BD%D1%8B%D0%BC%20%D1%84%D0%B8%D0%BD%D0%B0%D0%BB%D0%BE%D0%BC%20_%20%D0%A5%D0%B0%D0%B1%D1%80_files/ec0d88c4853c0d36d44bd0526dcfa8d7.png" class="user-info__image-pic user-info__image-pic_small" width="24" height="24">
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">epishman</span>
</a>

          <svg class="icon_comment-edit" title="Комментарий был изменен" width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#pencil"></use></svg>
          <time class="comment__date-time comment__date-time_published">6 мая 2019 в 19:49</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="#comment_20120182" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="20120182" data-action="add" title="Добавить в закладки"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#book"></use></svg></a>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <span class="icon_comment-branch js-comment_tree" data-id="20120182" data-parent_id="20120036" title="Показать ветку комментариев"><svg width="8" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#tree"></use></svg></span>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#comment_20120036" class="icon_comment-arrow-up js-comment_parent" data-id="20120182" data-parent_id="20120036" title="Показать предыдущий комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
    </li>

  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="#comment_20120182" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="20120182" data-parent_id="20120036" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="20120182" data-post-target="450512" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="plus" onclick="comment_vote(this);" title="За свои комментарии голосовать нельзя" disabled="disabled"><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter   js-score" title="Всего голосов 0: ↑0 и ↓0">0</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="За свои комментарии голосовать нельзя" disabled="disabled"><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message ">Ну не знаю. Если читать буквально
 Ваш код — мы сначала отфильтровали массив (то есть пробежались по всем 
телефонам), а потом взяли первый элемент результата. Я понимаю конечно, 
что мы выходим из цикла досрочно, и это «досрочно» стоит в самом конце… в
 общем, пока не могу привыкнуть.<br>
PS<br>
Впрочем, согласен, par_iter() это то что надо!</div>

        <div class="comment__footer">
    <a href="#reply" class="comment__footer-link reply_link" onclick="return comment_show_reply_form(20120182 )">Ответить</a>


</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-3" id="reply_comments_20120182">  <li class="content-list__item content-list__item_comment js-comment " rel="20120250">
    
    <span class="parent_id" data-parent_id="20120182"></span>
    <div class="comment" id="comment_20120250">
      <span class="comment__collapse" title="Свернуть/развернуть ветку комментариев" data-id="20120250"></span>
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head   " rel="20120250">
          <a href="https://habr.com/ru/users/a1ien_n3t/" class="user-info user-info_inline" rel="user-popover" data-user-login="a1ien_n3t">
    <svg class="default-image default-image_mini default-image_green" width="24" height="24"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#slug"></use></svg>
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">a1ien_n3t</span>
</a>

          <svg class="icon_comment-edit" title="Комментарий был изменен" width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#pencil"></use></svg>
          <time class="comment__date-time comment__date-time_published">6 мая 2019 в 20:11</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="#comment_20120250" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="20120250" data-action="add" title="Добавить в закладки"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#book"></use></svg></a>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <span class="icon_comment-branch js-comment_tree" data-id="20120250" data-parent_id="20120182" title="Показать ветку комментариев"><svg width="8" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#tree"></use></svg></span>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#comment_20120182" class="icon_comment-arrow-up js-comment_parent" data-id="20120250" data-parent_id="20120182" title="Показать предыдущий комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
    </li>

  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="#comment_20120250" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="20120250" data-parent_id="20120182" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="20120250" data-post-target="450512" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small voting-wjt__button_plus" data-action="plus" onclick="comment_vote(this);" title="Вы проголосовали положительно " disabled="disabled"><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter voting-wjt__counter_positive  js-score" title="Всего голосов +2: ↑2 и ↓0">+2</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="Вы проголосовали положительно , отменить голос нельзя" disabled="disabled"><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message ">Нее у нас ленивое вычисление. Мы никуда не бежим вначале.<br>
<br>
P.S. Ааа я понял вы имелли виду что это не сразу понятно из кода. Тогда 
да надо привыкнуть, что мы небудем ничего делать пока явно это не 
попросим.</div>

        <div class="comment__footer">
    <a href="#reply" class="comment__footer-link reply_link" onclick="return comment_show_reply_form(20120250 )">Ответить</a>


</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-4" id="reply_comments_20120250"></ul>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="content-list__item content-list__item_comment js-comment " rel="20120038">
    
    <span class="parent_id" data-parent_id="20119980"></span>
    <div class="comment" id="comment_20120038">
      <span class="comment__collapse" title="Свернуть/развернуть ветку комментариев" data-id="20120038"></span>
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head   " rel="20120038">
          <a href="https://habr.com/ru/users/frol/" class="user-info user-info_inline" rel="user-popover" data-user-login="frol">
    <img src="Swift%20%D0%BF%D1%80%D0%BE%D1%82%D0%B8%D0%B2%20Rust%20%E2%80%94%20%D0%B1%D0%B5%D0%BD%D1%87%D0%BC%D0%B0%D1%80%D0%BA%D0%B8%D0%BD%D0%B3%20%D0%BD%D0%B0%20Linux%20%D1%81%20(%D0%BD%D0%B5)%D0%BF%D0%BE%D0%BD%D1%8F%D1%82%D0%BD%D1%8B%D0%BC%20%D1%84%D0%B8%D0%BD%D0%B0%D0%BB%D0%BE%D0%BC%20_%20%D0%A5%D0%B0%D0%B1%D1%80_files/b01d02d99074813044746db10d6ec219.png" class="user-info__image-pic user-info__image-pic_small" width="24" height="24">
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">frol</span>
</a>

          
          <time class="comment__date-time comment__date-time_published">6 мая 2019 в 19:06</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="#comment_20120038" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="20120038" data-action="add" title="Добавить в закладки"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#book"></use></svg></a>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <span class="icon_comment-branch js-comment_tree" data-id="20120038" data-parent_id="20119980" title="Показать ветку комментариев"><svg width="8" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#tree"></use></svg></span>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#comment_20119980" class="icon_comment-arrow-up js-comment_parent" data-id="20120038" data-parent_id="20119980" title="Показать предыдущий комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
    </li>

  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="#comment_20120038" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="20120038" data-parent_id="20119980" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="20120038" data-post-target="450512" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small voting-wjt__button_plus" data-action="plus" onclick="comment_vote(this);" title="Вы проголосовали положительно " disabled="disabled"><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter voting-wjt__counter_positive  js-score" title="Всего голосов +3: ↑3 и ↓0">+3</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="Вы проголосовали положительно , отменить голос нельзя" disabled="disabled"><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message "><blockquote>Единственное ЗА — это возможность оптимизации (в т.ч. распараллеливания), но похоже Rust этого не умеет?</blockquote><p><a href="https://github.com/rayon-rs/rayon#parallel-iterators-and-more">rayon</a> умеет. То есть простая замена <code>.iter()</code> на <code>.par_iter()</code>
 и магия работает. Но в данном случае нужно найти первое вхождение, так 
что смысла в этом мало. Если бы это было узким местом, то стоило бы 
заменить вектор (с его линейным поиском) на hashmap.</p></div>

        <div class="comment__footer">
    <a href="#reply" class="comment__footer-link reply_link" onclick="return comment_show_reply_form(20120038 )">Ответить</a>


</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-2" id="reply_comments_20120038"></ul>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="content-list__item content-list__item_comment js-comment " rel="20119756">
    
    <span class="parent_id" data-parent_id="0"></span>
    <div class="comment" id="comment_20119756">
      <span class="comment__collapse" title="Свернуть/развернуть ветку комментариев" data-id="20119756"></span>
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head   " rel="20119756">
          <a href="https://habr.com/ru/users/NishchebrodKolya2/" class="user-info user-info_inline" rel="user-popover" data-user-login="NishchebrodKolya2">
    <svg class="default-image default-image_mini default-image_pink" width="24" height="24"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#slug"></use></svg>
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">NishchebrodKolya2</span>
</a>

          <svg class="icon_comment-edit" title="Комментарий был изменен" width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#pencil"></use></svg>
          <time class="comment__date-time comment__date-time_published">6 мая 2019 в 18:09</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="#comment_20119756" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="20119756" data-action="add" title="Добавить в закладки"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#book"></use></svg></a>
    </li>


  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="#comment_20119756" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="20119756" data-parent_id="0" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="20119756" data-post-target="450512" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="plus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter  voting-wjt__counter_negative js-score" title="Всего голосов –4: ↑0 и ↓4">–4</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message comment__message_downgrade comment__message_downgrade-4">Вот бы на Go кто написал тест, который как известно быстрее Rust.</div>

        <div class="comment__footer">
    <a href="#reply" class="comment__footer-link reply_link" onclick="return comment_show_reply_form(20119756 )">Ответить</a>


</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-0" id="reply_comments_20119756">  <li class="content-list__item content-list__item_comment js-comment " rel="20119836">
    
    <span class="parent_id" data-parent_id="20119756"></span>
    <div class="comment" id="comment_20119836">
      <span class="comment__collapse" title="Свернуть/развернуть ветку комментариев" data-id="20119836"></span>
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head   " rel="20119836">
          <a href="https://habr.com/ru/users/vitvakatu/" class="user-info user-info_inline" rel="user-popover" data-user-login="vitvakatu">
    <img src="Swift%20%D0%BF%D1%80%D0%BE%D1%82%D0%B8%D0%B2%20Rust%20%E2%80%94%20%D0%B1%D0%B5%D0%BD%D1%87%D0%BC%D0%B0%D1%80%D0%BA%D0%B8%D0%BD%D0%B3%20%D0%BD%D0%B0%20Linux%20%D1%81%20(%D0%BD%D0%B5)%D0%BF%D0%BE%D0%BD%D1%8F%D1%82%D0%BD%D1%8B%D0%BC%20%D1%84%D0%B8%D0%BD%D0%B0%D0%BB%D0%BE%D0%BC%20_%20%D0%A5%D0%B0%D0%B1%D1%80_files/ad8e29a353157cf829a8a65f4272e8fb.jpg" class="user-info__image-pic user-info__image-pic_small" width="24" height="24">
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">vitvakatu</span>
</a>

          
          <time class="comment__date-time comment__date-time_published">6 мая 2019 в 18:26</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="#comment_20119836" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="20119836" data-action="add" title="Добавить в закладки"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#book"></use></svg></a>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <span class="icon_comment-branch js-comment_tree" data-id="20119836" data-parent_id="20119756" title="Показать ветку комментариев"><svg width="8" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#tree"></use></svg></span>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#comment_20119756" class="icon_comment-arrow-up js-comment_parent" data-id="20119836" data-parent_id="20119756" title="Показать предыдущий комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
    </li>

  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="#comment_20119836" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="20119836" data-parent_id="20119756" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="20119836" data-post-target="450512" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="plus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter voting-wjt__counter_positive  js-score" title="Всего голосов +1: ↑1 и ↓0">+1</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message "><p><a href="https://benchmarksgame-team.pages.debian.net/benchmarksgame/faster/rust-go.html">Вы неправы</a></p></div>

        <div class="comment__footer">
    <a href="#reply" class="comment__footer-link reply_link" onclick="return comment_show_reply_form(20119836 )">Ответить</a>


</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-1" id="reply_comments_20119836"></ul>
  </li>
  <li class="content-list__item content-list__item_comment js-comment " rel="20119992">
    
    <span class="parent_id" data-parent_id="20119756"></span>
    <div class="comment" id="comment_20119992">
      <span class="comment__collapse" title="Свернуть/развернуть ветку комментариев" data-id="20119992"></span>
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head comment__head_topic-author comment__head_my-comment " rel="20119992">
          <a href="https://habr.com/ru/users/epishman/" class="user-info user-info_inline" rel="user-popover" data-user-login="epishman">
    <img src="Swift%20%D0%BF%D1%80%D0%BE%D1%82%D0%B8%D0%B2%20Rust%20%E2%80%94%20%D0%B1%D0%B5%D0%BD%D1%87%D0%BC%D0%B0%D1%80%D0%BA%D0%B8%D0%BD%D0%B3%20%D0%BD%D0%B0%20Linux%20%D1%81%20(%D0%BD%D0%B5)%D0%BF%D0%BE%D0%BD%D1%8F%D1%82%D0%BD%D1%8B%D0%BC%20%D1%84%D0%B8%D0%BD%D0%B0%D0%BB%D0%BE%D0%BC%20_%20%D0%A5%D0%B0%D0%B1%D1%80_files/ec0d88c4853c0d36d44bd0526dcfa8d7.png" class="user-info__image-pic user-info__image-pic_small" width="24" height="24">
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">epishman</span>
</a>

          
          <time class="comment__date-time comment__date-time_published">6 мая 2019 в 18:51</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="#comment_20119992" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="20119992" data-action="add" title="Добавить в закладки"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#book"></use></svg></a>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <span class="icon_comment-branch js-comment_tree" data-id="20119992" data-parent_id="20119756" title="Показать ветку комментариев"><svg width="8" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#tree"></use></svg></span>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#comment_20119756" class="icon_comment-arrow-up js-comment_parent" data-id="20119992" data-parent_id="20119756" title="Показать предыдущий комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
    </li>

  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="#comment_20119992" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="20119992" data-parent_id="20119756" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="20119992" data-post-target="450512" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="plus" onclick="comment_vote(this);" title="За свои комментарии голосовать нельзя" disabled="disabled"><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter voting-wjt__counter_positive  js-score" title="Всего голосов +1: ↑1 и ↓0">+1</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="За свои комментарии голосовать нельзя" disabled="disabled"><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message ">Может и напишу. Хотя, гошник бы 
потратил в 10 раз меньше времени чем я, вспоминая как чего там 
называется. Да и не люблю я Go, эстетически.</div>

        <div class="comment__footer">
    <a href="#reply" class="comment__footer-link reply_link" onclick="return comment_show_reply_form(20119992 )">Ответить</a>


</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-1" id="reply_comments_20119992"></ul>
  </li>
</ul>
  </li>
  <li class="content-list__item content-list__item_comment js-comment " rel="20120670">
    
    <span class="parent_id" data-parent_id="0"></span>
    <div class="comment" id="comment_20120670">
      <span class="comment__collapse" title="Свернуть/развернуть ветку комментариев" data-id="20120670"></span>
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head   " rel="20120670">
          <a href="https://habr.com/ru/users/iushakov/" class="user-info user-info_inline" rel="user-popover" data-user-login="iushakov">
    <svg class="default-image default-image_mini default-image_pink" width="24" height="24"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#slug"></use></svg>
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">iushakov</span>
</a>

          
          <time class="comment__date-time comment__date-time_published">6 мая 2019 в 21:48</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="#comment_20120670" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="20120670" data-action="add" title="Добавить в закладки"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#book"></use></svg></a>
    </li>


  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="#comment_20120670" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="20120670" data-parent_id="0" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="20120670" data-post-target="450512" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small voting-wjt__button_plus" data-action="plus" onclick="comment_vote(this);" title="Вы проголосовали положительно " disabled="disabled"><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter voting-wjt__counter_positive  js-score" title="Всего голосов +3: ↑3 и ↓0">+3</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="Вы проголосовали положительно , отменить голос нельзя" disabled="disabled"><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message "><blockquote>1) Буферизованное посимвольное чтение файла, потоковый парсинг и выделение объектов из массива.</blockquote><br>
Если в случае Rust это видимо так, то в случае Swift никакого буфера для
 чтения не используется. Мало того, на каждый вызов чтения вы создаете 
новый Data объект.<br>
Если это заменить на InputStream, то становится 13 секунд 
(https://gist.github.com/ivan-ushakov/65ad074216e33f222b6a572069e4e8f5).
 Это по прежнему много, но тут проблема в том что текущий парсер JSON не
 сохраняет информацию о типе при разборе, и вынуждает использовать as? 
для логики, что выливается в _dynamicCastFromExistential, который 
занимает много времени, судя по отчету Time Profiler.<br>
Еще не очень корректно сравнивать язык с постоянным ARC, и язык где ARC 
можно использовать только когда он нужен. В вашем коде Swift почти не 
предпринято усилий по минимизации создания объектов в куче.</div>

        <div class="comment__footer">
    <a href="#reply" class="comment__footer-link reply_link" onclick="return comment_show_reply_form(20120670 )">Ответить</a>


</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-0" id="reply_comments_20120670">  <li class="content-list__item content-list__item_comment js-comment " rel="20120724">
    
    <span class="parent_id" data-parent_id="20120670"></span>
    <div class="comment" id="comment_20120724">
      <span class="comment__collapse" title="Свернуть/развернуть ветку комментариев" data-id="20120724"></span>
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head comment__head_topic-author comment__head_my-comment " rel="20120724">
          <a href="https://habr.com/ru/users/epishman/" class="user-info user-info_inline" rel="user-popover" data-user-login="epishman">
    <img src="Swift%20%D0%BF%D1%80%D0%BE%D1%82%D0%B8%D0%B2%20Rust%20%E2%80%94%20%D0%B1%D0%B5%D0%BD%D1%87%D0%BC%D0%B0%D1%80%D0%BA%D0%B8%D0%BD%D0%B3%20%D0%BD%D0%B0%20Linux%20%D1%81%20(%D0%BD%D0%B5)%D0%BF%D0%BE%D0%BD%D1%8F%D1%82%D0%BD%D1%8B%D0%BC%20%D1%84%D0%B8%D0%BD%D0%B0%D0%BB%D0%BE%D0%BC%20_%20%D0%A5%D0%B0%D0%B1%D1%80_files/ec0d88c4853c0d36d44bd0526dcfa8d7.png" class="user-info__image-pic user-info__image-pic_small" width="24" height="24">
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">epishman</span>
</a>

          <svg class="icon_comment-edit" title="Комментарий был изменен" width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#pencil"></use></svg>
          <time class="comment__date-time comment__date-time_published">6 мая 2019 в 21:58</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="#comment_20120724" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="20120724" data-action="add" title="Добавить в закладки"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#book"></use></svg></a>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <span class="icon_comment-branch js-comment_tree" data-id="20120724" data-parent_id="20120670" title="Показать ветку комментариев"><svg width="8" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#tree"></use></svg></span>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#comment_20120670" class="icon_comment-arrow-up js-comment_parent" data-id="20120724" data-parent_id="20120670" title="Показать предыдущий комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
    </li>

  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="#comment_20120724" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="20120724" data-parent_id="20120670" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="20120724" data-post-target="450512" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="plus" onclick="comment_vote(this);" title="За свои комментарии голосовать нельзя" disabled="disabled"><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter   js-score" title="Всего голосов 0: ↑0 и ↓0">0</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="За свои комментарии голосовать нельзя" disabled="disabled"><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message ">О! Очень дельный комментарий. Я 
так и предполагал, что в Swift нужно хорошо разбираться, чтобы писать 
оптимально, иначе выстрел в ногу. То, что я Data повторно создаю — на 
эти же грабли я наступил в Rust, и мне уже объяснили, что надо не 
пересоздавать объект, а просто его очищать, тогда релокации не 
происходит.<br>
Что касается типа Any — это кстати очень хороший довод в пользу 
алгебраических типов Rust, где нет корневого типа (в отличие например от
 Go, где он есть interface{}, и наверняка так же долго кастится). А в 
растовом enum получается, информация о типе сохраняется, потому что там 
кастинг проходит быстро.<br>
PS<br>
13 и 4.5 секунды — это уже нормальная, объяснимая разница.<br>
PPSS<br>
Специалисты смогли ускорить мой код на Rust всего до 3.5, видимо потому 
что вариантов написать по другому значительно меньше, компилятор злой :)</div>

        <div class="comment__footer">
    <a href="#reply" class="comment__footer-link reply_link" onclick="return comment_show_reply_form(20120724 )">Ответить</a>


</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-1" id="reply_comments_20120724">  <li class="content-list__item content-list__item_comment js-comment " rel="20120848">
    
    <span class="parent_id" data-parent_id="20120724"></span>
    <div class="comment" id="comment_20120848">
      <span class="comment__collapse" title="Свернуть/развернуть ветку комментариев" data-id="20120848"></span>
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head   " rel="20120848">
          <a href="https://habr.com/ru/users/Gorthauer87/" class="user-info user-info_inline" rel="user-popover" data-user-login="Gorthauer87">
    <img src="Swift%20%D0%BF%D1%80%D0%BE%D1%82%D0%B8%D0%B2%20Rust%20%E2%80%94%20%D0%B1%D0%B5%D0%BD%D1%87%D0%BC%D0%B0%D1%80%D0%BA%D0%B8%D0%BD%D0%B3%20%D0%BD%D0%B0%20Linux%20%D1%81%20(%D0%BD%D0%B5)%D0%BF%D0%BE%D0%BD%D1%8F%D1%82%D0%BD%D1%8B%D0%BC%20%D1%84%D0%B8%D0%BD%D0%B0%D0%BB%D0%BE%D0%BC%20_%20%D0%A5%D0%B0%D0%B1%D1%80_files/4833cc24b09e586af2d23ecebc59b7cd.jpg" class="user-info__image-pic user-info__image-pic_small" width="24" height="24">
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">Gorthauer87</span>
</a>

          
          <time class="comment__date-time comment__date-time_published">6 мая 2019 в 22:31</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="#comment_20120848" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="20120848" data-action="add" title="Добавить в закладки"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#book"></use></svg></a>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <span class="icon_comment-branch js-comment_tree" data-id="20120848" data-parent_id="20120724" title="Показать ветку комментариев"><svg width="8" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#tree"></use></svg></span>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#comment_20120724" class="icon_comment-arrow-up js-comment_parent" data-id="20120848" data-parent_id="20120724" title="Показать предыдущий комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
    </li>

  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="#comment_20120848" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="20120848" data-parent_id="20120724" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="20120848" data-post-target="450512" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="plus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter   js-score" title="Всего голосов 0: ↑0 и ↓0">0</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message "><p>В Swift же тоже есть аглебраические типы данных</p></div>

        <div class="comment__footer">
    <a href="#reply" class="comment__footer-link reply_link" onclick="return comment_show_reply_form(20120848 )">Ответить</a>


</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-2" id="reply_comments_20120848">  <li class="content-list__item content-list__item_comment js-comment " rel="20120934">
    
    <span class="parent_id" data-parent_id="20120848"></span>
    <div class="comment" id="comment_20120934">
      <span class="comment__collapse" title="Свернуть/развернуть ветку комментариев" data-id="20120934"></span>
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head comment__head_topic-author comment__head_my-comment " rel="20120934">
          <a href="https://habr.com/ru/users/epishman/" class="user-info user-info_inline" rel="user-popover" data-user-login="epishman">
    <img src="Swift%20%D0%BF%D1%80%D0%BE%D1%82%D0%B8%D0%B2%20Rust%20%E2%80%94%20%D0%B1%D0%B5%D0%BD%D1%87%D0%BC%D0%B0%D1%80%D0%BA%D0%B8%D0%BD%D0%B3%20%D0%BD%D0%B0%20Linux%20%D1%81%20(%D0%BD%D0%B5)%D0%BF%D0%BE%D0%BD%D1%8F%D1%82%D0%BD%D1%8B%D0%BC%20%D1%84%D0%B8%D0%BD%D0%B0%D0%BB%D0%BE%D0%BC%20_%20%D0%A5%D0%B0%D0%B1%D1%80_files/ec0d88c4853c0d36d44bd0526dcfa8d7.png" class="user-info__image-pic user-info__image-pic_small" width="24" height="24">
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">epishman</span>
</a>

          <svg class="icon_comment-edit" title="Комментарий был изменен" width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#pencil"></use></svg>
          <time class="comment__date-time comment__date-time_published">6 мая 2019 в 22:54</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="#comment_20120934" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="20120934" data-action="add" title="Добавить в закладки"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#book"></use></svg></a>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <span class="icon_comment-branch js-comment_tree" data-id="20120934" data-parent_id="20120848" title="Показать ветку комментариев"><svg width="8" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#tree"></use></svg></span>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#comment_20120848" class="icon_comment-arrow-up js-comment_parent" data-id="20120934" data-parent_id="20120848" title="Показать предыдущий комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
    </li>

  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="#comment_20120934" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="20120934" data-parent_id="20120848" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="20120934" data-post-target="450512" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="plus" onclick="comment_vote(this);" title="За свои комментарии голосовать нельзя" disabled="disabled"><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter   js-score" title="Всего голосов 0: ↑0 и ↓0">0</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="За свои комментарии голосовать нельзя" disabled="disabled"><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message ">Ну тогда надо использовать. Вот как в расте выглядит значение JSON (и никаких Any):<br>
<i>enum Value {<br>
 Null,<br>
 Bool(bool),<br>
 Number(Number),<br>
 String(String),<br>
 Array(Vec),<br>
 Object(Map&lt;String, Value&gt;),<br>
}</i></div>

        <div class="comment__footer">
    <a href="#reply" class="comment__footer-link reply_link" onclick="return comment_show_reply_form(20120934 )">Ответить</a>


</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-3" id="reply_comments_20120934">  <li class="content-list__item content-list__item_comment js-comment " rel="20121260">
    
    <span class="parent_id" data-parent_id="20120934"></span>
    <div class="comment" id="comment_20121260">
      <span class="comment__collapse" title="Свернуть/развернуть ветку комментариев" data-id="20121260"></span>
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head   " rel="20121260">
          <a href="https://habr.com/ru/users/V1tol/" class="user-info user-info_inline" rel="user-popover" data-user-login="V1tol">
    <img src="Swift%20%D0%BF%D1%80%D0%BE%D1%82%D0%B8%D0%B2%20Rust%20%E2%80%94%20%D0%B1%D0%B5%D0%BD%D1%87%D0%BC%D0%B0%D1%80%D0%BA%D0%B8%D0%BD%D0%B3%20%D0%BD%D0%B0%20Linux%20%D1%81%20(%D0%BD%D0%B5)%D0%BF%D0%BE%D0%BD%D1%8F%D1%82%D0%BD%D1%8B%D0%BC%20%D1%84%D0%B8%D0%BD%D0%B0%D0%BB%D0%BE%D0%BC%20_%20%D0%A5%D0%B0%D0%B1%D1%80_files/7ca385a302cfdff54b323bbcce991b79.jpg" class="user-info__image-pic user-info__image-pic_small" width="24" height="24">
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">V1tol</span>
</a>

          
          <time class="comment__date-time comment__date-time_published">7 мая 2019 в 01:03</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="#comment_20121260" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="20121260" data-action="add" title="Добавить в закладки"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#book"></use></svg></a>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <span class="icon_comment-branch js-comment_tree" data-id="20121260" data-parent_id="20120934" title="Показать ветку комментариев"><svg width="8" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#tree"></use></svg></span>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#comment_20120934" class="icon_comment-arrow-up js-comment_parent" data-id="20121260" data-parent_id="20120934" title="Показать предыдущий комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
    </li>

  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="#comment_20121260" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="20121260" data-parent_id="20120934" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="20121260" data-post-target="450512" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="plus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter   js-score" title="Всего голосов 0: ↑0 и ↓0">0</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message ">В таком случае в Swift тоже нужно
 искать библиотеку для парсинга JSON не использующую встроенный в 
Foundation парсер. А для Swift таких библиотек и нет, нашлась разве что 
discontinued <a href="https://github.com/tyrone-sudeium/JSONCore">github.com/tyrone-sudeium/JSONCore</a></div>

        <div class="comment__footer">
    <a href="#reply" class="comment__footer-link reply_link" onclick="return comment_show_reply_form(20121260 )">Ответить</a>


</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-4" id="reply_comments_20121260">  <li class="content-list__item content-list__item_comment js-comment " rel="20121574">
    
    <span class="parent_id" data-parent_id="20121260"></span>
    <div class="comment" id="comment_20121574">
      <span class="comment__collapse" title="Свернуть/развернуть ветку комментариев" data-id="20121574"></span>
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head   " rel="20121574">
          <a href="https://habr.com/ru/users/XanKraegor/" class="user-info user-info_inline" rel="user-popover" data-user-login="XanKraegor">
    <img src="Swift%20%D0%BF%D1%80%D0%BE%D1%82%D0%B8%D0%B2%20Rust%20%E2%80%94%20%D0%B1%D0%B5%D0%BD%D1%87%D0%BC%D0%B0%D1%80%D0%BA%D0%B8%D0%BD%D0%B3%20%D0%BD%D0%B0%20Linux%20%D1%81%20(%D0%BD%D0%B5)%D0%BF%D0%BE%D0%BD%D1%8F%D1%82%D0%BD%D1%8B%D0%BC%20%D1%84%D0%B8%D0%BD%D0%B0%D0%BB%D0%BE%D0%BC%20_%20%D0%A5%D0%B0%D0%B1%D1%80_files/18ad12672848fff486e0b5bb2fbac9ba.jpg" class="user-info__image-pic user-info__image-pic_small" width="24" height="24">
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">XanKraegor</span>
</a>

          
          <time class="comment__date-time comment__date-time_published">7 мая 2019 в 06:33</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="#comment_20121574" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="20121574" data-action="add" title="Добавить в закладки"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#book"></use></svg></a>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <span class="icon_comment-branch js-comment_tree" data-id="20121574" data-parent_id="20121260" title="Показать ветку комментариев"><svg width="8" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#tree"></use></svg></span>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#comment_20121260" class="icon_comment-arrow-up js-comment_parent" data-id="20121574" data-parent_id="20121260" title="Показать предыдущий комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
    </li>

  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="#comment_20121574" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="20121574" data-parent_id="20121260" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="20121574" data-post-target="450512" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="plus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter   js-score" title="Всего голосов 0: ↑0 и ↓0">0</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message "><p>Можно тоже из С забриджить ;)</p></div>

        <div class="comment__footer">
    <a href="#reply" class="comment__footer-link reply_link" onclick="return comment_show_reply_form(20121574 )">Ответить</a>


</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-5" id="reply_comments_20121574"></ul>
  </li>
</ul>
  </li>
  <li class="content-list__item content-list__item_comment js-comment " rel="20122274">
    
    <span class="parent_id" data-parent_id="20120934"></span>
    <div class="comment" id="comment_20122274">
      <span class="comment__collapse" title="Свернуть/развернуть ветку комментариев" data-id="20122274"></span>
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head   " rel="20122274">
          <a href="https://habr.com/ru/users/Nexelen/" class="user-info user-info_inline" rel="user-popover" data-user-login="Nexelen">
    <img src="Swift%20%D0%BF%D1%80%D0%BE%D1%82%D0%B8%D0%B2%20Rust%20%E2%80%94%20%D0%B1%D0%B5%D0%BD%D1%87%D0%BC%D0%B0%D1%80%D0%BA%D0%B8%D0%BD%D0%B3%20%D0%BD%D0%B0%20Linux%20%D1%81%20(%D0%BD%D0%B5)%D0%BF%D0%BE%D0%BD%D1%8F%D1%82%D0%BD%D1%8B%D0%BC%20%D1%84%D0%B8%D0%BD%D0%B0%D0%BB%D0%BE%D0%BC%20_%20%D0%A5%D0%B0%D0%B1%D1%80_files/788f36861eb8395e10cb3805e026d4a7.jpg" class="user-info__image-pic user-info__image-pic_small" width="24" height="24">
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">Nexelen</span>
</a>

          
          <time class="comment__date-time comment__date-time_published">7 мая 2019 в 10:44</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="#comment_20122274" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="20122274" data-action="add" title="Добавить в закладки"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#book"></use></svg></a>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <span class="icon_comment-branch js-comment_tree" data-id="20122274" data-parent_id="20120934" title="Показать ветку комментариев"><svg width="8" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#tree"></use></svg></span>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#comment_20120934" class="icon_comment-arrow-up js-comment_parent" data-id="20122274" data-parent_id="20120934" title="Показать предыдущий комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
    </li>

  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="#comment_20122274" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="20122274" data-parent_id="20120934" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="20122274" data-post-target="450512" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small voting-wjt__button_plus" data-action="plus" onclick="comment_vote(this);" title="Вы проголосовали положительно " disabled="disabled"><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter voting-wjt__counter_positive  js-score" title="Всего голосов +1: ↑1 и ↓0">+1</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="Вы проголосовали положительно , отменить голос нельзя" disabled="disabled"><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message ">Быть может попробовать с <a href="https://github.com/Ikiga/IkigaJSON">github.com/Ikiga/IkigaJSON</a></div>

        <div class="comment__footer">
    <a href="#reply" class="comment__footer-link reply_link" onclick="return comment_show_reply_form(20122274 )">Ответить</a>


</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-4" id="reply_comments_20122274"></ul>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="content-list__item content-list__item_comment js-comment " rel="20120722">
    
    <span class="parent_id" data-parent_id="0"></span>
    <div class="comment" id="comment_20120722">
      <span class="comment__collapse" title="Свернуть/развернуть ветку комментариев" data-id="20120722"></span>
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head comment__head_topic-author comment__head_my-comment " rel="20120722">
          <a href="https://habr.com/ru/users/epishman/" class="user-info user-info_inline" rel="user-popover" data-user-login="epishman">
    <img src="Swift%20%D0%BF%D1%80%D0%BE%D1%82%D0%B8%D0%B2%20Rust%20%E2%80%94%20%D0%B1%D0%B5%D0%BD%D1%87%D0%BC%D0%B0%D1%80%D0%BA%D0%B8%D0%BD%D0%B3%20%D0%BD%D0%B0%20Linux%20%D1%81%20(%D0%BD%D0%B5)%D0%BF%D0%BE%D0%BD%D1%8F%D1%82%D0%BD%D1%8B%D0%BC%20%D1%84%D0%B8%D0%BD%D0%B0%D0%BB%D0%BE%D0%BC%20_%20%D0%A5%D0%B0%D0%B1%D1%80_files/ec0d88c4853c0d36d44bd0526dcfa8d7.png" class="user-info__image-pic user-info__image-pic_small" width="24" height="24">
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">epishman</span>
</a>

          <svg class="icon_comment-edit" title="Комментарий был изменен" width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#pencil"></use></svg>
          <time class="comment__date-time comment__date-time_published">6 мая 2019 в 21:57</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="#comment_20120722" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="20120722" data-action="add" title="Добавить в закладки"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#book"></use></svg></a>
    </li>


  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="#comment_20120722" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="20120722" data-parent_id="0" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="20120722" data-post-target="450512" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="plus" onclick="comment_vote(this);" title="За свои комментарии голосовать нельзя" disabled="disabled"><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter   js-score" title="Всего голосов 0: ↑0 и ↓0">0</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="За свои комментарии голосовать нельзя" disabled="disabled"><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message ">del</div>

        <div class="comment__footer">
    <a href="#reply" class="comment__footer-link reply_link" onclick="return comment_show_reply_form(20120722 )">Ответить</a>


</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-0" id="reply_comments_20120722"></ul>
  </li>
  <li class="content-list__item content-list__item_comment js-comment " rel="20122188">
    
    <span class="parent_id" data-parent_id="0"></span>
    <div class="comment" id="comment_20122188">
      <span class="comment__collapse" title="Свернуть/развернуть ветку комментариев" data-id="20122188"></span>
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head   " rel="20122188">
          <a href="https://habr.com/ru/users/iushakov/" class="user-info user-info_inline" rel="user-popover" data-user-login="iushakov">
    <svg class="default-image default-image_mini default-image_pink" width="24" height="24"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#slug"></use></svg>
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">iushakov</span>
</a>

          
          <time class="comment__date-time comment__date-time_published">7 мая 2019 в 10:28</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="#comment_20122188" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="20122188" data-action="add" title="Добавить в закладки"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#book"></use></svg></a>
    </li>


  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="#comment_20122188" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="20122188" data-parent_id="0" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="20122188" data-post-target="450512" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small voting-wjt__button_plus" data-action="plus" onclick="comment_vote(this);" title="Вы проголосовали положительно " disabled="disabled"><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter voting-wjt__counter_positive  js-score" title="Всего голосов +1: ↑1 и ↓0">+1</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="Вы проголосовали положительно , отменить голос нельзя" disabled="disabled"><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message ">Вот версия на 5.7 секунд — <a href="https://gist.github.com/ivan-ushakov/ee8257e5bb3e8c872f2f07c712e76972">gist.github.com/ivan-ushakov/ee8257e5bb3e8c872f2f07c712e76972</a>. Свел вызовы dynamicCast к минимуму.</div>

        <div class="comment__footer">
    <a href="#reply" class="comment__footer-link reply_link" onclick="return comment_show_reply_form(20122188 )">Ответить</a>


</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-0" id="reply_comments_20122188">  <li class="content-list__item content-list__item_comment js-comment " rel="20122324">
    
    <span class="parent_id" data-parent_id="20122188"></span>
    <div class="comment" id="comment_20122324">
      <span class="comment__collapse" title="Свернуть/развернуть ветку комментариев" data-id="20122324"></span>
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head comment__head_topic-author comment__head_my-comment " rel="20122324">
          <a href="https://habr.com/ru/users/epishman/" class="user-info user-info_inline" rel="user-popover" data-user-login="epishman">
    <img src="Swift%20%D0%BF%D1%80%D0%BE%D1%82%D0%B8%D0%B2%20Rust%20%E2%80%94%20%D0%B1%D0%B5%D0%BD%D1%87%D0%BC%D0%B0%D1%80%D0%BA%D0%B8%D0%BD%D0%B3%20%D0%BD%D0%B0%20Linux%20%D1%81%20(%D0%BD%D0%B5)%D0%BF%D0%BE%D0%BD%D1%8F%D1%82%D0%BD%D1%8B%D0%BC%20%D1%84%D0%B8%D0%BD%D0%B0%D0%BB%D0%BE%D0%BC%20_%20%D0%A5%D0%B0%D0%B1%D1%80_files/ec0d88c4853c0d36d44bd0526dcfa8d7.png" class="user-info__image-pic user-info__image-pic_small" width="24" height="24">
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">epishman</span>
</a>

          <svg class="icon_comment-edit" title="Комментарий был изменен" width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#pencil"></use></svg>
          <time class="comment__date-time comment__date-time_published">7 мая 2019 в 10:55</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="#comment_20122324" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="20122324" data-action="add" title="Добавить в закладки"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#book"></use></svg></a>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <span class="icon_comment-branch js-comment_tree" data-id="20122324" data-parent_id="20122188" title="Показать ветку комментариев"><svg width="8" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#tree"></use></svg></span>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#comment_20122188" class="icon_comment-arrow-up js-comment_parent" data-id="20122324" data-parent_id="20122188" title="Показать предыдущий комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
    </li>

  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="#comment_20122324" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="20122324" data-parent_id="20122188" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="20122324" data-post-target="450512" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="plus" onclick="comment_vote(this);" title="За свои комментарии голосовать нельзя" disabled="disabled"><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter   js-score" title="Всего голосов 0: ↑0 и ↓0">0</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="За свои комментарии голосовать нельзя" disabled="disabled"><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message ">Да, Вы волшебник, я подозревал что-то в этом роде.<br>
PS<br>
 if d.phones[p] != nil {<br>
 d.phones[p] = 1<br>
 }<br>
Я стараюсь таких вещей избегать, если компилятор тупой, он по идее должен дважды хеш брать от p, но, выходит, не берет.</div>

        <div class="comment__footer">
    <a href="#reply" class="comment__footer-link reply_link" onclick="return comment_show_reply_form(20122324 )">Ответить</a>


</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-1" id="reply_comments_20122324">  <li class="content-list__item content-list__item_comment js-comment " rel="20125258">
    
    <span class="parent_id" data-parent_id="20122324"></span>
    <div class="comment" id="comment_20125258">
      <span class="comment__collapse" title="Свернуть/развернуть ветку комментариев" data-id="20125258"></span>
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head   " rel="20125258">
          <a href="https://habr.com/ru/users/V1tol/" class="user-info user-info_inline" rel="user-popover" data-user-login="V1tol">
    <img src="Swift%20%D0%BF%D1%80%D0%BE%D1%82%D0%B8%D0%B2%20Rust%20%E2%80%94%20%D0%B1%D0%B5%D0%BD%D1%87%D0%BC%D0%B0%D1%80%D0%BA%D0%B8%D0%BD%D0%B3%20%D0%BD%D0%B0%20Linux%20%D1%81%20(%D0%BD%D0%B5)%D0%BF%D0%BE%D0%BD%D1%8F%D1%82%D0%BD%D1%8B%D0%BC%20%D1%84%D0%B8%D0%BD%D0%B0%D0%BB%D0%BE%D0%BC%20_%20%D0%A5%D0%B0%D0%B1%D1%80_files/7ca385a302cfdff54b323bbcce991b79.jpg" class="user-info__image-pic user-info__image-pic_small" width="24" height="24">
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">V1tol</span>
</a>

          
          <time class="comment__date-time comment__date-time_published">7 мая 2019 в 18:40</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="#comment_20125258" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="20125258" data-action="add" title="Добавить в закладки"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#book"></use></svg></a>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <span class="icon_comment-branch js-comment_tree" data-id="20125258" data-parent_id="20122324" title="Показать ветку комментариев"><svg width="8" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#tree"></use></svg></span>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#comment_20122324" class="icon_comment-arrow-up js-comment_parent" data-id="20125258" data-parent_id="20122324" title="Показать предыдущий комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
    </li>

  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="#comment_20125258" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="20125258" data-parent_id="20122324" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="20125258" data-post-target="450512" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small voting-wjt__button_plus" data-action="plus" onclick="comment_vote(this);" title="Вы проголосовали положительно " disabled="disabled"><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter voting-wjt__counter_positive  js-score" title="Всего голосов +1: ↑1 и ↓0">+1</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="Вы проголосовали положительно , отменить голос нельзя" disabled="disabled"><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message ">Перепроверил — с кастомным типом 
переменной p хэш при таком коде вычислится дважды. Хотя возможно, что в 
Swift хеши для строк кешируются и в этом месте не будет провалов по 
производительности.</div>

        <div class="comment__footer">
    <a href="#reply" class="comment__footer-link reply_link" onclick="return comment_show_reply_form(20125258 )">Ответить</a>


</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-2" id="reply_comments_20125258"></ul>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="content-list__item content-list__item_comment js-comment " rel="20126382">
    
    <span class="parent_id" data-parent_id="0"></span>
    <div class="comment" id="comment_20126382">
      <span class="comment__collapse" title="Свернуть/развернуть ветку комментариев" data-id="20126382"></span>
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head   " rel="20126382">
          <a href="https://habr.com/ru/users/PsyHaSTe/" class="user-info user-info_inline" rel="user-popover" data-user-login="PsyHaSTe">
    <img src="Swift%20%D0%BF%D1%80%D0%BE%D1%82%D0%B8%D0%B2%20Rust%20%E2%80%94%20%D0%B1%D0%B5%D0%BD%D1%87%D0%BC%D0%B0%D1%80%D0%BA%D0%B8%D0%BD%D0%B3%20%D0%BD%D0%B0%20Linux%20%D1%81%20(%D0%BD%D0%B5)%D0%BF%D0%BE%D0%BD%D1%8F%D1%82%D0%BD%D1%8B%D0%BC%20%D1%84%D0%B8%D0%BD%D0%B0%D0%BB%D0%BE%D0%BC%20_%20%D0%A5%D0%B0%D0%B1%D1%80_files/7631ac5e5a7e237a937f5f2a74ae4c9e.jpg" class="user-info__image-pic user-info__image-pic_small" width="24" height="24">
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">PsyHaSTe</span>
</a>

          
          <time class="comment__date-time comment__date-time_published">8 мая 2019 в 00:04</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="#comment_20126382" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#" class="icon_comment-bookmark icon_comment-bookmark_add" onclick="return comments_add_to_favorite(this)" data-type="3" data-id="20126382" data-action="remove" title="Убрать из закладок"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#book"></use></svg></a>
    </li>


  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="#comment_20126382" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="20126382" data-parent_id="0" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="20126382" data-post-target="450512" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small voting-wjt__button_plus" data-action="plus" onclick="comment_vote(this);" title="Вы проголосовали положительно " disabled="disabled"><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter voting-wjt__counter_positive  js-score" title="Всего голосов +1: ↑1 и ↓0">+1</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="Вы проголосовали положительно , отменить голос нельзя" disabled="disabled"><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message "><p>Ради интереса выпилил весь 
ужасающий парсинг, заменив на дефолтные растовые возможности. Стриминг 
при этом не потерялся. Попробуйте это забенчить, интересно, что у вас 
выйдет:</p><br>
<p><a href="https://gist.github.com/Pzixel/4427eb6641cbd092621ea91c5fd0db82">https://gist.github.com/Pzixel/4427eb6641cbd092621ea91c5fd0db82</a></p><br>
<hr><br>
<p>P.S. Также попробовал полностью с нуля переписать, адекватно, с 
парсингом, но забил после того, как увидел, что у вас в некоторых 
случаях phones приходят из двух разных полей, причем они могут оба в 
одном объекте быть. К такому жизнь serde не готовила :) Но если 
интересно, то практически все варианты нормально парсятся вот здесь: <a href="https://gist.github.com/Pzixel/0460abea262574b6081dc709c9c30e26">https://gist.github.com/Pzixel/0460abea262574b6081dc709c9c30e26</a>.
 Там можно увидеть, что почти все разбросанные данные можно распарсить в
 структуру, ну а дальше что с ней делать вопрос тривиальный.</p></div>

        <div class="comment__footer">
    <a href="#reply" class="comment__footer-link reply_link" onclick="return comment_show_reply_form(20126382 )">Ответить</a>


</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-0" id="reply_comments_20126382">  <li class="content-list__item content-list__item_comment js-comment " rel="20126454">
    
    <span class="parent_id" data-parent_id="20126382"></span>
    <div class="comment" id="comment_20126454">
      <span class="comment__collapse" title="Свернуть/развернуть ветку комментариев" data-id="20126454"></span>
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head comment__head_topic-author comment__head_my-comment " rel="20126454">
          <a href="https://habr.com/ru/users/epishman/" class="user-info user-info_inline" rel="user-popover" data-user-login="epishman">
    <img src="Swift%20%D0%BF%D1%80%D0%BE%D1%82%D0%B8%D0%B2%20Rust%20%E2%80%94%20%D0%B1%D0%B5%D0%BD%D1%87%D0%BC%D0%B0%D1%80%D0%BA%D0%B8%D0%BD%D0%B3%20%D0%BD%D0%B0%20Linux%20%D1%81%20(%D0%BD%D0%B5)%D0%BF%D0%BE%D0%BD%D1%8F%D1%82%D0%BD%D1%8B%D0%BC%20%D1%84%D0%B8%D0%BD%D0%B0%D0%BB%D0%BE%D0%BC%20_%20%D0%A5%D0%B0%D0%B1%D1%80_files/ec0d88c4853c0d36d44bd0526dcfa8d7.png" class="user-info__image-pic user-info__image-pic_small" width="24" height="24">
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">epishman</span>
</a>

          <svg class="icon_comment-edit" title="Комментарий был изменен" width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#pencil"></use></svg>
          <time class="comment__date-time comment__date-time_published">8 мая 2019 в 00:33</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="#comment_20126454" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="20126454" data-action="add" title="Добавить в закладки"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#book"></use></svg></a>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <span class="icon_comment-branch js-comment_tree" data-id="20126454" data-parent_id="20126382" title="Показать ветку комментариев"><svg width="8" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#tree"></use></svg></span>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#comment_20126382" class="icon_comment-arrow-up js-comment_parent" data-id="20126454" data-parent_id="20126382" title="Показать предыдущий комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
    </li>

  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="#comment_20126454" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="20126454" data-parent_id="20126382" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="20126454" data-post-target="450512" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="plus" onclick="comment_vote(this);" title="За свои комментарии голосовать нельзя" disabled="disabled"><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter   js-score" title="Всего голосов 0: ↑0 и ↓0">0</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="За свои комментарии голосовать нельзя" disabled="disabled"><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message ">5.6 секунд почему-то.<br>
Самый быстрый вариант получился у фрола:<br>
<a href="https://habr.com/ru/post/450512/#comment_20119542">habr.com/ru/post/450512/#comment_20119542</a><br>
PS<br>
Я идею Вашу понял, но тут, похоже мы теряем контроль процесса, отдавая 
все библиотеке. У меня была долгосрочная идея — прицел на гигабайтные 
файлы и миллиард объектов. Соответственно, сейчас пишу сюда 
многопоточность, так как чтение и первичный парсинг быстрее раз в 5 чем 
остальное, значит можно 5 тредов запустить и раздавать объекты им в 
очередь. Напишу — выложу. Дальше ускоряться можно только двумя путями:<br>
— SIMD, которого у меня нет<br>
— выкинуть serde, и писать свой однопроходный потоковый парсинг, чтобы 
одним циклом по байт-буферу делать все — вплоть до агрегации, и без 
промежуточных структур.<br>
PS<br>
Спасибо большое, Вы с фролом мне очень помогли подтянуть язык, перестал брезговать функциональщиной :)</div>

        <div class="comment__footer">
    <a href="#reply" class="comment__footer-link reply_link" onclick="return comment_show_reply_form(20126454 )">Ответить</a>


</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-1" id="reply_comments_20126454">  <li class="content-list__item content-list__item_comment js-comment " rel="20126472">
    
    <span class="parent_id" data-parent_id="20126454"></span>
    <div class="comment" id="comment_20126472">
      <span class="comment__collapse" title="Свернуть/развернуть ветку комментариев" data-id="20126472"></span>
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head   " rel="20126472">
          <a href="https://habr.com/ru/users/PsyHaSTe/" class="user-info user-info_inline" rel="user-popover" data-user-login="PsyHaSTe">
    <img src="Swift%20%D0%BF%D1%80%D0%BE%D1%82%D0%B8%D0%B2%20Rust%20%E2%80%94%20%D0%B1%D0%B5%D0%BD%D1%87%D0%BC%D0%B0%D1%80%D0%BA%D0%B8%D0%BD%D0%B3%20%D0%BD%D0%B0%20Linux%20%D1%81%20(%D0%BD%D0%B5)%D0%BF%D0%BE%D0%BD%D1%8F%D1%82%D0%BD%D1%8B%D0%BC%20%D1%84%D0%B8%D0%BD%D0%B0%D0%BB%D0%BE%D0%BC%20_%20%D0%A5%D0%B0%D0%B1%D1%80_files/7631ac5e5a7e237a937f5f2a74ae4c9e.jpg" class="user-info__image-pic user-info__image-pic_small" width="24" height="24">
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">PsyHaSTe</span>
</a>

          
          <time class="comment__date-time comment__date-time_published">8 мая 2019 в 00:45</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="#comment_20126472" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="20126472" data-action="add" title="Добавить в закладки"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#book"></use></svg></a>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <span class="icon_comment-branch js-comment_tree" data-id="20126472" data-parent_id="20126454" title="Показать ветку комментариев"><svg width="8" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#tree"></use></svg></span>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#comment_20126454" class="icon_comment-arrow-up js-comment_parent" data-id="20126472" data-parent_id="20126454" title="Показать предыдущий комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
    </li>

  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="#comment_20126472" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="20126472" data-parent_id="20126454" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="20126472" data-post-target="450512" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small voting-wjt__button_plus" data-action="plus" onclick="comment_vote(this);" title="Вы проголосовали положительно " disabled="disabled"><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter voting-wjt__counter_positive  js-score" title="Всего голосов +1: ↑1 и ↓0">+1</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="Вы проголосовали положительно , отменить голос нельзя" disabled="disabled"><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message "><blockquote>Самый быстрый вариант получился у фрола:</blockquote><p>Я его и взял за основу. По сути я просто заменил <code>process_file</code> на стандартную функцию, остальное оставил без изменений.</p><br>
<p>Замедление в целом понятно откуда взялось, потому что теперь JSOn парсится правильно. например, что ваш парсер скажет на объект <code>{"company":"Рога и } копыта", "debt": 800, "phones": [123, 234, 456]},</code>?
 Правильно, скорее всего помрет. А трекинг когда мы внутри или снаружи 
объекта и даст тут скорее всего немного лишних миллисекунд.</p><br>
<p>Если переписать абсолютно все декларативно то мб получится выжать побольше. А может и нет, надо мерить.</p><br>
<blockquote>У меня была долгосрочная идея — прицел на гигабайтные файлы и миллиард объектов.</blockquote><p>Никак этому не мешаю.</p><br>
<blockquote>Соответственно, сейчас пишу сюда многопоточность, так как 
чтение и первичный парсинг быстрее раз в 5 чем остальное, значит можно 5
 тредов запустить и раздавать объекты им в очередь. Напишу — выложу. 
Дальше ускоряться можно только двумя путями:</blockquote><p>Нужно 
бенчить. Если у вас затык в чтении файла с диска то многопоток слабо 
поможет, а может и ухудшит ситуацию. Короче, 
проверять-проверять-проверять :)</p><br>
<blockquote>Спасибо большое, Вы с фролом мне очень помогли подтянуть язык, перестал брезговать функциональщиной :)</blockquote><p>Всегда
 пожалуйста. Декларативное описание всегда лучше императивного. Хотя бы 
потому, что за счет ограничений накладываемых логикой операции 
компилятор может дополнительно оптимизировать, самое банальное — 
выкинуть баунд чеки на <code>map</code>. Ну и то что читать это проще вам выше уже говорили. Я про это рассказывал <a href="https://habr.com/ru/post/448932/#comment_20059068">здесь</a>.</p></div>

        <div class="comment__footer">
    <a href="#reply" class="comment__footer-link reply_link" onclick="return comment_show_reply_form(20126472 )">Ответить</a>


</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-2" id="reply_comments_20126472">  <li class="content-list__item content-list__item_comment js-comment " rel="20126478">
    
    <span class="parent_id" data-parent_id="20126472"></span>
    <div class="comment" id="comment_20126478">
      <span class="comment__collapse" title="Свернуть/развернуть ветку комментариев" data-id="20126478"></span>
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head comment__head_topic-author comment__head_my-comment " rel="20126478">
          <a href="https://habr.com/ru/users/epishman/" class="user-info user-info_inline" rel="user-popover" data-user-login="epishman">
    <img src="Swift%20%D0%BF%D1%80%D0%BE%D1%82%D0%B8%D0%B2%20Rust%20%E2%80%94%20%D0%B1%D0%B5%D0%BD%D1%87%D0%BC%D0%B0%D1%80%D0%BA%D0%B8%D0%BD%D0%B3%20%D0%BD%D0%B0%20Linux%20%D1%81%20(%D0%BD%D0%B5)%D0%BF%D0%BE%D0%BD%D1%8F%D1%82%D0%BD%D1%8B%D0%BC%20%D1%84%D0%B8%D0%BD%D0%B0%D0%BB%D0%BE%D0%BC%20_%20%D0%A5%D0%B0%D0%B1%D1%80_files/ec0d88c4853c0d36d44bd0526dcfa8d7.png" class="user-info__image-pic user-info__image-pic_small" width="24" height="24">
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">epishman</span>
</a>

          <svg class="icon_comment-edit" title="Комментарий был изменен" width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#pencil"></use></svg>
          <time class="comment__date-time comment__date-time_published">8 мая 2019 в 00:54</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="#comment_20126478" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="20126478" data-action="add" title="Добавить в закладки"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#book"></use></svg></a>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <span class="icon_comment-branch js-comment_tree" data-id="20126478" data-parent_id="20126472" title="Показать ветку комментариев"><svg width="8" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#tree"></use></svg></span>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#comment_20126472" class="icon_comment-arrow-up js-comment_parent" data-id="20126478" data-parent_id="20126472" title="Показать предыдущий комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
    </li>

  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="#comment_20126478" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="20126478" data-parent_id="20126472" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="20126478" data-post-target="450512" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="plus" onclick="comment_vote(this);" title="За свои комментарии голосовать нельзя" disabled="disabled"><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter   js-score" title="Всего голосов 0: ↑0 и ↓0">0</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="За свои комментарии голосовать нельзя" disabled="disabled"><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message ">Да, полностью согласен, мой парсер и не парсер вовсе :)<br>
Надо будет изучить нормальные потоковые парсеры, вроде на си и жаве их 
полно, на расте нет вообще, когда-то давно при работе с XML они просто и
 рядом не лежали по производительности с тормознутыми DOM. Проблема, что
 мало людей захотят пользоваться, и путаться в аде колбэков…</div>

        <div class="comment__footer">
    <a href="#reply" class="comment__footer-link reply_link" onclick="return comment_show_reply_form(20126478 )">Ответить</a>


</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-3" id="reply_comments_20126478">  <li class="content-list__item content-list__item_comment js-comment " rel="20126484">
    
    <span class="parent_id" data-parent_id="20126478"></span>
    <div class="comment" id="comment_20126484">
      <span class="comment__collapse" title="Свернуть/развернуть ветку комментариев" data-id="20126484"></span>
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head   " rel="20126484">
          <a href="https://habr.com/ru/users/PsyHaSTe/" class="user-info user-info_inline" rel="user-popover" data-user-login="PsyHaSTe">
    <img src="Swift%20%D0%BF%D1%80%D0%BE%D1%82%D0%B8%D0%B2%20Rust%20%E2%80%94%20%D0%B1%D0%B5%D0%BD%D1%87%D0%BC%D0%B0%D1%80%D0%BA%D0%B8%D0%BD%D0%B3%20%D0%BD%D0%B0%20Linux%20%D1%81%20(%D0%BD%D0%B5)%D0%BF%D0%BE%D0%BD%D1%8F%D1%82%D0%BD%D1%8B%D0%BC%20%D1%84%D0%B8%D0%BD%D0%B0%D0%BB%D0%BE%D0%BC%20_%20%D0%A5%D0%B0%D0%B1%D1%80_files/7631ac5e5a7e237a937f5f2a74ae4c9e.jpg" class="user-info__image-pic user-info__image-pic_small" width="24" height="24">
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">PsyHaSTe</span>
</a>

          
          <time class="comment__date-time comment__date-time_published">8 мая 2019 в 00:56</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="#comment_20126484" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="20126484" data-action="add" title="Добавить в закладки"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#book"></use></svg></a>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <span class="icon_comment-branch js-comment_tree" data-id="20126484" data-parent_id="20126478" title="Показать ветку комментариев"><svg width="8" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#tree"></use></svg></span>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#comment_20126478" class="icon_comment-arrow-up js-comment_parent" data-id="20126484" data-parent_id="20126478" title="Показать предыдущий комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
    </li>

  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="#comment_20126484" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="20126484" data-parent_id="20126478" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="20126484" data-post-target="450512" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small voting-wjt__button_plus" data-action="plus" onclick="comment_vote(this);" title="Вы проголосовали положительно " disabled="disabled"><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter voting-wjt__counter_positive  js-score" title="Всего голосов +1: ↑1 и ↓0">+1</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="Вы проголосовали положительно , отменить голос нельзя" disabled="disabled"><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message "><p>Ну вот serde потоково парсит 
все. Просто по-дефолту он парсит в какую-то структуру данных, но можно 
сделать визитор и в visit_seq просматривать элементы и делать что 
угодно. Кстати, возможность так делать я утащил <a href="https://serde.rs/stream-array.html">отсюда</a>.</p></div>

        <div class="comment__footer">
    <a href="#reply" class="comment__footer-link reply_link" onclick="return comment_show_reply_form(20126484 )">Ответить</a>


</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-4" id="reply_comments_20126484">  <li class="content-list__item content-list__item_comment js-comment " rel="20126488">
    
    <span class="parent_id" data-parent_id="20126484"></span>
    <div class="comment" id="comment_20126488">
      <span class="comment__collapse" title="Свернуть/развернуть ветку комментариев" data-id="20126488"></span>
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head comment__head_topic-author comment__head_my-comment " rel="20126488">
          <a href="https://habr.com/ru/users/epishman/" class="user-info user-info_inline" rel="user-popover" data-user-login="epishman">
    <img src="Swift%20%D0%BF%D1%80%D0%BE%D1%82%D0%B8%D0%B2%20Rust%20%E2%80%94%20%D0%B1%D0%B5%D0%BD%D1%87%D0%BC%D0%B0%D1%80%D0%BA%D0%B8%D0%BD%D0%B3%20%D0%BD%D0%B0%20Linux%20%D1%81%20(%D0%BD%D0%B5)%D0%BF%D0%BE%D0%BD%D1%8F%D1%82%D0%BD%D1%8B%D0%BC%20%D1%84%D0%B8%D0%BD%D0%B0%D0%BB%D0%BE%D0%BC%20_%20%D0%A5%D0%B0%D0%B1%D1%80_files/ec0d88c4853c0d36d44bd0526dcfa8d7.png" class="user-info__image-pic user-info__image-pic_small" width="24" height="24">
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">epishman</span>
</a>

          
          <time class="comment__date-time comment__date-time_published">8 мая 2019 в 00:59</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="#comment_20126488" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="20126488" data-action="add" title="Добавить в закладки"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#book"></use></svg></a>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <span class="icon_comment-branch js-comment_tree" data-id="20126488" data-parent_id="20126484" title="Показать ветку комментариев"><svg width="8" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#tree"></use></svg></span>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#comment_20126484" class="icon_comment-arrow-up js-comment_parent" data-id="20126488" data-parent_id="20126484" title="Показать предыдущий комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
    </li>

  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="#comment_20126488" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="20126488" data-parent_id="20126484" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="20126488" data-post-target="450512" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="plus" onclick="comment_vote(this);" title="За свои комментарии голосовать нельзя" disabled="disabled"><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter   js-score" title="Всего голосов 0: ↑0 и ↓0">0</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="За свои комментарии голосовать нельзя" disabled="disabled"><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message ">О, класс, большое спасибо, посмотрю!</div>

        <div class="comment__footer">
    <a href="#reply" class="comment__footer-link reply_link" onclick="return comment_show_reply_form(20126488 )">Ответить</a>


</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-5" id="reply_comments_20126488"></ul>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="content-list__item content-list__item_comment js-comment " rel="20127272">
    
    <span class="parent_id" data-parent_id="20126472"></span>
    <div class="comment" id="comment_20127272">
      <span class="comment__collapse" title="Свернуть/развернуть ветку комментариев" data-id="20127272"></span>
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head comment__head_topic-author comment__head_my-comment " rel="20127272">
          <a href="https://habr.com/ru/users/epishman/" class="user-info user-info_inline" rel="user-popover" data-user-login="epishman">
    <img src="Swift%20%D0%BF%D1%80%D0%BE%D1%82%D0%B8%D0%B2%20Rust%20%E2%80%94%20%D0%B1%D0%B5%D0%BD%D1%87%D0%BC%D0%B0%D1%80%D0%BA%D0%B8%D0%BD%D0%B3%20%D0%BD%D0%B0%20Linux%20%D1%81%20(%D0%BD%D0%B5)%D0%BF%D0%BE%D0%BD%D1%8F%D1%82%D0%BD%D1%8B%D0%BC%20%D1%84%D0%B8%D0%BD%D0%B0%D0%BB%D0%BE%D0%BC%20_%20%D0%A5%D0%B0%D0%B1%D1%80_files/ec0d88c4853c0d36d44bd0526dcfa8d7.png" class="user-info__image-pic user-info__image-pic_small" width="24" height="24">
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">epishman</span>
</a>

          <svg class="icon_comment-edit" title="Комментарий был изменен" width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#pencil"></use></svg>
          <time class="comment__date-time comment__date-time_published">8 мая 2019 в 09:53</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="#comment_20127272" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="20127272" data-action="add" title="Добавить в закладки"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#book"></use></svg></a>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <span class="icon_comment-branch js-comment_tree" data-id="20127272" data-parent_id="20126472" title="Показать ветку комментариев"><svg width="8" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#tree"></use></svg></span>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#comment_20126472" class="icon_comment-arrow-up js-comment_parent" data-id="20127272" data-parent_id="20126472" title="Показать предыдущий комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
    </li>

  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="#comment_20127272" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="20127272" data-parent_id="20126472" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="20127272" data-post-target="450512" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="plus" onclick="comment_vote(this);" title="За свои комментарии голосовать нельзя" disabled="disabled"><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter   js-score" title="Всего голосов 0: ↑0 и ↓0">0</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="За свои комментарии голосовать нельзя" disabled="disabled"><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message "><blockquote>Замедление в целом 
понятно откуда взялось, потому что теперь JSOn парсится правильно. 
например, что ваш парсер скажет на объект {«company»:«Рога и } копыта», 
«debt»: 800, «phones»: [123, 234, 456]},? Правильно, скорее всего 
помрет. А трекинг когда мы внутри или снаружи объекта и даст тут скорее 
всего немного лишних миллисекунд.</blockquote><br>
Я таки заморочился, обрабатываю кавычки и экранированные кавычки (вроде 
ничего не забыл ?). Производительность упала, пришлось отказаться от 
второго буфера байтов (кроме случая, когда объект разорван первым 
буфером). Получилось немного медленней чем у <a href="https://habr.com/ru/users/frol/" class="user_link">frol</a> (3.95) но все равно быстрее чем на serde.<br>
<br>
Подозреваю, что не serde тормозит, а чтение из стрима — from_reader(), 
оно побайтовое с необходимостью каждый байт анрапить. Похожую проблему я
 обнаружил тут:<br>
<a href="https://habr.com/ru/post/450512/#comment_20120520">habr.com/ru/post/450512/#comment_20120520</a><br>
PS<br>
Полный код:<br>
<div class="spoiler"><b class="spoiler_title">main.rs</b><div class="spoiler_text"><pre><code class="rust hljs"><span class="hljs-comment"><span class="hljs-comment">//[dependencies]</span></span>
<span class="hljs-comment"><span class="hljs-comment">//serde_json = "1.0"</span></span>

<span class="hljs-keyword"><span class="hljs-keyword">use</span></span> std::collections::{HashMap, HashSet};
<span class="hljs-keyword"><span class="hljs-keyword">use</span></span> serde_json::Value;

<span class="hljs-keyword"><span class="hljs-keyword">const</span></span> FILE_BUFFER_SIZE: <span class="hljs-built_in"><span class="hljs-built_in">usize</span></span> = <span class="hljs-number"><span class="hljs-number">100000</span></span>;

<span class="hljs-comment"><span class="hljs-comment">//source data</span></span>
<span class="hljs-meta"><span class="hljs-meta">#[derive(Default)]</span></span>
<span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">struct</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">DebtRec</span></span></span></span> {
    company: <span class="hljs-built_in"><span class="hljs-built_in">String</span></span>,
    phones: <span class="hljs-built_in"><span class="hljs-built_in">Vec</span></span>&lt;<span class="hljs-built_in"><span class="hljs-built_in">String</span></span>&gt;,
    debt: <span class="hljs-built_in"><span class="hljs-built_in">f64</span></span>
}

<span class="hljs-comment"><span class="hljs-comment">//result data</span></span>
<span class="hljs-meta"><span class="hljs-meta">#[derive(Default)]</span></span>
<span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">struct</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Debtor</span></span></span></span> {
    companies: HashSet&lt;<span class="hljs-built_in"><span class="hljs-built_in">String</span></span>&gt;,
    phones: HashSet&lt;<span class="hljs-built_in"><span class="hljs-built_in">String</span></span>&gt;,
    debt: <span class="hljs-built_in"><span class="hljs-built_in">f64</span></span>
}

<span class="hljs-meta"><span class="hljs-meta">#[derive(Default)]</span></span>
<span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">struct</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Debtors</span></span></span></span> {
    all: <span class="hljs-built_in"><span class="hljs-built_in">Vec</span></span>&lt;Debtor&gt;,
    index_by_phone: HashMap&lt;<span class="hljs-built_in"><span class="hljs-built_in">String</span></span>, <span class="hljs-built_in"><span class="hljs-built_in">usize</span></span>&gt;
}


<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fn</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">main</span></span></span></span>() {
    <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> <span class="hljs-keyword"><span class="hljs-keyword">mut</span></span> result = Debtors::<span class="hljs-keyword"><span class="hljs-keyword">default</span></span>();

    <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> <span class="hljs-keyword"><span class="hljs-keyword">mut</span></span> fflag = <span class="hljs-number"><span class="hljs-number">0</span></span>;
    <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> <span class="hljs-keyword"><span class="hljs-keyword">mut</span></span> threads = <span class="hljs-built_in"><span class="hljs-built_in">vec!</span></span>[];
    <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> <span class="hljs-keyword"><span class="hljs-keyword">mut</span></span> tid = <span class="hljs-number"><span class="hljs-number">0</span></span>;

    <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> arg <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> std::env::args() {
        <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> arg == <span class="hljs-string"><span class="hljs-string">"-f"</span></span> {
            fflag = <span class="hljs-number"><span class="hljs-number">1</span></span>;
        }
        <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> fflag == <span class="hljs-number"><span class="hljs-number">1</span></span> {
            fflag = <span class="hljs-number"><span class="hljs-number">2</span></span>;
            tid += <span class="hljs-number"><span class="hljs-number">1</span></span>;
            threads.push(std::thread::spawn(<span class="hljs-keyword"><span class="hljs-keyword">move</span></span> || process_file(tid, &amp;arg)));
        }
    }

    <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> t <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> threads {
        <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> part = t.join().unwrap();
        <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> result.all.len() == <span class="hljs-number"><span class="hljs-number">0</span></span> {
            result = part;
        } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> {
            merge_result(part, &amp;<span class="hljs-keyword"><span class="hljs-keyword">mut</span></span> result);
        }
    }

    <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (di, d) <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> result.all.iter().enumerate() {
        <span class="hljs-built_in"><span class="hljs-built_in">println!</span></span>(<span class="hljs-string"><span class="hljs-string">"-------------------------------"</span></span>);
        <span class="hljs-built_in"><span class="hljs-built_in">println!</span></span>(<span class="hljs-string"><span class="hljs-string">"#{}: debt: {}"</span></span>, di+<span class="hljs-number"><span class="hljs-number">1</span></span>, &amp;d.debt);
        <span class="hljs-built_in"><span class="hljs-built_in">println!</span></span>(<span class="hljs-string"><span class="hljs-string">"companies: {:?}\nphones: {:?}"</span></span>, &amp;d.companies, &amp;d.phones);
    }

    <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> fflag &lt; <span class="hljs-number"><span class="hljs-number">2</span></span> {
        <span class="hljs-built_in"><span class="hljs-built_in">println!</span></span>(<span class="hljs-string"><span class="hljs-string">"USAGE: fastpivot -f \"file 1\" -f \"file 2\" ..."</span></span>);
    }
} 


<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fn</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">process_file</span></span></span></span>(tid: <span class="hljs-built_in"><span class="hljs-built_in">i32</span></span>, fname: &amp;<span class="hljs-built_in"><span class="hljs-built_in">str</span></span>) -&gt; Debtors { 
    <span class="hljs-keyword"><span class="hljs-keyword">use</span></span> std::io::prelude::*;

    <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> <span class="hljs-keyword"><span class="hljs-keyword">mut</span></span> result = Debtors::<span class="hljs-keyword"><span class="hljs-keyword">default</span></span>();

    <span class="hljs-built_in"><span class="hljs-built_in">println!</span></span>(<span class="hljs-string"><span class="hljs-string">"thread {}: file {}"</span></span>, tid, fname);
    <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> tbegin = std::time::SystemTime::now();
    <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> <span class="hljs-keyword"><span class="hljs-keyword">mut</span></span> prntab = <span class="hljs-built_in"><span class="hljs-built_in">String</span></span>::new();
    <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> _ <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span>..(tid-<span class="hljs-number"><span class="hljs-number">1</span></span>)*<span class="hljs-number"><span class="hljs-number">3</span></span> {prntab.push(<span class="hljs-string"><span class="hljs-string">'\t'</span></span>)}

    <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> <span class="hljs-keyword"><span class="hljs-keyword">mut</span></span> allcount = <span class="hljs-number"><span class="hljs-number">0</span></span>;
    <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> <span class="hljs-keyword"><span class="hljs-keyword">mut</span></span> prncount = <span class="hljs-number"><span class="hljs-number">0</span></span>;
    <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> <span class="hljs-keyword"><span class="hljs-keyword">mut</span></span> errcount = <span class="hljs-number"><span class="hljs-number">0</span></span>;

    <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> <span class="hljs-keyword"><span class="hljs-keyword">mut</span></span> file = <span class="hljs-keyword"><span class="hljs-keyword">match</span></span> std::fs::File::open(fname) {
        <span class="hljs-literal"><span class="hljs-literal">Ok</span></span>(f) =&gt; f,
        <span class="hljs-literal"><span class="hljs-literal">Err</span></span>(e) =&gt; {
            <span class="hljs-built_in"><span class="hljs-built_in">println!</span></span>(<span class="hljs-string"><span class="hljs-string">"ERROR: {}"</span></span>, e);
            <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> result;
        }
    };

    <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> <span class="hljs-keyword"><span class="hljs-keyword">mut</span></span> buf = [<span class="hljs-number"><span class="hljs-number">0</span></span>; FILE_BUFFER_SIZE];
    <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> <span class="hljs-keyword"><span class="hljs-keyword">mut</span></span> osave:<span class="hljs-built_in"><span class="hljs-built_in">Vec</span></span>&lt;<span class="hljs-built_in"><span class="hljs-built_in">u8</span></span>&gt; = <span class="hljs-built_in"><span class="hljs-built_in">vec!</span></span>[];
    <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> <span class="hljs-keyword"><span class="hljs-keyword">mut</span></span> i0 = <span class="hljs-number"><span class="hljs-number">0</span></span>;
    <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> <span class="hljs-keyword"><span class="hljs-keyword">mut</span></span> braces = <span class="hljs-number"><span class="hljs-number">0</span></span>;
    <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> <span class="hljs-keyword"><span class="hljs-keyword">mut</span></span> quotes = <span class="hljs-literal"><span class="hljs-literal">false</span></span>;
    <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> <span class="hljs-keyword"><span class="hljs-keyword">mut</span></span> backslash = <span class="hljs-literal"><span class="hljs-literal">false</span></span>;

    <span class="hljs-keyword"><span class="hljs-keyword">loop</span></span> {
        <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> blen = <span class="hljs-keyword"><span class="hljs-keyword">match</span></span> file.read(&amp;<span class="hljs-keyword"><span class="hljs-keyword">mut</span></span> buf) {
            <span class="hljs-comment"><span class="hljs-comment">//Err(ref e) if e.kind() == std::io::ErrorKind::Interrupted =&gt; continue,</span></span>
            <span class="hljs-literal"><span class="hljs-literal">Ok</span></span>(<span class="hljs-number"><span class="hljs-number">0</span></span>) =&gt; <span class="hljs-keyword"><span class="hljs-keyword">break</span></span>,
            <span class="hljs-literal"><span class="hljs-literal">Ok</span></span>(blen) =&gt; blen,
            <span class="hljs-literal"><span class="hljs-literal">Err</span></span>(e) =&gt; {
                <span class="hljs-built_in"><span class="hljs-built_in">println!</span></span>(<span class="hljs-string"><span class="hljs-string">"ERROR: {}"</span></span>, e);
                <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> result;
            }
        };
        <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> i <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span>..blen {
            <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> b = buf[i];

            <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> b == <span class="hljs-string"><span class="hljs-string">b'"'</span></span> &amp;&amp; !backslash {
                quotes = !quotes;
            }
            backslash = b == <span class="hljs-string"><span class="hljs-string">b'\\'</span></span>;

            <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> !quotes {
                <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> b == <span class="hljs-string"><span class="hljs-string">b'{'</span></span> {
                    <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> braces == <span class="hljs-number"><span class="hljs-number">0</span></span> {
                        i0 = i;
                    }
                    braces += <span class="hljs-number"><span class="hljs-number">1</span></span>;
                }
                <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> b == <span class="hljs-string"><span class="hljs-string">b'}'</span></span> {
                    braces -= <span class="hljs-number"><span class="hljs-number">1</span></span>;
                    <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> braces == <span class="hljs-number"><span class="hljs-number">0</span></span> { <span class="hljs-comment"><span class="hljs-comment">//object formed !</span></span>
                        <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> <span class="hljs-keyword"><span class="hljs-keyword">mut</span></span> o = &amp;buf[i0..i+<span class="hljs-number"><span class="hljs-number">1</span></span>];
                        i0 = <span class="hljs-number"><span class="hljs-number">0</span></span>;
                        <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> osave.len() &gt; <span class="hljs-number"><span class="hljs-number">0</span></span> {
                            osave.extend_from_slice(o);
                            o = &amp;osave;
                        }
                        <span class="hljs-keyword"><span class="hljs-keyword">match</span></span> serde_json::from_slice(o) {
                            <span class="hljs-literal"><span class="hljs-literal">Ok</span></span>(o) =&gt; {
                                process_object(&amp;o, &amp;<span class="hljs-keyword"><span class="hljs-keyword">mut</span></span> result);
                            }
                            <span class="hljs-literal"><span class="hljs-literal">Err</span></span>(e) =&gt; {
                                <span class="hljs-built_in"><span class="hljs-built_in">println!</span></span>(<span class="hljs-string"><span class="hljs-string">"JSON ERROR: {}:\n{:?}"</span></span>, e, std::<span class="hljs-built_in"><span class="hljs-built_in">str</span></span>::from_utf8(o));
                                errcount +=<span class="hljs-number"><span class="hljs-number">1</span></span>;
                            }
                        }
                        <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> osave.len() &gt; <span class="hljs-number"><span class="hljs-number">0</span></span> {
                            osave.clear();
                        }
                        allcount += <span class="hljs-number"><span class="hljs-number">1</span></span>;
                        prncount += <span class="hljs-number"><span class="hljs-number">1</span></span>;
                        <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> prncount == <span class="hljs-number"><span class="hljs-number">100000</span></span> {
                            <span class="hljs-built_in"><span class="hljs-built_in">println!</span></span>(<span class="hljs-string"><span class="hljs-string">"{}thread {}: {}"</span></span>, prntab, tid, allcount);
                            prncount = <span class="hljs-number"><span class="hljs-number">0</span></span>;
                        }
                    }
                }
            } 
        }
        <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> i0 &gt; <span class="hljs-number"><span class="hljs-number">0</span></span> {
            osave.extend_from_slice(&amp;buf[i0..]);
            i0 = <span class="hljs-number"><span class="hljs-number">0</span></span>;
        }
    }

    <span class="hljs-built_in"><span class="hljs-built_in">println!</span></span>(<span class="hljs-string"><span class="hljs-string">"thread {}: file {}: processed {} objects in {:?}s, {} errors"</span></span>, 
        tid, fname, allcount, tbegin.elapsed().unwrap(), errcount
    );

    result
}


<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fn</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">process_object</span></span></span></span>(o: &amp;Value, result: &amp;<span class="hljs-keyword"><span class="hljs-keyword">mut</span></span> Debtors) {
    <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> dr = extract_data(o);
    <span class="hljs-comment"><span class="hljs-comment">//println!("{} - {:?} - {}", &amp;dr.company, &amp;dr.phones, &amp;dr.debt,);</span></span>

    <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> di = <span class="hljs-keyword"><span class="hljs-keyword">match</span></span> dr.phones.iter().filter_map(|p| result.index_by_phone.get(p)).next() {
        <span class="hljs-literal"><span class="hljs-literal">Some</span></span>(i) =&gt; *i,
        <span class="hljs-literal"><span class="hljs-literal">None</span></span> =&gt; {
            result.all.push(Debtor::<span class="hljs-keyword"><span class="hljs-keyword">default</span></span>());
            result.all.len()-<span class="hljs-number"><span class="hljs-number">1</span></span>
        }
    };
    <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> d = &amp;<span class="hljs-keyword"><span class="hljs-keyword">mut</span></span> result.all[di];
    d.companies.insert(dr.company);
    <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> p <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> &amp;dr.phones {
        d.phones.insert(p.to_owned()); 
        result.index_by_phone.insert(p.to_owned(), di);
    }
    d.debt += dr.debt;
}


<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fn</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">merge_result</span></span></span></span>(part: Debtors, result: &amp;<span class="hljs-keyword"><span class="hljs-keyword">mut</span></span> Debtors) {
    <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> dr <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> part.all {
        <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> di = <span class="hljs-keyword"><span class="hljs-keyword">match</span></span> dr.phones.iter().filter_map(|p| result.index_by_phone.get(p)).next() {
            <span class="hljs-literal"><span class="hljs-literal">Some</span></span>(i) =&gt; *i,
            <span class="hljs-literal"><span class="hljs-literal">None</span></span> =&gt; {
                result.all.push(Debtor::<span class="hljs-keyword"><span class="hljs-keyword">default</span></span>());
                result.all.len()-<span class="hljs-number"><span class="hljs-number">1</span></span>
            }
        };
        <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> d = &amp;<span class="hljs-keyword"><span class="hljs-keyword">mut</span></span> result.all[di];
        d.companies.union(&amp;dr.companies);
        <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> p <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> &amp;dr.phones {
            d.phones.insert(p.to_owned());
            result.index_by_phone.insert(p.to_owned(), di);
        }
        d.debt += dr.debt;
    }
}


<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fn</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">extract_data</span></span></span></span>(o: &amp;Value) -&gt; DebtRec {
    <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> <span class="hljs-keyword"><span class="hljs-keyword">mut</span></span> dr = DebtRec::<span class="hljs-keyword"><span class="hljs-keyword">default</span></span>();

    <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> c = &amp;o[<span class="hljs-string"><span class="hljs-string">"company"</span></span>];
    dr.company = <span class="hljs-keyword"><span class="hljs-keyword">match</span></span> c {
        Value::Object(c1) =&gt; <span class="hljs-keyword"><span class="hljs-keyword">match</span></span> &amp;c1[<span class="hljs-string"><span class="hljs-string">"name"</span></span>] {
            Value::<span class="hljs-built_in"><span class="hljs-built_in">String</span></span>(c2) =&gt; c2.to_owned(),
            _ =&gt; val2str(c)
        },
        _ =&gt; val2str(c)
    };

    <span class="hljs-keyword"><span class="hljs-keyword">match</span></span> &amp;o[<span class="hljs-string"><span class="hljs-string">"phones"</span></span>] {
        Value::Null =&gt; {}
        Value::Array(pp) =&gt; dr.phones.extend(pp.iter().map(|p| val2str(p))),
        pp =&gt; dr.phones.push(val2str(&amp;pp))
    }

    <span class="hljs-keyword"><span class="hljs-keyword">match</span></span> &amp;o[<span class="hljs-string"><span class="hljs-string">"phone"</span></span>] {
        Value::Null =&gt; {}
        p =&gt; dr.phones.push(val2str(&amp;p))
    }

    dr.debt = <span class="hljs-keyword"><span class="hljs-keyword">match</span></span> &amp;o[<span class="hljs-string"><span class="hljs-string">"debt"</span></span>] {
        Value::Number(d) =&gt; d.as_f64().unwrap_or(<span class="hljs-number"><span class="hljs-number">0.0</span></span>),
        Value::<span class="hljs-built_in"><span class="hljs-built_in">String</span></span>(d) =&gt; d.parse::&lt;<span class="hljs-built_in"><span class="hljs-built_in">f64</span></span>&gt;().unwrap_or(<span class="hljs-number"><span class="hljs-number">0.0</span></span>),
        _ =&gt; <span class="hljs-number"><span class="hljs-number">0.0</span></span>
    };

    dr
}


<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fn</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">val2str</span></span></span></span>(v: &amp;Value) -&gt; <span class="hljs-built_in"><span class="hljs-built_in">String</span></span> {
    <span class="hljs-keyword"><span class="hljs-keyword">match</span></span> v {
        Value::<span class="hljs-built_in"><span class="hljs-built_in">String</span></span>(vs) =&gt; vs.to_owned(), <span class="hljs-comment"><span class="hljs-comment">//to avoid additional quotes</span></span>
        _ =&gt; v.to_string()
    }
}</code></pre></div></div></div>

        <div class="comment__footer">
    <a href="#reply" class="comment__footer-link reply_link" onclick="return comment_show_reply_form(20127272 )">Ответить</a>


</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-3" id="reply_comments_20127272"></ul>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="content-list__item content-list__item_comment js-comment " rel="20126456">
    
    <span class="parent_id" data-parent_id="20126382"></span>
    <div class="comment" id="comment_20126456">
      <span class="comment__collapse" title="Свернуть/развернуть ветку комментариев" data-id="20126456"></span>
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head comment__head_topic-author comment__head_my-comment " rel="20126456">
          <a href="https://habr.com/ru/users/epishman/" class="user-info user-info_inline" rel="user-popover" data-user-login="epishman">
    <img src="Swift%20%D0%BF%D1%80%D0%BE%D1%82%D0%B8%D0%B2%20Rust%20%E2%80%94%20%D0%B1%D0%B5%D0%BD%D1%87%D0%BC%D0%B0%D1%80%D0%BA%D0%B8%D0%BD%D0%B3%20%D0%BD%D0%B0%20Linux%20%D1%81%20(%D0%BD%D0%B5)%D0%BF%D0%BE%D0%BD%D1%8F%D1%82%D0%BD%D1%8B%D0%BC%20%D1%84%D0%B8%D0%BD%D0%B0%D0%BB%D0%BE%D0%BC%20_%20%D0%A5%D0%B0%D0%B1%D1%80_files/ec0d88c4853c0d36d44bd0526dcfa8d7.png" class="user-info__image-pic user-info__image-pic_small" width="24" height="24">
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">epishman</span>
</a>

          <svg class="icon_comment-edit" title="Комментарий был изменен" width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#pencil"></use></svg>
          <time class="comment__date-time comment__date-time_published">8 мая 2019 в 00:36</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="#comment_20126456" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="20126456" data-action="add" title="Добавить в закладки"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#book"></use></svg></a>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <span class="icon_comment-branch js-comment_tree" data-id="20126456" data-parent_id="20126382" title="Показать ветку комментариев"><svg width="8" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#tree"></use></svg></span>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#comment_20126382" class="icon_comment-arrow-up js-comment_parent" data-id="20126456" data-parent_id="20126382" title="Показать предыдущий комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
    </li>

  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="#comment_20126456" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="20126456" data-parent_id="20126382" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="20126456" data-post-target="450512" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="plus" onclick="comment_vote(this);" title="За свои комментарии голосовать нельзя" disabled="disabled"><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter   js-score" title="Всего голосов 0: ↑0 и ↓0">0</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="За свои комментарии голосовать нельзя" disabled="disabled"><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message ">Да, конечно я понимаю, что когда 
схема строгая, весь этот бред с матчингом не нужен — сразу парсим в 
строгую структуру, но мне хотелось понять как работает динамическая. 
Получается, что кастинг типов — это был основной тормоз свифта, а в 
расте все норм, енамы отностительно быстро матчатся, но правда не 
мгновенно.</div>

        <div class="comment__footer">
    <a href="#reply" class="comment__footer-link reply_link" onclick="return comment_show_reply_form(20126456 )">Ответить</a>


</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-1" id="reply_comments_20126456">  <li class="content-list__item content-list__item_comment js-comment " rel="20126474">
    
    <span class="parent_id" data-parent_id="20126456"></span>
    <div class="comment" id="comment_20126474">
      <span class="comment__collapse" title="Свернуть/развернуть ветку комментариев" data-id="20126474"></span>
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head   " rel="20126474">
          <a href="https://habr.com/ru/users/PsyHaSTe/" class="user-info user-info_inline" rel="user-popover" data-user-login="PsyHaSTe">
    <img src="Swift%20%D0%BF%D1%80%D0%BE%D1%82%D0%B8%D0%B2%20Rust%20%E2%80%94%20%D0%B1%D0%B5%D0%BD%D1%87%D0%BC%D0%B0%D1%80%D0%BA%D0%B8%D0%BD%D0%B3%20%D0%BD%D0%B0%20Linux%20%D1%81%20(%D0%BD%D0%B5)%D0%BF%D0%BE%D0%BD%D1%8F%D1%82%D0%BD%D1%8B%D0%BC%20%D1%84%D0%B8%D0%BD%D0%B0%D0%BB%D0%BE%D0%BC%20_%20%D0%A5%D0%B0%D0%B1%D1%80_files/7631ac5e5a7e237a937f5f2a74ae4c9e.jpg" class="user-info__image-pic user-info__image-pic_small" width="24" height="24">
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">PsyHaSTe</span>
</a>

          
          <time class="comment__date-time comment__date-time_published">8 мая 2019 в 00:48</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="#comment_20126474" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="20126474" data-action="add" title="Добавить в закладки"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#book"></use></svg></a>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <span class="icon_comment-branch js-comment_tree" data-id="20126474" data-parent_id="20126456" title="Показать ветку комментариев"><svg width="8" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#tree"></use></svg></span>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#comment_20126456" class="icon_comment-arrow-up js-comment_parent" data-id="20126474" data-parent_id="20126456" title="Показать предыдущий комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
    </li>

  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="#comment_20126474" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="20126474" data-parent_id="20126456" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="20126474" data-post-target="450512" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="plus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter   js-score" title="Всего голосов 0: ↑0 и ↓0">0</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message "><p>Ну тут можно дополнительно 
ускорять, убирая все String, где можно преобразуя их в u64 (например, 
номера телефонов, если позволяет бизнес). В общем, варианты есть. Но 
вряд ли они прям супер-много дадут, может еще процентов 10-20.</p></div>

        <div class="comment__footer">
    <a href="#reply" class="comment__footer-link reply_link" onclick="return comment_show_reply_form(20126474 )">Ответить</a>


</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-2" id="reply_comments_20126474">  <li class="content-list__item content-list__item_comment js-comment " rel="20126486">
    
    <span class="parent_id" data-parent_id="20126474"></span>
    <div class="comment" id="comment_20126486">
      <span class="comment__collapse" title="Свернуть/развернуть ветку комментариев" data-id="20126486"></span>
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head comment__head_topic-author comment__head_my-comment " rel="20126486">
          <a href="https://habr.com/ru/users/epishman/" class="user-info user-info_inline" rel="user-popover" data-user-login="epishman">
    <img src="Swift%20%D0%BF%D1%80%D0%BE%D1%82%D0%B8%D0%B2%20Rust%20%E2%80%94%20%D0%B1%D0%B5%D0%BD%D1%87%D0%BC%D0%B0%D1%80%D0%BA%D0%B8%D0%BD%D0%B3%20%D0%BD%D0%B0%20Linux%20%D1%81%20(%D0%BD%D0%B5)%D0%BF%D0%BE%D0%BD%D1%8F%D1%82%D0%BD%D1%8B%D0%BC%20%D1%84%D0%B8%D0%BD%D0%B0%D0%BB%D0%BE%D0%BC%20_%20%D0%A5%D0%B0%D0%B1%D1%80_files/ec0d88c4853c0d36d44bd0526dcfa8d7.png" class="user-info__image-pic user-info__image-pic_small" width="24" height="24">
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">epishman</span>
</a>

          
          <time class="comment__date-time comment__date-time_published">8 мая 2019 в 00:59</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="#comment_20126486" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="20126486" data-action="add" title="Добавить в закладки"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#book"></use></svg></a>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <span class="icon_comment-branch js-comment_tree" data-id="20126486" data-parent_id="20126474" title="Показать ветку комментариев"><svg width="8" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#tree"></use></svg></span>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#comment_20126474" class="icon_comment-arrow-up js-comment_parent" data-id="20126486" data-parent_id="20126474" title="Показать предыдущий комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
    </li>

  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="#comment_20126486" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="20126486" data-parent_id="20126474" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="20126486" data-post-target="450512" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="plus" onclick="comment_vote(this);" title="За свои комментарии голосовать нельзя" disabled="disabled"><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter   js-score" title="Всего голосов 0: ↑0 и ↓0">0</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="За свои комментарии голосовать нельзя" disabled="disabled"><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message ">Хочется раз в 100, а это только 
CUDA (там вроде из шейдера можно писать в разделяемую память, в отличие 
от шейдеров обычных), но не на каждом сервере/компе эта железка будет. 
На новых интелах вроде SIMD добавили в центральный процессор, но как 
пользоваться я пока не разобрался.</div>

        <div class="comment__footer">
    <a href="#reply" class="comment__footer-link reply_link" onclick="return comment_show_reply_form(20126486 )">Ответить</a>


</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-3" id="reply_comments_20126486">  <li class="content-list__item content-list__item_comment js-comment " rel="20126530">
    
    <span class="parent_id" data-parent_id="20126486"></span>
    <div class="comment" id="comment_20126530">
      <span class="comment__collapse" title="Свернуть/развернуть ветку комментариев" data-id="20126530"></span>
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head   " rel="20126530">
          <a href="https://habr.com/ru/users/PsyHaSTe/" class="user-info user-info_inline" rel="user-popover" data-user-login="PsyHaSTe">
    <img src="Swift%20%D0%BF%D1%80%D0%BE%D1%82%D0%B8%D0%B2%20Rust%20%E2%80%94%20%D0%B1%D0%B5%D0%BD%D1%87%D0%BC%D0%B0%D1%80%D0%BA%D0%B8%D0%BD%D0%B3%20%D0%BD%D0%B0%20Linux%20%D1%81%20(%D0%BD%D0%B5)%D0%BF%D0%BE%D0%BD%D1%8F%D1%82%D0%BD%D1%8B%D0%BC%20%D1%84%D0%B8%D0%BD%D0%B0%D0%BB%D0%BE%D0%BC%20_%20%D0%A5%D0%B0%D0%B1%D1%80_files/7631ac5e5a7e237a937f5f2a74ae4c9e.jpg" class="user-info__image-pic user-info__image-pic_small" width="24" height="24">
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">PsyHaSTe</span>
</a>

          
          <time class="comment__date-time comment__date-time_published">8 мая 2019 в 01:45</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="#comment_20126530" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="20126530" data-action="add" title="Добавить в закладки"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#book"></use></svg></a>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <span class="icon_comment-branch js-comment_tree" data-id="20126530" data-parent_id="20126486" title="Показать ветку комментариев"><svg width="8" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#tree"></use></svg></span>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#comment_20126486" class="icon_comment-arrow-up js-comment_parent" data-id="20126530" data-parent_id="20126486" title="Показать предыдущий комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
    </li>

  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="#comment_20126530" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="20126530" data-parent_id="20126486" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="20126530" data-post-target="450512" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small voting-wjt__button_plus" data-action="plus" onclick="comment_vote(this);" title="Вы проголосовали положительно " disabled="disabled"><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter voting-wjt__counter_positive  js-score" title="Всего голосов +2: ↑2 и ↓0">+2</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="Вы проголосовали положительно , отменить голос нельзя" disabled="disabled"><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message "><p>Да тут уже вопросы к диску больше будут, чем к производительности. Больше 400МБ/сек выжать не получится никак.</p><br>
<p>С другой стороны не очень понятно, зачем такие объемы данных парсить в кривом формате.</p></div>

        <div class="comment__footer">
    <a href="#reply" class="comment__footer-link reply_link" onclick="return comment_show_reply_form(20126530 )">Ответить</a>


</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-4" id="reply_comments_20126530">  <li class="content-list__item content-list__item_comment js-comment " rel="20126932">
    
    <span class="parent_id" data-parent_id="20126530"></span>
    <div class="comment" id="comment_20126932">
      <span class="comment__collapse" title="Свернуть/развернуть ветку комментариев" data-id="20126932"></span>
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head   " rel="20126932">
          <a href="https://habr.com/ru/users/Fr3nzy/" class="user-info user-info_inline" rel="user-popover" data-user-login="Fr3nzy">
    <img src="Swift%20%D0%BF%D1%80%D0%BE%D1%82%D0%B8%D0%B2%20Rust%20%E2%80%94%20%D0%B1%D0%B5%D0%BD%D1%87%D0%BC%D0%B0%D1%80%D0%BA%D0%B8%D0%BD%D0%B3%20%D0%BD%D0%B0%20Linux%20%D1%81%20(%D0%BD%D0%B5)%D0%BF%D0%BE%D0%BD%D1%8F%D1%82%D0%BD%D1%8B%D0%BC%20%D1%84%D0%B8%D0%BD%D0%B0%D0%BB%D0%BE%D0%BC%20_%20%D0%A5%D0%B0%D0%B1%D1%80_files/d124b32301218ef4d8b76fd07c950fc6.png" class="user-info__image-pic user-info__image-pic_small" width="24" height="24">
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">Fr3nzy</span>
</a>

          
          <time class="comment__date-time comment__date-time_published">8 мая 2019 в 08:37</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="#comment_20126932" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="20126932" data-action="add" title="Добавить в закладки"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#book"></use></svg></a>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <span class="icon_comment-branch js-comment_tree" data-id="20126932" data-parent_id="20126530" title="Показать ветку комментариев"><svg width="8" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#tree"></use></svg></span>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#comment_20126530" class="icon_comment-arrow-up js-comment_parent" data-id="20126932" data-parent_id="20126530" title="Показать предыдущий комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
    </li>

  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="#comment_20126932" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="20126932" data-parent_id="20126530" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="20126932" data-post-target="450512" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="plus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter  voting-wjt__counter_negative js-score" title="Всего голосов –1: ↑0 и ↓1">–1</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message comment__message_downgrade comment__message_downgrade-1"><p>Даже на каком-нибудь топовом NVMe, который поддерживает 2-3ГБ/с скорость (последовательное чтение, понятное дело)?</p></div>

        <div class="comment__footer">
    <a href="#reply" class="comment__footer-link reply_link" onclick="return comment_show_reply_form(20126932 )">Ответить</a>


</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-5" id="reply_comments_20126932"></ul>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="content-list__item content-list__item_comment js-comment " rel="20126466">
    
    <span class="parent_id" data-parent_id="20126382"></span>
    <div class="comment" id="comment_20126466">
      <span class="comment__collapse" title="Свернуть/развернуть ветку комментариев" data-id="20126466"></span>
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head comment__head_topic-author comment__head_my-comment " rel="20126466">
          <a href="https://habr.com/ru/users/epishman/" class="user-info user-info_inline" rel="user-popover" data-user-login="epishman">
    <img src="Swift%20%D0%BF%D1%80%D0%BE%D1%82%D0%B8%D0%B2%20Rust%20%E2%80%94%20%D0%B1%D0%B5%D0%BD%D1%87%D0%BC%D0%B0%D1%80%D0%BA%D0%B8%D0%BD%D0%B3%20%D0%BD%D0%B0%20Linux%20%D1%81%20(%D0%BD%D0%B5)%D0%BF%D0%BE%D0%BD%D1%8F%D1%82%D0%BD%D1%8B%D0%BC%20%D1%84%D0%B8%D0%BD%D0%B0%D0%BB%D0%BE%D0%BC%20_%20%D0%A5%D0%B0%D0%B1%D1%80_files/ec0d88c4853c0d36d44bd0526dcfa8d7.png" class="user-info__image-pic user-info__image-pic_small" width="24" height="24">
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">epishman</span>
</a>

          <svg class="icon_comment-edit" title="Комментарий был изменен" width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#pencil"></use></svg>
          <time class="comment__date-time comment__date-time_published">8 мая 2019 в 00:42</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="#comment_20126466" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="20126466" data-action="add" title="Добавить в закладки"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#book"></use></svg></a>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <span class="icon_comment-branch js-comment_tree" data-id="20126466" data-parent_id="20126382" title="Показать ветку комментариев"><svg width="8" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#tree"></use></svg></span>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#comment_20126382" class="icon_comment-arrow-up js-comment_parent" data-id="20126466" data-parent_id="20126382" title="Показать предыдущий комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
    </li>

  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="#comment_20126466" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="20126466" data-parent_id="20126382" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="20126466" data-post-target="450512" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="plus" onclick="comment_vote(this);" title="За свои комментарии голосовать нельзя" disabled="disabled"><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter   js-score" title="Всего голосов 0: ↑0 и ↓0">0</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="За свои комментарии голосовать нельзя" disabled="disabled"><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message ">del</div>

        <div class="comment__footer">
    <a href="#reply" class="comment__footer-link reply_link" onclick="return comment_show_reply_form(20126466 )">Ответить</a>


</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-1" id="reply_comments_20126466"></ul>
  </li>
</ul>
  </li>
  <li class="content-list__item content-list__item_comment js-comment " rel="20126452">
    
    <span class="parent_id" data-parent_id="0"></span>
    <div class="comment" id="comment_20126452">
      <span class="comment__collapse" title="Свернуть/развернуть ветку комментариев" data-id="20126452"></span>
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head comment__head_topic-author comment__head_my-comment " rel="20126452">
          <a href="https://habr.com/ru/users/epishman/" class="user-info user-info_inline" rel="user-popover" data-user-login="epishman">
    <img src="Swift%20%D0%BF%D1%80%D0%BE%D1%82%D0%B8%D0%B2%20Rust%20%E2%80%94%20%D0%B1%D0%B5%D0%BD%D1%87%D0%BC%D0%B0%D1%80%D0%BA%D0%B8%D0%BD%D0%B3%20%D0%BD%D0%B0%20Linux%20%D1%81%20(%D0%BD%D0%B5)%D0%BF%D0%BE%D0%BD%D1%8F%D1%82%D0%BD%D1%8B%D0%BC%20%D1%84%D0%B8%D0%BD%D0%B0%D0%BB%D0%BE%D0%BC%20_%20%D0%A5%D0%B0%D0%B1%D1%80_files/ec0d88c4853c0d36d44bd0526dcfa8d7.png" class="user-info__image-pic user-info__image-pic_small" width="24" height="24">
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">epishman</span>
</a>

          <svg class="icon_comment-edit" title="Комментарий был изменен" width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#pencil"></use></svg>
          <time class="comment__date-time comment__date-time_published">8 мая 2019 в 00:32</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="#comment_20126452" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="20126452" data-action="add" title="Добавить в закладки"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#book"></use></svg></a>
    </li>


  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="#comment_20126452" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="20126452" data-parent_id="0" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="20126452" data-post-target="450512" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="plus" onclick="comment_vote(this);" title="За свои комментарии голосовать нельзя" disabled="disabled"><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter   js-score" title="Всего голосов 0: ↑0 и ↓0">0</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="За свои комментарии голосовать нельзя" disabled="disabled"><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message ">del</div>

        <div class="comment__footer">
    <a href="#reply" class="comment__footer-link reply_link" onclick="return comment_show_reply_form(20126452 )">Ответить</a>


</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-0" id="reply_comments_20126452"></ul>
  </li>
  <li class="content-list__item content-list__item_comment js-comment " rel="20128484">
    
    <span class="parent_id" data-parent_id="0"></span>
    <div class="comment" id="comment_20128484">
      <span class="comment__collapse" title="Свернуть/развернуть ветку комментариев" data-id="20128484"></span>
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head   " rel="20128484">
          <a href="https://habr.com/ru/users/Yar_Rom/" class="user-info user-info_inline" rel="user-popover" data-user-login="Yar_Rom">
    <svg class="default-image default-image_mini default-image_green" width="24" height="24"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#slug"></use></svg>
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">Yar_Rom</span>
</a>

          
          <time class="comment__date-time comment__date-time_published">8 мая 2019 в 13:09</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="#comment_20128484" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#" class="icon_comment-bookmark icon_comment-bookmark_add" onclick="return comments_add_to_favorite(this)" data-type="3" data-id="20128484" data-action="remove" title="Убрать из закладок"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#book"></use></svg></a>
    </li>


  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="#comment_20128484" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="20128484" data-parent_id="0" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="20128484" data-post-target="450512" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small voting-wjt__button_plus" data-action="plus" onclick="comment_vote(this);" title="Вы проголосовали положительно " disabled="disabled"><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter voting-wjt__counter_positive  js-score" title="Всего голосов +2: ↑2 и ↓0">+2</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="Вы проголосовали положительно , отменить голос нельзя" disabled="disabled"><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message ">Вариант на Go, 3.5 сек <a href="https://gist.github.com/yarrom/bcd9c62e58463e2acc0a7efcb6a081fb">gist.github.com/yarrom/bcd9c62e58463e2acc0a7efcb6a081fb</a></div>

        <div class="comment__footer">
    <a href="#reply" class="comment__footer-link reply_link" onclick="return comment_show_reply_form(20128484 )">Ответить</a>


</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-0" id="reply_comments_20128484">  <li class="content-list__item content-list__item_comment js-comment " rel="20128544">
    
    <span class="parent_id" data-parent_id="20128484"></span>
    <div class="comment" id="comment_20128544">
      <span class="comment__collapse" title="Свернуть/развернуть ветку комментариев" data-id="20128544"></span>
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head comment__head_topic-author comment__head_my-comment " rel="20128544">
          <a href="https://habr.com/ru/users/epishman/" class="user-info user-info_inline" rel="user-popover" data-user-login="epishman">
    <img src="Swift%20%D0%BF%D1%80%D0%BE%D1%82%D0%B8%D0%B2%20Rust%20%E2%80%94%20%D0%B1%D0%B5%D0%BD%D1%87%D0%BC%D0%B0%D1%80%D0%BA%D0%B8%D0%BD%D0%B3%20%D0%BD%D0%B0%20Linux%20%D1%81%20(%D0%BD%D0%B5)%D0%BF%D0%BE%D0%BD%D1%8F%D1%82%D0%BD%D1%8B%D0%BC%20%D1%84%D0%B8%D0%BD%D0%B0%D0%BB%D0%BE%D0%BC%20_%20%D0%A5%D0%B0%D0%B1%D1%80_files/ec0d88c4853c0d36d44bd0526dcfa8d7.png" class="user-info__image-pic user-info__image-pic_small" width="24" height="24">
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">epishman</span>
</a>

          <svg class="icon_comment-edit" title="Комментарий был изменен" width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#pencil"></use></svg>
          <time class="comment__date-time comment__date-time_published">8 мая 2019 в 13:18</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="#comment_20128544" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="20128544" data-action="add" title="Добавить в закладки"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#book"></use></svg></a>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <span class="icon_comment-branch js-comment_tree" data-id="20128544" data-parent_id="20128484" title="Показать ветку комментариев"><svg width="8" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#tree"></use></svg></span>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#comment_20128484" class="icon_comment-arrow-up js-comment_parent" data-id="20128544" data-parent_id="20128484" title="Показать предыдущий комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
    </li>

  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="#comment_20128544" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="20128544" data-parent_id="20128484" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="20128544" data-post-target="450512" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="plus" onclick="comment_vote(this);" title="За свои комментарии голосовать нельзя" disabled="disabled"><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter   js-score" title="Всего голосов 0: ↑0 и ↓0">0</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="За свои комментарии голосовать нельзя" disabled="disabled"><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message ">Спасибо огромное!!!<br>
6.73 секунды, бинарь 4.8 Мб, компилил go build main.go<br>
В гошке я особо не сомневался, думаю, если аккуратно допилить код — сможет догнать растишку :)<br>
<a href="https://habr.com/ru/users/nishchebrodkolya2/" class="user_link">NishchebrodKolya2</a><br>
<a href="https://habr.com/ru/users/vitvakatu/" class="user_link">vitvakatu</a></div>

        <div class="comment__footer">
    <a href="#reply" class="comment__footer-link reply_link" onclick="return comment_show_reply_form(20128544 )">Ответить</a>


</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-1" id="reply_comments_20128544">  <li class="content-list__item content-list__item_comment js-comment " rel="20128662">
    
    <span class="parent_id" data-parent_id="20128544"></span>
    <div class="comment" id="comment_20128662">
      <span class="comment__collapse" title="Свернуть/развернуть ветку комментариев" data-id="20128662"></span>
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head   " rel="20128662">
          <a href="https://habr.com/ru/users/Yar_Rom/" class="user-info user-info_inline" rel="user-popover" data-user-login="Yar_Rom">
    <svg class="default-image default-image_mini default-image_green" width="24" height="24"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#slug"></use></svg>
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">Yar_Rom</span>
</a>

          
          <time class="comment__date-time comment__date-time_published">8 мая 2019 в 13:40</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="#comment_20128662" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="20128662" data-action="add" title="Добавить в закладки"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#book"></use></svg></a>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <span class="icon_comment-branch js-comment_tree" data-id="20128662" data-parent_id="20128544" title="Показать ветку комментариев"><svg width="8" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#tree"></use></svg></span>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#comment_20128544" class="icon_comment-arrow-up js-comment_parent" data-id="20128662" data-parent_id="20128544" title="Показать предыдущий комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
    </li>

  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="#comment_20128662" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="20128662" data-parent_id="20128544" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="20128662" data-post-target="450512" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="plus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter   js-score" title="Всего голосов 0: ↑0 и ↓0">0</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message ">Как разнятся результаты. Видимо, надо учитывать конфигурацию железа )))</div>

        <div class="comment__footer">
    <a href="#reply" class="comment__footer-link reply_link" onclick="return comment_show_reply_form(20128662 )">Ответить</a>


</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-2" id="reply_comments_20128662">  <li class="content-list__item content-list__item_comment js-comment " rel="20128756">
    
    <span class="parent_id" data-parent_id="20128662"></span>
    <div class="comment" id="comment_20128756">
      <span class="comment__collapse" title="Свернуть/развернуть ветку комментариев" data-id="20128756"></span>
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head comment__head_topic-author comment__head_my-comment " rel="20128756">
          <a href="https://habr.com/ru/users/epishman/" class="user-info user-info_inline" rel="user-popover" data-user-login="epishman">
    <img src="Swift%20%D0%BF%D1%80%D0%BE%D1%82%D0%B8%D0%B2%20Rust%20%E2%80%94%20%D0%B1%D0%B5%D0%BD%D1%87%D0%BC%D0%B0%D1%80%D0%BA%D0%B8%D0%BD%D0%B3%20%D0%BD%D0%B0%20Linux%20%D1%81%20(%D0%BD%D0%B5)%D0%BF%D0%BE%D0%BD%D1%8F%D1%82%D0%BD%D1%8B%D0%BC%20%D1%84%D0%B8%D0%BD%D0%B0%D0%BB%D0%BE%D0%BC%20_%20%D0%A5%D0%B0%D0%B1%D1%80_files/ec0d88c4853c0d36d44bd0526dcfa8d7.png" class="user-info__image-pic user-info__image-pic_small" width="24" height="24">
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">epishman</span>
</a>

          <svg class="icon_comment-edit" title="Комментарий был изменен" width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#pencil"></use></svg>
          <time class="comment__date-time comment__date-time_published">8 мая 2019 в 14:00</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="#comment_20128756" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="20128756" data-action="add" title="Добавить в закладки"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#book"></use></svg></a>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <span class="icon_comment-branch js-comment_tree" data-id="20128756" data-parent_id="20128662" title="Показать ветку комментариев"><svg width="8" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#tree"></use></svg></span>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#comment_20128662" class="icon_comment-arrow-up js-comment_parent" data-id="20128756" data-parent_id="20128662" title="Показать предыдущий комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
    </li>

  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="#comment_20128756" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="20128756" data-parent_id="20128662" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="20128756" data-post-target="450512" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="plus" onclick="comment_vote(this);" title="За свои комментарии голосовать нельзя" disabled="disabled"><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter   js-score" title="Всего голосов 0: ↑0 и ↓0">0</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="За свои комментарии голосовать нельзя" disabled="disabled"><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message ">Не, ну вот у меня сейчас все 
варианты есть, даже пришлось перл поставить с либами. Пока раст в 
исполнении фрола выдает 3.6 секунды, и это рекорд. Кстати, измерил 
память гошки:<br>
Go — VSZ:10.7 Мб, RSS: 7.7 Мб<br>
То есть по расходу памяти у свифта нет шанса, раст чуть-чуть экономнее, напомню:<br>
Swift — VSZ: 205 Мб, RSS: 21 Мб<br>
Rust — VSZ: 13 Мб, RSS: 1Мб<br>
PS<br>
Поставьте себе раст и поиграйтесь — если сможете его почти победить — ваша статья будет сразу в топе :)<br>
PPSS<br>
Память не течет, тестил на гигабайтном файле, так что GC работает норм :)</div>

        <div class="comment__footer">
    <a href="#reply" class="comment__footer-link reply_link" onclick="return comment_show_reply_form(20128756 )">Ответить</a>


</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-3" id="reply_comments_20128756">  <li class="content-list__item content-list__item_comment js-comment " rel="20128838">
    
    <span class="parent_id" data-parent_id="20128756"></span>
    <div class="comment" id="comment_20128838">
      <span class="comment__collapse" title="Свернуть/развернуть ветку комментариев" data-id="20128838"></span>
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head   " rel="20128838">
          <a href="https://habr.com/ru/users/tsukanov-as/" class="user-info user-info_inline" rel="user-popover" data-user-login="tsukanov-as">
    <svg class="default-image default-image_mini default-image_green" width="24" height="24"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#slug"></use></svg>
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">tsukanov-as</span>
</a>

          
          <time class="comment__date-time comment__date-time_published">8 мая 2019 в 14:14</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="#comment_20128838" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="20128838" data-action="add" title="Добавить в закладки"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#book"></use></svg></a>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <span class="icon_comment-branch js-comment_tree" data-id="20128838" data-parent_id="20128756" title="Показать ветку комментариев"><svg width="8" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#tree"></use></svg></span>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#comment_20128756" class="icon_comment-arrow-up js-comment_parent" data-id="20128838" data-parent_id="20128756" title="Показать предыдущий комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
    </li>

  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="#comment_20128838" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="20128838" data-parent_id="20128756" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="20128838" data-post-target="450512" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="plus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter   js-score" title="Всего голосов 0: ↑0 и ↓0">0</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message ">Lua: <a href="https://gist.github.com/tsukanov-as/d1532303e16d757e3fa9e70ccb21d64b">gist.github.com/tsukanov-as/d1532303e16d757e3fa9e70ccb21d64b</a><br>
<br>
Решение в лоб чтением всего файла в память</div>

        <div class="comment__footer">
    <a href="#reply" class="comment__footer-link reply_link" onclick="return comment_show_reply_form(20128838 )">Ответить</a>


</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-4" id="reply_comments_20128838">  <li class="content-list__item content-list__item_comment js-comment " rel="20128906">
    
    <span class="parent_id" data-parent_id="20128838"></span>
    <div class="comment" id="comment_20128906">
      <span class="comment__collapse" title="Свернуть/развернуть ветку комментариев" data-id="20128906"></span>
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head comment__head_topic-author comment__head_my-comment " rel="20128906">
          <a href="https://habr.com/ru/users/epishman/" class="user-info user-info_inline" rel="user-popover" data-user-login="epishman">
    <img src="Swift%20%D0%BF%D1%80%D0%BE%D1%82%D0%B8%D0%B2%20Rust%20%E2%80%94%20%D0%B1%D0%B5%D0%BD%D1%87%D0%BC%D0%B0%D1%80%D0%BA%D0%B8%D0%BD%D0%B3%20%D0%BD%D0%B0%20Linux%20%D1%81%20(%D0%BD%D0%B5)%D0%BF%D0%BE%D0%BD%D1%8F%D1%82%D0%BD%D1%8B%D0%BC%20%D1%84%D0%B8%D0%BD%D0%B0%D0%BB%D0%BE%D0%BC%20_%20%D0%A5%D0%B0%D0%B1%D1%80_files/ec0d88c4853c0d36d44bd0526dcfa8d7.png" class="user-info__image-pic user-info__image-pic_small" width="24" height="24">
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">epishman</span>
</a>

          
          <time class="comment__date-time comment__date-time_published">8 мая 2019 в 14:23</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="#comment_20128906" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="20128906" data-action="add" title="Добавить в закладки"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#book"></use></svg></a>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <span class="icon_comment-branch js-comment_tree" data-id="20128906" data-parent_id="20128838" title="Показать ветку комментариев"><svg width="8" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#tree"></use></svg></span>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#comment_20128838" class="icon_comment-arrow-up js-comment_parent" data-id="20128906" data-parent_id="20128838" title="Показать предыдущий комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
    </li>

  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="#comment_20128906" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="20128906" data-parent_id="20128838" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="20128906" data-post-target="450512" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="plus" onclick="comment_vote(this);" title="За свои комментарии голосовать нельзя" disabled="disabled"><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter   js-score" title="Всего голосов 0: ↑0 и ↓0">0</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="За свои комментарии голосовать нельзя" disabled="disabled"><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message ">эмм, я такое не знаю как запустить</div>

        <div class="comment__footer">
    <a href="#reply" class="comment__footer-link reply_link" onclick="return comment_show_reply_form(20128906 )">Ответить</a>


</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-5" id="reply_comments_20128906">  <li class="content-list__item content-list__item_comment js-comment " rel="20128994">
    
    <span class="parent_id" data-parent_id="20128906"></span>
    <div class="comment" id="comment_20128994">
      <span class="comment__collapse" title="Свернуть/развернуть ветку комментариев" data-id="20128994"></span>
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head   " rel="20128994">
          <a href="https://habr.com/ru/users/tsukanov-as/" class="user-info user-info_inline" rel="user-popover" data-user-login="tsukanov-as">
    <svg class="default-image default-image_mini default-image_green" width="24" height="24"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#slug"></use></svg>
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">tsukanov-as</span>
</a>

          <svg class="icon_comment-edit" title="Комментарий был изменен" width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#pencil"></use></svg>
          <time class="comment__date-time comment__date-time_published">8 мая 2019 в 14:38</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="#comment_20128994" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="20128994" data-action="add" title="Добавить в закладки"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#book"></use></svg></a>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <span class="icon_comment-branch js-comment_tree" data-id="20128994" data-parent_id="20128906" title="Показать ветку комментариев"><svg width="8" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#tree"></use></svg></span>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#comment_20128906" class="icon_comment-arrow-up js-comment_parent" data-id="20128994" data-parent_id="20128906" title="Показать предыдущий комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
    </li>

  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="#comment_20128994" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="20128994" data-parent_id="20128906" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="20128994" data-post-target="450512" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small voting-wjt__button_plus" data-action="plus" onclick="comment_vote(this);" title="Вы проголосовали положительно " disabled="disabled"><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter voting-wjt__counter_positive  js-score" title="Всего голосов +1: ↑1 и ↓0">+1</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="Вы проголосовали положительно , отменить голос нельзя" disabled="disabled"><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message ">Могу только дать собранные бинарники под винду: <a href="https://yadi.sk/d/NZCzZB85qQDoIg">yadi.sk/d/NZCzZB85qQDoIg</a><br>
<br>
Это чистая Lua 5.3.5 с библиотекой: <a href="https://www.kyne.com.au/~mark/software/lua-cjson.php">www.kyne.com.au/~mark/software/lua-cjson.php</a><br>
<br>
На моей машине время 1:1 как у решения выше на Go</div>

        <div class="comment__footer">
    <a href="#reply" class="comment__footer-link reply_link" onclick="return comment_show_reply_form(20128994 )">Ответить</a>


</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-6" id="reply_comments_20128994">  <li class="content-list__item content-list__item_comment js-comment " rel="20129036">
    
    <span class="parent_id" data-parent_id="20128994"></span>
    <div class="comment" id="comment_20129036">
      <span class="comment__collapse" title="Свернуть/развернуть ветку комментариев" data-id="20129036"></span>
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head comment__head_topic-author comment__head_my-comment " rel="20129036">
          <a href="https://habr.com/ru/users/epishman/" class="user-info user-info_inline" rel="user-popover" data-user-login="epishman">
    <img src="Swift%20%D0%BF%D1%80%D0%BE%D1%82%D0%B8%D0%B2%20Rust%20%E2%80%94%20%D0%B1%D0%B5%D0%BD%D1%87%D0%BC%D0%B0%D1%80%D0%BA%D0%B8%D0%BD%D0%B3%20%D0%BD%D0%B0%20Linux%20%D1%81%20(%D0%BD%D0%B5)%D0%BF%D0%BE%D0%BD%D1%8F%D1%82%D0%BD%D1%8B%D0%BC%20%D1%84%D0%B8%D0%BD%D0%B0%D0%BB%D0%BE%D0%BC%20_%20%D0%A5%D0%B0%D0%B1%D1%80_files/ec0d88c4853c0d36d44bd0526dcfa8d7.png" class="user-info__image-pic user-info__image-pic_small" width="24" height="24">
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">epishman</span>
</a>

          
          <time class="comment__date-time comment__date-time_published">8 мая 2019 в 14:47</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="#comment_20129036" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="20129036" data-action="add" title="Добавить в закладки"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#book"></use></svg></a>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <span class="icon_comment-branch js-comment_tree" data-id="20129036" data-parent_id="20128994" title="Показать ветку комментариев"><svg width="8" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#tree"></use></svg></span>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#comment_20128994" class="icon_comment-arrow-up js-comment_parent" data-id="20129036" data-parent_id="20128994" title="Показать предыдущий комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
    </li>

  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="#comment_20129036" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="20129036" data-parent_id="20128994" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="20129036" data-post-target="450512" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="plus" onclick="comment_vote(this);" title="За свои комментарии голосовать нельзя" disabled="disabled"><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter   js-score" title="Всего голосов 0: ↑0 и ↓0">0</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="За свои комментарии голосовать нельзя" disabled="disabled"><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message ">У меня линукс 64. Но в память это не честно, в моей задаче надо гигабайты парсить.</div>

        <div class="comment__footer">
    <a href="#reply" class="comment__footer-link reply_link" onclick="return comment_show_reply_form(20129036 )">Ответить</a>


</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-7" id="reply_comments_20129036">  <li class="content-list__item content-list__item_comment js-comment " rel="20129042">
    
    <span class="parent_id" data-parent_id="20129036"></span>
    <div class="comment" id="comment_20129042">
      <span class="comment__collapse" title="Свернуть/развернуть ветку комментариев" data-id="20129042"></span>
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head   " rel="20129042">
          <a href="https://habr.com/ru/users/tsukanov-as/" class="user-info user-info_inline" rel="user-popover" data-user-login="tsukanov-as">
    <svg class="default-image default-image_mini default-image_green" width="24" height="24"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#slug"></use></svg>
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">tsukanov-as</span>
</a>

          
          <time class="comment__date-time comment__date-time_published">8 мая 2019 в 14:49</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="#comment_20129042" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="20129042" data-action="add" title="Добавить в закладки"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#book"></use></svg></a>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <span class="icon_comment-branch js-comment_tree" data-id="20129042" data-parent_id="20129036" title="Показать ветку комментариев"><svg width="8" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#tree"></use></svg></span>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#comment_20129036" class="icon_comment-arrow-up js-comment_parent" data-id="20129042" data-parent_id="20129036" title="Показать предыдущий комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
    </li>

  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="#comment_20129042" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="20129042" data-parent_id="20129036" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="20129042" data-post-target="450512" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="plus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter   js-score" title="Всего голосов 0: ↑0 и ↓0">0</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message ">Если доберусь вечером, то сделаю честно )</div>

        <div class="comment__footer">
    <a href="#reply" class="comment__footer-link reply_link" onclick="return comment_show_reply_form(20129042 )">Ответить</a>


</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-8" id="reply_comments_20129042"></ul>
  </li>
  <li class="content-list__item content-list__item_comment js-comment " rel="20131696">
    
    <span class="parent_id" data-parent_id="20129036"></span>
    <div class="comment" id="comment_20131696">
      <span class="comment__collapse" title="Свернуть/развернуть ветку комментариев" data-id="20131696"></span>
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head   " rel="20131696">
          <a href="https://habr.com/ru/users/tsukanov-as/" class="user-info user-info_inline" rel="user-popover" data-user-login="tsukanov-as">
    <svg class="default-image default-image_mini default-image_green" width="24" height="24"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#slug"></use></svg>
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">tsukanov-as</span>
</a>

          <svg class="icon_comment-edit" title="Комментарий был изменен" width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#pencil"></use></svg>
          <time class="comment__date-time comment__date-time_published">9 мая 2019 в 00:59</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="#comment_20131696" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="20131696" data-action="add" title="Добавить в закладки"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#book"></use></svg></a>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <span class="icon_comment-branch js-comment_tree" data-id="20131696" data-parent_id="20129036" title="Показать ветку комментариев"><svg width="8" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#tree"></use></svg></span>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#comment_20129036" class="icon_comment-arrow-up js-comment_parent" data-id="20131696" data-parent_id="20129036" title="Показать предыдущий комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
    </li>

  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="#comment_20131696" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="20131696" data-parent_id="20129036" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="20131696" data-post-target="450512" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small voting-wjt__button_plus" data-action="plus" onclick="comment_vote(this);" title="Вы проголосовали положительно " disabled="disabled"><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter voting-wjt__counter_positive  js-score" title="Всего голосов +1: ↑1 и ↓0">+1</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="Вы проголосовали положительно , отменить голос нельзя" disabled="disabled"><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message ">Залил новый код: <a href="https://gist.github.com/tsukanov-as/d1532303e16d757e3fa9e70ccb21d64b">gist.github.com/tsukanov-as/d1532303e16d757e3fa9e70ccb21d64b</a><br>
Пардон за его страшный вид )<br>
У меня на i5 8400 3.6 сек. и 4 мб. памяти<br>
Память смотрел на глаз по диспетчеру, т.к. не знаю как ее мерить на винде.<br>
Для сравнения вариант на Go у меня 2.5 сек. и 6 мб. памяти.<br>
<br>
ps Скорее всего кривое как мои руки, но на тестовом файле вроде правильно отработало</div>

        <div class="comment__footer">
    <a href="#reply" class="comment__footer-link reply_link" onclick="return comment_show_reply_form(20131696 )">Ответить</a>


</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-8" id="reply_comments_20131696">  <li class="content-list__item content-list__item_comment js-comment " rel="20132420">
    
    <span class="parent_id" data-parent_id="20131696"></span>
    <div class="comment" id="comment_20132420">
      <span class="comment__collapse" title="Свернуть/развернуть ветку комментариев" data-id="20132420"></span>
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head comment__head_topic-author comment__head_my-comment " rel="20132420">
          <a href="https://habr.com/ru/users/epishman/" class="user-info user-info_inline" rel="user-popover" data-user-login="epishman">
    <img src="Swift%20%D0%BF%D1%80%D0%BE%D1%82%D0%B8%D0%B2%20Rust%20%E2%80%94%20%D0%B1%D0%B5%D0%BD%D1%87%D0%BC%D0%B0%D1%80%D0%BA%D0%B8%D0%BD%D0%B3%20%D0%BD%D0%B0%20Linux%20%D1%81%20(%D0%BD%D0%B5)%D0%BF%D0%BE%D0%BD%D1%8F%D1%82%D0%BD%D1%8B%D0%BC%20%D1%84%D0%B8%D0%BD%D0%B0%D0%BB%D0%BE%D0%BC%20_%20%D0%A5%D0%B0%D0%B1%D1%80_files/ec0d88c4853c0d36d44bd0526dcfa8d7.png" class="user-info__image-pic user-info__image-pic_small" width="24" height="24">
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">epishman</span>
</a>

          
          <time class="comment__date-time comment__date-time_published">9 мая 2019 в 09:57</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="#comment_20132420" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="20132420" data-action="add" title="Добавить в закладки"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#book"></use></svg></a>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <span class="icon_comment-branch js-comment_tree" data-id="20132420" data-parent_id="20131696" title="Показать ветку комментариев"><svg width="8" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#tree"></use></svg></span>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#comment_20131696" class="icon_comment-arrow-up js-comment_parent" data-id="20132420" data-parent_id="20131696" title="Показать предыдущий комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
    </li>

  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="#comment_20132420" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="20132420" data-parent_id="20131696" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="20132420" data-post-target="450512" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="plus" onclick="comment_vote(this);" title="За свои комментарии голосовать нельзя" disabled="disabled"><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter   js-score" title="Всего голосов 0: ↑0 и ↓0">0</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="За свои комментарии голосовать нельзя" disabled="disabled"><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message ">Получается, что гошка вторым 
номером идет против раста, остальные медленнее. Так всегда — гугл 
изобретает странные корявые продукты, но они сцуко работают быстрее, чем
 красивые и продуманные чужие. Хромиум хуже мозилы, но быстрее, 
гугловский дарт хуже тайпскрипта, но в мобилы будут пихать именно его, 
раст красивее гошки, но вакансий нет и т.д.</div>

        <div class="comment__footer">
    <a href="#reply" class="comment__footer-link reply_link" onclick="return comment_show_reply_form(20132420 )">Ответить</a>


</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-9" id="reply_comments_20132420">  <li class="content-list__item content-list__item_comment js-comment " rel="20132462">
    
    <span class="parent_id" data-parent_id="20132420"></span>
    <div class="comment" id="comment_20132462">
      <span class="comment__collapse" title="Свернуть/развернуть ветку комментариев" data-id="20132462"></span>
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head   " rel="20132462">
          <a href="https://habr.com/ru/users/tsukanov-as/" class="user-info user-info_inline" rel="user-popover" data-user-login="tsukanov-as">
    <svg class="default-image default-image_mini default-image_green" width="24" height="24"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#slug"></use></svg>
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">tsukanov-as</span>
</a>

          
          <time class="comment__date-time comment__date-time_published">9 мая 2019 в 10:18</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="#comment_20132462" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="20132462" data-action="add" title="Добавить в закладки"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#book"></use></svg></a>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <span class="icon_comment-branch js-comment_tree" data-id="20132462" data-parent_id="20132420" title="Показать ветку комментариев"><svg width="8" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#tree"></use></svg></span>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#comment_20132420" class="icon_comment-arrow-up js-comment_parent" data-id="20132462" data-parent_id="20132420" title="Показать предыдущий комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
    </li>

  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="#comment_20132462" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="20132462" data-parent_id="20132420" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="20132462" data-post-target="450512" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="plus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter   js-score" title="Всего голосов 0: ↑0 и ↓0">0</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message ">Есть еще LuaJit, который с учетом ffi и грязных трюков (типа mmap) думаю обойдет Go. Но, как это ни печально, он похоже умирает.</div>

        <div class="comment__footer">
    <a href="#reply" class="comment__footer-link reply_link" onclick="return comment_show_reply_form(20132462 )">Ответить</a>


</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-10" id="reply_comments_20132462">  <li class="content-list__item content-list__item_comment js-comment " rel="20132470">
    
    <span class="parent_id" data-parent_id="20132462"></span>
    <div class="comment" id="comment_20132470">
      <span class="comment__collapse" title="Свернуть/развернуть ветку комментариев" data-id="20132470"></span>
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head comment__head_topic-author comment__head_my-comment " rel="20132470">
          <a href="https://habr.com/ru/users/epishman/" class="user-info user-info_inline" rel="user-popover" data-user-login="epishman">
    <img src="Swift%20%D0%BF%D1%80%D0%BE%D1%82%D0%B8%D0%B2%20Rust%20%E2%80%94%20%D0%B1%D0%B5%D0%BD%D1%87%D0%BC%D0%B0%D1%80%D0%BA%D0%B8%D0%BD%D0%B3%20%D0%BD%D0%B0%20Linux%20%D1%81%20(%D0%BD%D0%B5)%D0%BF%D0%BE%D0%BD%D1%8F%D1%82%D0%BD%D1%8B%D0%BC%20%D1%84%D0%B8%D0%BD%D0%B0%D0%BB%D0%BE%D0%BC%20_%20%D0%A5%D0%B0%D0%B1%D1%80_files/ec0d88c4853c0d36d44bd0526dcfa8d7.png" class="user-info__image-pic user-info__image-pic_small" width="24" height="24">
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">epishman</span>
</a>

          
          <time class="comment__date-time comment__date-time_published">9 мая 2019 в 10:24</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="#comment_20132470" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="20132470" data-action="add" title="Добавить в закладки"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#book"></use></svg></a>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <span class="icon_comment-branch js-comment_tree" data-id="20132470" data-parent_id="20132462" title="Показать ветку комментариев"><svg width="8" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#tree"></use></svg></span>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#comment_20132462" class="icon_comment-arrow-up js-comment_parent" data-id="20132470" data-parent_id="20132462" title="Показать предыдущий комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
    </li>

  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="#comment_20132470" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="20132470" data-parent_id="20132462" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="20132470" data-post-target="450512" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="plus" onclick="comment_vote(this);" title="За свои комментарии голосовать нельзя" disabled="disabled"><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter   js-score" title="Всего голосов 0: ↑0 и ↓0">0</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="За свои комментарии голосовать нельзя" disabled="disabled"><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message ">Программирование это не музыка, 
где побеждает новое звучание. Это грязная корпоративная война, где 
побеждает влияние. Сказала одна компания что публичные методы с большой 
буквы надо писать, все сказали есть. А все потому, что музыкант он 
условно в одиночку может сделать продукт, а программистов нужно сотни, 
чтобы что-то реальное написать. Поэтому остается лишь встраиваться в 
чужие тренды.</div>

        <div class="comment__footer">
    <a href="#reply" class="comment__footer-link reply_link" onclick="return comment_show_reply_form(20132470 )">Ответить</a>


</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-11" id="reply_comments_20132470"></ul>
  </li>
</ul>
  </li>
  <li class="content-list__item content-list__item_comment js-comment " rel="20133982">
    
    <span class="parent_id" data-parent_id="20132420"></span>
    <div class="comment" id="comment_20133982">
      <span class="comment__collapse" title="Свернуть/развернуть ветку комментариев" data-id="20133982"></span>
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head   " rel="20133982">
          <a href="https://habr.com/ru/users/tsukanov-as/" class="user-info user-info_inline" rel="user-popover" data-user-login="tsukanov-as">
    <svg class="default-image default-image_mini default-image_green" width="24" height="24"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#slug"></use></svg>
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">tsukanov-as</span>
</a>

          
          <time class="comment__date-time comment__date-time_published">9 мая 2019 в 20:11</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="#comment_20133982" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="20133982" data-action="add" title="Добавить в закладки"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#book"></use></svg></a>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <span class="icon_comment-branch js-comment_tree" data-id="20133982" data-parent_id="20132420" title="Показать ветку комментариев"><svg width="8" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#tree"></use></svg></span>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#comment_20132420" class="icon_comment-arrow-up js-comment_parent" data-id="20133982" data-parent_id="20132420" title="Показать предыдущий комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
    </li>

  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="#comment_20133982" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="20133982" data-parent_id="20132420" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="20133982" data-post-target="450512" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="plus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter   js-score" title="Всего голосов 0: ↑0 и ↓0">0</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message ">Таки запустил этот код на LuaJit из любопытства.<br>
1.5 секунды и 2 Мб памяти<br>
<br>
ps Допускаю что ошибаюсь</div>

        <div class="comment__footer">
    <a href="#reply" class="comment__footer-link reply_link" onclick="return comment_show_reply_form(20133982 )">Ответить</a>


</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-10" id="reply_comments_20133982">  <li class="content-list__item content-list__item_comment js-comment " rel="20134080">
    
    <span class="parent_id" data-parent_id="20133982"></span>
    <div class="comment" id="comment_20134080">
      <span class="comment__collapse" title="Свернуть/развернуть ветку комментариев" data-id="20134080"></span>
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head comment__head_topic-author comment__head_my-comment " rel="20134080">
          <a href="https://habr.com/ru/users/epishman/" class="user-info user-info_inline" rel="user-popover" data-user-login="epishman">
    <img src="Swift%20%D0%BF%D1%80%D0%BE%D1%82%D0%B8%D0%B2%20Rust%20%E2%80%94%20%D0%B1%D0%B5%D0%BD%D1%87%D0%BC%D0%B0%D1%80%D0%BA%D0%B8%D0%BD%D0%B3%20%D0%BD%D0%B0%20Linux%20%D1%81%20(%D0%BD%D0%B5)%D0%BF%D0%BE%D0%BD%D1%8F%D1%82%D0%BD%D1%8B%D0%BC%20%D1%84%D0%B8%D0%BD%D0%B0%D0%BB%D0%BE%D0%BC%20_%20%D0%A5%D0%B0%D0%B1%D1%80_files/ec0d88c4853c0d36d44bd0526dcfa8d7.png" class="user-info__image-pic user-info__image-pic_small" width="24" height="24">
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">epishman</span>
</a>

          <svg class="icon_comment-edit" title="Комментарий был изменен" width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#pencil"></use></svg>
          <time class="comment__date-time comment__date-time_published">9 мая 2019 в 20:52</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="#comment_20134080" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="20134080" data-action="add" title="Добавить в закладки"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#book"></use></svg></a>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <span class="icon_comment-branch js-comment_tree" data-id="20134080" data-parent_id="20133982" title="Показать ветку комментариев"><svg width="8" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#tree"></use></svg></span>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#comment_20133982" class="icon_comment-arrow-up js-comment_parent" data-id="20134080" data-parent_id="20133982" title="Показать предыдущий комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
    </li>

  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="#comment_20134080" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="20134080" data-parent_id="20133982" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="20134080" data-post-target="450512" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="plus" onclick="comment_vote(this);" title="За свои комментарии голосовать нельзя" disabled="disabled"><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter   js-score" title="Всего голосов 0: ↑0 и ↓0">0</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="За свои комментарии голосовать нельзя" disabled="disabled"><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message ">А в чем трюк? Я понимаю, что 
избавился от промежуточной структуры, значит минус аллокация памяти. 
Видимо файл читается быстрее, но тут надо тестировать на одной платформе
 — допускаю что Линукс тормознутее винды при работе с файлами.<br>
Я сейчас на расте достиг 2.5 секунд за счет многопоточности, если выкину
 промежуточную структуру, возможно с трудом в полторы втиснусь, а как 
Вам удается такие цифры показывать?</div>

        <div class="comment__footer">
    <a href="#reply" class="comment__footer-link reply_link" onclick="return comment_show_reply_form(20134080 )">Ответить</a>


</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-11" id="reply_comments_20134080">  <li class="content-list__item content-list__item_comment js-comment " rel="20134120">
    
    <span class="parent_id" data-parent_id="20134080"></span>
    <div class="comment" id="comment_20134120">
      <span class="comment__collapse" title="Свернуть/развернуть ветку комментариев" data-id="20134120"></span>
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head   " rel="20134120">
          <a href="https://habr.com/ru/users/tsukanov-as/" class="user-info user-info_inline" rel="user-popover" data-user-login="tsukanov-as">
    <svg class="default-image default-image_mini default-image_green" width="24" height="24"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#slug"></use></svg>
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">tsukanov-as</span>
</a>

          
          <time class="comment__date-time comment__date-time_published">9 мая 2019 в 21:02</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="#comment_20134120" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="20134120" data-action="add" title="Добавить в закладки"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#book"></use></svg></a>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <span class="icon_comment-branch js-comment_tree" data-id="20134120" data-parent_id="20134080" title="Показать ветку комментариев"><svg width="8" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#tree"></use></svg></span>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#comment_20134080" class="icon_comment-arrow-up js-comment_parent" data-id="20134120" data-parent_id="20134080" title="Показать предыдущий комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
    </li>

  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="#comment_20134120" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="20134120" data-parent_id="20134080" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="20134120" data-post-target="450512" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="plus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter   js-score" title="Всего голосов 0: ↑0 и ↓0">0</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message ">Ну в коде трюк только один:<br>
s:find("^%b{}", p)<br>
Это хитрая луашная «регулярка», которая умеет рекурсивно искать сбалансированные скобки.<br>
А в целом читаю файл блоками, пытаюсь этой чудо регуляркой найти 
сбалансированные скобки, разбираю парсером то, что нашел, оставшийся 
кусок блока приклеиваю к следующему и по кругу.</div>

        <div class="comment__footer">
    <a href="#reply" class="comment__footer-link reply_link" onclick="return comment_show_reply_form(20134120 )">Ответить</a>


</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-12" id="reply_comments_20134120">  <li class="content-list__item content-list__item_comment js-comment " rel="20134130">
    
    <span class="parent_id" data-parent_id="20134120"></span>
    <div class="comment" id="comment_20134130">
      <span class="comment__collapse" title="Свернуть/развернуть ветку комментариев" data-id="20134130"></span>
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head comment__head_topic-author comment__head_my-comment " rel="20134130">
          <a href="https://habr.com/ru/users/epishman/" class="user-info user-info_inline" rel="user-popover" data-user-login="epishman">
    <img src="Swift%20%D0%BF%D1%80%D0%BE%D1%82%D0%B8%D0%B2%20Rust%20%E2%80%94%20%D0%B1%D0%B5%D0%BD%D1%87%D0%BC%D0%B0%D1%80%D0%BA%D0%B8%D0%BD%D0%B3%20%D0%BD%D0%B0%20Linux%20%D1%81%20(%D0%BD%D0%B5)%D0%BF%D0%BE%D0%BD%D1%8F%D1%82%D0%BD%D1%8B%D0%BC%20%D1%84%D0%B8%D0%BD%D0%B0%D0%BB%D0%BE%D0%BC%20_%20%D0%A5%D0%B0%D0%B1%D1%80_files/ec0d88c4853c0d36d44bd0526dcfa8d7.png" class="user-info__image-pic user-info__image-pic_small" width="24" height="24">
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">epishman</span>
</a>

          
          <time class="comment__date-time comment__date-time_published">9 мая 2019 в 21:06</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="#comment_20134130" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="20134130" data-action="add" title="Добавить в закладки"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#book"></use></svg></a>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <span class="icon_comment-branch js-comment_tree" data-id="20134130" data-parent_id="20134120" title="Показать ветку комментариев"><svg width="8" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#tree"></use></svg></span>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#comment_20134120" class="icon_comment-arrow-up js-comment_parent" data-id="20134130" data-parent_id="20134120" title="Показать предыдущий комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
    </li>

  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="#comment_20134130" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="20134130" data-parent_id="20134120" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="20134130" data-post-target="450512" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="plus" onclick="comment_vote(this);" title="За свои комментарии голосовать нельзя" disabled="disabled"><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter   js-score" title="Всего голосов 0: ↑0 и ↓0">0</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="За свои комментарии голосовать нельзя" disabled="disabled"><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message ">Ровно то же самое делаю и я. 
Только не забудьте, что скобка может встречаться внутри кавычек «рога и 
{копыта», а еще бывает экранированная кавычка, это ж json. Вот мой 
последний код:<br>
<div class="spoiler"><b class="spoiler_title">main.rs</b><div class="spoiler_text"><pre><code class="rust hljs"><span class="hljs-comment"><span class="hljs-comment">//[dependencies]</span></span>
<span class="hljs-comment"><span class="hljs-comment">//serde_json = "1.0"</span></span>

<span class="hljs-keyword"><span class="hljs-keyword">use</span></span> std::collections::{HashMap, HashSet};
<span class="hljs-keyword"><span class="hljs-keyword">use</span></span> serde_json::Value;

<span class="hljs-keyword"><span class="hljs-keyword">const</span></span> FILE_BUFFER_SIZE: <span class="hljs-built_in"><span class="hljs-built_in">usize</span></span> = <span class="hljs-number"><span class="hljs-number">100000</span></span>;
<span class="hljs-keyword"><span class="hljs-keyword">const</span></span> PRN_COUNT: <span class="hljs-built_in"><span class="hljs-built_in">i32</span></span> = <span class="hljs-number"><span class="hljs-number">100000</span></span>;

<span class="hljs-comment"><span class="hljs-comment">//source data</span></span>
<span class="hljs-meta"><span class="hljs-meta">#[derive(Default)]</span></span>
<span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">struct</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">DebtRec</span></span></span></span> {
    company: <span class="hljs-built_in"><span class="hljs-built_in">String</span></span>,
    phones: <span class="hljs-built_in"><span class="hljs-built_in">Vec</span></span>&lt;<span class="hljs-built_in"><span class="hljs-built_in">String</span></span>&gt;,
    debt: <span class="hljs-built_in"><span class="hljs-built_in">f64</span></span>
}

<span class="hljs-comment"><span class="hljs-comment">//result data</span></span>
<span class="hljs-meta"><span class="hljs-meta">#[derive(Default)]</span></span>
<span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">struct</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Debtor</span></span></span></span> {
    companies: HashSet&lt;<span class="hljs-built_in"><span class="hljs-built_in">String</span></span>&gt;,
    phones: HashSet&lt;<span class="hljs-built_in"><span class="hljs-built_in">String</span></span>&gt;,
    debt: <span class="hljs-built_in"><span class="hljs-built_in">f64</span></span>
}

<span class="hljs-meta"><span class="hljs-meta">#[derive(Default)]</span></span>
<span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">struct</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Debtors</span></span></span></span> {
    all: <span class="hljs-built_in"><span class="hljs-built_in">Vec</span></span>&lt;Debtor&gt;,
    index_by_phone: HashMap&lt;<span class="hljs-built_in"><span class="hljs-built_in">String</span></span>, <span class="hljs-built_in"><span class="hljs-built_in">usize</span></span>&gt;
}


<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fn</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">main</span></span></span></span>() {
    <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> <span class="hljs-keyword"><span class="hljs-keyword">mut</span></span> result = Debtors::<span class="hljs-keyword"><span class="hljs-keyword">default</span></span>();

    <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> <span class="hljs-keyword"><span class="hljs-keyword">mut</span></span> threadcount = -<span class="hljs-number"><span class="hljs-number">1</span></span>;
    <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> <span class="hljs-keyword"><span class="hljs-keyword">mut</span></span> fflag = <span class="hljs-number"><span class="hljs-number">0</span></span>;
    <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> arg <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> std::env::args() {
        <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> arg == <span class="hljs-string"><span class="hljs-string">"-t"</span></span> {
            threadcount = <span class="hljs-number"><span class="hljs-number">0</span></span>;
        }
        <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> threadcount == <span class="hljs-number"><span class="hljs-number">0</span></span> {
            threadcount = <span class="hljs-keyword"><span class="hljs-keyword">match</span></span> arg.parse() {
                <span class="hljs-literal"><span class="hljs-literal">Ok</span></span>(n) =&gt; n,
                <span class="hljs-literal"><span class="hljs-literal">Err</span></span>(_) =&gt; {
                    <span class="hljs-built_in"><span class="hljs-built_in">println!</span></span>(<span class="hljs-string"><span class="hljs-string">"ERROR: -t \"{}\" - must be an integer !"</span></span>, arg);
                    <span class="hljs-keyword"><span class="hljs-keyword">break</span></span>;
                }
            }
        }
        <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> threadcount &gt; <span class="hljs-number"><span class="hljs-number">0</span></span> {
            <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> arg == <span class="hljs-string"><span class="hljs-string">"-f"</span></span> {
                fflag = <span class="hljs-number"><span class="hljs-number">1</span></span>;
            }
            <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> fflag == <span class="hljs-number"><span class="hljs-number">1</span></span> {
                fflag = <span class="hljs-number"><span class="hljs-number">2</span></span>;
                <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> resultpart = process_file(&amp;arg, threadcount <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> <span class="hljs-built_in"><span class="hljs-built_in">usize</span></span>);
                <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> result.all.len() == <span class="hljs-number"><span class="hljs-number">0</span></span> {
                    result = resultpart;
                } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> {
                    merge_result(resultpart, &amp;<span class="hljs-keyword"><span class="hljs-keyword">mut</span></span> result);
                }
            }
        }
    }

    <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (di, d) <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> result.all.iter().enumerate() {
        <span class="hljs-built_in"><span class="hljs-built_in">println!</span></span>(<span class="hljs-string"><span class="hljs-string">"---------------------------------------------"</span></span>);
        <span class="hljs-built_in"><span class="hljs-built_in">println!</span></span>(<span class="hljs-string"><span class="hljs-string">"#{}: debt: {}"</span></span>, di+<span class="hljs-number"><span class="hljs-number">1</span></span>, &amp;d.debt);
        <span class="hljs-built_in"><span class="hljs-built_in">println!</span></span>(<span class="hljs-string"><span class="hljs-string">"companies: {:?}\nphones: {:?}"</span></span>, &amp;d.companies, &amp;d.phones);
    }

    <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> threadcount &lt;= <span class="hljs-number"><span class="hljs-number">0</span></span> || fflag &lt; <span class="hljs-number"><span class="hljs-number">2</span></span> {
        <span class="hljs-built_in"><span class="hljs-built_in">println!</span></span>(<span class="hljs-string"><span class="hljs-string">"USAGE: fastpivot -t &lt;thread count&gt; -f \"file name\" -f \"file name\" ..."</span></span>);
    }
} 


<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fn</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">process_file</span></span></span></span>(fname: &amp;<span class="hljs-built_in"><span class="hljs-built_in">str</span></span>, threadcount: <span class="hljs-built_in"><span class="hljs-built_in">usize</span></span>) -&gt; Debtors { 
    <span class="hljs-keyword"><span class="hljs-keyword">use</span></span> std::io::prelude::*;

    <span class="hljs-built_in"><span class="hljs-built_in">println!</span></span>(<span class="hljs-string"><span class="hljs-string">"file {}:"</span></span>, fname);
    <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> tbegin = std::time::SystemTime::now();

    <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> <span class="hljs-keyword"><span class="hljs-keyword">mut</span></span> file = <span class="hljs-keyword"><span class="hljs-keyword">match</span></span> std::fs::File::open(fname) {
        <span class="hljs-literal"><span class="hljs-literal">Ok</span></span>(f) =&gt; f,
        <span class="hljs-literal"><span class="hljs-literal">Err</span></span>(e) =&gt; {
            <span class="hljs-built_in"><span class="hljs-built_in">panic!</span></span>(e);
        }
    };

    <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> <span class="hljs-keyword"><span class="hljs-keyword">mut</span></span> buf = [<span class="hljs-number"><span class="hljs-number">0</span></span>; FILE_BUFFER_SIZE];
    <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> <span class="hljs-keyword"><span class="hljs-keyword">mut</span></span> i0 = <span class="hljs-number"><span class="hljs-number">0</span></span>;
    <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> <span class="hljs-keyword"><span class="hljs-keyword">mut</span></span> osave:<span class="hljs-built_in"><span class="hljs-built_in">Vec</span></span>&lt;<span class="hljs-built_in"><span class="hljs-built_in">u8</span></span>&gt; = <span class="hljs-built_in"><span class="hljs-built_in">vec!</span></span>[];

    <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> <span class="hljs-keyword"><span class="hljs-keyword">mut</span></span> braces = <span class="hljs-number"><span class="hljs-number">0</span></span>;
    <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> <span class="hljs-keyword"><span class="hljs-keyword">mut</span></span> quotes = <span class="hljs-literal"><span class="hljs-literal">false</span></span>;
    <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> <span class="hljs-keyword"><span class="hljs-keyword">mut</span></span> backslash = <span class="hljs-literal"><span class="hljs-literal">false</span></span>;

    <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> <span class="hljs-keyword"><span class="hljs-keyword">mut</span></span> channels = <span class="hljs-built_in"><span class="hljs-built_in">vec!</span></span>[];
    <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> <span class="hljs-keyword"><span class="hljs-keyword">mut</span></span> threads = <span class="hljs-built_in"><span class="hljs-built_in">vec!</span></span>[];
    <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> tid <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span>..threadcount { <span class="hljs-comment"><span class="hljs-comment">//start threads</span></span>
        <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> (send, recv) = std::sync::mpsc::channel();
        channels.push(send);
        threads.push(std::thread::spawn(<span class="hljs-keyword"><span class="hljs-keyword">move</span></span> || process_thread(recv, tid)));
    }
    <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> <span class="hljs-keyword"><span class="hljs-keyword">mut</span></span> tid = <span class="hljs-number"><span class="hljs-number">0</span></span>;

    <span class="hljs-keyword"><span class="hljs-keyword">loop</span></span> {
        <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> blen = <span class="hljs-keyword"><span class="hljs-keyword">match</span></span> file.read(&amp;<span class="hljs-keyword"><span class="hljs-keyword">mut</span></span> buf) {
            <span class="hljs-comment"><span class="hljs-comment">//Err(ref e) if e.kind() == std::io::ErrorKind::Interrupted =&gt; continue,</span></span>
            <span class="hljs-literal"><span class="hljs-literal">Ok</span></span>(<span class="hljs-number"><span class="hljs-number">0</span></span>) =&gt; <span class="hljs-keyword"><span class="hljs-keyword">break</span></span>,
            <span class="hljs-literal"><span class="hljs-literal">Ok</span></span>(blen) =&gt; blen,
            <span class="hljs-literal"><span class="hljs-literal">Err</span></span>(e) =&gt; {
                <span class="hljs-built_in"><span class="hljs-built_in">panic!</span></span>(e);
            }
        };
        <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> i <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span>..blen {
            <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> b = buf[i];

            <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> b == <span class="hljs-string"><span class="hljs-string">b'"'</span></span> &amp;&amp; !backslash {
                quotes = !quotes;
            }
            backslash = b == <span class="hljs-string"><span class="hljs-string">b'\\'</span></span>;

            <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> !quotes {
                <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> b == <span class="hljs-string"><span class="hljs-string">b'{'</span></span> {
                    <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> braces == <span class="hljs-number"><span class="hljs-number">0</span></span> {
                        i0 = i;
                    }
                    braces += <span class="hljs-number"><span class="hljs-number">1</span></span>;
                }
                <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> b == <span class="hljs-string"><span class="hljs-string">b'}'</span></span> {
                    braces -= <span class="hljs-number"><span class="hljs-number">1</span></span>;
                    <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> braces == <span class="hljs-number"><span class="hljs-number">0</span></span> { <span class="hljs-comment"><span class="hljs-comment">//object formed !</span></span>

                        <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> <span class="hljs-keyword"><span class="hljs-keyword">mut</span></span> o = &amp;buf[i0..i+<span class="hljs-number"><span class="hljs-number">1</span></span>];
                        i0 = <span class="hljs-number"><span class="hljs-number">0</span></span>;
                        <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> osave.len() &gt; <span class="hljs-number"><span class="hljs-number">0</span></span> {
                            osave.extend_from_slice(o);
                            o = &amp;osave;
                        }

                        channels[tid].send(o.to_vec()).unwrap();
                        tid = <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> tid == threadcount-<span class="hljs-number"><span class="hljs-number">1</span></span> {<span class="hljs-number"><span class="hljs-number">0</span></span>} <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> {tid+<span class="hljs-number"><span class="hljs-number">1</span></span>};

                        osave.clear();
                    }
                }
            } 
        }
        <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> i0 &gt; <span class="hljs-number"><span class="hljs-number">0</span></span> {
            osave.extend_from_slice(&amp;buf[i0..]);
            i0 = <span class="hljs-number"><span class="hljs-number">0</span></span>;
        }
    }

    <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> tid <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span>..threadcount { <span class="hljs-comment"><span class="hljs-comment">//stop threads</span></span>
        channels[tid].send(<span class="hljs-built_in"><span class="hljs-built_in">vec!</span></span>[]).unwrap();
    }
    <span class="hljs-built_in"><span class="hljs-built_in">println!</span></span>(<span class="hljs-string"><span class="hljs-string">"---------------------------------------------"</span></span>);

    <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> <span class="hljs-keyword"><span class="hljs-keyword">mut</span></span> result = Debtors::<span class="hljs-keyword"><span class="hljs-keyword">default</span></span>();
    <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> <span class="hljs-keyword"><span class="hljs-keyword">mut</span></span> allcount0 = <span class="hljs-number"><span class="hljs-number">0</span></span>;
    <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> <span class="hljs-keyword"><span class="hljs-keyword">mut</span></span> errcount0 = <span class="hljs-number"><span class="hljs-number">0</span></span>;

    <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> _ <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span>..threadcount {
        <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> (resultpart, allcount, errcount) = threads.pop().unwrap().join().unwrap();
        <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> result.all.len() == <span class="hljs-number"><span class="hljs-number">0</span></span> {
            result = resultpart;
        } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> {
            merge_result(resultpart, &amp;<span class="hljs-keyword"><span class="hljs-keyword">mut</span></span> result);
        }
        allcount0 += allcount;
        errcount0 += errcount;
    }

    <span class="hljs-built_in"><span class="hljs-built_in">println!</span></span>(<span class="hljs-string"><span class="hljs-string">"---------------------------------------------"</span></span>);
    <span class="hljs-built_in"><span class="hljs-built_in">println!</span></span>(<span class="hljs-string"><span class="hljs-string">"file {}: processed {} objects in {:?}s, {} errors"</span></span>, 
        fname, allcount0, tbegin.elapsed().unwrap(), errcount0
    );

    result
}


<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fn</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">process_thread</span></span></span></span>(channel: std::sync::mpsc::Receiver&lt;<span class="hljs-built_in"><span class="hljs-built_in">Vec</span></span>&lt;<span class="hljs-built_in"><span class="hljs-built_in">u8</span></span>&gt;&gt;, tid: <span class="hljs-built_in"><span class="hljs-built_in">usize</span></span>) -&gt; (Debtors, <span class="hljs-built_in"><span class="hljs-built_in">i32</span></span>, <span class="hljs-built_in"><span class="hljs-built_in">i32</span></span>) {
    <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> <span class="hljs-keyword"><span class="hljs-keyword">mut</span></span> result = Debtors::<span class="hljs-keyword"><span class="hljs-keyword">default</span></span>();
    <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> <span class="hljs-keyword"><span class="hljs-keyword">mut</span></span> allcount = <span class="hljs-number"><span class="hljs-number">0</span></span>;
    <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> <span class="hljs-keyword"><span class="hljs-keyword">mut</span></span> errcount = <span class="hljs-number"><span class="hljs-number">0</span></span>;
    <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> <span class="hljs-keyword"><span class="hljs-keyword">mut</span></span> prncount = <span class="hljs-number"><span class="hljs-number">0</span></span>;
    <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> <span class="hljs-keyword"><span class="hljs-keyword">mut</span></span> prntab = <span class="hljs-built_in"><span class="hljs-built_in">String</span></span>::new();
    <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> _ <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span>..(tid)*<span class="hljs-number"><span class="hljs-number">3</span></span> {prntab.push(<span class="hljs-string"><span class="hljs-string">'\t'</span></span>)}

    <span class="hljs-keyword"><span class="hljs-keyword">loop</span></span> {
        <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> o = channel.recv().unwrap();
        <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> o.len() == <span class="hljs-number"><span class="hljs-number">0</span></span> {
            <span class="hljs-keyword"><span class="hljs-keyword">break</span></span>;
        }
        <span class="hljs-keyword"><span class="hljs-keyword">match</span></span> serde_json::from_slice(&amp;o) {
            <span class="hljs-literal"><span class="hljs-literal">Ok</span></span>(o) =&gt; {
                process_object(&amp;o, &amp;<span class="hljs-keyword"><span class="hljs-keyword">mut</span></span> result);
            }
            <span class="hljs-literal"><span class="hljs-literal">Err</span></span>(e) =&gt; {
                <span class="hljs-built_in"><span class="hljs-built_in">println!</span></span>(<span class="hljs-string"><span class="hljs-string">"JSON ERROR: {}:\n{:?}"</span></span>, e, std::<span class="hljs-built_in"><span class="hljs-built_in">str</span></span>::from_utf8(&amp;o));
                errcount +=<span class="hljs-number"><span class="hljs-number">1</span></span>;
            }
        }
        prncount += <span class="hljs-number"><span class="hljs-number">1</span></span>;
        <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> prncount == PRN_COUNT {
            allcount += prncount;
            prncount = <span class="hljs-number"><span class="hljs-number">0</span></span>;
            <span class="hljs-built_in"><span class="hljs-built_in">println!</span></span>(<span class="hljs-string"><span class="hljs-string">"{}thread{}: {}"</span></span>, prntab, tid, allcount);
        }
    }
    allcount += prncount;
    (result, allcount, errcount)
}


<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fn</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">process_object</span></span></span></span>(o: &amp;Value, result: &amp;<span class="hljs-keyword"><span class="hljs-keyword">mut</span></span> Debtors) {
    <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> dr = extract_data(o);
    <span class="hljs-comment"><span class="hljs-comment">//println!("{} - {:?} - {}", &amp;dr.company, &amp;dr.phones, &amp;dr.debt,);</span></span>

    <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> di = <span class="hljs-keyword"><span class="hljs-keyword">match</span></span> dr.phones.iter().filter_map(|p| result.index_by_phone.get(p)).next() {
        <span class="hljs-literal"><span class="hljs-literal">Some</span></span>(i) =&gt; *i,
        <span class="hljs-literal"><span class="hljs-literal">None</span></span> =&gt; {
            result.all.push(Debtor::<span class="hljs-keyword"><span class="hljs-keyword">default</span></span>());
            result.all.len()-<span class="hljs-number"><span class="hljs-number">1</span></span>
        }
    };
    <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> d = &amp;<span class="hljs-keyword"><span class="hljs-keyword">mut</span></span> result.all[di];
    d.companies.insert(dr.company);
    <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> p <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> &amp;dr.phones {
        d.phones.insert(p.to_owned()); 
        result.index_by_phone.insert(p.to_owned(), di);
    }
    d.debt += dr.debt;
}


<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fn</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">merge_result</span></span></span></span>(part: Debtors, result: &amp;<span class="hljs-keyword"><span class="hljs-keyword">mut</span></span> Debtors) {
    <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> dr <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> part.all {
        <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> di = <span class="hljs-keyword"><span class="hljs-keyword">match</span></span> dr.phones.iter().filter_map(|p| result.index_by_phone.get(p)).next() {
            <span class="hljs-literal"><span class="hljs-literal">Some</span></span>(i) =&gt; *i,
            <span class="hljs-literal"><span class="hljs-literal">None</span></span> =&gt; {
                result.all.push(Debtor::<span class="hljs-keyword"><span class="hljs-keyword">default</span></span>());
                result.all.len()-<span class="hljs-number"><span class="hljs-number">1</span></span>
            }
        };
        <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> d = &amp;<span class="hljs-keyword"><span class="hljs-keyword">mut</span></span> result.all[di];
        d.companies.union(&amp;dr.companies);
        <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> p <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> &amp;dr.phones {
            d.phones.insert(p.to_owned());
            result.index_by_phone.insert(p.to_owned(), di);
        }
        d.debt += dr.debt;
    }
}


<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fn</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">extract_data</span></span></span></span>(o: &amp;Value) -&gt; DebtRec {

    <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fn</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">val2str</span></span></span></span>(v: &amp;Value) -&gt; <span class="hljs-built_in"><span class="hljs-built_in">String</span></span> {
        <span class="hljs-keyword"><span class="hljs-keyword">match</span></span> v {
            Value::<span class="hljs-built_in"><span class="hljs-built_in">String</span></span>(vs) =&gt; vs.to_owned(), <span class="hljs-comment"><span class="hljs-comment">//to avoid additional quotes</span></span>
            _ =&gt; v.to_string()
        }
    }

    <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> <span class="hljs-keyword"><span class="hljs-keyword">mut</span></span> dr = DebtRec::<span class="hljs-keyword"><span class="hljs-keyword">default</span></span>();

    <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> c = &amp;o[<span class="hljs-string"><span class="hljs-string">"company"</span></span>];
    dr.company = <span class="hljs-keyword"><span class="hljs-keyword">match</span></span> c {
        Value::Object(c1) =&gt; <span class="hljs-keyword"><span class="hljs-keyword">match</span></span> &amp;c1[<span class="hljs-string"><span class="hljs-string">"name"</span></span>] {
            Value::<span class="hljs-built_in"><span class="hljs-built_in">String</span></span>(c2) =&gt; c2.to_owned(),
            _ =&gt; val2str(c)
        },
        _ =&gt; val2str(c)
    };

    <span class="hljs-keyword"><span class="hljs-keyword">match</span></span> &amp;o[<span class="hljs-string"><span class="hljs-string">"phones"</span></span>] {
        Value::Null =&gt; {}
        Value::Array(pp) =&gt; dr.phones.extend(pp.iter().map(|p| val2str(p))),
        pp =&gt; dr.phones.push(val2str(&amp;pp))
    }

    <span class="hljs-keyword"><span class="hljs-keyword">match</span></span> &amp;o[<span class="hljs-string"><span class="hljs-string">"phone"</span></span>] {
        Value::Null =&gt; {}
        p =&gt; dr.phones.push(val2str(&amp;p))
    }

    dr.debt = <span class="hljs-keyword"><span class="hljs-keyword">match</span></span> &amp;o[<span class="hljs-string"><span class="hljs-string">"debt"</span></span>] {
        Value::Number(d) =&gt; d.as_f64().unwrap_or(<span class="hljs-number"><span class="hljs-number">0.0</span></span>),
        Value::<span class="hljs-built_in"><span class="hljs-built_in">String</span></span>(d) =&gt; d.parse::&lt;<span class="hljs-built_in"><span class="hljs-built_in">f64</span></span>&gt;().unwrap_or(<span class="hljs-number"><span class="hljs-number">0.0</span></span>),
        _ =&gt; <span class="hljs-number"><span class="hljs-number">0.0</span></span>
    };

    dr
}</code></pre></div></div></div>

        <div class="comment__footer">
    <a href="#reply" class="comment__footer-link reply_link" onclick="return comment_show_reply_form(20134130 )">Ответить</a>


</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-13" id="reply_comments_20134130">  <li class="content-list__item content-list__item_comment js-comment " rel="20134168">
    
    <span class="parent_id" data-parent_id="20134130"></span>
    <div class="comment" id="comment_20134168">
      <span class="comment__collapse" title="Свернуть/развернуть ветку комментариев" data-id="20134168"></span>
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head   " rel="20134168">
          <a href="https://habr.com/ru/users/tsukanov-as/" class="user-info user-info_inline" rel="user-popover" data-user-login="tsukanov-as">
    <svg class="default-image default-image_mini default-image_green" width="24" height="24"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#slug"></use></svg>
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">tsukanov-as</span>
</a>

          
          <time class="comment__date-time comment__date-time_published">9 мая 2019 в 21:16</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="#comment_20134168" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="20134168" data-action="add" title="Добавить в закладки"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#book"></use></svg></a>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <span class="icon_comment-branch js-comment_tree" data-id="20134168" data-parent_id="20134130" title="Показать ветку комментариев"><svg width="8" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#tree"></use></svg></span>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#comment_20134130" class="icon_comment-arrow-up js-comment_parent" data-id="20134168" data-parent_id="20134130" title="Показать предыдущий комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
    </li>

  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="#comment_20134168" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="20134168" data-parent_id="20134130" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="20134168" data-post-target="450512" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="plus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter   js-score" title="Всего голосов 0: ↑0 и ↓0">0</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message ">Да, решение на Lua грязное в этом плане.<br>
Для честного разбора нужно побайтно перебирать, а это заведомо провально на интерпретаторе и даже пытаться смысла нет.<br>
Просто перебрать побайтно файл в памяти у меня 45 секунд на Lua 5.3.5<br>
Изначально я вообще хотел попробовать использовать SAX парсер, но не нашел такой либы.</div>

        <div class="comment__footer">
    <a href="#reply" class="comment__footer-link reply_link" onclick="return comment_show_reply_form(20134168 )">Ответить</a>


</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-14" id="reply_comments_20134168">  <li class="content-list__item content-list__item_comment js-comment " rel="20134188">
    
    <span class="parent_id" data-parent_id="20134168"></span>
    <div class="comment" id="comment_20134188">
      <span class="comment__collapse" title="Свернуть/развернуть ветку комментариев" data-id="20134188"></span>
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head comment__head_topic-author comment__head_my-comment " rel="20134188">
          <a href="https://habr.com/ru/users/epishman/" class="user-info user-info_inline" rel="user-popover" data-user-login="epishman">
    <img src="Swift%20%D0%BF%D1%80%D0%BE%D1%82%D0%B8%D0%B2%20Rust%20%E2%80%94%20%D0%B1%D0%B5%D0%BD%D1%87%D0%BC%D0%B0%D1%80%D0%BA%D0%B8%D0%BD%D0%B3%20%D0%BD%D0%B0%20Linux%20%D1%81%20(%D0%BD%D0%B5)%D0%BF%D0%BE%D0%BD%D1%8F%D1%82%D0%BD%D1%8B%D0%BC%20%D1%84%D0%B8%D0%BD%D0%B0%D0%BB%D0%BE%D0%BC%20_%20%D0%A5%D0%B0%D0%B1%D1%80_files/ec0d88c4853c0d36d44bd0526dcfa8d7.png" class="user-info__image-pic user-info__image-pic_small" width="24" height="24">
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">epishman</span>
</a>

          
          <time class="comment__date-time comment__date-time_published">9 мая 2019 в 21:23</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="#comment_20134188" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="20134188" data-action="add" title="Добавить в закладки"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#book"></use></svg></a>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <span class="icon_comment-branch js-comment_tree" data-id="20134188" data-parent_id="20134168" title="Показать ветку комментариев"><svg width="8" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#tree"></use></svg></span>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#comment_20134168" class="icon_comment-arrow-up js-comment_parent" data-id="20134188" data-parent_id="20134168" title="Показать предыдущий комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
    </li>

  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="#comment_20134188" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="20134188" data-parent_id="20134168" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="20134188" data-post-target="450512" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="plus" onclick="comment_vote(this);" title="За свои комментарии голосовать нельзя" disabled="disabled"><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter   js-score" title="Всего голосов 0: ↑0 и ↓0">0</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="За свои комментарии голосовать нельзя" disabled="disabled"><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message ">Для раста есть подобие SAX-<a href="https://serde.rs/stream-array.html">парсера</a>,
 только оно медленнее моего алгоритма. Но если в луа регулярки сишные, 
то можно наверное на регулярке что-то написать. Я просто давно понял, 
что если нужна экстремальная производительность — лучше самому в едином 
цикле все сделать, чем либами обкладываться. Поэтому и раст. Тема с 
гошкой интересная, закончу свой многопоточный вариант, попробую 
доработать Ваш код, чтобы с горутинами, неужели не догонит.</div>

        <div class="comment__footer">
    <a href="#reply" class="comment__footer-link reply_link" onclick="return comment_show_reply_form(20134188 )">Ответить</a>


</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-15" id="reply_comments_20134188">  <li class="content-list__item content-list__item_comment js-comment " rel="20134194">
    
    <span class="parent_id" data-parent_id="20134188"></span>
    <div class="comment" id="comment_20134194">
      <span class="comment__collapse" title="Свернуть/развернуть ветку комментариев" data-id="20134194"></span>
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head   " rel="20134194">
          <a href="https://habr.com/ru/users/tsukanov-as/" class="user-info user-info_inline" rel="user-popover" data-user-login="tsukanov-as">
    <svg class="default-image default-image_mini default-image_green" width="24" height="24"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#slug"></use></svg>
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">tsukanov-as</span>
</a>

          
          <time class="comment__date-time comment__date-time_published">9 мая 2019 в 21:25</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="#comment_20134194" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="20134194" data-action="add" title="Добавить в закладки"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#book"></use></svg></a>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <span class="icon_comment-branch js-comment_tree" data-id="20134194" data-parent_id="20134188" title="Показать ветку комментариев"><svg width="8" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#tree"></use></svg></span>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#comment_20134188" class="icon_comment-arrow-up js-comment_parent" data-id="20134194" data-parent_id="20134188" title="Показать предыдущий комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
    </li>

  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="#comment_20134194" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="20134194" data-parent_id="20134188" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="20134194" data-post-target="450512" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="plus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter   js-score" title="Всего голосов 0: ↑0 и ↓0">0</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message ">На Go был не мой код если что )</div>

        <div class="comment__footer">
    <a href="#reply" class="comment__footer-link reply_link" onclick="return comment_show_reply_form(20134194 )">Ответить</a>


</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-16" id="reply_comments_20134194"></ul>
  </li>
</ul>
  </li>
  <li class="content-list__item content-list__item_comment js-comment " rel="20143636">
    
    <span class="parent_id" data-parent_id="20134168"></span>
    <div class="comment" id="comment_20143636">
      <span class="comment__collapse" title="Свернуть/развернуть ветку комментариев" data-id="20143636"></span>
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head   " rel="20143636">
          <a href="https://habr.com/ru/users/tsukanov-as/" class="user-info user-info_inline" rel="user-popover" data-user-login="tsukanov-as">
    <svg class="default-image default-image_mini default-image_green" width="24" height="24"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#slug"></use></svg>
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">tsukanov-as</span>
</a>

          
          <time class="comment__date-time comment__date-time_published">13 мая 2019 в 00:23</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="#comment_20143636" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="20143636" data-action="add" title="Добавить в закладки"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#book"></use></svg></a>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <span class="icon_comment-branch js-comment_tree" data-id="20143636" data-parent_id="20134168" title="Показать ветку комментариев"><svg width="8" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#tree"></use></svg></span>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#comment_20134168" class="icon_comment-arrow-up js-comment_parent" data-id="20143636" data-parent_id="20134168" title="Показать предыдущий комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
    </li>

  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="#comment_20143636" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="20143636" data-parent_id="20134168" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="20143636" data-post-target="450512" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="plus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter voting-wjt__counter_positive  js-score" title="Всего голосов +1: ↑1 и ↓0">+1</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message ">Не знаю откуда я взял эти 45 секунд. На самом деле 8 секунд. Взял обидел Lua ненароком</div>

        <div class="comment__footer">
    <a href="#reply" class="comment__footer-link reply_link" onclick="return comment_show_reply_form(20143636 )">Ответить</a>


</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-15" id="reply_comments_20143636"></ul>
  </li>
</ul>
  </li>
  <li class="content-list__item content-list__item_comment js-comment " rel="20134528">
    
    <span class="parent_id" data-parent_id="20134130"></span>
    <div class="comment" id="comment_20134528">
      <span class="comment__collapse" title="Свернуть/развернуть ветку комментариев" data-id="20134528"></span>
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head   " rel="20134528">
          <a href="https://habr.com/ru/users/tsukanov-as/" class="user-info user-info_inline" rel="user-popover" data-user-login="tsukanov-as">
    <svg class="default-image default-image_mini default-image_green" width="24" height="24"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#slug"></use></svg>
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">tsukanov-as</span>
</a>

          <svg class="icon_comment-edit" title="Комментарий был изменен" width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#pencil"></use></svg>
          <time class="comment__date-time comment__date-time_published">9 мая 2019 в 23:38</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="#comment_20134528" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="20134528" data-action="add" title="Добавить в закладки"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#book"></use></svg></a>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <span class="icon_comment-branch js-comment_tree" data-id="20134528" data-parent_id="20134130" title="Показать ветку комментариев"><svg width="8" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#tree"></use></svg></span>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#comment_20134130" class="icon_comment-arrow-up js-comment_parent" data-id="20134528" data-parent_id="20134130" title="Показать предыдущий комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
    </li>

  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="#comment_20134528" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="20134528" data-parent_id="20134130" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="20134528" data-post-target="450512" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="plus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter   js-score" title="Всего голосов 0: ↑0 и ↓0">0</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message ">Поставил у себя Rust и собрал этот код.<br>
2 сек. и около 100 Мб памяти (не знаю что это значит) в 1 поток.<br>
<br>
Процессор у меня i5 8400 6 ядер<br>
В 6 потоков 0.5 сек и непонятно сколько памяти (но как будто бы мало)<br>
Каждый поток стабильно добавляет скорости.</div>

        <div class="comment__footer">
    <a href="#reply" class="comment__footer-link reply_link" onclick="return comment_show_reply_form(20134528 )">Ответить</a>


</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-14" id="reply_comments_20134528">  <li class="content-list__item content-list__item_comment js-comment " rel="20134542">
    
    <span class="parent_id" data-parent_id="20134528"></span>
    <div class="comment" id="comment_20134542">
      <span class="comment__collapse" title="Свернуть/развернуть ветку комментариев" data-id="20134542"></span>
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head comment__head_topic-author comment__head_my-comment " rel="20134542">
          <a href="https://habr.com/ru/users/epishman/" class="user-info user-info_inline" rel="user-popover" data-user-login="epishman">
    <img src="Swift%20%D0%BF%D1%80%D0%BE%D1%82%D0%B8%D0%B2%20Rust%20%E2%80%94%20%D0%B1%D0%B5%D0%BD%D1%87%D0%BC%D0%B0%D1%80%D0%BA%D0%B8%D0%BD%D0%B3%20%D0%BD%D0%B0%20Linux%20%D1%81%20(%D0%BD%D0%B5)%D0%BF%D0%BE%D0%BD%D1%8F%D1%82%D0%BD%D1%8B%D0%BC%20%D1%84%D0%B8%D0%BD%D0%B0%D0%BB%D0%BE%D0%BC%20_%20%D0%A5%D0%B0%D0%B1%D1%80_files/ec0d88c4853c0d36d44bd0526dcfa8d7.png" class="user-info__image-pic user-info__image-pic_small" width="24" height="24">
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">epishman</span>
</a>

          
          <time class="comment__date-time comment__date-time_published">9 мая 2019 в 23:46</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="#comment_20134542" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="20134542" data-action="add" title="Добавить в закладки"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#book"></use></svg></a>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <span class="icon_comment-branch js-comment_tree" data-id="20134542" data-parent_id="20134528" title="Показать ветку комментариев"><svg width="8" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#tree"></use></svg></span>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#comment_20134528" class="icon_comment-arrow-up js-comment_parent" data-id="20134542" data-parent_id="20134528" title="Показать предыдущий комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
    </li>

  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="#comment_20134542" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="20134542" data-parent_id="20134528" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="20134542" data-post-target="450512" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="plus" onclick="comment_vote(this);" title="За свои комментарии голосовать нельзя" disabled="disabled"><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter   js-score" title="Всего голосов 0: ↑0 и ↓0">0</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="За свои комментарии голосовать нельзя" disabled="disabled"><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message ">По потокам наверное статью 
придется писать. Во-первых много памяти жрут, во-вторых если буфер 
канала ограничить — начинаются тормоза. Завтра доделаю код, выложу 
здесь, и параллельно буду гошку ковырять, возможно у нее многопоточность
 получше растовой будет.</div>

        <div class="comment__footer">
    <a href="#reply" class="comment__footer-link reply_link" onclick="return comment_show_reply_form(20134542 )">Ответить</a>


</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-15" id="reply_comments_20134542">  <li class="content-list__item content-list__item_comment js-comment " rel="20134566">
    
    <span class="parent_id" data-parent_id="20134542"></span>
    <div class="comment" id="comment_20134566">
      <span class="comment__collapse" title="Свернуть/развернуть ветку комментариев" data-id="20134566"></span>
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head   " rel="20134566">
          <a href="https://habr.com/ru/users/tsukanov-as/" class="user-info user-info_inline" rel="user-popover" data-user-login="tsukanov-as">
    <svg class="default-image default-image_mini default-image_green" width="24" height="24"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#slug"></use></svg>
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">tsukanov-as</span>
</a>

          
          <time class="comment__date-time comment__date-time_published">10 мая 2019 в 00:04</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="#comment_20134566" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="20134566" data-action="add" title="Добавить в закладки"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#book"></use></svg></a>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <span class="icon_comment-branch js-comment_tree" data-id="20134566" data-parent_id="20134542" title="Показать ветку комментариев"><svg width="8" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#tree"></use></svg></span>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#comment_20134542" class="icon_comment-arrow-up js-comment_parent" data-id="20134566" data-parent_id="20134542" title="Показать предыдущий комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
    </li>

  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="#comment_20134566" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="20134566" data-parent_id="20134542" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="20134566" data-post-target="450512" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="plus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter   js-score" title="Всего голосов 0: ↑0 и ↓0">0</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message ">Еще обнаружил что если поставить 
больше 6 потоков то начинает дико тупить. При 12 потоках 7 секунд 
выполняется. Явно что-то не так</div>

        <div class="comment__footer">
    <a href="#reply" class="comment__footer-link reply_link" onclick="return comment_show_reply_form(20134566 )">Ответить</a>


</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-16" id="reply_comments_20134566">  <li class="content-list__item content-list__item_comment js-comment " rel="20134584">
    
    <span class="parent_id" data-parent_id="20134566"></span>
    <div class="comment" id="comment_20134584">
      <span class="comment__collapse" title="Свернуть/развернуть ветку комментариев" data-id="20134584"></span>
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head comment__head_topic-author comment__head_my-comment " rel="20134584">
          <a href="https://habr.com/ru/users/epishman/" class="user-info user-info_inline" rel="user-popover" data-user-login="epishman">
    <img src="Swift%20%D0%BF%D1%80%D0%BE%D1%82%D0%B8%D0%B2%20Rust%20%E2%80%94%20%D0%B1%D0%B5%D0%BD%D1%87%D0%BC%D0%B0%D1%80%D0%BA%D0%B8%D0%BD%D0%B3%20%D0%BD%D0%B0%20Linux%20%D1%81%20(%D0%BD%D0%B5)%D0%BF%D0%BE%D0%BD%D1%8F%D1%82%D0%BD%D1%8B%D0%BC%20%D1%84%D0%B8%D0%BD%D0%B0%D0%BB%D0%BE%D0%BC%20_%20%D0%A5%D0%B0%D0%B1%D1%80_files/ec0d88c4853c0d36d44bd0526dcfa8d7.png" class="user-info__image-pic user-info__image-pic_small" width="24" height="24">
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">epishman</span>
</a>

          
          <time class="comment__date-time comment__date-time_published">10 мая 2019 в 00:14</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="#comment_20134584" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="20134584" data-action="add" title="Добавить в закладки"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#book"></use></svg></a>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <span class="icon_comment-branch js-comment_tree" data-id="20134584" data-parent_id="20134566" title="Показать ветку комментариев"><svg width="8" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#tree"></use></svg></span>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#comment_20134566" class="icon_comment-arrow-up js-comment_parent" data-id="20134584" data-parent_id="20134566" title="Показать предыдущий комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
    </li>

  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="#comment_20134584" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="20134584" data-parent_id="20134566" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="20134584" data-post-target="450512" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="plus" onclick="comment_vote(this);" title="За свои комментарии голосовать нельзя" disabled="disabled"><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter   js-score" title="Всего голосов 0: ↑0 и ↓0">0</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="За свои комментарии голосовать нельзя" disabled="disabled"><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message ">Так и должно быть. В идеале 
тредов не более количества ядер. Дальше ОС начинает переключать 
контекст, а это дорого. Поэтому зеленые потоки / горутины — это все 
больше абстракция для программистов, чем реальное ускорение. Железо 
рулит.</div>

        <div class="comment__footer">
    <a href="#reply" class="comment__footer-link reply_link" onclick="return comment_show_reply_form(20134584 )">Ответить</a>


</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-17" id="reply_comments_20134584"></ul>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="content-list__item content-list__item_comment js-comment " rel="20134548">
    
    <span class="parent_id" data-parent_id="20134528"></span>
    <div class="comment" id="comment_20134548">
      <span class="comment__collapse" title="Свернуть/развернуть ветку комментариев" data-id="20134548"></span>
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head comment__head_topic-author comment__head_my-comment " rel="20134548">
          <a href="https://habr.com/ru/users/epishman/" class="user-info user-info_inline" rel="user-popover" data-user-login="epishman">
    <img src="Swift%20%D0%BF%D1%80%D0%BE%D1%82%D0%B8%D0%B2%20Rust%20%E2%80%94%20%D0%B1%D0%B5%D0%BD%D1%87%D0%BC%D0%B0%D1%80%D0%BA%D0%B8%D0%BD%D0%B3%20%D0%BD%D0%B0%20Linux%20%D1%81%20(%D0%BD%D0%B5)%D0%BF%D0%BE%D0%BD%D1%8F%D1%82%D0%BD%D1%8B%D0%BC%20%D1%84%D0%B8%D0%BD%D0%B0%D0%BB%D0%BE%D0%BC%20_%20%D0%A5%D0%B0%D0%B1%D1%80_files/ec0d88c4853c0d36d44bd0526dcfa8d7.png" class="user-info__image-pic user-info__image-pic_small" width="24" height="24">
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">epishman</span>
</a>

          
          <time class="comment__date-time comment__date-time_published">9 мая 2019 в 23:53</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="#comment_20134548" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="20134548" data-action="add" title="Добавить в закладки"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#book"></use></svg></a>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <span class="icon_comment-branch js-comment_tree" data-id="20134548" data-parent_id="20134528" title="Показать ветку комментариев"><svg width="8" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#tree"></use></svg></span>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#comment_20134528" class="icon_comment-arrow-up js-comment_parent" data-id="20134548" data-parent_id="20134528" title="Показать предыдущий комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
    </li>

  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="#comment_20134548" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="20134548" data-parent_id="20134528" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="20134548" data-post-target="450512" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="plus" onclick="comment_vote(this);" title="За свои комментарии голосовать нельзя" disabled="disabled"><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter   js-score" title="Всего голосов 0: ↑0 и ↓0">0</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="За свои комментарии голосовать нельзя" disabled="disabled"><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message ">Сейчас буфера каналов резиновые 
(в гошке они фиксированного размера). То есть память постоянно течет, и 
это плохо. Если в расте сделать их фиксированными, начинаются тормоза, 
видимо из-за мьютексов, которые зашиты внутрь синхронных каналов. Пока 
думаю как побороть.</div>

        <div class="comment__footer">
    <a href="#reply" class="comment__footer-link reply_link" onclick="return comment_show_reply_form(20134548 )">Ответить</a>


</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-15" id="reply_comments_20134548"></ul>
  </li>
</ul>
  </li>
  <li class="content-list__item content-list__item_comment js-comment " rel="20135570">
    
    <span class="parent_id" data-parent_id="20134130"></span>
    <div class="comment" id="comment_20135570">
      <span class="comment__collapse" title="Свернуть/развернуть ветку комментариев" data-id="20135570"></span>
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head   " rel="20135570">
          <a href="https://habr.com/ru/users/tsukanov-as/" class="user-info user-info_inline" rel="user-popover" data-user-login="tsukanov-as">
    <svg class="default-image default-image_mini default-image_green" width="24" height="24"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#slug"></use></svg>
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">tsukanov-as</span>
</a>

          <svg class="icon_comment-edit" title="Комментарий был изменен" width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#pencil"></use></svg>
          <time class="comment__date-time comment__date-time_published">10 мая 2019 в 12:05</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="#comment_20135570" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="20135570" data-action="add" title="Добавить в закладки"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#book"></use></svg></a>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <span class="icon_comment-branch js-comment_tree" data-id="20135570" data-parent_id="20134130" title="Показать ветку комментариев"><svg width="8" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#tree"></use></svg></span>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#comment_20134130" class="icon_comment-arrow-up js-comment_parent" data-id="20135570" data-parent_id="20134130" title="Показать предыдущий комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
    </li>

  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="#comment_20135570" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="20135570" data-parent_id="20134130" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="20135570" data-post-target="450512" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="plus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter   js-score" title="Всего голосов 0: ↑0 и ↓0">0</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message ">Сделал без регулярки с учетом скобок внутри кавычек и экранирования: <a href="https://gist.github.com/tsukanov-as/d1532303e16d757e3fa9e70ccb21d64b">gist.github.com/tsukanov-as/d1532303e16d757e3fa9e70ccb21d64b</a><br>
<br>
Удивительно, но даже так LuaJit быстрее Rust в одном потоке (1.6 sec). <br>
<br>
Было бы здорово, если бы Вы собрали LuaJit у себя и сделали замер в своих условиях.<br>
<br>
Собирается легко из репозитория: <a href="https://github.com/LuaJIT/LuaJIT">github.com/LuaJIT/LuaJIT</a><br>
Библиотеку cjson можно поставить через менеджер пакетов: <a href="https://luarocks.org/modules/openresty/lua-cjson">luarocks.org/modules/openresty/lua-cjson</a></div>

        <div class="comment__footer">
    <a href="#reply" class="comment__footer-link reply_link" onclick="return comment_show_reply_form(20135570 )">Ответить</a>


</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-14" id="reply_comments_20135570">  <li class="content-list__item content-list__item_comment js-comment " rel="20135636">
    
    <span class="parent_id" data-parent_id="20135570"></span>
    <div class="comment" id="comment_20135636">
      <span class="comment__collapse" title="Свернуть/развернуть ветку комментариев" data-id="20135636"></span>
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head comment__head_topic-author comment__head_my-comment " rel="20135636">
          <a href="https://habr.com/ru/users/epishman/" class="user-info user-info_inline" rel="user-popover" data-user-login="epishman">
    <img src="Swift%20%D0%BF%D1%80%D0%BE%D1%82%D0%B8%D0%B2%20Rust%20%E2%80%94%20%D0%B1%D0%B5%D0%BD%D1%87%D0%BC%D0%B0%D1%80%D0%BA%D0%B8%D0%BD%D0%B3%20%D0%BD%D0%B0%20Linux%20%D1%81%20(%D0%BD%D0%B5)%D0%BF%D0%BE%D0%BD%D1%8F%D1%82%D0%BD%D1%8B%D0%BC%20%D1%84%D0%B8%D0%BD%D0%B0%D0%BB%D0%BE%D0%BC%20_%20%D0%A5%D0%B0%D0%B1%D1%80_files/ec0d88c4853c0d36d44bd0526dcfa8d7.png" class="user-info__image-pic user-info__image-pic_small" width="24" height="24">
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">epishman</span>
</a>

          
          <time class="comment__date-time comment__date-time_published">10 мая 2019 в 12:30</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="#comment_20135636" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="20135636" data-action="add" title="Добавить в закладки"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#book"></use></svg></a>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <span class="icon_comment-branch js-comment_tree" data-id="20135636" data-parent_id="20135570" title="Показать ветку комментариев"><svg width="8" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#tree"></use></svg></span>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#comment_20135570" class="icon_comment-arrow-up js-comment_parent" data-id="20135636" data-parent_id="20135570" title="Показать предыдущий комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
    </li>

  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="#comment_20135636" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="20135636" data-parent_id="20135570" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="20135636" data-post-target="450512" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="plus" onclick="comment_vote(this);" title="За свои комментарии голосовать нельзя" disabled="disabled"><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter   js-score" title="Всего голосов 0: ↑0 и ↓0">0</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="За свои комментарии голосовать нельзя" disabled="disabled"><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message ">Приблизительно понятно в чем 
дело. Я использую промежуточную структуру, и возвращаю ее из функции по 
значению, то есть память выделяется заново. Потом я строки заталкиваю в 
результат, тоже по значению. Это проблема всех статических языков, 
почему порой код Java быстрей кода C++ — в интерпретаторах строка всегда
 в единственном экземпляре, а в C++ это на усмотрение программиста. Я 
смогу догнать, если уберу дополнительный слой, и поднапрягусь со 
ссылками. Собственно, поэтому у Rust только одно преимущество — экономия
 памяти, и то если не используем тредов. На луа библиотеку не напишешь. 
Хотя, на JS я ваш код уже не догоню :)</div>

        <div class="comment__footer">
    <a href="#reply" class="comment__footer-link reply_link" onclick="return comment_show_reply_form(20135636 )">Ответить</a>


</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-15" id="reply_comments_20135636">  <li class="content-list__item content-list__item_comment js-comment " rel="20135644">
    
    <span class="parent_id" data-parent_id="20135636"></span>
    <div class="comment" id="comment_20135644">
      <span class="comment__collapse" title="Свернуть/развернуть ветку комментариев" data-id="20135644"></span>
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head   " rel="20135644">
          <a href="https://habr.com/ru/users/tsukanov-as/" class="user-info user-info_inline" rel="user-popover" data-user-login="tsukanov-as">
    <svg class="default-image default-image_mini default-image_green" width="24" height="24"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#slug"></use></svg>
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">tsukanov-as</span>
</a>

          <svg class="icon_comment-edit" title="Комментарий был изменен" width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#pencil"></use></svg>
          <time class="comment__date-time comment__date-time_published">10 мая 2019 в 12:36</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="#comment_20135644" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="20135644" data-action="add" title="Добавить в закладки"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#book"></use></svg></a>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <span class="icon_comment-branch js-comment_tree" data-id="20135644" data-parent_id="20135636" title="Показать ветку комментариев"><svg width="8" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#tree"></use></svg></span>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#comment_20135636" class="icon_comment-arrow-up js-comment_parent" data-id="20135644" data-parent_id="20135636" title="Показать предыдущий комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
    </li>

  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="#comment_20135644" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="20135644" data-parent_id="20135636" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="20135644" data-post-target="450512" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="plus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter   js-score" title="Всего голосов 0: ↑0 и ↓0">0</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message ">Мне нравится в Lua насколько мало нужно усилий, ума и знаний, чтобы написать эффективный код.<br>
Язык то детский совсем.<br>
<br>
ps Интересно насколько смогут еще ускорить этот код те, кто разбирается в LuaJit</div>

        <div class="comment__footer">
    <a href="#reply" class="comment__footer-link reply_link" onclick="return comment_show_reply_form(20135644 )">Ответить</a>


</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-16" id="reply_comments_20135644">  <li class="content-list__item content-list__item_comment js-comment " rel="20137192">
    
    <span class="parent_id" data-parent_id="20135644"></span>
    <div class="comment" id="comment_20137192">
      <span class="comment__collapse" title="Свернуть/развернуть ветку комментариев" data-id="20137192"></span>
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head   " rel="20137192">
          <a href="https://habr.com/ru/users/Deathik/" class="user-info user-info_inline" rel="user-popover" data-user-login="Deathik">
    <svg class="default-image default-image_mini default-image_green" width="24" height="24"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#slug"></use></svg>
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">Deathik</span>
</a>

          
          <time class="comment__date-time comment__date-time_published">10 мая 2019 в 21:46</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="#comment_20137192" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="20137192" data-action="add" title="Добавить в закладки"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#book"></use></svg></a>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <span class="icon_comment-branch js-comment_tree" data-id="20137192" data-parent_id="20135644" title="Показать ветку комментариев"><svg width="8" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#tree"></use></svg></span>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#comment_20135644" class="icon_comment-arrow-up js-comment_parent" data-id="20137192" data-parent_id="20135644" title="Показать предыдущий комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
    </li>

  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="#comment_20137192" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="20137192" data-parent_id="20135644" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="20137192" data-post-target="450512" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="plus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter   js-score" title="Всего голосов 0: ↑0 и ↓0">0</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message ">После столь поразительных 
результатов решил почитать про LuaJIT… Там и вправду под капотом 
«магия», очень заинтересовало что разогрев очень быстрый, обычно всё 
наоборот.</div>

        <div class="comment__footer">
    <a href="#reply" class="comment__footer-link reply_link" onclick="return comment_show_reply_form(20137192 )">Ответить</a>


</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-17" id="reply_comments_20137192">  <li class="content-list__item content-list__item_comment js-comment " rel="20137196">
    
    <span class="parent_id" data-parent_id="20137192"></span>
    <div class="comment" id="comment_20137196">
      <span class="comment__collapse" title="Свернуть/развернуть ветку комментариев" data-id="20137196"></span>
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head comment__head_topic-author comment__head_my-comment " rel="20137196">
          <a href="https://habr.com/ru/users/epishman/" class="user-info user-info_inline" rel="user-popover" data-user-login="epishman">
    <img src="Swift%20%D0%BF%D1%80%D0%BE%D1%82%D0%B8%D0%B2%20Rust%20%E2%80%94%20%D0%B1%D0%B5%D0%BD%D1%87%D0%BC%D0%B0%D1%80%D0%BA%D0%B8%D0%BD%D0%B3%20%D0%BD%D0%B0%20Linux%20%D1%81%20(%D0%BD%D0%B5)%D0%BF%D0%BE%D0%BD%D1%8F%D1%82%D0%BD%D1%8B%D0%BC%20%D1%84%D0%B8%D0%BD%D0%B0%D0%BB%D0%BE%D0%BC%20_%20%D0%A5%D0%B0%D0%B1%D1%80_files/ec0d88c4853c0d36d44bd0526dcfa8d7.png" class="user-info__image-pic user-info__image-pic_small" width="24" height="24">
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">epishman</span>
</a>

          
          <time class="comment__date-time comment__date-time_published">10 мая 2019 в 21:49</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="#comment_20137196" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="20137196" data-action="add" title="Добавить в закладки"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#book"></use></svg></a>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <span class="icon_comment-branch js-comment_tree" data-id="20137196" data-parent_id="20137192" title="Показать ветку комментариев"><svg width="8" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#tree"></use></svg></span>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#comment_20137192" class="icon_comment-arrow-up js-comment_parent" data-id="20137196" data-parent_id="20137192" title="Показать предыдущий комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
    </li>

  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="#comment_20137196" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="20137196" data-parent_id="20137192" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="20137196" data-post-target="450512" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="plus" onclick="comment_vote(this);" title="За свои комментарии голосовать нельзя" disabled="disabled"><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter   js-score" title="Всего голосов 0: ↑0 и ↓0">0</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="За свои комментарии голосовать нельзя" disabled="disabled"><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message ">Неужели существует то, чего нет в
 V8 и джаве, вроде эти ребята собаку съели на Jit, у них там и фоновая 
компиляция в натив, и черте что?</div>

        <div class="comment__footer">
    <a href="#reply" class="comment__footer-link reply_link" onclick="return comment_show_reply_form(20137196 )">Ответить</a>


</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-18" id="reply_comments_20137196">  <li class="content-list__item content-list__item_comment js-comment " rel="20137320">
    
    <span class="parent_id" data-parent_id="20137196"></span>
    <div class="comment" id="comment_20137320">
      <span class="comment__collapse" title="Свернуть/развернуть ветку комментариев" data-id="20137320"></span>
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head   " rel="20137320">
          <a href="https://habr.com/ru/users/tsukanov-as/" class="user-info user-info_inline" rel="user-popover" data-user-login="tsukanov-as">
    <svg class="default-image default-image_mini default-image_green" width="24" height="24"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#slug"></use></svg>
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">tsukanov-as</span>
</a>

          
          <time class="comment__date-time comment__date-time_published">10 мая 2019 в 22:40</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="#comment_20137320" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="20137320" data-action="add" title="Добавить в закладки"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#book"></use></svg></a>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <span class="icon_comment-branch js-comment_tree" data-id="20137320" data-parent_id="20137196" title="Показать ветку комментариев"><svg width="8" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#tree"></use></svg></span>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#comment_20137196" class="icon_comment-arrow-up js-comment_parent" data-id="20137320" data-parent_id="20137196" title="Показать предыдущий комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
    </li>

  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="#comment_20137320" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="20137320" data-parent_id="20137196" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="20137320" data-post-target="450512" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small voting-wjt__button_plus" data-action="plus" onclick="comment_vote(this);" title="Вы проголосовали положительно " disabled="disabled"><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter voting-wjt__counter_positive  js-score" title="Всего голосов +1: ↑1 и ↓0">+1</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="Вы проголосовали положительно , отменить голос нельзя" disabled="disabled"><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message ">Ну примерно так было в 11 году, когда я только знакомился с Lua: <a href="https://habr.com/ru/post/113804/">habr.com/ru/post/113804</a><br>
<br>
LuaJit уже давненько остановился в развитии судя по репозиторию (там 
очень маленькая активность), но как не странно до сих пор способен 
конкурировать с монстрами индустрии.</div>

        <div class="comment__footer">
    <a href="#reply" class="comment__footer-link reply_link" onclick="return comment_show_reply_form(20137320 )">Ответить</a>


</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-19" id="reply_comments_20137320"></ul>
  </li>
</ul>
  </li>
  <li class="content-list__item content-list__item_comment js-comment " rel="20137416">
    
    <span class="parent_id" data-parent_id="20137192"></span>
    <div class="comment" id="comment_20137416">
      <span class="comment__collapse" title="Свернуть/развернуть ветку комментариев" data-id="20137416"></span>
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head   " rel="20137416">
          <a href="https://habr.com/ru/users/tsukanov-as/" class="user-info user-info_inline" rel="user-popover" data-user-login="tsukanov-as">
    <svg class="default-image default-image_mini default-image_green" width="24" height="24"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#slug"></use></svg>
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">tsukanov-as</span>
</a>

          
          <time class="comment__date-time comment__date-time_published">10 мая 2019 в 23:20</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="#comment_20137416" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="20137416" data-action="add" title="Добавить в закладки"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#book"></use></svg></a>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <span class="icon_comment-branch js-comment_tree" data-id="20137416" data-parent_id="20137192" title="Показать ветку комментариев"><svg width="8" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#tree"></use></svg></span>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#comment_20137192" class="icon_comment-arrow-up js-comment_parent" data-id="20137416" data-parent_id="20137192" title="Показать предыдущий комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
    </li>

  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="#comment_20137416" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="20137416" data-parent_id="20137192" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="20137416" data-post-target="450512" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="plus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter   js-score" title="Всего голосов 0: ↑0 и ↓0">0</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message ">Меня вот больше удивляет что 
интерпретатор Lua 5.3.5, который целиком 300Кб, похоже способен 
конкурировать в некоторых задачах со слоном Swift. И код значительно 
проще и работает эффективнее.</div>

        <div class="comment__footer">
    <a href="#reply" class="comment__footer-link reply_link" onclick="return comment_show_reply_form(20137416 )">Ответить</a>


</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-18" id="reply_comments_20137416">  <li class="content-list__item content-list__item_comment js-comment " rel="20137560">
    
    <span class="parent_id" data-parent_id="20137416"></span>
    <div class="comment" id="comment_20137560">
      <span class="comment__collapse" title="Свернуть/развернуть ветку комментариев" data-id="20137560"></span>
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head comment__head_topic-author comment__head_my-comment " rel="20137560">
          <a href="https://habr.com/ru/users/epishman/" class="user-info user-info_inline" rel="user-popover" data-user-login="epishman">
    <img src="Swift%20%D0%BF%D1%80%D0%BE%D1%82%D0%B8%D0%B2%20Rust%20%E2%80%94%20%D0%B1%D0%B5%D0%BD%D1%87%D0%BC%D0%B0%D1%80%D0%BA%D0%B8%D0%BD%D0%B3%20%D0%BD%D0%B0%20Linux%20%D1%81%20(%D0%BD%D0%B5)%D0%BF%D0%BE%D0%BD%D1%8F%D1%82%D0%BD%D1%8B%D0%BC%20%D1%84%D0%B8%D0%BD%D0%B0%D0%BB%D0%BE%D0%BC%20_%20%D0%A5%D0%B0%D0%B1%D1%80_files/ec0d88c4853c0d36d44bd0526dcfa8d7.png" class="user-info__image-pic user-info__image-pic_small" width="24" height="24">
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">epishman</span>
</a>

          
          <time class="comment__date-time comment__date-time_published">11 мая 2019 в 00:32</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="#comment_20137560" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="20137560" data-action="add" title="Добавить в закладки"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#book"></use></svg></a>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <span class="icon_comment-branch js-comment_tree" data-id="20137560" data-parent_id="20137416" title="Показать ветку комментариев"><svg width="8" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#tree"></use></svg></span>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#comment_20137416" class="icon_comment-arrow-up js-comment_parent" data-id="20137560" data-parent_id="20137416" title="Показать предыдущий комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
    </li>

  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="#comment_20137560" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="20137560" data-parent_id="20137416" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="20137560" data-post-target="450512" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="plus" onclick="comment_vote(this);" title="За свои комментарии голосовать нельзя" disabled="disabled"><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter   js-score" title="Всего голосов 0: ↑0 и ↓0">0</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="За свои комментарии голосовать нельзя" disabled="disabled"><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message ">Свифт вообще как мы выяснили, это
 просто фасад для обжектси с NS-объектами. V8 тоже очень шустро 
работает, и сфер применения больше, и классы с модулями есть, и даже 
тайпскрипт. Я бы ноду не списывал пока.</div>

        <div class="comment__footer">
    <a href="#reply" class="comment__footer-link reply_link" onclick="return comment_show_reply_form(20137560 )">Ответить</a>


</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-19" id="reply_comments_20137560">  <li class="content-list__item content-list__item_comment js-comment " rel="20137620">
    
    <span class="parent_id" data-parent_id="20137560"></span>
    <div class="comment" id="comment_20137620">
      <span class="comment__collapse" title="Свернуть/развернуть ветку комментариев" data-id="20137620"></span>
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head   " rel="20137620">
          <a href="https://habr.com/ru/users/tsukanov-as/" class="user-info user-info_inline" rel="user-popover" data-user-login="tsukanov-as">
    <svg class="default-image default-image_mini default-image_green" width="24" height="24"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#slug"></use></svg>
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">tsukanov-as</span>
</a>

          
          <time class="comment__date-time comment__date-time_published">11 мая 2019 в 01:04</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="#comment_20137620" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="20137620" data-action="add" title="Добавить в закладки"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#book"></use></svg></a>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <span class="icon_comment-branch js-comment_tree" data-id="20137620" data-parent_id="20137560" title="Показать ветку комментариев"><svg width="8" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#tree"></use></svg></span>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#comment_20137560" class="icon_comment-arrow-up js-comment_parent" data-id="20137620" data-parent_id="20137560" title="Показать предыдущий комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
    </li>

  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="#comment_20137620" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="20137620" data-parent_id="20137560" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="20137620" data-post-target="450512" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="plus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter   js-score" title="Всего голосов 0: ↑0 и ↓0">0</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message ">Нода + тайпскрипт весьма неплохи, да.</div>

        <div class="comment__footer">
    <a href="#reply" class="comment__footer-link reply_link" onclick="return comment_show_reply_form(20137620 )">Ответить</a>


</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-20" id="reply_comments_20137620">  <li class="content-list__item content-list__item_comment js-comment " rel="20138770">
    
    <span class="parent_id" data-parent_id="20137620"></span>
    <div class="comment" id="comment_20138770">
      <span class="comment__collapse" title="Свернуть/развернуть ветку комментариев" data-id="20138770"></span>
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head comment__head_topic-author comment__head_my-comment " rel="20138770">
          <a href="https://habr.com/ru/users/epishman/" class="user-info user-info_inline" rel="user-popover" data-user-login="epishman">
    <img src="Swift%20%D0%BF%D1%80%D0%BE%D1%82%D0%B8%D0%B2%20Rust%20%E2%80%94%20%D0%B1%D0%B5%D0%BD%D1%87%D0%BC%D0%B0%D1%80%D0%BA%D0%B8%D0%BD%D0%B3%20%D0%BD%D0%B0%20Linux%20%D1%81%20(%D0%BD%D0%B5)%D0%BF%D0%BE%D0%BD%D1%8F%D1%82%D0%BD%D1%8B%D0%BC%20%D1%84%D0%B8%D0%BD%D0%B0%D0%BB%D0%BE%D0%BC%20_%20%D0%A5%D0%B0%D0%B1%D1%80_files/ec0d88c4853c0d36d44bd0526dcfa8d7.png" class="user-info__image-pic user-info__image-pic_small" width="24" height="24">
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">epishman</span>
</a>

          
          <time class="comment__date-time comment__date-time_published">11 мая 2019 в 13:37</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="#comment_20138770" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="20138770" data-action="add" title="Добавить в закладки"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#book"></use></svg></a>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <span class="icon_comment-branch js-comment_tree" data-id="20138770" data-parent_id="20137620" title="Показать ветку комментариев"><svg width="8" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#tree"></use></svg></span>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#comment_20137620" class="icon_comment-arrow-up js-comment_parent" data-id="20138770" data-parent_id="20137620" title="Показать предыдущий комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
    </li>

  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="#comment_20138770" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="20138770" data-parent_id="20137620" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="20138770" data-post-target="450512" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="plus" onclick="comment_vote(this);" title="За свои комментарии голосовать нельзя" disabled="disabled"><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter   js-score" title="Всего голосов 0: ↑0 и ↓0">0</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="За свои комментарии голосовать нельзя" disabled="disabled"><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message ">Окончательный вариант 
многопоточного парсинга на Rust. Асинхронные потоки быстрее синхронных, 
но вторые не жрут память. Быстрее я уже не смогу никак, теперь буду то 
же самое повторять на Go.<br>
<a href="https://github.com/epishman/habr_samples/blob/master/jsonparse/main.rs">github.com/epishman/habr_samples/blob/master/jsonparse/main.rs</a></div>

        <div class="comment__footer">
    <a href="#reply" class="comment__footer-link reply_link" onclick="return comment_show_reply_form(20138770 )">Ответить</a>


</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-21" id="reply_comments_20138770"></ul>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="content-list__item content-list__item_comment js-comment " rel="20140172">
    
    <span class="parent_id" data-parent_id="20135636"></span>
    <div class="comment" id="comment_20140172">
      <span class="comment__collapse" title="Свернуть/развернуть ветку комментариев" data-id="20140172"></span>
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head   " rel="20140172">
          <a href="https://habr.com/ru/users/Ryppka/" class="user-info user-info_inline" rel="user-popover" data-user-login="Ryppka">
    <img src="Swift%20%D0%BF%D1%80%D0%BE%D1%82%D0%B8%D0%B2%20Rust%20%E2%80%94%20%D0%B1%D0%B5%D0%BD%D1%87%D0%BC%D0%B0%D1%80%D0%BA%D0%B8%D0%BD%D0%B3%20%D0%BD%D0%B0%20Linux%20%D1%81%20(%D0%BD%D0%B5)%D0%BF%D0%BE%D0%BD%D1%8F%D1%82%D0%BD%D1%8B%D0%BC%20%D1%84%D0%B8%D0%BD%D0%B0%D0%BB%D0%BE%D0%BC%20_%20%D0%A5%D0%B0%D0%B1%D1%80_files/f1bb25676cfe8c0cd2bc5d55ccb72967.jpg" class="user-info__image-pic user-info__image-pic_small" width="24" height="24">
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">Ryppka</span>
</a>

          
          <time class="comment__date-time comment__date-time_published">11 мая 2019 в 21:42</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="#comment_20140172" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="20140172" data-action="add" title="Добавить в закладки"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#book"></use></svg></a>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <span class="icon_comment-branch js-comment_tree" data-id="20140172" data-parent_id="20135636" title="Показать ветку комментариев"><svg width="8" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#tree"></use></svg></span>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#comment_20135636" class="icon_comment-arrow-up js-comment_parent" data-id="20140172" data-parent_id="20135636" title="Показать предыдущий комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
    </li>

  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="#comment_20140172" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="20140172" data-parent_id="20135636" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="20140172" data-post-target="450512" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="plus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter   js-score" title="Всего голосов 0: ↑0 и ↓0">0</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message ">А разве Rust не умеет RVO/NRVO?!</div>

        <div class="comment__footer">
    <a href="#reply" class="comment__footer-link reply_link" onclick="return comment_show_reply_form(20140172 )">Ответить</a>


</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-16" id="reply_comments_20140172">  <li class="content-list__item content-list__item_comment js-comment " rel="20140314">
    
    <span class="parent_id" data-parent_id="20140172"></span>
    <div class="comment" id="comment_20140314">
      <span class="comment__collapse" title="Свернуть/развернуть ветку комментариев" data-id="20140314"></span>
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head comment__head_topic-author comment__head_my-comment " rel="20140314">
          <a href="https://habr.com/ru/users/epishman/" class="user-info user-info_inline" rel="user-popover" data-user-login="epishman">
    <img src="Swift%20%D0%BF%D1%80%D0%BE%D1%82%D0%B8%D0%B2%20Rust%20%E2%80%94%20%D0%B1%D0%B5%D0%BD%D1%87%D0%BC%D0%B0%D1%80%D0%BA%D0%B8%D0%BD%D0%B3%20%D0%BD%D0%B0%20Linux%20%D1%81%20(%D0%BD%D0%B5)%D0%BF%D0%BE%D0%BD%D1%8F%D1%82%D0%BD%D1%8B%D0%BC%20%D1%84%D0%B8%D0%BD%D0%B0%D0%BB%D0%BE%D0%BC%20_%20%D0%A5%D0%B0%D0%B1%D1%80_files/ec0d88c4853c0d36d44bd0526dcfa8d7.png" class="user-info__image-pic user-info__image-pic_small" width="24" height="24">
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">epishman</span>
</a>

          
          <time class="comment__date-time comment__date-time_published">11 мая 2019 в 22:33</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="#comment_20140314" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="20140314" data-action="add" title="Добавить в закладки"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#book"></use></svg></a>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <span class="icon_comment-branch js-comment_tree" data-id="20140314" data-parent_id="20140172" title="Показать ветку комментариев"><svg width="8" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#tree"></use></svg></span>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#comment_20140172" class="icon_comment-arrow-up js-comment_parent" data-id="20140314" data-parent_id="20140172" title="Показать предыдущий комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
    </li>

  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="#comment_20140314" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="20140314" data-parent_id="20140172" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="20140314" data-post-target="450512" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="plus" onclick="comment_vote(this);" title="За свои комментарии голосовать нельзя" disabled="disabled"><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter   js-score" title="Всего голосов 0: ↑0 и ↓0">0</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="За свои комментарии голосовать нельзя" disabled="disabled"><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message ">Теоретически должен, но статус реализации в текущей версии мне неизвестен, по ощущениям строки скорее да, остальное скорее нет.</div>

        <div class="comment__footer">
    <a href="#reply" class="comment__footer-link reply_link" onclick="return comment_show_reply_form(20140314 )">Ответить</a>


</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-17" id="reply_comments_20140314"></ul>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="content-list__item content-list__item_comment js-comment " rel="20258810">
    
    <span class="parent_id" data-parent_id="20134130"></span>
    <div class="comment" id="comment_20258810">
      <span class="comment__collapse" title="Свернуть/развернуть ветку комментариев" data-id="20258810"></span>
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head   " rel="20258810">
          <a href="https://habr.com/ru/users/technic93/" class="user-info user-info_inline" rel="user-popover" data-user-login="technic93">
    <img src="Swift%20%D0%BF%D1%80%D0%BE%D1%82%D0%B8%D0%B2%20Rust%20%E2%80%94%20%D0%B1%D0%B5%D0%BD%D1%87%D0%BC%D0%B0%D1%80%D0%BA%D0%B8%D0%BD%D0%B3%20%D0%BD%D0%B0%20Linux%20%D1%81%20(%D0%BD%D0%B5)%D0%BF%D0%BE%D0%BD%D1%8F%D1%82%D0%BD%D1%8B%D0%BC%20%D1%84%D0%B8%D0%BD%D0%B0%D0%BB%D0%BE%D0%BC%20_%20%D0%A5%D0%B0%D0%B1%D1%80_files/4e796c6e9f932ba70d1af19b21f2b99a.png" class="user-info__image-pic user-info__image-pic_small" width="24" height="24">
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">technic93</span>
</a>

          
          <time class="comment__date-time comment__date-time_published">7 июня 2019 в 21:30</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="#comment_20258810" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="20258810" data-action="add" title="Добавить в закладки"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#book"></use></svg></a>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <span class="icon_comment-branch js-comment_tree" data-id="20258810" data-parent_id="20134130" title="Показать ветку комментариев"><svg width="8" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#tree"></use></svg></span>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#comment_20134130" class="icon_comment-arrow-up js-comment_parent" data-id="20258810" data-parent_id="20134130" title="Показать предыдущий комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
    </li>

  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="#comment_20258810" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="20258810" data-parent_id="20134130" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="20258810" data-post-target="450512" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="plus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter   js-score" title="Всего голосов 0: ↑0 и ↓0">0</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message "><p>А ещё может быть экранированный бекслэш. Что тогда?<br>
\"</p></div>

        <div class="comment__footer">
    <a href="#reply" class="comment__footer-link reply_link" onclick="return comment_show_reply_form(20258810 )">Ответить</a>


</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-14" id="reply_comments_20258810">  <li class="content-list__item content-list__item_comment js-comment " rel="20259372">
    
    <span class="parent_id" data-parent_id="20258810"></span>
    <div class="comment" id="comment_20259372">
      <span class="comment__collapse" title="Свернуть/развернуть ветку комментариев" data-id="20259372"></span>
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head comment__head_topic-author comment__head_my-comment " rel="20259372">
          <a href="https://habr.com/ru/users/epishman/" class="user-info user-info_inline" rel="user-popover" data-user-login="epishman">
    <img src="Swift%20%D0%BF%D1%80%D0%BE%D1%82%D0%B8%D0%B2%20Rust%20%E2%80%94%20%D0%B1%D0%B5%D0%BD%D1%87%D0%BC%D0%B0%D1%80%D0%BA%D0%B8%D0%BD%D0%B3%20%D0%BD%D0%B0%20Linux%20%D1%81%20(%D0%BD%D0%B5)%D0%BF%D0%BE%D0%BD%D1%8F%D1%82%D0%BD%D1%8B%D0%BC%20%D1%84%D0%B8%D0%BD%D0%B0%D0%BB%D0%BE%D0%BC%20_%20%D0%A5%D0%B0%D0%B1%D1%80_files/ec0d88c4853c0d36d44bd0526dcfa8d7.png" class="user-info__image-pic user-info__image-pic_small" width="24" height="24">
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">epishman</span>
</a>

          
          <time class="comment__date-time comment__date-time_published">8 июня 2019 в 01:28</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="#comment_20259372" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="20259372" data-action="add" title="Добавить в закладки"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#book"></use></svg></a>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <span class="icon_comment-branch js-comment_tree" data-id="20259372" data-parent_id="20258810" title="Показать ветку комментариев"><svg width="8" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#tree"></use></svg></span>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#comment_20258810" class="icon_comment-arrow-up js-comment_parent" data-id="20259372" data-parent_id="20258810" title="Показать предыдущий комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
    </li>

  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="#comment_20259372" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="20259372" data-parent_id="20258810" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="20259372" data-post-target="450512" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="plus" onclick="comment_vote(this);" title="За свои комментарии голосовать нельзя" disabled="disabled"><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter   js-score" title="Всего голосов 0: ↑0 и ↓0">0</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="За свои комментарии голосовать нельзя" disabled="disabled"><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message ">Тогда хана :) Не нашел я нормального потокового парсера на Rust, хотя потом товарищи подсказали, что на serde можно сделать.</div>

        <div class="comment__footer">
    <a href="#reply" class="comment__footer-link reply_link" onclick="return comment_show_reply_form(20259372 )">Ответить</a>


</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-15" id="reply_comments_20259372"></ul>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="content-list__item content-list__item_comment js-comment " rel="20134226">
    
    <span class="parent_id" data-parent_id="20134080"></span>
    <div class="comment" id="comment_20134226">
      <span class="comment__collapse" title="Свернуть/развернуть ветку комментариев" data-id="20134226"></span>
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head   " rel="20134226">
          <a href="https://habr.com/ru/users/tsukanov-as/" class="user-info user-info_inline" rel="user-popover" data-user-login="tsukanov-as">
    <svg class="default-image default-image_mini default-image_green" width="24" height="24"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#slug"></use></svg>
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">tsukanov-as</span>
</a>

          <svg class="icon_comment-edit" title="Комментарий был изменен" width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#pencil"></use></svg>
          <time class="comment__date-time comment__date-time_published">9 мая 2019 в 21:37</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="#comment_20134226" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="20134226" data-action="add" title="Добавить в закладки"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#book"></use></svg></a>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <span class="icon_comment-branch js-comment_tree" data-id="20134226" data-parent_id="20134080" title="Показать ветку комментариев"><svg width="8" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#tree"></use></svg></span>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#comment_20134080" class="icon_comment-arrow-up js-comment_parent" data-id="20134226" data-parent_id="20134080" title="Показать предыдущий комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
    </li>

  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="#comment_20134226" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="20134226" data-parent_id="20134080" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="20134226" data-post-target="450512" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="plus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter   js-score" title="Всего голосов 0: ↑0 и ↓0">0</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message ">Да, кстати, у меня SSD EVO 970 Plus.<br>
Думаю это имеет влияние на скорость )</div>

        <div class="comment__footer">
    <a href="#reply" class="comment__footer-link reply_link" onclick="return comment_show_reply_form(20134226 )">Ответить</a>


</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-12" id="reply_comments_20134226">  <li class="content-list__item content-list__item_comment js-comment " rel="20134254">
    
    <span class="parent_id" data-parent_id="20134226"></span>
    <div class="comment" id="comment_20134254">
      <span class="comment__collapse" title="Свернуть/развернуть ветку комментариев" data-id="20134254"></span>
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head comment__head_topic-author comment__head_my-comment " rel="20134254">
          <a href="https://habr.com/ru/users/epishman/" class="user-info user-info_inline" rel="user-popover" data-user-login="epishman">
    <img src="Swift%20%D0%BF%D1%80%D0%BE%D1%82%D0%B8%D0%B2%20Rust%20%E2%80%94%20%D0%B1%D0%B5%D0%BD%D1%87%D0%BC%D0%B0%D1%80%D0%BA%D0%B8%D0%BD%D0%B3%20%D0%BD%D0%B0%20Linux%20%D1%81%20(%D0%BD%D0%B5)%D0%BF%D0%BE%D0%BD%D1%8F%D1%82%D0%BD%D1%8B%D0%BC%20%D1%84%D0%B8%D0%BD%D0%B0%D0%BB%D0%BE%D0%BC%20_%20%D0%A5%D0%B0%D0%B1%D1%80_files/ec0d88c4853c0d36d44bd0526dcfa8d7.png" class="user-info__image-pic user-info__image-pic_small" width="24" height="24">
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">epishman</span>
</a>

          
          <time class="comment__date-time comment__date-time_published">9 мая 2019 в 21:47</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="#comment_20134254" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="20134254" data-action="add" title="Добавить в закладки"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#book"></use></svg></a>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <span class="icon_comment-branch js-comment_tree" data-id="20134254" data-parent_id="20134226" title="Показать ветку комментариев"><svg width="8" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#tree"></use></svg></span>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#comment_20134226" class="icon_comment-arrow-up js-comment_parent" data-id="20134254" data-parent_id="20134226" title="Показать предыдущий комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
    </li>

  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="#comment_20134254" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="20134254" data-parent_id="20134226" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="20134254" data-post-target="450512" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="plus" onclick="comment_vote(this);" title="За свои комментарии голосовать нельзя" disabled="disabled"><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter   js-score" title="Всего голосов 0: ↑0 и ↓0">0</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="За свои комментарии голосовать нельзя" disabled="disabled"><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message ">Да я уже понял что и машина получше, у меня старейший 2-х ядерный ноут 2 x Intel® Celeron® CPU 1005M @ 1.90GHz. <br>
Прикол в том, что лучшая производительность получилась с пулом из 4-х 
тредов (не считая главного, который файл по байтам разбирает).</div>

        <div class="comment__footer">
    <a href="#reply" class="comment__footer-link reply_link" onclick="return comment_show_reply_form(20134254 )">Ответить</a>


</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-13" id="reply_comments_20134254"></ul>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="content-list__item content-list__item_comment js-comment " rel="20134124">
    
    <span class="parent_id" data-parent_id="20133982"></span>
    <div class="comment" id="comment_20134124">
      <span class="comment__collapse" title="Свернуть/развернуть ветку комментариев" data-id="20134124"></span>
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head comment__head_topic-author comment__head_my-comment " rel="20134124">
          <a href="https://habr.com/ru/users/epishman/" class="user-info user-info_inline" rel="user-popover" data-user-login="epishman">
    <img src="Swift%20%D0%BF%D1%80%D0%BE%D1%82%D0%B8%D0%B2%20Rust%20%E2%80%94%20%D0%B1%D0%B5%D0%BD%D1%87%D0%BC%D0%B0%D1%80%D0%BA%D0%B8%D0%BD%D0%B3%20%D0%BD%D0%B0%20Linux%20%D1%81%20(%D0%BD%D0%B5)%D0%BF%D0%BE%D0%BD%D1%8F%D1%82%D0%BD%D1%8B%D0%BC%20%D1%84%D0%B8%D0%BD%D0%B0%D0%BB%D0%BE%D0%BC%20_%20%D0%A5%D0%B0%D0%B1%D1%80_files/ec0d88c4853c0d36d44bd0526dcfa8d7.png" class="user-info__image-pic user-info__image-pic_small" width="24" height="24">
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">epishman</span>
</a>

          
          <time class="comment__date-time comment__date-time_published">9 мая 2019 в 21:03</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="#comment_20134124" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="20134124" data-action="add" title="Добавить в закладки"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#book"></use></svg></a>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <span class="icon_comment-branch js-comment_tree" data-id="20134124" data-parent_id="20133982" title="Показать ветку комментариев"><svg width="8" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#tree"></use></svg></span>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#comment_20133982" class="icon_comment-arrow-up js-comment_parent" data-id="20134124" data-parent_id="20133982" title="Показать предыдущий комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
    </li>

  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="#comment_20134124" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="20134124" data-parent_id="20133982" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="20134124" data-post-target="450512" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="plus" onclick="comment_vote(this);" title="За свои комментарии голосовать нельзя" disabled="disabled"><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter   js-score" title="Всего голосов 0: ↑0 и ↓0">0</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="За свои комментарии голосовать нельзя" disabled="disabled"><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message ">Так запилите статью на эту тему, 
на хабре без статьи у вас невозможна карма больше 4, не сможете 
голосовать и проч. Если владеете гошкой и луа — сошлитесь на мой код, и 
на своей машине проведите замеры, и табличка сравнения.<br>
Только научитесь память правильно смотреть, я не знаю винды, но надо изучить эту тему, чтобы отдельно куча, отдельно стек.</div>

        <div class="comment__footer">
    <a href="#reply" class="comment__footer-link reply_link" onclick="return comment_show_reply_form(20134124 )">Ответить</a>


</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-11" id="reply_comments_20134124">  <li class="content-list__item content-list__item_comment js-comment " rel="20134154">
    
    <span class="parent_id" data-parent_id="20134124"></span>
    <div class="comment" id="comment_20134154">
      <span class="comment__collapse" title="Свернуть/развернуть ветку комментариев" data-id="20134154"></span>
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head   " rel="20134154">
          <a href="https://habr.com/ru/users/tsukanov-as/" class="user-info user-info_inline" rel="user-popover" data-user-login="tsukanov-as">
    <svg class="default-image default-image_mini default-image_green" width="24" height="24"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#slug"></use></svg>
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">tsukanov-as</span>
</a>

          
          <time class="comment__date-time comment__date-time_published">9 мая 2019 в 21:11</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="#comment_20134154" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="20134154" data-action="add" title="Добавить в закладки"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#book"></use></svg></a>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <span class="icon_comment-branch js-comment_tree" data-id="20134154" data-parent_id="20134124" title="Показать ветку комментариев"><svg width="8" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#tree"></use></svg></span>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#comment_20134124" class="icon_comment-arrow-up js-comment_parent" data-id="20134154" data-parent_id="20134124" title="Показать предыдущий комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
    </li>

  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="#comment_20134154" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="20134154" data-parent_id="20134124" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="20134154" data-post-target="450512" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="plus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter   js-score" title="Всего голосов 0: ↑0 и ↓0">0</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message ">Ой, у меня маловато ума чтоб на такие темы грамотно писать.<br>
Я обычный одноэсник из деревни. Ни на Lua ни на Go не пишу. Играюсь только раз в пол года.</div>

        <div class="comment__footer">
    <a href="#reply" class="comment__footer-link reply_link" onclick="return comment_show_reply_form(20134154 )">Ответить</a>


</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-12" id="reply_comments_20134154">  <li class="content-list__item content-list__item_comment js-comment " rel="20134158">
    
    <span class="parent_id" data-parent_id="20134154"></span>
    <div class="comment" id="comment_20134158">
      <span class="comment__collapse" title="Свернуть/развернуть ветку комментариев" data-id="20134158"></span>
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head comment__head_topic-author comment__head_my-comment " rel="20134158">
          <a href="https://habr.com/ru/users/epishman/" class="user-info user-info_inline" rel="user-popover" data-user-login="epishman">
    <img src="Swift%20%D0%BF%D1%80%D0%BE%D1%82%D0%B8%D0%B2%20Rust%20%E2%80%94%20%D0%B1%D0%B5%D0%BD%D1%87%D0%BC%D0%B0%D1%80%D0%BA%D0%B8%D0%BD%D0%B3%20%D0%BD%D0%B0%20Linux%20%D1%81%20(%D0%BD%D0%B5)%D0%BF%D0%BE%D0%BD%D1%8F%D1%82%D0%BD%D1%8B%D0%BC%20%D1%84%D0%B8%D0%BD%D0%B0%D0%BB%D0%BE%D0%BC%20_%20%D0%A5%D0%B0%D0%B1%D1%80_files/ec0d88c4853c0d36d44bd0526dcfa8d7.png" class="user-info__image-pic user-info__image-pic_small" width="24" height="24">
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">epishman</span>
</a>

          
          <time class="comment__date-time comment__date-time_published">9 мая 2019 в 21:13</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="#comment_20134158" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="20134158" data-action="add" title="Добавить в закладки"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#book"></use></svg></a>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <span class="icon_comment-branch js-comment_tree" data-id="20134158" data-parent_id="20134154" title="Показать ветку комментариев"><svg width="8" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#tree"></use></svg></span>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#comment_20134154" class="icon_comment-arrow-up js-comment_parent" data-id="20134158" data-parent_id="20134154" title="Показать предыдущий комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
    </li>

  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="#comment_20134158" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="20134158" data-parent_id="20134154" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="20134158" data-post-target="450512" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="plus" onclick="comment_vote(this);" title="За свои комментарии голосовать нельзя" disabled="disabled"><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter   js-score" title="Всего голосов 0: ↑0 и ↓0">0</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="За свои комментарии голосовать нельзя" disabled="disabled"><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message ">На гошке вакансий достаточно, 
даже в Краснодаре видел. И почти везде можно удаленно. Я с 
бухгалтерского софта уже соскочил, надеюсь не вернусь обратно к кактусам
 и фактурам.</div>

        <div class="comment__footer">
    <a href="#reply" class="comment__footer-link reply_link" onclick="return comment_show_reply_form(20134158 )">Ответить</a>


</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-13" id="reply_comments_20134158">  <li class="content-list__item content-list__item_comment js-comment " rel="20134186">
    
    <span class="parent_id" data-parent_id="20134158"></span>
    <div class="comment" id="comment_20134186">
      <span class="comment__collapse" title="Свернуть/развернуть ветку комментариев" data-id="20134186"></span>
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head   " rel="20134186">
          <a href="https://habr.com/ru/users/tsukanov-as/" class="user-info user-info_inline" rel="user-popover" data-user-login="tsukanov-as">
    <svg class="default-image default-image_mini default-image_green" width="24" height="24"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#slug"></use></svg>
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">tsukanov-as</span>
</a>

          
          <time class="comment__date-time comment__date-time_published">9 мая 2019 в 21:23</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="#comment_20134186" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="20134186" data-action="add" title="Добавить в закладки"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#book"></use></svg></a>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <span class="icon_comment-branch js-comment_tree" data-id="20134186" data-parent_id="20134158" title="Показать ветку комментариев"><svg width="8" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#tree"></use></svg></span>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#comment_20134158" class="icon_comment-arrow-up js-comment_parent" data-id="20134186" data-parent_id="20134158" title="Показать предыдущий комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
    </li>

  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="#comment_20134186" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="20134186" data-parent_id="20134158" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="20134186" data-post-target="450512" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="plus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter   js-score" title="Всего голосов 0: ↑0 и ↓0">0</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message ">Хочу соскочить на Go, но чего-то жду пока )<br>
Смелости наверно не хватает.</div>

        <div class="comment__footer">
    <a href="#reply" class="comment__footer-link reply_link" onclick="return comment_show_reply_form(20134186 )">Ответить</a>


</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-14" id="reply_comments_20134186">  <li class="content-list__item content-list__item_comment js-comment " rel="20134204">
    
    <span class="parent_id" data-parent_id="20134186"></span>
    <div class="comment" id="comment_20134204">
      <span class="comment__collapse" title="Свернуть/развернуть ветку комментариев" data-id="20134204"></span>
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head comment__head_topic-author comment__head_my-comment " rel="20134204">
          <a href="https://habr.com/ru/users/epishman/" class="user-info user-info_inline" rel="user-popover" data-user-login="epishman">
    <img src="Swift%20%D0%BF%D1%80%D0%BE%D1%82%D0%B8%D0%B2%20Rust%20%E2%80%94%20%D0%B1%D0%B5%D0%BD%D1%87%D0%BC%D0%B0%D1%80%D0%BA%D0%B8%D0%BD%D0%B3%20%D0%BD%D0%B0%20Linux%20%D1%81%20(%D0%BD%D0%B5)%D0%BF%D0%BE%D0%BD%D1%8F%D1%82%D0%BD%D1%8B%D0%BC%20%D1%84%D0%B8%D0%BD%D0%B0%D0%BB%D0%BE%D0%BC%20_%20%D0%A5%D0%B0%D0%B1%D1%80_files/ec0d88c4853c0d36d44bd0526dcfa8d7.png" class="user-info__image-pic user-info__image-pic_small" width="24" height="24">
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">epishman</span>
</a>

          
          <time class="comment__date-time comment__date-time_published">9 мая 2019 в 21:27</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="#comment_20134204" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="20134204" data-action="add" title="Добавить в закладки"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#book"></use></svg></a>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <span class="icon_comment-branch js-comment_tree" data-id="20134204" data-parent_id="20134186" title="Показать ветку комментариев"><svg width="8" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#tree"></use></svg></span>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#comment_20134186" class="icon_comment-arrow-up js-comment_parent" data-id="20134204" data-parent_id="20134186" title="Показать предыдущий комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
    </li>

  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="#comment_20134204" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="20134204" data-parent_id="20134186" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="20134204" data-post-target="450512" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="plus" onclick="comment_vote(this);" title="За свои комментарии голосовать нельзя" disabled="disabled"><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter   js-score" title="Всего голосов 0: ↑0 и ↓0">0</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="За свои комментарии голосовать нельзя" disabled="disabled"><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message ">Мне честно непонятен пока круг 
работодателей для гошки, но точно понятно что наступают времена, когда 
лучше иметь потенциальную возможность работать на заграницу, ибо внутри 
страны может остаться только пищевка и рынки.</div>

        <div class="comment__footer">
    <a href="#reply" class="comment__footer-link reply_link" onclick="return comment_show_reply_form(20134204 )">Ответить</a>


</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-15" id="reply_comments_20134204"></ul>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="content-list__item content-list__item_comment js-comment " rel="20143380">
    
    <span class="parent_id" data-parent_id="20132420"></span>
    <div class="comment" id="comment_20143380">
      <span class="comment__collapse" title="Свернуть/развернуть ветку комментариев" data-id="20143380"></span>
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head   " rel="20143380">
          <a href="https://habr.com/ru/users/PsyHaSTe/" class="user-info user-info_inline" rel="user-popover" data-user-login="PsyHaSTe">
    <img src="Swift%20%D0%BF%D1%80%D0%BE%D1%82%D0%B8%D0%B2%20Rust%20%E2%80%94%20%D0%B1%D0%B5%D0%BD%D1%87%D0%BC%D0%B0%D1%80%D0%BA%D0%B8%D0%BD%D0%B3%20%D0%BD%D0%B0%20Linux%20%D1%81%20(%D0%BD%D0%B5)%D0%BF%D0%BE%D0%BD%D1%8F%D1%82%D0%BD%D1%8B%D0%BC%20%D1%84%D0%B8%D0%BD%D0%B0%D0%BB%D0%BE%D0%BC%20_%20%D0%A5%D0%B0%D0%B1%D1%80_files/7631ac5e5a7e237a937f5f2a74ae4c9e.jpg" class="user-info__image-pic user-info__image-pic_small" width="24" height="24">
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">PsyHaSTe</span>
</a>

          
          <time class="comment__date-time comment__date-time_published">12 мая 2019 в 22:39</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="#comment_20143380" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="20143380" data-action="add" title="Добавить в закладки"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#book"></use></svg></a>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <span class="icon_comment-branch js-comment_tree" data-id="20143380" data-parent_id="20132420" title="Показать ветку комментариев"><svg width="8" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#tree"></use></svg></span>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#comment_20132420" class="icon_comment-arrow-up js-comment_parent" data-id="20143380" data-parent_id="20132420" title="Показать предыдущий комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
    </li>

  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="#comment_20143380" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="20143380" data-parent_id="20132420" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="20143380" data-post-target="450512" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="plus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter   js-score" title="Всего голосов 0: ↑0 и ↓0">0</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message "><p>Можно попробовать managed-языки типа того же C#. Могу как-нибудь запилить вариант, если интересно.</p></div>

        <div class="comment__footer">
    <a href="#reply" class="comment__footer-link reply_link" onclick="return comment_show_reply_form(20143380 )">Ответить</a>


</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-10" id="reply_comments_20143380">  <li class="content-list__item content-list__item_comment js-comment " rel="20143690">
    
    <span class="parent_id" data-parent_id="20143380"></span>
    <div class="comment" id="comment_20143690">
      <span class="comment__collapse" title="Свернуть/развернуть ветку комментариев" data-id="20143690"></span>
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head comment__head_topic-author comment__head_my-comment " rel="20143690">
          <a href="https://habr.com/ru/users/epishman/" class="user-info user-info_inline" rel="user-popover" data-user-login="epishman">
    <img src="Swift%20%D0%BF%D1%80%D0%BE%D1%82%D0%B8%D0%B2%20Rust%20%E2%80%94%20%D0%B1%D0%B5%D0%BD%D1%87%D0%BC%D0%B0%D1%80%D0%BA%D0%B8%D0%BD%D0%B3%20%D0%BD%D0%B0%20Linux%20%D1%81%20(%D0%BD%D0%B5)%D0%BF%D0%BE%D0%BD%D1%8F%D1%82%D0%BD%D1%8B%D0%BC%20%D1%84%D0%B8%D0%BD%D0%B0%D0%BB%D0%BE%D0%BC%20_%20%D0%A5%D0%B0%D0%B1%D1%80_files/ec0d88c4853c0d36d44bd0526dcfa8d7.png" class="user-info__image-pic user-info__image-pic_small" width="24" height="24">
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">epishman</span>
</a>

          
          <time class="comment__date-time comment__date-time_published">13 мая 2019 в 00:40</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="#comment_20143690" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="20143690" data-action="add" title="Добавить в закладки"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#book"></use></svg></a>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <span class="icon_comment-branch js-comment_tree" data-id="20143690" data-parent_id="20143380" title="Показать ветку комментариев"><svg width="8" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#tree"></use></svg></span>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#comment_20143380" class="icon_comment-arrow-up js-comment_parent" data-id="20143690" data-parent_id="20143380" title="Показать предыдущий комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
    </li>

  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="#comment_20143690" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="20143690" data-parent_id="20143380" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="20143690" data-post-target="450512" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="plus" onclick="comment_vote(this);" title="За свои комментарии голосовать нельзя" disabled="disabled"><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter   js-score" title="Всего голосов 0: ↑0 и ↓0">0</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="За свои комментарии голосовать нельзя" disabled="disabled"><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message ">C# это вообще безумно интересно, не верю что он захватит мир, но по числу вакансий вполне себе живет. Думаю будет как lua.</div>

        <div class="comment__footer">
    <a href="#reply" class="comment__footer-link reply_link" onclick="return comment_show_reply_form(20143690 )">Ответить</a>


</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-11" id="reply_comments_20143690">  <li class="content-list__item content-list__item_comment js-comment " rel="20145158">
    
    <span class="parent_id" data-parent_id="20143690"></span>
    <div class="comment" id="comment_20145158">
      <span class="comment__collapse" title="Свернуть/развернуть ветку комментариев" data-id="20145158"></span>
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head   " rel="20145158">
          <a href="https://habr.com/ru/users/PsyHaSTe/" class="user-info user-info_inline" rel="user-popover" data-user-login="PsyHaSTe">
    <img src="Swift%20%D0%BF%D1%80%D0%BE%D1%82%D0%B8%D0%B2%20Rust%20%E2%80%94%20%D0%B1%D0%B5%D0%BD%D1%87%D0%BC%D0%B0%D1%80%D0%BA%D0%B8%D0%BD%D0%B3%20%D0%BD%D0%B0%20Linux%20%D1%81%20(%D0%BD%D0%B5)%D0%BF%D0%BE%D0%BD%D1%8F%D1%82%D0%BD%D1%8B%D0%BC%20%D1%84%D0%B8%D0%BD%D0%B0%D0%BB%D0%BE%D0%BC%20_%20%D0%A5%D0%B0%D0%B1%D1%80_files/7631ac5e5a7e237a937f5f2a74ae4c9e.jpg" class="user-info__image-pic user-info__image-pic_small" width="24" height="24">
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">PsyHaSTe</span>
</a>

          
          <time class="comment__date-time comment__date-time_published">13 мая 2019 в 11:57</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="#comment_20145158" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="20145158" data-action="add" title="Добавить в закладки"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#book"></use></svg></a>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <span class="icon_comment-branch js-comment_tree" data-id="20145158" data-parent_id="20143690" title="Показать ветку комментариев"><svg width="8" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#tree"></use></svg></span>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#comment_20143690" class="icon_comment-arrow-up js-comment_parent" data-id="20145158" data-parent_id="20143690" title="Показать предыдущий комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
    </li>

  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="#comment_20145158" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="20145158" data-parent_id="20143690" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="20145158" data-post-target="450512" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="plus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter   js-score" title="Всего голосов 0: ↑0 и ↓0">0</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message "><p>Опишите нормальные тест кейсы, которые должны проходить.</p></div>

        <div class="comment__footer">
    <a href="#reply" class="comment__footer-link reply_link" onclick="return comment_show_reply_form(20145158 )">Ответить</a>


</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-12" id="reply_comments_20145158"></ul>
  </li>
  <li class="content-list__item content-list__item_comment js-comment " rel="20146126">
    
    <span class="parent_id" data-parent_id="20143690"></span>
    <div class="comment" id="comment_20146126">
      <span class="comment__collapse" title="Свернуть/развернуть ветку комментариев" data-id="20146126"></span>
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head   " rel="20146126">
          <a href="https://habr.com/ru/users/PsyHaSTe/" class="user-info user-info_inline" rel="user-popover" data-user-login="PsyHaSTe">
    <img src="Swift%20%D0%BF%D1%80%D0%BE%D1%82%D0%B8%D0%B2%20Rust%20%E2%80%94%20%D0%B1%D0%B5%D0%BD%D1%87%D0%BC%D0%B0%D1%80%D0%BA%D0%B8%D0%BD%D0%B3%20%D0%BD%D0%B0%20Linux%20%D1%81%20(%D0%BD%D0%B5)%D0%BF%D0%BE%D0%BD%D1%8F%D1%82%D0%BD%D1%8B%D0%BC%20%D1%84%D0%B8%D0%BD%D0%B0%D0%BB%D0%BE%D0%BC%20_%20%D0%A5%D0%B0%D0%B1%D1%80_files/7631ac5e5a7e237a937f5f2a74ae4c9e.jpg" class="user-info__image-pic user-info__image-pic_small" width="24" height="24">
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">PsyHaSTe</span>
</a>

          
          <time class="comment__date-time comment__date-time_published">13 мая 2019 в 14:30</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="#comment_20146126" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="20146126" data-action="add" title="Добавить в закладки"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#book"></use></svg></a>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <span class="icon_comment-branch js-comment_tree" data-id="20146126" data-parent_id="20143690" title="Показать ветку комментариев"><svg width="8" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#tree"></use></svg></span>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#comment_20143690" class="icon_comment-arrow-up js-comment_parent" data-id="20146126" data-parent_id="20143690" title="Показать предыдущий комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
    </li>

  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="#comment_20146126" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="20146126" data-parent_id="20143690" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="20146126" data-post-target="450512" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="plus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter   js-score" title="Всего голосов 0: ↑0 и ↓0">0</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message "><p>Короче, вроде как работает, на
 примере который вы скинули отрабатывает. Сделал максимально чисто, без 
хаков и ручного парсинга. Скорость должна быть сравнительно печальной, 
можно ускорить если вместо динамического JObject использовать свою 
десериализацию.</p><br>
<p><a href="https://github.com/Pzixel/HabrIndalidJsonTest">https://github.com/Pzixel/HabrIndalidJsonTest</a></p></div>

        <div class="comment__footer">
    <a href="#reply" class="comment__footer-link reply_link" onclick="return comment_show_reply_form(20146126 )">Ответить</a>


</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-12" id="reply_comments_20146126"></ul>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="content-list__item content-list__item_comment js-comment " rel="20257288">
    
    <span class="parent_id" data-parent_id="20128756"></span>
    <div class="comment" id="comment_20257288">
      <span class="comment__collapse" title="Свернуть/развернуть ветку комментариев" data-id="20257288"></span>
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head   " rel="20257288">
          <a href="https://habr.com/ru/users/cy-ernado/" class="user-info user-info_inline" rel="user-popover" data-user-login="cy-ernado">
    <img src="Swift%20%D0%BF%D1%80%D0%BE%D1%82%D0%B8%D0%B2%20Rust%20%E2%80%94%20%D0%B1%D0%B5%D0%BD%D1%87%D0%BC%D0%B0%D1%80%D0%BA%D0%B8%D0%BD%D0%B3%20%D0%BD%D0%B0%20Linux%20%D1%81%20(%D0%BD%D0%B5)%D0%BF%D0%BE%D0%BD%D1%8F%D1%82%D0%BD%D1%8B%D0%BC%20%D1%84%D0%B8%D0%BD%D0%B0%D0%BB%D0%BE%D0%BC%20_%20%D0%A5%D0%B0%D0%B1%D1%80_files/50cfd988ca52ca570df8264bddeac587.jpg" class="user-info__image-pic user-info__image-pic_small" width="24" height="24">
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">cy-ernado</span>
</a>

          
          <time class="comment__date-time comment__date-time_published">7 июня 2019 в 15:52</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="#comment_20257288" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="20257288" data-action="add" title="Добавить в закладки"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#book"></use></svg></a>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <span class="icon_comment-branch js-comment_tree" data-id="20257288" data-parent_id="20128756" title="Показать ветку комментариев"><svg width="8" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#tree"></use></svg></span>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#comment_20128756" class="icon_comment-arrow-up js-comment_parent" data-id="20257288" data-parent_id="20128756" title="Показать предыдущий комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
    </li>

  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="#comment_20257288" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="20257288" data-parent_id="20128756" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="20257288" data-post-target="450512" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small voting-wjt__button_plus" data-action="plus" onclick="comment_vote(this);" title="Вы проголосовали положительно " disabled="disabled"><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter voting-wjt__counter_positive  js-score" title="Всего голосов +1: ↑1 и ↓0">+1</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="Вы проголосовали положительно , отменить голос нельзя" disabled="disabled"><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message "><p>Наткнулся на статью, удалось написать на go без рефлексии и относительно типобезопасно (156 строк), получилось 559ms.<br>
<a href="https://gist.github.com/ernado/9d6bb51ab91887cc02a9540df4fb535d">https://gist.github.com/ernado/9d6bb51ab91887cc02a9540df4fb535d</a></p><br>
<pre><code class="plaintext hljs">total debtors: 2
total time: 559.910525ms
Первая коллекторская, Рога и копыта, Шестерочка:
        123, 2128506, 234, 456, 788, 789
        910000000
Казачий спас, Святой престол:
        234567, 345678, 666
        433200000</code></pre><br>
<p>Для сравнения: предыдущая версия на Go показала 2.40s, ваша версия на Rust: 1.51s.<br>
Код можно упростить и структурировать, но основная идея — если парсить потоково и сразу агрегировать, то получается быстро.</p></div>

        <div class="comment__footer">
    <a href="#reply" class="comment__footer-link reply_link" onclick="return comment_show_reply_form(20257288 )">Ответить</a>


</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-4" id="reply_comments_20257288">  <li class="content-list__item content-list__item_comment js-comment " rel="20257872">
    
    <span class="parent_id" data-parent_id="20257288"></span>
    <div class="comment" id="comment_20257872">
      <span class="comment__collapse" title="Свернуть/развернуть ветку комментариев" data-id="20257872"></span>
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head comment__head_topic-author comment__head_my-comment " rel="20257872">
          <a href="https://habr.com/ru/users/epishman/" class="user-info user-info_inline" rel="user-popover" data-user-login="epishman">
    <img src="Swift%20%D0%BF%D1%80%D0%BE%D1%82%D0%B8%D0%B2%20Rust%20%E2%80%94%20%D0%B1%D0%B5%D0%BD%D1%87%D0%BC%D0%B0%D1%80%D0%BA%D0%B8%D0%BD%D0%B3%20%D0%BD%D0%B0%20Linux%20%D1%81%20(%D0%BD%D0%B5)%D0%BF%D0%BE%D0%BD%D1%8F%D1%82%D0%BD%D1%8B%D0%BC%20%D1%84%D0%B8%D0%BD%D0%B0%D0%BB%D0%BE%D0%BC%20_%20%D0%A5%D0%B0%D0%B1%D1%80_files/ec0d88c4853c0d36d44bd0526dcfa8d7.png" class="user-info__image-pic user-info__image-pic_small" width="24" height="24">
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">epishman</span>
</a>

          
          <time class="comment__date-time comment__date-time_published">7 июня 2019 в 17:31</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="#comment_20257872" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="20257872" data-action="add" title="Добавить в закладки"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#book"></use></svg></a>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <span class="icon_comment-branch js-comment_tree" data-id="20257872" data-parent_id="20257288" title="Показать ветку комментариев"><svg width="8" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#tree"></use></svg></span>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#comment_20257288" class="icon_comment-arrow-up js-comment_parent" data-id="20257872" data-parent_id="20257288" title="Показать предыдущий комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
    </li>

  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="#comment_20257872" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="20257872" data-parent_id="20257288" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="20257872" data-post-target="450512" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="plus" onclick="comment_vote(this);" title="За свои комментарии голосовать нельзя" disabled="disabled"><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter voting-wjt__counter_positive  js-score" title="Всего голосов +1: ↑1 и ↓0">+1</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="За свои комментарии голосовать нельзя" disabled="disabled"><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message ">Класс, я тоже сторонник делать 
все в одном цикле, и по возможности без библиотек — аллокаций нет, 
лишних вызовов нет, расход памяти ноль. И распараллелить это вполне 
реально, принимая входящий поток данных, и разбрасывая объекты по разным
 нитям. Даже в SQL при обработке миллиардов записей переходил на цикл, 
ибо запросы давали непредсказуемое время, даже статью об этом написал, 
но никого особо так кодить не вдохновило :)</div>

        <div class="comment__footer">
    <a href="#reply" class="comment__footer-link reply_link" onclick="return comment_show_reply_form(20257872 )">Ответить</a>


</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-5" id="reply_comments_20257872">  <li class="content-list__item content-list__item_comment js-comment " rel="20258512">
    
    <span class="parent_id" data-parent_id="20257872"></span>
    <div class="comment" id="comment_20258512">
      <span class="comment__collapse" title="Свернуть/развернуть ветку комментариев" data-id="20258512"></span>
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head   " rel="20258512">
          <a href="https://habr.com/ru/users/cy-ernado/" class="user-info user-info_inline" rel="user-popover" data-user-login="cy-ernado">
    <img src="Swift%20%D0%BF%D1%80%D0%BE%D1%82%D0%B8%D0%B2%20Rust%20%E2%80%94%20%D0%B1%D0%B5%D0%BD%D1%87%D0%BC%D0%B0%D1%80%D0%BA%D0%B8%D0%BD%D0%B3%20%D0%BD%D0%B0%20Linux%20%D1%81%20(%D0%BD%D0%B5)%D0%BF%D0%BE%D0%BD%D1%8F%D1%82%D0%BD%D1%8B%D0%BC%20%D1%84%D0%B8%D0%BD%D0%B0%D0%BB%D0%BE%D0%BC%20_%20%D0%A5%D0%B0%D0%B1%D1%80_files/50cfd988ca52ca570df8264bddeac587.jpg" class="user-info__image-pic user-info__image-pic_small" width="24" height="24">
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">cy-ernado</span>
</a>

          
          <time class="comment__date-time comment__date-time_published">7 июня 2019 в 19:49</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="#comment_20258512" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="20258512" data-action="add" title="Добавить в закладки"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#book"></use></svg></a>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <span class="icon_comment-branch js-comment_tree" data-id="20258512" data-parent_id="20257872" title="Показать ветку комментариев"><svg width="8" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#tree"></use></svg></span>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#comment_20257872" class="icon_comment-arrow-up js-comment_parent" data-id="20258512" data-parent_id="20257872" title="Показать предыдущий комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
    </li>

  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="#comment_20258512" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="20258512" data-parent_id="20257872" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="20258512" data-post-target="450512" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small voting-wjt__button_plus" data-action="plus" onclick="comment_vote(this);" title="Вы проголосовали положительно " disabled="disabled"><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter voting-wjt__counter_positive  js-score" title="Всего голосов +1: ↑1 и ↓0">+1</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="Вы проголосовали положительно , отменить голос нельзя" disabled="disabled"><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message "><p>Я потом попробовал наивно 
распараллелить — получилось медленнее (~770ms), оверхед на рантайм 
высокий (в основном это блокировки и шедулинг горутин), ну и сложность 
решения выше даже при наивном подходе. </p><br>
<p>Этот оверхед можно смягчать, вводя нетривиальную модель воркеров <a href="https://github.com/valyala/fasthttp/blob/9494955f8e5a64a6abd126049e11f916d3121ac9/workerpool.go#L16">как в fasthttp</a>, но это уже сильно сложнее и в ~200 строчек кода не влезает.</p></div>

        <div class="comment__footer">
    <a href="#reply" class="comment__footer-link reply_link" onclick="return comment_show_reply_form(20258512 )">Ответить</a>


</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-6" id="reply_comments_20258512">  <li class="content-list__item content-list__item_comment js-comment " rel="20259354">
    
    <span class="parent_id" data-parent_id="20258512"></span>
    <div class="comment" id="comment_20259354">
      <span class="comment__collapse" title="Свернуть/развернуть ветку комментариев" data-id="20259354"></span>
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head comment__head_topic-author comment__head_my-comment " rel="20259354">
          <a href="https://habr.com/ru/users/epishman/" class="user-info user-info_inline" rel="user-popover" data-user-login="epishman">
    <img src="Swift%20%D0%BF%D1%80%D0%BE%D1%82%D0%B8%D0%B2%20Rust%20%E2%80%94%20%D0%B1%D0%B5%D0%BD%D1%87%D0%BC%D0%B0%D1%80%D0%BA%D0%B8%D0%BD%D0%B3%20%D0%BD%D0%B0%20Linux%20%D1%81%20(%D0%BD%D0%B5)%D0%BF%D0%BE%D0%BD%D1%8F%D1%82%D0%BD%D1%8B%D0%BC%20%D1%84%D0%B8%D0%BD%D0%B0%D0%BB%D0%BE%D0%BC%20_%20%D0%A5%D0%B0%D0%B1%D1%80_files/ec0d88c4853c0d36d44bd0526dcfa8d7.png" class="user-info__image-pic user-info__image-pic_small" width="24" height="24">
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">epishman</span>
</a>

          <svg class="icon_comment-edit" title="Комментарий был изменен" width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#pencil"></use></svg>
          <time class="comment__date-time comment__date-time_published">8 июня 2019 в 01:20</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="#comment_20259354" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="20259354" data-action="add" title="Добавить в закладки"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#book"></use></svg></a>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <span class="icon_comment-branch js-comment_tree" data-id="20259354" data-parent_id="20258512" title="Показать ветку комментариев"><svg width="8" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#tree"></use></svg></span>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#comment_20258512" class="icon_comment-arrow-up js-comment_parent" data-id="20259354" data-parent_id="20258512" title="Показать предыдущий комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
    </li>

  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="#comment_20259354" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="20259354" data-parent_id="20258512" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="20259354" data-post-target="450512" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="plus" onclick="comment_vote(this);" title="За свои комментарии голосовать нельзя" disabled="disabled"><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter   js-score" title="Всего голосов 0: ↑0 и ↓0">0</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="За свои комментарии голосовать нельзя" disabled="disabled"><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message ">Я распараллеливал на расте вполне
 успешно, выигрыш как ожидалось в разы, только накосячил немного при 
слиянии результата. Синхронные каналы (фиксированной емкости) 
действительно подтормаживают, но это и понятно — там в основе мьютекс. 
Асинхронные каналы они lock-free, но в продакшн такое нельзя — память 
утекает бесконтрольно.<br>
<a href="https://github.com/epishman/habr_samples/blob/master/jsonparse/main.rs">github.com/epishman/habr_samples/blob/master/jsonparse/main.rs</a><br>
PS<br>
Важно — при использовании мьютекса важен небольшой sleep, иначе можно другой поток до смерти задрочить блокировками.</div>

        <div class="comment__footer">
    <a href="#reply" class="comment__footer-link reply_link" onclick="return comment_show_reply_form(20259354 )">Ответить</a>


</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-7" id="reply_comments_20259354">  <li class="content-list__item content-list__item_comment js-comment " rel="20259450">
    
    <span class="parent_id" data-parent_id="20259354"></span>
    <div class="comment" id="comment_20259450">
      <span class="comment__collapse" title="Свернуть/развернуть ветку комментариев" data-id="20259450"></span>
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head   " rel="20259450">
          <a href="https://habr.com/ru/users/twinklede/" class="user-info user-info_inline" rel="user-popover" data-user-login="twinklede">
    <svg class="default-image default-image_mini default-image_pink" width="24" height="24"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#slug"></use></svg>
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">twinklede</span>
</a>

          
          <time class="comment__date-time comment__date-time_published">8 июня 2019 в 02:26</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="#comment_20259450" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="20259450" data-action="add" title="Добавить в закладки"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#book"></use></svg></a>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <span class="icon_comment-branch js-comment_tree" data-id="20259450" data-parent_id="20259354" title="Показать ветку комментариев"><svg width="8" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#tree"></use></svg></span>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#comment_20259354" class="icon_comment-arrow-up js-comment_parent" data-id="20259450" data-parent_id="20259354" title="Показать предыдущий комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
    </li>

  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="#comment_20259450" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="20259450" data-parent_id="20259354" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="20259450" data-post-target="450512" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="plus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter   js-score" title="Всего голосов 0: ↑0 и ↓0">0</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message "><blockquote>Я распараллеливал на расте вполне успешно, выигрыш как ожидалось в разы, только накосячил немного при слиянии результата.</blockquote><br>
Распараллеливание на расте было крайне неуспешным в связи с неадекватным оверхедом на само распараллеливание.<br></div>

        <div class="comment__footer">
    <a href="#reply" class="comment__footer-link reply_link" onclick="return comment_show_reply_form(20259450 )">Ответить</a>


</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-8" id="reply_comments_20259450">  <li class="content-list__item content-list__item_comment js-comment " rel="20259470">
    
    <span class="parent_id" data-parent_id="20259450"></span>
    <div class="comment" id="comment_20259470">
      <span class="comment__collapse" title="Свернуть/развернуть ветку комментариев" data-id="20259470"></span>
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head comment__head_topic-author comment__head_my-comment " rel="20259470">
          <a href="https://habr.com/ru/users/epishman/" class="user-info user-info_inline" rel="user-popover" data-user-login="epishman">
    <img src="Swift%20%D0%BF%D1%80%D0%BE%D1%82%D0%B8%D0%B2%20Rust%20%E2%80%94%20%D0%B1%D0%B5%D0%BD%D1%87%D0%BC%D0%B0%D1%80%D0%BA%D0%B8%D0%BD%D0%B3%20%D0%BD%D0%B0%20Linux%20%D1%81%20(%D0%BD%D0%B5)%D0%BF%D0%BE%D0%BD%D1%8F%D1%82%D0%BD%D1%8B%D0%BC%20%D1%84%D0%B8%D0%BD%D0%B0%D0%BB%D0%BE%D0%BC%20_%20%D0%A5%D0%B0%D0%B1%D1%80_files/ec0d88c4853c0d36d44bd0526dcfa8d7.png" class="user-info__image-pic user-info__image-pic_small" width="24" height="24">
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">epishman</span>
</a>

          
          <time class="comment__date-time comment__date-time_published">8 июня 2019 в 02:57</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="#comment_20259470" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="20259470" data-action="add" title="Добавить в закладки"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#book"></use></svg></a>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <span class="icon_comment-branch js-comment_tree" data-id="20259470" data-parent_id="20259450" title="Показать ветку комментариев"><svg width="8" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#tree"></use></svg></span>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#comment_20259450" class="icon_comment-arrow-up js-comment_parent" data-id="20259470" data-parent_id="20259450" title="Показать предыдущий комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
    </li>

  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="#comment_20259470" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="20259470" data-parent_id="20259450" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="20259470" data-post-target="450512" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="plus" onclick="comment_vote(this);" title="За свои комментарии голосовать нельзя" disabled="disabled"><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter   js-score" title="Всего голосов 0: ↑0 и ↓0">0</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="За свои комментарии голосовать нельзя" disabled="disabled"><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message ">В чем заключался оверхед?</div>

        <div class="comment__footer">
    <a href="#reply" class="comment__footer-link reply_link" onclick="return comment_show_reply_form(20259470 )">Ответить</a>


</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-9" id="reply_comments_20259470"></ul>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="content-list__item content-list__item_comment js-comment " rel="20259466">
    
    <span class="parent_id" data-parent_id="20258512"></span>
    <div class="comment" id="comment_20259466">
      <span class="comment__collapse" title="Свернуть/развернуть ветку комментариев" data-id="20259466"></span>
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head   " rel="20259466">
          <a href="https://habr.com/ru/users/twinklede/" class="user-info user-info_inline" rel="user-popover" data-user-login="twinklede">
    <svg class="default-image default-image_mini default-image_pink" width="24" height="24"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#slug"></use></svg>
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">twinklede</span>
</a>

          
          <time class="comment__date-time comment__date-time_published">8 июня 2019 в 02:54</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="#comment_20259466" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="20259466" data-action="add" title="Добавить в закладки"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#book"></use></svg></a>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <span class="icon_comment-branch js-comment_tree" data-id="20259466" data-parent_id="20258512" title="Показать ветку комментариев"><svg width="8" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#tree"></use></svg></span>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#comment_20258512" class="icon_comment-arrow-up js-comment_parent" data-id="20259466" data-parent_id="20258512" title="Показать предыдущий комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
    </li>

  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="#comment_20259466" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="20259466" data-parent_id="20258512" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="20259466" data-post-target="450512" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="plus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter   js-score" title="Всего голосов 0: ↑0 и ↓0">0</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message "><blockquote>Я потом попробовал 
наивно распараллелить — получилось медленнее (~770ms), оверхед на 
рантайм высокий (в основном это блокировки и шедулинг горутин), ну и 
сложность решения выше даже при наивном подходе.</blockquote><br>
Сложно как-то у вас всё. <br>
<br>
<div class="spoiler"><b class="spoiler_title">Я на базе С++-версии написал такой бенчмарк</b><div class="spoiler_text"><pre><code class="cpp hljs"><span class="hljs-comment"><span class="hljs-comment">//https://github.com/jarro2783/cxxopts.git</span></span>
<span class="hljs-comment"><span class="hljs-comment">//https://github.com/cameron314/concurrentqueue.git</span></span>
<span class="hljs-meta"><span class="hljs-meta">#</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">include</span></span></span><span class="hljs-meta"> </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">&lt;filesystem&gt;</span></span></span></span>
<span class="hljs-meta"><span class="hljs-meta">#</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">include</span></span></span><span class="hljs-meta"> </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">&lt;sys/mman.h&gt;</span></span></span></span>
<span class="hljs-meta"><span class="hljs-meta">#</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">include</span></span></span><span class="hljs-meta"> </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">&lt;fcntl.h&gt;</span></span></span></span>
<span class="hljs-meta"><span class="hljs-meta">#</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">include</span></span></span><span class="hljs-meta"> </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">&lt;string&gt;</span></span></span></span>
<span class="hljs-meta"><span class="hljs-meta">#</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">include</span></span></span><span class="hljs-meta"> </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">&lt;vector&gt;</span></span></span></span>
<span class="hljs-meta"><span class="hljs-meta">#</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">include</span></span></span><span class="hljs-meta"> </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">&lt;boost/algorithm/string/join.hpp&gt;</span></span></span></span>
<span class="hljs-meta"><span class="hljs-meta">#</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">include</span></span></span><span class="hljs-meta"> </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">&lt;algorithm&gt;</span></span></span></span>
<span class="hljs-meta"><span class="hljs-meta">#</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">include</span></span></span><span class="hljs-meta"> </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">&lt;cxxopts.hpp&gt;</span></span></span></span>
<span class="hljs-meta"><span class="hljs-meta">#</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">include</span></span></span><span class="hljs-meta"> </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">&lt;concurrentqueue/concurrentqueue.h&gt;</span></span></span></span>
<span class="hljs-meta"><span class="hljs-meta">#</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">include</span></span></span><span class="hljs-meta"> </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">&lt;future&gt;</span></span></span></span>


moodycamel::ConcurrentQueue&lt;<span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::string_view&gt; q;

<span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">struct</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">config</span></span></span><span class="hljs-class"> {</span></span>
  <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-keyword"><span class="hljs-keyword">inline</span></span> <span class="hljs-keyword"><span class="hljs-keyword">size_t</span></span> bulk = <span class="hljs-number"><span class="hljs-number">128</span></span>;
  <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-keyword"><span class="hljs-keyword">inline</span></span> <span class="hljs-keyword"><span class="hljs-keyword">size_t</span></span> concurrency = <span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::min(<span class="hljs-number"><span class="hljs-number">4u</span></span>, <span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::thread::hardware_concurrency());
};

<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">auto</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">work</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{
  <span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::<span class="hljs-built_in"><span class="hljs-built_in">vector</span></span>&lt;<span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::string_view&gt; pool(config::bulk);
  <span class="hljs-keyword"><span class="hljs-keyword">size_t</span></span> size = <span class="hljs-number"><span class="hljs-number">0</span></span>;
  
  <span class="hljs-keyword"><span class="hljs-keyword">for</span></span>(<span class="hljs-keyword"><span class="hljs-keyword">bool</span></span> end_flag = <span class="hljs-literal"><span class="hljs-literal">false</span></span>; !end_flag;) {
    <span class="hljs-keyword"><span class="hljs-keyword">auto</span></span> n = q.try_dequeue_bulk(begin(pool), config::bulk);
    <span class="hljs-keyword"><span class="hljs-keyword">for</span></span>(<span class="hljs-keyword"><span class="hljs-keyword">size_t</span></span> it = <span class="hljs-number"><span class="hljs-number">0</span></span>; it &lt; n; ++it) {
      <span class="hljs-keyword"><span class="hljs-keyword">auto</span></span> &amp; str = pool[it];
      <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>((end_flag = str.empty())) <span class="hljs-keyword"><span class="hljs-keyword">continue</span></span>;
      size += str.size();
    }
    
    <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(end_flag) q.enqueue({});
  }
  <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> size;
}


<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">auto</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">parse</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> argc, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">char</span></span></span></span><span class="hljs-function"><span class="hljs-params">* argv[])</span></span></span><span class="hljs-function"> </span></span>{
  cxxopts::Options options{*argv};
  options.add_options()
    (<span class="hljs-string"><span class="hljs-string">"b"</span></span>, <span class="hljs-string"><span class="hljs-string">""</span></span>, cxxopts::value(config::bulk))
    (<span class="hljs-string"><span class="hljs-string">"c"</span></span>, <span class="hljs-string"><span class="hljs-string">"threads"</span></span>, cxxopts::value(config::concurrency))
    (<span class="hljs-string"><span class="hljs-string">"f"</span></span>, <span class="hljs-string"><span class="hljs-string">"file path"</span></span>, cxxopts::value&lt;<span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::<span class="hljs-built_in"><span class="hljs-built_in">string</span></span>&gt;());
  <span class="hljs-keyword"><span class="hljs-keyword">auto</span></span> pr = options.parse(argc, argv);
  <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(pr.count(<span class="hljs-string"><span class="hljs-string">"f"</span></span>) == <span class="hljs-number"><span class="hljs-number">1</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> pr[<span class="hljs-string"><span class="hljs-string">"f"</span></span>].as&lt;<span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::<span class="hljs-built_in"><span class="hljs-built_in">string</span></span>&gt;();
  <span class="hljs-built_in"><span class="hljs-built_in">printf</span></span>(<span class="hljs-string"><span class="hljs-string">"%s\n"</span></span>, options.help().c_str());
  <span class="hljs-built_in"><span class="hljs-built_in">exit</span></span>(<span class="hljs-number"><span class="hljs-number">0</span></span>);
}


<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">int</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">main</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> argc, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">char</span></span></span></span><span class="hljs-function"><span class="hljs-params"> * argv[])</span></span></span><span class="hljs-function"> </span></span>{
  <span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::filesystem::path path = parse(argc, argv);
  <span class="hljs-keyword"><span class="hljs-keyword">auto</span></span> file_size = <span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::filesystem::file_size(path);
  <span class="hljs-keyword"><span class="hljs-keyword">auto</span></span> file_data = (<span class="hljs-keyword"><span class="hljs-keyword">const</span></span> <span class="hljs-keyword"><span class="hljs-keyword">char</span></span> *)mmap(<span class="hljs-literal"><span class="hljs-literal">nullptr</span></span>, file_size + <span class="hljs-number"><span class="hljs-number">4096</span></span>, PROT_READ, MAP_POPULATE|MAP_PRIVATE|MAP_FILE, open(path.c_str(), O_RDONLY), <span class="hljs-number"><span class="hljs-number">0</span></span>);
  <span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::string_view file{file_data, file_size};
    
  <span class="hljs-keyword"><span class="hljs-keyword">auto</span></span> next = [it = file]() <span class="hljs-keyword"><span class="hljs-keyword">mutable</span></span> {
    <span class="hljs-keyword"><span class="hljs-keyword">auto</span></span> p = it.data();
    <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> <span class="hljs-keyword"><span class="hljs-keyword">char</span></span> * begin = <span class="hljs-literal"><span class="hljs-literal">nullptr</span></span>;
    <span class="hljs-keyword"><span class="hljs-keyword">size_t</span></span> braces = <span class="hljs-number"><span class="hljs-number">0</span></span>;
    <span class="hljs-keyword"><span class="hljs-keyword">while</span></span>(<span class="hljs-literal"><span class="hljs-literal">true</span></span>) {
      <span class="hljs-keyword"><span class="hljs-keyword">switch</span></span>(p = <span class="hljs-built_in"><span class="hljs-built_in">strpbrk</span></span>(p, <span class="hljs-string"><span class="hljs-string">"{}"</span></span>); p ? *p : <span class="hljs-number"><span class="hljs-number">0</span></span>) {
        <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> <span class="hljs-string"><span class="hljs-string">'{'</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(!braces++) begin = p; ++p; <span class="hljs-keyword"><span class="hljs-keyword">break</span></span>;
        <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> <span class="hljs-string"><span class="hljs-string">'}'</span></span>: ++p; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(!--braces) {
          it = it.substr(<span class="hljs-keyword"><span class="hljs-keyword">size_t</span></span>(p - it.begin()));
          <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::string_view{begin, <span class="hljs-keyword"><span class="hljs-keyword">size_t</span></span>(p - begin)};
        } <span class="hljs-keyword"><span class="hljs-keyword">break</span></span>;
        <span class="hljs-keyword"><span class="hljs-keyword">default</span></span>: it = it.substr(it.size()); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::string_view{};
      }
    };
  };
  
  <span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::<span class="hljs-built_in"><span class="hljs-built_in">vector</span></span>&lt;<span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::future&lt;<span class="hljs-keyword"><span class="hljs-keyword">size_t</span></span>&gt;&gt; tp(config::concurrency);
  <span class="hljs-keyword"><span class="hljs-keyword">for</span></span>(<span class="hljs-keyword"><span class="hljs-keyword">auto</span></span> &amp; f: tp) f = <span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::async(<span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::launch::async, work);
  
  <span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::<span class="hljs-built_in"><span class="hljs-built_in">vector</span></span>&lt;<span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::string_view&gt; pool;
  <span class="hljs-keyword"><span class="hljs-keyword">auto</span></span> max = config::bulk * config::concurrency;
  pool.reserve(max);
  <span class="hljs-keyword"><span class="hljs-keyword">while</span></span>(<span class="hljs-literal"><span class="hljs-literal">true</span></span>) {
    <span class="hljs-keyword"><span class="hljs-keyword">auto</span></span> str = next();
    <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(pool.size() == max || str.empty()) {
      q.enqueue_bulk(begin(pool), pool.size());
      pool.clear();
    }
    <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(str.empty()) {
      q.enqueue({});
      <span class="hljs-keyword"><span class="hljs-keyword">break</span></span>;
    }
    pool.emplace_back(str);    
  }
  <span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::<span class="hljs-built_in"><span class="hljs-built_in">vector</span></span>&lt;<span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::<span class="hljs-built_in"><span class="hljs-built_in">string</span></span>&gt; all;
  <span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::transform(begin(tp), end(tp), <span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::back_inserter(all), [](<span class="hljs-keyword"><span class="hljs-keyword">auto</span></span> &amp; f) {
    <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::to_string(f.get());
  });
  assert(all.size() == config::concurrency);
  <span class="hljs-built_in"><span class="hljs-built_in">fprintf</span></span>(<span class="hljs-built_in"><span class="hljs-built_in">stderr</span></span>, <span class="hljs-string"><span class="hljs-string">"{%s}\n"</span></span>, boost::algorithm::join(all, <span class="hljs-string"><span class="hljs-string">", "</span></span>).c_str());
  
}</code></pre><br>
</div></div><br>
<br>
Оно парсит(при помощи алгоритма автора) на подстроки и раскидывает подстроки по потокам. <br>
<br>
<code>//1 поток(на самом деле 2)<br>
{93000000}<br>
real 0m0,041s<br>
user 0m0,054s<br>
sys 0m0,012s<br>
//4 потока(на самом деле 5)<br>
{23247900, 23247942, 23256193, 23247965}<br>
real 0m0,042s<br>
user 0m0,140s<br>
sys 0m0,010s<br>
</code><br>
<br>
Там лям объектов объектов. Их без проблем можно рассылать по потокам по 
тысячи штук, а это всего тысяча операций. Это ничто даже для системных 
механизмов синхронизации, не говоря уже о юзерспейсных. <br>
<br></div>

        <div class="comment__footer">
    <a href="#reply" class="comment__footer-link reply_link" onclick="return comment_show_reply_form(20259466 )">Ответить</a>


</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-7" id="reply_comments_20259466">  <li class="content-list__item content-list__item_comment js-comment " rel="20259478">
    
    <span class="parent_id" data-parent_id="20259466"></span>
    <div class="comment" id="comment_20259478">
      <span class="comment__collapse" title="Свернуть/развернуть ветку комментариев" data-id="20259478"></span>
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head comment__head_topic-author comment__head_my-comment " rel="20259478">
          <a href="https://habr.com/ru/users/epishman/" class="user-info user-info_inline" rel="user-popover" data-user-login="epishman">
    <img src="Swift%20%D0%BF%D1%80%D0%BE%D1%82%D0%B8%D0%B2%20Rust%20%E2%80%94%20%D0%B1%D0%B5%D0%BD%D1%87%D0%BC%D0%B0%D1%80%D0%BA%D0%B8%D0%BD%D0%B3%20%D0%BD%D0%B0%20Linux%20%D1%81%20(%D0%BD%D0%B5)%D0%BF%D0%BE%D0%BD%D1%8F%D1%82%D0%BD%D1%8B%D0%BC%20%D1%84%D0%B8%D0%BD%D0%B0%D0%BB%D0%BE%D0%BC%20_%20%D0%A5%D0%B0%D0%B1%D1%80_files/ec0d88c4853c0d36d44bd0526dcfa8d7.png" class="user-info__image-pic user-info__image-pic_small" width="24" height="24">
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">epishman</span>
</a>

          <svg class="icon_comment-edit" title="Комментарий был изменен" width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#pencil"></use></svg>
          <time class="comment__date-time comment__date-time_published">8 июня 2019 в 03:08</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="#comment_20259478" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="20259478" data-action="add" title="Добавить в закладки"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#book"></use></svg></a>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <span class="icon_comment-branch js-comment_tree" data-id="20259478" data-parent_id="20259466" title="Показать ветку комментариев"><svg width="8" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#tree"></use></svg></span>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#comment_20259466" class="icon_comment-arrow-up js-comment_parent" data-id="20259478" data-parent_id="20259466" title="Показать предыдущий комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
    </li>

  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="#comment_20259478" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="20259478" data-parent_id="20259466" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="20259478" data-post-target="450512" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="plus" onclick="comment_vote(this);" title="За свои комментарии голосовать нельзя" disabled="disabled"><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter   js-score" title="Всего голосов 0: ↑0 и ↓0">0</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="За свои комментарии голосовать нельзя" disabled="disabled"><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message ">А смысл иметь тысячу нитей, все 
мои замеры показывают — максимальный выигрыш когда количество потоков 
немного больше количества ядер (максимум в 2 разе), дальше начинаются 
тормоза, особенно если не использовать lock-free каналы (которых кстати 
как я понял в Go нет).</div>

        <div class="comment__footer">
    <a href="#reply" class="comment__footer-link reply_link" onclick="return comment_show_reply_form(20259478 )">Ответить</a>


</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-8" id="reply_comments_20259478">  <li class="content-list__item content-list__item_comment js-comment " rel="20259494">
    
    <span class="parent_id" data-parent_id="20259478"></span>
    <div class="comment" id="comment_20259494">
      <span class="comment__collapse" title="Свернуть/развернуть ветку комментариев" data-id="20259494"></span>
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head   " rel="20259494">
          <a href="https://habr.com/ru/users/twinklede/" class="user-info user-info_inline" rel="user-popover" data-user-login="twinklede">
    <svg class="default-image default-image_mini default-image_pink" width="24" height="24"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#slug"></use></svg>
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">twinklede</span>
</a>

          
          <time class="comment__date-time comment__date-time_published">8 июня 2019 в 03:51</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="#comment_20259494" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="20259494" data-action="add" title="Добавить в закладки"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#book"></use></svg></a>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <span class="icon_comment-branch js-comment_tree" data-id="20259494" data-parent_id="20259478" title="Показать ветку комментариев"><svg width="8" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#tree"></use></svg></span>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#comment_20259478" class="icon_comment-arrow-up js-comment_parent" data-id="20259494" data-parent_id="20259478" title="Показать предыдущий комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
    </li>

  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="#comment_20259494" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="20259494" data-parent_id="20259478" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="20259494" data-post-target="450512" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small voting-wjt__button_plus" data-action="plus" onclick="comment_vote(this);" title="Вы проголосовали положительно " disabled="disabled"><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter voting-wjt__counter_positive  js-score" title="Всего голосов +1: ↑1 и ↓0">+1</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="Вы проголосовали положительно , отменить голос нельзя" disabled="disabled"><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message "><blockquote>А смысл иметь тысячу нитей</blockquote><br>
Я не говорил о каких-то «нитях». Про нити там:<br>
<br>
<blockquote>рассылать по потокам</blockquote><br>
Всё что дальше — к потокам отношения не имеет, а имеет отношение к «их».<br>
<br>
Отвечу сразу на:<br>
<blockquote>В чем заключался оверхед?</blockquote><br>
Это уже обсуждалось. Там ниже есть бенчмарки С++-версии и раст-версии и 
оверхед там очевиден(там же обсуждался оверхед с red75prim). 
Многопоточная раст-версия работает на одном потоке намного медленнее 
однопоточной — это и есть оверхед.<br>
<br>
Для понимания темы я советую взять и написать аналог моего бенчмарка и 
сравнить результаты. Он читает файл, берёт ваш алгоритм по выделению из 
строки объектов и делит строку на подстроки(вот они тут: <a href="https://github.com/epishman/habr_samples/blob/master/jsonparse/main.rs#L187">github.com/epishman/habr_samples/blob/master/jsonparse/main.rs#L187</a>). Далее он посылает эти подстроки в воркеры(которые потоки).<br>
<br>
В рамках бенчмарка воркер не просто считает длину этой подстроки и 
складывает внутри себя. Далее бенчмарк выводит суммарной кол-во байт 
«переданное» в каждый воркер(это показанные мною 1/4 цифры).<br>
<br>
<a href="https://github.com/epishman/habr_samples/blob/master/jsonparse/main.rs#L284">github.com/epishman/habr_samples/blob/master/jsonparse/main.rs#L284</a>
 — вот то место, у вас там o является подстрокой. Нужно взять и сложить 
все длинны входящих слайсов для каждого элемента массива: <a href="https://github.com/epishman/habr_samples/blob/master/jsonparse/main.rs#L141">github.com/epishman/habr_samples/blob/master/jsonparse/main.rs#L141</a><br>
<br></div>

        <div class="comment__footer">
    <a href="#reply" class="comment__footer-link reply_link" onclick="return comment_show_reply_form(20259494 )">Ответить</a>


</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-9" id="reply_comments_20259494">  <li class="content-list__item content-list__item_comment js-comment " rel="20260034">
    
    <span class="parent_id" data-parent_id="20259494"></span>
    <div class="comment" id="comment_20260034">
      <span class="comment__collapse" title="Свернуть/развернуть ветку комментариев" data-id="20260034"></span>
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head comment__head_topic-author comment__head_my-comment " rel="20260034">
          <a href="https://habr.com/ru/users/epishman/" class="user-info user-info_inline" rel="user-popover" data-user-login="epishman">
    <img src="Swift%20%D0%BF%D1%80%D0%BE%D1%82%D0%B8%D0%B2%20Rust%20%E2%80%94%20%D0%B1%D0%B5%D0%BD%D1%87%D0%BC%D0%B0%D1%80%D0%BA%D0%B8%D0%BD%D0%B3%20%D0%BD%D0%B0%20Linux%20%D1%81%20(%D0%BD%D0%B5)%D0%BF%D0%BE%D0%BD%D1%8F%D1%82%D0%BD%D1%8B%D0%BC%20%D1%84%D0%B8%D0%BD%D0%B0%D0%BB%D0%BE%D0%BC%20_%20%D0%A5%D0%B0%D0%B1%D1%80_files/ec0d88c4853c0d36d44bd0526dcfa8d7.png" class="user-info__image-pic user-info__image-pic_small" width="24" height="24">
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">epishman</span>
</a>

          
          <time class="comment__date-time comment__date-time_published">8 июня 2019 в 12:07</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="#comment_20260034" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="20260034" data-action="add" title="Добавить в закладки"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#book"></use></svg></a>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <span class="icon_comment-branch js-comment_tree" data-id="20260034" data-parent_id="20259494" title="Показать ветку комментариев"><svg width="8" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#tree"></use></svg></span>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#comment_20259494" class="icon_comment-arrow-up js-comment_parent" data-id="20260034" data-parent_id="20259494" title="Показать предыдущий комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
    </li>

  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="#comment_20260034" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="20260034" data-parent_id="20259494" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="20260034" data-post-target="450512" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="plus" onclick="comment_vote(this);" title="За свои комментарии голосовать нельзя" disabled="disabled"><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter   js-score" title="Всего голосов 0: ↑0 и ↓0">0</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="За свои комментарии голосовать нельзя" disabled="disabled"><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message ">Понял, спасибо. Но такую же 
проблему мы видим в Go, что как-бы намекает, что к производительности ++
 никто так и не подобрался. Но тогда это смерть раста :)</div>

        <div class="comment__footer">
    <a href="#reply" class="comment__footer-link reply_link" onclick="return comment_show_reply_form(20260034 )">Ответить</a>


</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-10" id="reply_comments_20260034"></ul>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="content-list__item content-list__item_comment js-comment " rel="20259442">
    
    <span class="parent_id" data-parent_id="20257288"></span>
    <div class="comment" id="comment_20259442">
      <span class="comment__collapse" title="Свернуть/развернуть ветку комментариев" data-id="20259442"></span>
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head   " rel="20259442">
          <a href="https://habr.com/ru/users/twinklede/" class="user-info user-info_inline" rel="user-popover" data-user-login="twinklede">
    <svg class="default-image default-image_mini default-image_pink" width="24" height="24"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#slug"></use></svg>
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">twinklede</span>
</a>

          
          <time class="comment__date-time comment__date-time_published">8 июня 2019 в 02:18</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="#comment_20259442" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="20259442" data-action="add" title="Добавить в закладки"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#book"></use></svg></a>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <span class="icon_comment-branch js-comment_tree" data-id="20259442" data-parent_id="20257288" title="Показать ветку комментариев"><svg width="8" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#tree"></use></svg></span>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#comment_20257288" class="icon_comment-arrow-up js-comment_parent" data-id="20259442" data-parent_id="20257288" title="Показать предыдущий комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
    </li>

  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="#comment_20259442" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="20259442" data-parent_id="20257288" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="20259442" data-post-target="450512" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="plus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter   js-score" title="Всего голосов 0: ↑0 и ↓0">0</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message "><code>real 0m0,533s<br>
user 0m0,519s<br>
sys 0m0,014s<br>
<br>
//C++<br>
real 0m0,536s<br>
user 0m0,496s<br>
sys 0m0,040s<br>
<br>
//C++ + pgo<br>
real 0m0,462s<br>
user 0m0,423s<br>
sys 0m0,039s<br>
</code><br>
Т.е. оно эквивалентно С++-версии.<br>
<br>
<blockquote>если парсить потоково и сразу агрегировать, то получается быстро.</blockquote><br>
А если ещё и json(текст) убогий выпилить.</div>

        <div class="comment__footer">
    <a href="#reply" class="comment__footer-link reply_link" onclick="return comment_show_reply_form(20259442 )">Ответить</a>


</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-5" id="reply_comments_20259442"></ul>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="content-list__item content-list__item_comment js-comment " rel="20132614">
    
    <span class="parent_id" data-parent_id="0"></span>
    <div class="comment" id="comment_20132614">
      <span class="comment__collapse" title="Свернуть/развернуть ветку комментариев" data-id="20132614"></span>
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head   " rel="20132614">
          <a href="https://habr.com/ru/users/deril/" class="user-info user-info_inline" rel="user-popover" data-user-login="deril">
    <svg class="default-image default-image_mini default-image_lilac" width="24" height="24"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#slug"></use></svg>
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">deril</span>
</a>

          
          <time class="comment__date-time comment__date-time_published">9 мая 2019 в 11:14</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="#comment_20132614" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="20132614" data-action="add" title="Добавить в закладки"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#book"></use></svg></a>
    </li>


  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="#comment_20132614" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="20132614" data-parent_id="0" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="20132614" data-post-target="450512" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="plus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter   js-score" title="Всего голосов 0: ↑0 и ↓0">0</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message ">Интерестно было бы сравнить с 
Crystal. Тоже компилируется для LLVM, приятный синтаксис. Раньше делал 
на нем процессинг CSV файлов, отрабатывал шустро.</div>

        <div class="comment__footer">
    <a href="#reply" class="comment__footer-link reply_link" onclick="return comment_show_reply_form(20132614 )">Ответить</a>


</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-0" id="reply_comments_20132614">  <li class="content-list__item content-list__item_comment js-comment " rel="20132672">
    
    <span class="parent_id" data-parent_id="20132614"></span>
    <div class="comment" id="comment_20132672">
      <span class="comment__collapse" title="Свернуть/развернуть ветку комментариев" data-id="20132672"></span>
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head comment__head_topic-author comment__head_my-comment " rel="20132672">
          <a href="https://habr.com/ru/users/epishman/" class="user-info user-info_inline" rel="user-popover" data-user-login="epishman">
    <img src="Swift%20%D0%BF%D1%80%D0%BE%D1%82%D0%B8%D0%B2%20Rust%20%E2%80%94%20%D0%B1%D0%B5%D0%BD%D1%87%D0%BC%D0%B0%D1%80%D0%BA%D0%B8%D0%BD%D0%B3%20%D0%BD%D0%B0%20Linux%20%D1%81%20(%D0%BD%D0%B5)%D0%BF%D0%BE%D0%BD%D1%8F%D1%82%D0%BD%D1%8B%D0%BC%20%D1%84%D0%B8%D0%BD%D0%B0%D0%BB%D0%BE%D0%BC%20_%20%D0%A5%D0%B0%D0%B1%D1%80_files/ec0d88c4853c0d36d44bd0526dcfa8d7.png" class="user-info__image-pic user-info__image-pic_small" width="24" height="24">
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">epishman</span>
</a>

          
          <time class="comment__date-time comment__date-time_published">9 мая 2019 в 11:32</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="#comment_20132672" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="20132672" data-action="add" title="Добавить в закладки"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#book"></use></svg></a>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <span class="icon_comment-branch js-comment_tree" data-id="20132672" data-parent_id="20132614" title="Показать ветку комментариев"><svg width="8" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#tree"></use></svg></span>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#comment_20132614" class="icon_comment-arrow-up js-comment_parent" data-id="20132672" data-parent_id="20132614" title="Показать предыдущий комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
    </li>

  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="#comment_20132672" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="20132672" data-parent_id="20132614" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="20132672" data-post-target="450512" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="plus" onclick="comment_vote(this);" title="За свои комментарии голосовать нельзя" disabled="disabled"><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter   js-score" title="Всего голосов 0: ↑0 и ↓0">0</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="За свои комментарии голосовать нельзя" disabled="disabled"><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message ">Как я понял, для настоящего 
парсинга нужна многопоточка. В случае с JSON/XML это оправдано, так как 
скорость чтения из потока/файла сильно больше скорости остальной 
обработки. Проблема, если важна последовательность обработки, например 
финансовых документов, которые зависят друг от друга — в этом случае 
приходится часть документов кэшировать в памяти, что приводит к ее 
непредсказуемому расходу.</div>

        <div class="comment__footer">
    <a href="#reply" class="comment__footer-link reply_link" onclick="return comment_show_reply_form(20132672 )">Ответить</a>


</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-1" id="reply_comments_20132672"></ul>
  </li>
</ul>
  </li>
  <li class="content-list__item content-list__item_comment js-comment " rel="20139914">
    
    <span class="parent_id" data-parent_id="0"></span>
    <div class="comment" id="comment_20139914">
      <span class="comment__collapse" title="Свернуть/развернуть ветку комментариев" data-id="20139914"></span>
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head   " rel="20139914">
          <a href="https://habr.com/ru/users/twinklede/" class="user-info user-info_inline" rel="user-popover" data-user-login="twinklede">
    <svg class="default-image default-image_mini default-image_pink" width="24" height="24"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#slug"></use></svg>
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">twinklede</span>
</a>

          
          <time class="comment__date-time comment__date-time_published">11 мая 2019 в 20:24</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="#comment_20139914" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="20139914" data-action="add" title="Добавить в закладки"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#book"></use></svg></a>
    </li>


  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="#comment_20139914" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="20139914" data-parent_id="0" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="20139914" data-post-target="450512" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small voting-wjt__button_plus" data-action="plus" onclick="comment_vote(this);" title="Вы проголосовали положительно " disabled="disabled"><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter voting-wjt__counter_positive  js-score" title="Всего голосов +1: ↑1 и ↓0">+1</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="Вы проголосовали положительно , отменить голос нельзя" disabled="disabled"><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message ">Написал С++-версию. Можете добавить к сравнению.<br>
<br>
<div class="spoiler"><b class="spoiler_title">Код</b><div class="spoiler_text"><pre><code class="cpp hljs"><span class="hljs-meta"><span class="hljs-meta">#</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">include</span></span></span><span class="hljs-meta"> </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">&lt;rapidjson/document.h&gt;</span></span></span></span>
<span class="hljs-meta"><span class="hljs-meta">#</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">include</span></span></span><span class="hljs-meta"> </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">&lt;filesystem&gt;</span></span></span></span>
<span class="hljs-meta"><span class="hljs-meta">#</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">include</span></span></span><span class="hljs-meta"> </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">&lt;sys/mman.h&gt;</span></span></span></span>
<span class="hljs-meta"><span class="hljs-meta">#</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">include</span></span></span><span class="hljs-meta"> </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">&lt;fcntl.h&gt;</span></span></span></span>
<span class="hljs-meta"><span class="hljs-meta">#</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">include</span></span></span><span class="hljs-meta"> </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">&lt;unordered_map&gt;</span></span></span></span>
<span class="hljs-meta"><span class="hljs-meta">#</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">include</span></span></span><span class="hljs-meta"> </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">&lt;charconv&gt;</span></span></span></span>
<span class="hljs-meta"><span class="hljs-meta">#</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">include</span></span></span><span class="hljs-meta"> </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">&lt;string&gt;</span></span></span></span>
<span class="hljs-meta"><span class="hljs-meta">#</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">include</span></span></span><span class="hljs-meta"> </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">&lt;unordered_set&gt;</span></span></span></span>
<span class="hljs-meta"><span class="hljs-meta">#</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">include</span></span></span><span class="hljs-meta"> </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">&lt;list&gt;</span></span></span></span>
<span class="hljs-meta"><span class="hljs-meta">#</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">include</span></span></span><span class="hljs-meta"> </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">&lt;array&gt;</span></span></span></span>
<span class="hljs-meta"><span class="hljs-meta">#</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">include</span></span></span><span class="hljs-meta"> </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">&lt;vector&gt;</span></span></span></span>
<span class="hljs-meta"><span class="hljs-meta">#</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">include</span></span></span><span class="hljs-meta"> </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">&lt;boost/algorithm/string/join.hpp&gt;</span></span></span></span>


<span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">struct</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">rec_t</span></span></span><span class="hljs-class"> {</span></span>
  <span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::<span class="hljs-built_in"><span class="hljs-built_in">string</span></span> company;
  <span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::<span class="hljs-built_in"><span class="hljs-built_in">vector</span></span>&lt;<span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::<span class="hljs-built_in"><span class="hljs-built_in">string</span></span>&gt; phones;
  <span class="hljs-keyword"><span class="hljs-keyword">double</span></span> debt;
};

<span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">struct</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">debtor_t</span></span></span><span class="hljs-class"> {</span></span>
  <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-keyword"><span class="hljs-keyword">inline</span></span> <span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::<span class="hljs-built_in"><span class="hljs-built_in">unordered_map</span></span>&lt;<span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::<span class="hljs-built_in"><span class="hljs-built_in">string</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">debtor_t</span></span> &amp;&gt; by_phone_index;
  <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-keyword"><span class="hljs-keyword">inline</span></span> <span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::<span class="hljs-built_in"><span class="hljs-built_in">list</span></span>&lt;<span class="hljs-keyword"><span class="hljs-keyword">debtor_t</span></span>&gt; all;
  <span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::<span class="hljs-built_in"><span class="hljs-built_in">unordered_set</span></span>&lt;<span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::<span class="hljs-built_in"><span class="hljs-built_in">string</span></span>&gt; companies;
  <span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::<span class="hljs-built_in"><span class="hljs-built_in">unordered_set</span></span>&lt;<span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::<span class="hljs-built_in"><span class="hljs-built_in">string</span></span>&gt; phones;
  <span class="hljs-keyword"><span class="hljs-keyword">double</span></span> debt;
};

<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">process_object</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">rec_t</span></span></span></span><span class="hljs-function"><span class="hljs-params"> &amp; rec)</span></span></span><span class="hljs-function"> </span></span>{
  
  <span class="hljs-keyword"><span class="hljs-keyword">auto</span></span> &amp; index = <span class="hljs-keyword"><span class="hljs-keyword">debtor_t</span></span>::by_phone_index;
  <span class="hljs-keyword"><span class="hljs-keyword">auto</span></span> op = [&amp;](<span class="hljs-keyword"><span class="hljs-keyword">debtor_t</span></span> &amp; d) {
    d.companies.insert(<span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::move(rec.company));
    <span class="hljs-keyword"><span class="hljs-keyword">for</span></span>(<span class="hljs-keyword"><span class="hljs-keyword">const</span></span> <span class="hljs-keyword"><span class="hljs-keyword">auto</span></span> &amp; phone: rec.phones) {
      d.phones.insert(phone);
<span class="hljs-comment"><span class="hljs-comment">//       if(!index.contains(phone))</span></span>
      <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(index.find(phone) == end(<span class="hljs-keyword"><span class="hljs-keyword">debtor_t</span></span>::by_phone_index))
        index.emplace(phone, d);
    }
    d.debt += rec.debt;
  };
  
  <span class="hljs-keyword"><span class="hljs-keyword">auto</span></span> di = end(index);
  <span class="hljs-keyword"><span class="hljs-keyword">for</span></span>(<span class="hljs-keyword"><span class="hljs-keyword">const</span></span> <span class="hljs-keyword"><span class="hljs-keyword">auto</span></span> &amp; phone: rec.phones) {
    di = index.find(phone);
    <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(di != end(index)) <span class="hljs-keyword"><span class="hljs-keyword">break</span></span>;    
  }
  op((di != end(index)) ? di-&gt;second : <span class="hljs-keyword"><span class="hljs-keyword">debtor_t</span></span>::all.emplace_back());
}



<span class="hljs-keyword"><span class="hljs-keyword">rec_t</span></span> &amp; extract_data(rapidjson::Document &amp; doc) {
  <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-keyword"><span class="hljs-keyword">rec_t</span></span> rec;
  rec.phones.clear();
  rec.company.clear();
  rec.debt = <span class="hljs-number"><span class="hljs-number">0</span></span>;
  
  <span class="hljs-keyword"><span class="hljs-keyword">for</span></span>(<span class="hljs-keyword"><span class="hljs-keyword">auto</span></span> &amp; x: doc.GetObject()) {
    <span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::string_view key{x.name.GetString(), x.name.GetStringLength()};
    <span class="hljs-keyword"><span class="hljs-keyword">auto</span></span> &amp; value = x.value;
    
    <span class="hljs-keyword"><span class="hljs-keyword">auto</span></span> val2str = [](<span class="hljs-keyword"><span class="hljs-keyword">auto</span></span> &amp; value) -&gt; <span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::<span class="hljs-built_in"><span class="hljs-built_in">string</span></span> {
      <span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::<span class="hljs-built_in"><span class="hljs-built_in">array</span></span>&lt;<span class="hljs-keyword"><span class="hljs-keyword">char</span></span>, <span class="hljs-number"><span class="hljs-number">32</span></span>&gt; mem;  
      
      <span class="hljs-keyword"><span class="hljs-keyword">switch</span></span>(value.GetType()) {
        <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> rapidjson::kStringType: <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> {value.GetString(), value.GetStringLength()};
        <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> rapidjson::kNumberType: {
          <span class="hljs-keyword"><span class="hljs-keyword">auto</span></span> [endp, _] = <span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::to_chars(begin(mem), end(mem), value.GetUint64());
          <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> {begin(mem), endp};
        }
        <span class="hljs-keyword"><span class="hljs-keyword">default</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> {};
      }
    };
    
    <span class="hljs-keyword"><span class="hljs-keyword">auto</span></span> val2num = [](<span class="hljs-keyword"><span class="hljs-keyword">auto</span></span> &amp; value) -&gt; <span class="hljs-keyword"><span class="hljs-keyword">double</span></span> {
      <span class="hljs-keyword"><span class="hljs-keyword">switch</span></span>(value.GetType()) {
        <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> rapidjson::kStringType: <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> strtod(value.GetString(), <span class="hljs-literal"><span class="hljs-literal">nullptr</span></span>);
        <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> rapidjson::kNumberType: <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> value.GetDouble();
        <span class="hljs-keyword"><span class="hljs-keyword">default</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> {};
      }
    };
    
    <span class="hljs-keyword"><span class="hljs-keyword">auto</span></span> push_phone = [&amp;](<span class="hljs-keyword"><span class="hljs-keyword">auto</span></span> &amp; value) {
      <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(<span class="hljs-keyword"><span class="hljs-keyword">auto</span></span> phone = val2str(value);!phone.empty())
        rec.phones.emplace_back(phone);
    };
    
    <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(key == <span class="hljs-string"><span class="hljs-string">"company"</span></span>) {
      <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(value.IsString()) {
        rec.company = {value.GetString(), value.GetStringLength()};
      } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(value.IsObject()) {
        <span class="hljs-keyword"><span class="hljs-keyword">auto</span></span> name = value.GetObject().FindMember(<span class="hljs-string"><span class="hljs-string">"name"</span></span>);
        <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(name != value.GetObject().MemberEnd()) rec.company = val2str(name-&gt;value);
      }
    } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(key == <span class="hljs-string"><span class="hljs-string">"phone"</span></span>) {
      push_phone(value);
    } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(key == <span class="hljs-string"><span class="hljs-string">"phones"</span></span>) {
      <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(value.IsArray()) <span class="hljs-keyword"><span class="hljs-keyword">for</span></span>(<span class="hljs-keyword"><span class="hljs-keyword">auto</span></span> &amp; x: value.GetArray()) push_phone(x);
      push_phone(value);
    } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(key == <span class="hljs-string"><span class="hljs-string">"debt"</span></span>) rec.debt = val2num(value);
  }
  
  <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> rec;  
}

<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">int</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">main</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> argc, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">char</span></span></span></span><span class="hljs-function"><span class="hljs-params"> * argv[])</span></span></span><span class="hljs-function"> </span></span>{
  <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(argc &lt; <span class="hljs-number"><span class="hljs-number">2</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-number"><span class="hljs-number">-1</span></span>;
  <span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::filesystem::path path = argv[<span class="hljs-number"><span class="hljs-number">1</span></span>];
  
  <span class="hljs-keyword"><span class="hljs-keyword">auto</span></span> file_size = <span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::filesystem::file_size(path);
  <span class="hljs-keyword"><span class="hljs-keyword">auto</span></span> file_data = (<span class="hljs-keyword"><span class="hljs-keyword">const</span></span> <span class="hljs-keyword"><span class="hljs-keyword">char</span></span> *)mmap(<span class="hljs-literal"><span class="hljs-literal">nullptr</span></span>, file_size + <span class="hljs-number"><span class="hljs-number">4096</span></span>, PROT_READ, MAP_POPULATE|MAP_PRIVATE|MAP_FILE, open(path.c_str(), O_RDONLY), <span class="hljs-number"><span class="hljs-number">0</span></span>);
  <span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::string_view file{file_data, file_size};
  
  <span class="hljs-keyword"><span class="hljs-keyword">auto</span></span> it = file;
  
  <span class="hljs-keyword"><span class="hljs-keyword">auto</span></span> next = [&amp;] {
    <span class="hljs-keyword"><span class="hljs-keyword">auto</span></span> p = it.data();
    <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> <span class="hljs-keyword"><span class="hljs-keyword">char</span></span> * begin = <span class="hljs-literal"><span class="hljs-literal">nullptr</span></span>;
    <span class="hljs-keyword"><span class="hljs-keyword">size_t</span></span> braces = <span class="hljs-number"><span class="hljs-number">0</span></span>;
    <span class="hljs-keyword"><span class="hljs-keyword">while</span></span>(<span class="hljs-literal"><span class="hljs-literal">true</span></span>) {
      <span class="hljs-keyword"><span class="hljs-keyword">switch</span></span>(p = <span class="hljs-built_in"><span class="hljs-built_in">strpbrk</span></span>(p, <span class="hljs-string"><span class="hljs-string">"{}"</span></span>); p ? *p : <span class="hljs-number"><span class="hljs-number">0</span></span>) {
        <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> <span class="hljs-string"><span class="hljs-string">'{'</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(!braces++) begin = p; ++p; <span class="hljs-keyword"><span class="hljs-keyword">break</span></span>;
        <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> <span class="hljs-string"><span class="hljs-string">'}'</span></span>: ++p; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(!--braces) {
          it = it.substr(<span class="hljs-keyword"><span class="hljs-keyword">size_t</span></span>(p - it.begin()));
          <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::string_view{begin, <span class="hljs-keyword"><span class="hljs-keyword">size_t</span></span>(p - begin)};
        } <span class="hljs-keyword"><span class="hljs-keyword">break</span></span>;
        <span class="hljs-keyword"><span class="hljs-keyword">default</span></span>: it = it.substr(it.size()); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::string_view{};
      }
    };
  };
  
  rapidjson::Document doc;
  
  
  <span class="hljs-keyword"><span class="hljs-keyword">while</span></span>(<span class="hljs-literal"><span class="hljs-literal">true</span></span>) {
    <span class="hljs-keyword"><span class="hljs-keyword">auto</span></span> str = next();
    <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(str.empty()) <span class="hljs-keyword"><span class="hljs-keyword">break</span></span>;
    doc.Parse(data(str), size(str));
    process_object(extract_data(doc));
  }
  
  <span class="hljs-keyword"><span class="hljs-keyword">for</span></span>(<span class="hljs-keyword"><span class="hljs-keyword">size_t</span></span> it = <span class="hljs-number"><span class="hljs-number">0</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">auto</span></span> &amp; d: <span class="hljs-keyword"><span class="hljs-keyword">debtor_t</span></span>::all) {
    <span class="hljs-built_in"><span class="hljs-built_in">printf</span></span>(<span class="hljs-string"><span class="hljs-string">"-------------------------------\n"</span></span>);
    <span class="hljs-built_in"><span class="hljs-built_in">printf</span></span>(<span class="hljs-string"><span class="hljs-string">"#%lu: debt: %f\n"</span></span>, it++, d.debt);
    <span class="hljs-keyword"><span class="hljs-keyword">using</span></span> boost::algorithm::join;
    <span class="hljs-built_in"><span class="hljs-built_in">printf</span></span>(<span class="hljs-string"><span class="hljs-string">"companies: {%s}\nphones: {%s}\n"</span></span>, join(d.companies, <span class="hljs-string"><span class="hljs-string">","</span></span>).c_str(), join(d.phones, <span class="hljs-string"><span class="hljs-string">","</span></span>).c_str());
  }
}</code></pre><br>
</div></div></div>

        <div class="comment__footer">
    <a href="#reply" class="comment__footer-link reply_link" onclick="return comment_show_reply_form(20139914 )">Ответить</a>


</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-0" id="reply_comments_20139914">  <li class="content-list__item content-list__item_comment js-comment " rel="20139938">
    
    <span class="parent_id" data-parent_id="20139914"></span>
    <div class="comment" id="comment_20139938">
      <span class="comment__collapse" title="Свернуть/развернуть ветку комментариев" data-id="20139938"></span>
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head comment__head_topic-author comment__head_my-comment " rel="20139938">
          <a href="https://habr.com/ru/users/epishman/" class="user-info user-info_inline" rel="user-popover" data-user-login="epishman">
    <img src="Swift%20%D0%BF%D1%80%D0%BE%D1%82%D0%B8%D0%B2%20Rust%20%E2%80%94%20%D0%B1%D0%B5%D0%BD%D1%87%D0%BC%D0%B0%D1%80%D0%BA%D0%B8%D0%BD%D0%B3%20%D0%BD%D0%B0%20Linux%20%D1%81%20(%D0%BD%D0%B5)%D0%BF%D0%BE%D0%BD%D1%8F%D1%82%D0%BD%D1%8B%D0%BC%20%D1%84%D0%B8%D0%BD%D0%B0%D0%BB%D0%BE%D0%BC%20_%20%D0%A5%D0%B0%D0%B1%D1%80_files/ec0d88c4853c0d36d44bd0526dcfa8d7.png" class="user-info__image-pic user-info__image-pic_small" width="24" height="24">
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">epishman</span>
</a>

          
          <time class="comment__date-time comment__date-time_published">11 мая 2019 в 20:29</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="#comment_20139938" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="20139938" data-action="add" title="Добавить в закладки"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#book"></use></svg></a>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <span class="icon_comment-branch js-comment_tree" data-id="20139938" data-parent_id="20139914" title="Показать ветку комментариев"><svg width="8" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#tree"></use></svg></span>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#comment_20139914" class="icon_comment-arrow-up js-comment_parent" data-id="20139938" data-parent_id="20139914" title="Показать предыдущий комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
    </li>

  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="#comment_20139938" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="20139938" data-parent_id="20139914" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="20139938" data-post-target="450512" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="plus" onclick="comment_vote(this);" title="За свои комментарии голосовать нельзя" disabled="disabled"><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter   js-score" title="Всего голосов 0: ↑0 и ↓0">0</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="За свои комментарии голосовать нельзя" disabled="disabled"><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message ">Как это компилить, я не владею крестами, и у меня линукс.<br>
PS<br>
Уже столько вариантов люди накидали, на статью тянет. Один товарищ даже 
выиграл гонку на lua. Сравнение раста и плюсов это очень холиварная 
тема, завтра изучу что нужно на машину поставить чтоб Ваш пример 
собрать.</div>

        <div class="comment__footer">
    <a href="#reply" class="comment__footer-link reply_link" onclick="return comment_show_reply_form(20139938 )">Ответить</a>


</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-1" id="reply_comments_20139938">  <li class="content-list__item content-list__item_comment js-comment " rel="20140076">
    
    <span class="parent_id" data-parent_id="20139938"></span>
    <div class="comment" id="comment_20140076">
      <span class="comment__collapse" title="Свернуть/развернуть ветку комментариев" data-id="20140076"></span>
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head   " rel="20140076">
          <a href="https://habr.com/ru/users/twinklede/" class="user-info user-info_inline" rel="user-popover" data-user-login="twinklede">
    <svg class="default-image default-image_mini default-image_pink" width="24" height="24"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#slug"></use></svg>
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">twinklede</span>
</a>

          
          <time class="comment__date-time comment__date-time_published">11 мая 2019 в 21:03</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="#comment_20140076" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="20140076" data-action="add" title="Добавить в закладки"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#book"></use></svg></a>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <span class="icon_comment-branch js-comment_tree" data-id="20140076" data-parent_id="20139938" title="Показать ветку комментариев"><svg width="8" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#tree"></use></svg></span>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#comment_20139938" class="icon_comment-arrow-up js-comment_parent" data-id="20140076" data-parent_id="20139938" title="Показать предыдущий комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
    </li>

  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="#comment_20140076" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="20140076" data-parent_id="20139938" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="20140076" data-post-target="450512" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="plus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter   js-score" title="Всего голосов 0: ↑0 и ↓0">0</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message ">Там всё header-only. <a href="https://github.com/Tencent/rapidjson">github.com/Tencent/rapidjson</a> — нужно куда-то клонировать и добавить путь до rapidjson/include <br>
<br>
<code>git clone https://github.com/Tencent/rapidjson.git<br>
g++ main.cpp -std=c++2a -Irapidjson/include -Ofast -march=native -fwhole-program <br>
$ time ./a.out 1.json <br>
-------------------------------<br>
#0: debt: 910000000.000000<br>
companies: {Шестерочка, Рога и копыта, Первая коллекторская}<br>
phones: {234, 789, 123, 456, 788, 2128506}<br>
-------------------------------<br>
#1: debt: 433200000.000000<br>
companies: {Казачий спас, Святой престол}<br>
phones: {345678, 666, 234567}<br>
<br>
real 0m0,545s<br>
user 0m0,498s<br>
sys 0m0,047s</code><br>
<br>
В любом дистрибутиве boost уже должен стоять. Если нет:<br>
<br>
<div class="spoiler"><b class="spoiler_title">Вот версия без буста</b><div class="spoiler_text"><pre><code class="cpp hljs"><span class="hljs-meta"><span class="hljs-meta">#</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">include</span></span></span><span class="hljs-meta"> </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">&lt;rapidjson/document.h&gt;</span></span></span></span>
<span class="hljs-meta"><span class="hljs-meta">#</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">include</span></span></span><span class="hljs-meta"> </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">&lt;filesystem&gt;</span></span></span></span>
<span class="hljs-meta"><span class="hljs-meta">#</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">include</span></span></span><span class="hljs-meta"> </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">&lt;sys/mman.h&gt;</span></span></span></span>
<span class="hljs-meta"><span class="hljs-meta">#</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">include</span></span></span><span class="hljs-meta"> </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">&lt;fcntl.h&gt;</span></span></span></span>
<span class="hljs-meta"><span class="hljs-meta">#</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">include</span></span></span><span class="hljs-meta"> </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">&lt;unordered_map&gt;</span></span></span></span>
<span class="hljs-meta"><span class="hljs-meta">#</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">include</span></span></span><span class="hljs-meta"> </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">&lt;charconv&gt;</span></span></span></span>
<span class="hljs-meta"><span class="hljs-meta">#</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">include</span></span></span><span class="hljs-meta"> </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">&lt;string&gt;</span></span></span></span>
<span class="hljs-meta"><span class="hljs-meta">#</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">include</span></span></span><span class="hljs-meta"> </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">&lt;unordered_set&gt;</span></span></span></span>
<span class="hljs-meta"><span class="hljs-meta">#</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">include</span></span></span><span class="hljs-meta"> </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">&lt;list&gt;</span></span></span></span>
<span class="hljs-meta"><span class="hljs-meta">#</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">include</span></span></span><span class="hljs-meta"> </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">&lt;array&gt;</span></span></span></span>
<span class="hljs-meta"><span class="hljs-meta">#</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">include</span></span></span><span class="hljs-meta"> </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">&lt;vector&gt;</span></span></span></span>

<span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">struct</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">rec_t</span></span></span><span class="hljs-class"> {</span></span>
  <span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::<span class="hljs-built_in"><span class="hljs-built_in">string</span></span> company;
  <span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::<span class="hljs-built_in"><span class="hljs-built_in">vector</span></span>&lt;<span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::<span class="hljs-built_in"><span class="hljs-built_in">string</span></span>&gt; phones;
  <span class="hljs-keyword"><span class="hljs-keyword">double</span></span> debt;
};

<span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">struct</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">debtor_t</span></span></span><span class="hljs-class"> {</span></span>
  <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-keyword"><span class="hljs-keyword">inline</span></span> <span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::<span class="hljs-built_in"><span class="hljs-built_in">unordered_map</span></span>&lt;<span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::<span class="hljs-built_in"><span class="hljs-built_in">string</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">debtor_t</span></span> &amp;&gt; by_phone_index;
  <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-keyword"><span class="hljs-keyword">inline</span></span> <span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::<span class="hljs-built_in"><span class="hljs-built_in">list</span></span>&lt;<span class="hljs-keyword"><span class="hljs-keyword">debtor_t</span></span>&gt; all;
  <span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::<span class="hljs-built_in"><span class="hljs-built_in">unordered_set</span></span>&lt;<span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::<span class="hljs-built_in"><span class="hljs-built_in">string</span></span>&gt; companies;
  <span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::<span class="hljs-built_in"><span class="hljs-built_in">unordered_set</span></span>&lt;<span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::<span class="hljs-built_in"><span class="hljs-built_in">string</span></span>&gt; phones;
  <span class="hljs-keyword"><span class="hljs-keyword">double</span></span> debt;
};

<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">process_object</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">rec_t</span></span></span></span><span class="hljs-function"><span class="hljs-params"> &amp; rec)</span></span></span><span class="hljs-function"> </span></span>{
  
  <span class="hljs-keyword"><span class="hljs-keyword">auto</span></span> &amp; index = <span class="hljs-keyword"><span class="hljs-keyword">debtor_t</span></span>::by_phone_index;
  <span class="hljs-keyword"><span class="hljs-keyword">auto</span></span> op = [&amp;](<span class="hljs-keyword"><span class="hljs-keyword">debtor_t</span></span> &amp; d) {
    d.companies.insert(<span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::move(rec.company));
    <span class="hljs-keyword"><span class="hljs-keyword">for</span></span>(<span class="hljs-keyword"><span class="hljs-keyword">const</span></span> <span class="hljs-keyword"><span class="hljs-keyword">auto</span></span> &amp; phone: rec.phones) {
      d.phones.insert(phone);
<span class="hljs-comment"><span class="hljs-comment">//       if(!index.contains(phone))</span></span>
      <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(index.find(phone) == end(<span class="hljs-keyword"><span class="hljs-keyword">debtor_t</span></span>::by_phone_index))
        index.emplace(phone, d);
    }
    d.debt += rec.debt;
  };
  
  <span class="hljs-keyword"><span class="hljs-keyword">auto</span></span> di = end(index);
  <span class="hljs-keyword"><span class="hljs-keyword">for</span></span>(<span class="hljs-keyword"><span class="hljs-keyword">const</span></span> <span class="hljs-keyword"><span class="hljs-keyword">auto</span></span> &amp; phone: rec.phones) {
    di = index.find(phone);
    <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(di != end(index)) <span class="hljs-keyword"><span class="hljs-keyword">break</span></span>;    
  }
  op((di != end(index)) ? di-&gt;second : <span class="hljs-keyword"><span class="hljs-keyword">debtor_t</span></span>::all.emplace_back());
}



<span class="hljs-keyword"><span class="hljs-keyword">rec_t</span></span> &amp; extract_data(rapidjson::Document &amp; doc) {
  <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-keyword"><span class="hljs-keyword">rec_t</span></span> rec;
  rec.phones.clear();
  rec.company.clear();
  rec.debt = <span class="hljs-number"><span class="hljs-number">0</span></span>;
  
  <span class="hljs-keyword"><span class="hljs-keyword">for</span></span>(<span class="hljs-keyword"><span class="hljs-keyword">auto</span></span> &amp; x: doc.GetObject()) {
    <span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::string_view key{x.name.GetString(), x.name.GetStringLength()};
    <span class="hljs-keyword"><span class="hljs-keyword">auto</span></span> &amp; value = x.value;
    
    <span class="hljs-keyword"><span class="hljs-keyword">auto</span></span> val2str = [](<span class="hljs-keyword"><span class="hljs-keyword">auto</span></span> &amp; value) -&gt; <span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::<span class="hljs-built_in"><span class="hljs-built_in">string</span></span> {
      <span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::<span class="hljs-built_in"><span class="hljs-built_in">array</span></span>&lt;<span class="hljs-keyword"><span class="hljs-keyword">char</span></span>, <span class="hljs-number"><span class="hljs-number">32</span></span>&gt; mem;  
      
      <span class="hljs-keyword"><span class="hljs-keyword">switch</span></span>(value.GetType()) {
        <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> rapidjson::kStringType: <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> {value.GetString(), value.GetStringLength()};
        <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> rapidjson::kNumberType: {
          <span class="hljs-keyword"><span class="hljs-keyword">auto</span></span> [endp, _] = <span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::to_chars(begin(mem), end(mem), value.GetUint64());
          <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> {begin(mem), endp};
        }
        <span class="hljs-keyword"><span class="hljs-keyword">default</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> {};
      }
    };
    
    <span class="hljs-keyword"><span class="hljs-keyword">auto</span></span> val2num = [](<span class="hljs-keyword"><span class="hljs-keyword">auto</span></span> &amp; value) -&gt; <span class="hljs-keyword"><span class="hljs-keyword">double</span></span> {
      <span class="hljs-keyword"><span class="hljs-keyword">switch</span></span>(value.GetType()) {
        <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> rapidjson::kStringType: <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> strtod(value.GetString(), <span class="hljs-literal"><span class="hljs-literal">nullptr</span></span>);
        <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> rapidjson::kNumberType: <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> value.GetDouble();
        <span class="hljs-keyword"><span class="hljs-keyword">default</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> {};
      }
    };
    
    <span class="hljs-keyword"><span class="hljs-keyword">auto</span></span> push_phone = [&amp;](<span class="hljs-keyword"><span class="hljs-keyword">auto</span></span> &amp; value) {
      <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(<span class="hljs-keyword"><span class="hljs-keyword">auto</span></span> phone = val2str(value);!phone.empty())
        rec.phones.emplace_back(phone);
    };
    
    <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(key == <span class="hljs-string"><span class="hljs-string">"company"</span></span>) {
      <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(value.IsString()) {
        rec.company = {value.GetString(), value.GetStringLength()};
      } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(value.IsObject()) {
        <span class="hljs-keyword"><span class="hljs-keyword">auto</span></span> name = value.GetObject().FindMember(<span class="hljs-string"><span class="hljs-string">"name"</span></span>);
        <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(name != value.GetObject().MemberEnd()) rec.company = val2str(name-&gt;value);
      }
    } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(key == <span class="hljs-string"><span class="hljs-string">"phone"</span></span>) {
      push_phone(value);
    } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(key == <span class="hljs-string"><span class="hljs-string">"phones"</span></span>) {
      <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(value.IsArray()) <span class="hljs-keyword"><span class="hljs-keyword">for</span></span>(<span class="hljs-keyword"><span class="hljs-keyword">auto</span></span> &amp; x: value.GetArray()) push_phone(x);
      push_phone(value);
    } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(key == <span class="hljs-string"><span class="hljs-string">"debt"</span></span>) rec.debt = val2num(value);
  }
  
  <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> rec;  
}

<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">int</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">main</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> argc, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">char</span></span></span></span><span class="hljs-function"><span class="hljs-params"> * argv[])</span></span></span><span class="hljs-function"> </span></span>{
  <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(argc &lt; <span class="hljs-number"><span class="hljs-number">2</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-number"><span class="hljs-number">-1</span></span>;
  <span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::filesystem::path path = argv[<span class="hljs-number"><span class="hljs-number">1</span></span>];
  
  <span class="hljs-keyword"><span class="hljs-keyword">auto</span></span> file_size = <span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::filesystem::file_size(path);
  <span class="hljs-keyword"><span class="hljs-keyword">auto</span></span> file_data = (<span class="hljs-keyword"><span class="hljs-keyword">const</span></span> <span class="hljs-keyword"><span class="hljs-keyword">char</span></span> *)mmap(<span class="hljs-literal"><span class="hljs-literal">nullptr</span></span>, file_size + <span class="hljs-number"><span class="hljs-number">4096</span></span>, PROT_READ, MAP_POPULATE|MAP_PRIVATE|MAP_FILE, open(path.c_str(), O_RDONLY), <span class="hljs-number"><span class="hljs-number">0</span></span>);
  <span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::string_view file{file_data, file_size};
  
  <span class="hljs-keyword"><span class="hljs-keyword">auto</span></span> it = file;
  
  <span class="hljs-keyword"><span class="hljs-keyword">auto</span></span> next = [&amp;] {
    <span class="hljs-keyword"><span class="hljs-keyword">auto</span></span> p = it.data();
    <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> <span class="hljs-keyword"><span class="hljs-keyword">char</span></span> * begin = <span class="hljs-literal"><span class="hljs-literal">nullptr</span></span>;
    <span class="hljs-keyword"><span class="hljs-keyword">size_t</span></span> braces = <span class="hljs-number"><span class="hljs-number">0</span></span>;
    <span class="hljs-keyword"><span class="hljs-keyword">while</span></span>(<span class="hljs-literal"><span class="hljs-literal">true</span></span>) {
      <span class="hljs-keyword"><span class="hljs-keyword">switch</span></span>(p = <span class="hljs-built_in"><span class="hljs-built_in">strpbrk</span></span>(p, <span class="hljs-string"><span class="hljs-string">"{}"</span></span>); p ? *p : <span class="hljs-number"><span class="hljs-number">0</span></span>) {
        <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> <span class="hljs-string"><span class="hljs-string">'{'</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(!braces++) begin = p; ++p; <span class="hljs-keyword"><span class="hljs-keyword">break</span></span>;
        <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> <span class="hljs-string"><span class="hljs-string">'}'</span></span>: ++p; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(!--braces) {
          it = it.substr(<span class="hljs-keyword"><span class="hljs-keyword">size_t</span></span>(p - it.begin()));
          <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::string_view{begin, <span class="hljs-keyword"><span class="hljs-keyword">size_t</span></span>(p - begin)};
        } <span class="hljs-keyword"><span class="hljs-keyword">break</span></span>;
        <span class="hljs-keyword"><span class="hljs-keyword">default</span></span>: it = it.substr(it.size()); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::string_view{};
      }
    };
  };
  
  rapidjson::Document doc;
  
  
  <span class="hljs-keyword"><span class="hljs-keyword">while</span></span>(<span class="hljs-literal"><span class="hljs-literal">true</span></span>) {
    <span class="hljs-keyword"><span class="hljs-keyword">auto</span></span> str = next();
    <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(str.empty()) <span class="hljs-keyword"><span class="hljs-keyword">break</span></span>;
    doc.Parse(data(str), size(str));
    process_object(extract_data(doc));
  }
  
  <span class="hljs-keyword"><span class="hljs-keyword">for</span></span>(<span class="hljs-keyword"><span class="hljs-keyword">size_t</span></span> it = <span class="hljs-number"><span class="hljs-number">0</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">auto</span></span> &amp; d: <span class="hljs-keyword"><span class="hljs-keyword">debtor_t</span></span>::all) {
    <span class="hljs-built_in"><span class="hljs-built_in">printf</span></span>(<span class="hljs-string"><span class="hljs-string">"-------------------------------\n"</span></span>);
    <span class="hljs-built_in"><span class="hljs-built_in">printf</span></span>(<span class="hljs-string"><span class="hljs-string">"#%lu: debt: %f\n"</span></span>, it++, d.debt);
    <span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::<span class="hljs-built_in"><span class="hljs-built_in">string</span></span> companies, phones;
    <span class="hljs-keyword"><span class="hljs-keyword">for</span></span>(<span class="hljs-keyword"><span class="hljs-keyword">auto</span></span> &amp; x: d.companies) companies += (x + <span class="hljs-string"><span class="hljs-string">", "</span></span>);
    <span class="hljs-keyword"><span class="hljs-keyword">for</span></span>(<span class="hljs-keyword"><span class="hljs-keyword">auto</span></span> &amp; x: d.phones) phones += (x + <span class="hljs-string"><span class="hljs-string">", "</span></span>);
    <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(companies.ends_with(<span class="hljs-string"><span class="hljs-string">", "</span></span>)) companies.resize(companies.size() - <span class="hljs-number"><span class="hljs-number">2</span></span>);
    <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(phones.ends_with(<span class="hljs-string"><span class="hljs-string">", "</span></span>)) phones.resize(phones.size() - <span class="hljs-number"><span class="hljs-number">2</span></span>);
    <span class="hljs-built_in"><span class="hljs-built_in">printf</span></span>(<span class="hljs-string"><span class="hljs-string">"companies: {%s}\nphones: {%s}\n"</span></span>, companies.c_str(), phones.c_str());
  }
}</code></pre><br>
</div></div><br>
<br>
У меня эта версия(0.55 секунды) где-то в 3раза быстрее раста(1.6 секунды).<br>
<br></div>

        <div class="comment__footer">
    <a href="#reply" class="comment__footer-link reply_link" onclick="return comment_show_reply_form(20140076 )">Ответить</a>


</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-2" id="reply_comments_20140076">  <li class="content-list__item content-list__item_comment js-comment " rel="20140148">
    
    <span class="parent_id" data-parent_id="20140076"></span>
    <div class="comment" id="comment_20140148">
      <span class="comment__collapse" title="Свернуть/развернуть ветку комментариев" data-id="20140148"></span>
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head   " rel="20140148">
          <a href="https://habr.com/ru/users/a1ien_n3t/" class="user-info user-info_inline" rel="user-popover" data-user-login="a1ien_n3t">
    <svg class="default-image default-image_mini default-image_green" width="24" height="24"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#slug"></use></svg>
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">a1ien_n3t</span>
</a>

          
          <time class="comment__date-time comment__date-time_published">11 мая 2019 в 21:32</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="#comment_20140148" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="20140148" data-action="add" title="Добавить в закладки"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#book"></use></svg></a>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <span class="icon_comment-branch js-comment_tree" data-id="20140148" data-parent_id="20140076" title="Показать ветку комментариев"><svg width="8" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#tree"></use></svg></span>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#comment_20140076" class="icon_comment-arrow-up js-comment_parent" data-id="20140148" data-parent_id="20140076" title="Показать предыдущий комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
    </li>

  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="#comment_20140148" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="20140148" data-parent_id="20140076" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="20140148" data-post-target="450512" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="plus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter   js-score" title="Всего голосов 0: ↑0 и ↓0">0</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message ">Ну вобще это не совсем честно делать memory map. Тогда и в когде на раст надо его использовать.</div>

        <div class="comment__footer">
    <a href="#reply" class="comment__footer-link reply_link" onclick="return comment_show_reply_form(20140148 )">Ответить</a>


</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-3" id="reply_comments_20140148">  <li class="content-list__item content-list__item_comment js-comment " rel="20140170">
    
    <span class="parent_id" data-parent_id="20140148"></span>
    <div class="comment" id="comment_20140170">
      <span class="comment__collapse" title="Свернуть/развернуть ветку комментариев" data-id="20140170"></span>
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head   " rel="20140170">
          <a href="https://habr.com/ru/users/twinklede/" class="user-info user-info_inline" rel="user-popover" data-user-login="twinklede">
    <svg class="default-image default-image_mini default-image_pink" width="24" height="24"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#slug"></use></svg>
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">twinklede</span>
</a>

          
          <time class="comment__date-time comment__date-time_published">11 мая 2019 в 21:42</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="#comment_20140170" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="20140170" data-action="add" title="Добавить в закладки"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#book"></use></svg></a>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <span class="icon_comment-branch js-comment_tree" data-id="20140170" data-parent_id="20140148" title="Показать ветку комментариев"><svg width="8" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#tree"></use></svg></span>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#comment_20140148" class="icon_comment-arrow-up js-comment_parent" data-id="20140170" data-parent_id="20140148" title="Показать предыдущий комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
    </li>

  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="#comment_20140170" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="20140170" data-parent_id="20140148" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="20140170" data-post-target="450512" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="plus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter   js-score" title="Всего голосов 0: ↑0 и ↓0">0</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message "><blockquote>Ну вобще это не совсем честно делать memory map.</blockquote><br>
Он мало что даёт в этом случае. <br>
<br>
<blockquote>Тогда и в когде на раст надо его использовать.</blockquote><br>
Предложите автору изменения. Я не знаю как это сделать.</div>

        <div class="comment__footer">
    <a href="#reply" class="comment__footer-link reply_link" onclick="return comment_show_reply_form(20140170 )">Ответить</a>


</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-4" id="reply_comments_20140170"></ul>
  </li>
</ul>
  </li>
  <li class="content-list__item content-list__item_comment js-comment " rel="20141662">
    
    <span class="parent_id" data-parent_id="20140076"></span>
    <div class="comment" id="comment_20141662">
      <span class="comment__collapse" title="Свернуть/развернуть ветку комментариев" data-id="20141662"></span>
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head   " rel="20141662">
          <a href="https://habr.com/ru/users/red75prim/" class="user-info user-info_inline" rel="user-popover" data-user-login="red75prim">
    <svg class="default-image default-image_mini default-image_lilac" width="24" height="24"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#slug"></use></svg>
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">red75prim</span>
</a>

          
          <time class="comment__date-time comment__date-time_published">12 мая 2019 в 13:34</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="#comment_20141662" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="20141662" data-action="add" title="Добавить в закладки"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#book"></use></svg></a>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <span class="icon_comment-branch js-comment_tree" data-id="20141662" data-parent_id="20140076" title="Показать ветку комментариев"><svg width="8" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#tree"></use></svg></span>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#comment_20140076" class="icon_comment-arrow-up js-comment_parent" data-id="20141662" data-parent_id="20140076" title="Показать предыдущий комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
    </li>

  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="#comment_20141662" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="20141662" data-parent_id="20140076" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="20141662" data-post-target="450512" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="plus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter   js-score" title="Всего голосов 0: ↑0 и ↓0">0</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message "><p>Не собирается. g++-7 не знает <code>-std=c++2a</code>, на g++-8 вот это:</p><br>
<pre><code class="plaintext hljs">$ g++-8 --version
g++-8 (Ubuntu 8.3.0-6ubuntu1~18.04) 8.3.0
Copyright (C) 2018 Free Software Foundation, Inc.
This is free software; see the source for copying conditions.  There is NO
warranty; not even for MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.

$ g++-8 main.cpp -std=c++2a -I../rapidjson/include -Ofast -march=native -fwhole-program
main.cpp: In function ‘int main(int, char**)’:
main.cpp:141:30: error: found ‘:’ in nested-name-specifier, expected ‘::’
   for(size_t it = 0; auto &amp; d: debtor_t::all) {
                              ^
                              ::
main.cpp:141:22: error: expected primary-expression before ‘auto’
   for(size_t it = 0; auto &amp; d: debtor_t::all) {
                      ^~~~
main.cpp:141:21: error: expected ‘;’ before ‘auto’
   for(size_t it = 0; auto &amp; d: debtor_t::all) {
                     ^~~~~
                     ;
main.cpp:141:22: error: expected primary-expression before ‘auto’
   for(size_t it = 0; auto &amp; d: debtor_t::all) {
                      ^~~~
main.cpp:141:21: error: expected ‘)’ before ‘auto’
   for(size_t it = 0; auto &amp; d: debtor_t::all) {
      ~              ^~~~~
                     )
main.cpp:141:29: error: ‘d’ has not been declared
   for(size_t it = 0; auto &amp; d: debtor_t::all) {
                             ^
main.cpp:141:45: error: qualified-id in declaration before ‘)’ token
   for(size_t it = 0; auto &amp; d: debtor_t::all) {</code></pre></div>

        <div class="comment__footer">
    <a href="#reply" class="comment__footer-link reply_link" onclick="return comment_show_reply_form(20141662 )">Ответить</a>


</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-3" id="reply_comments_20141662">  <li class="content-list__item content-list__item_comment js-comment " rel="20141870">
    
    <span class="parent_id" data-parent_id="20141662"></span>
    <div class="comment" id="comment_20141870">
      <span class="comment__collapse" title="Свернуть/развернуть ветку комментариев" data-id="20141870"></span>
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head   " rel="20141870">
          <a href="https://habr.com/ru/users/red75prim/" class="user-info user-info_inline" rel="user-popover" data-user-login="red75prim">
    <svg class="default-image default-image_mini default-image_lilac" width="24" height="24"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#slug"></use></svg>
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">red75prim</span>
</a>

          
          <time class="comment__date-time comment__date-time_published">12 мая 2019 в 14:35</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="#comment_20141870" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="20141870" data-action="add" title="Добавить в закладки"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#book"></use></svg></a>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <span class="icon_comment-branch js-comment_tree" data-id="20141870" data-parent_id="20141662" title="Показать ветку комментариев"><svg width="8" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#tree"></use></svg></span>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#comment_20141662" class="icon_comment-arrow-up js-comment_parent" data-id="20141870" data-parent_id="20141662" title="Показать предыдущий комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
    </li>

  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="#comment_20141870" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="20141870" data-parent_id="20141662" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="20141870" data-post-target="450512" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="plus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter   js-score" title="Всего голосов 0: ↑0 и ↓0">0</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message "><p>Если исправить эту ошибку вылезают ошибки с <code>.ends_with()</code>. Потом </p><br>
<pre><code class="plaintext hljs">/tmp/ccQErZlq.o: In function `main':
main.cpp:(.text.startup+0xa1): undefined reference to `std::filesystem::__cxx11::path::_M_split_cmpts()'
main.cpp:(.text.startup+0xab): undefined reference to `std::filesystem::file_size(std::filesystem::__cxx11::path const&amp;)'
collect2: error: ld returned 1 exit status</code></pre><br>
<p>И на этом я бросил.</p></div>

        <div class="comment__footer">
    <a href="#reply" class="comment__footer-link reply_link" onclick="return comment_show_reply_form(20141870 )">Ответить</a>


</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-4" id="reply_comments_20141870">  <li class="content-list__item content-list__item_comment js-comment " rel="20141996">
    
    <span class="parent_id" data-parent_id="20141870"></span>
    <div class="comment" id="comment_20141996">
      <span class="comment__collapse" title="Свернуть/развернуть ветку комментариев" data-id="20141996"></span>
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head   " rel="20141996">
          <a href="https://habr.com/ru/users/twinklede/" class="user-info user-info_inline" rel="user-popover" data-user-login="twinklede">
    <svg class="default-image default-image_mini default-image_pink" width="24" height="24"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#slug"></use></svg>
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">twinklede</span>
</a>

          
          <time class="comment__date-time comment__date-time_published">12 мая 2019 в 15:15</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="#comment_20141996" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="20141996" data-action="add" title="Добавить в закладки"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#book"></use></svg></a>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <span class="icon_comment-branch js-comment_tree" data-id="20141996" data-parent_id="20141870" title="Показать ветку комментариев"><svg width="8" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#tree"></use></svg></span>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#comment_20141870" class="icon_comment-arrow-up js-comment_parent" data-id="20141996" data-parent_id="20141870" title="Показать предыдущий комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
    </li>

  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="#comment_20141996" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="20141996" data-parent_id="20141870" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="20141996" data-post-target="450512" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="plus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter   js-score" title="Всего голосов 0: ↑0 и ↓0">0</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message ">Добавьте -lstdc++fs</div>

        <div class="comment__footer">
    <a href="#reply" class="comment__footer-link reply_link" onclick="return comment_show_reply_form(20141996 )">Ответить</a>


</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-5" id="reply_comments_20141996"></ul>
  </li>
</ul>
  </li>
  <li class="content-list__item content-list__item_comment js-comment " rel="20141992">
    
    <span class="parent_id" data-parent_id="20141662"></span>
    <div class="comment" id="comment_20141992">
      <span class="comment__collapse" title="Свернуть/развернуть ветку комментариев" data-id="20141992"></span>
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head   " rel="20141992">
          <a href="https://habr.com/ru/users/twinklede/" class="user-info user-info_inline" rel="user-popover" data-user-login="twinklede">
    <svg class="default-image default-image_mini default-image_pink" width="24" height="24"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#slug"></use></svg>
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">twinklede</span>
</a>

          
          <time class="comment__date-time comment__date-time_published">12 мая 2019 в 15:14</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="#comment_20141992" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="20141992" data-action="add" title="Добавить в закладки"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#book"></use></svg></a>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <span class="icon_comment-branch js-comment_tree" data-id="20141992" data-parent_id="20141662" title="Показать ветку комментариев"><svg width="8" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#tree"></use></svg></span>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#comment_20141662" class="icon_comment-arrow-up js-comment_parent" data-id="20141992" data-parent_id="20141662" title="Показать предыдущий комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
    </li>

  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="#comment_20141992" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="20141992" data-parent_id="20141662" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="20141992" data-post-target="450512" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="plus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter   js-score" title="Всего голосов 0: ↑0 и ↓0">0</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message ">Нужен девятый gcc.</div>

        <div class="comment__footer">
    <a href="#reply" class="comment__footer-link reply_link" onclick="return comment_show_reply_form(20141992 )">Ответить</a>


</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-4" id="reply_comments_20141992"></ul>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="content-list__item content-list__item_comment js-comment " rel="20140412">
    
    <span class="parent_id" data-parent_id="20139938"></span>
    <div class="comment" id="comment_20140412">
      <span class="comment__collapse" title="Свернуть/развернуть ветку комментариев" data-id="20140412"></span>
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head   " rel="20140412">
          <a href="https://habr.com/ru/users/tsukanov-as/" class="user-info user-info_inline" rel="user-popover" data-user-login="tsukanov-as">
    <svg class="default-image default-image_mini default-image_green" width="24" height="24"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#slug"></use></svg>
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">tsukanov-as</span>
</a>

          <svg class="icon_comment-edit" title="Комментарий был изменен" width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#pencil"></use></svg>
          <time class="comment__date-time comment__date-time_published">11 мая 2019 в 23:06</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="#comment_20140412" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="20140412" data-action="add" title="Добавить в закладки"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#book"></use></svg></a>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <span class="icon_comment-branch js-comment_tree" data-id="20140412" data-parent_id="20139938" title="Показать ветку комментариев"><svg width="8" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#tree"></use></svg></span>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#comment_20139938" class="icon_comment-arrow-up js-comment_parent" data-id="20140412" data-parent_id="20139938" title="Показать предыдущий комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
    </li>

  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="#comment_20140412" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="20140412" data-parent_id="20139938" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="20140412" data-post-target="450512" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="plus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter   js-score" title="Всего голосов 0: ↑0 и ↓0">0</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message ">Я бы не спешил считать Lua победителем. Нужна независимая проверка.<br>
Может быть я ошибся. Не так померил или не то закодил или еще чего.<br>
Плюс ко всему нужно учитывать что таки используется библиотека cjson, которая реализована на сишке.</div>

        <div class="comment__footer">
    <a href="#reply" class="comment__footer-link reply_link" onclick="return comment_show_reply_form(20140412 )">Ответить</a>


</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-2" id="reply_comments_20140412">  <li class="content-list__item content-list__item_comment js-comment " rel="20140502">
    
    <span class="parent_id" data-parent_id="20140412"></span>
    <div class="comment" id="comment_20140502">
      <span class="comment__collapse" title="Свернуть/развернуть ветку комментариев" data-id="20140502"></span>
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head   " rel="20140502">
          <a href="https://habr.com/ru/users/twinklede/" class="user-info user-info_inline" rel="user-popover" data-user-login="twinklede">
    <svg class="default-image default-image_mini default-image_pink" width="24" height="24"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#slug"></use></svg>
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">twinklede</span>
</a>

          
          <time class="comment__date-time comment__date-time_published">11 мая 2019 в 23:40</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="#comment_20140502" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="20140502" data-action="add" title="Добавить в закладки"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#book"></use></svg></a>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <span class="icon_comment-branch js-comment_tree" data-id="20140502" data-parent_id="20140412" title="Показать ветку комментариев"><svg width="8" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#tree"></use></svg></span>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#comment_20140412" class="icon_comment-arrow-up js-comment_parent" data-id="20140502" data-parent_id="20140412" title="Показать предыдущий комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
    </li>

  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="#comment_20140502" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="20140502" data-parent_id="20140412" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="20140502" data-post-target="450512" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small voting-wjt__button_plus" data-action="plus" onclick="comment_vote(this);" title="Вы проголосовали положительно " disabled="disabled"><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter voting-wjt__counter_positive  js-score" title="Всего голосов +1: ↑1 и ↓0">+1</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="Вы проголосовали положительно , отменить голос нельзя" disabled="disabled"><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message "><code>$ time luajit main.lua <br>
done 1.241739 sec.<br>
[{"debt":910000000,"companies":{"Шестерочка":true,"Рога и 
копыта":true,"Первая 
коллекторская":true},"phones":{"788":true,"456":true,"789":true,"2128506":true,"123":true,"234":true}},{"debt":433200000,"companies":{"Святой
 престол":true,"Казачий 
спас":true},"phones":{"234567":true,"666":true,"345678":true}}]<br>
<br>
real 0m1,242s<br>
user 0m1,173s<br>
sys 0m0,069s</code><br>
<br>
<code>$ time ./target/release/habr -f 1.json <br>
1.json:<br>
PROCESSED: 1000000 objects in 1.609574904s, 0 errors found<br>
-------------------------------<br>
#0: debt: 910000000<br>
companies: {"Первая коллекторская", "Шестерочка", "Рога и копыта"}<br>
phones: {"788", "123", "456", "234", "2128506", "789"}<br>
-------------------------------<br>
#1: debt: 433200000<br>
companies: {"Святой престол", "Казачий спас"}<br>
phones: {"234567", "345678", "666"}<br>
<br>
real 0m1,611s<br>
user 0m1,599s<br>
sys 0m0,010s</code><br>
<br>
<div class="spoiler"><b class="spoiler_title">Топ 15 вызовов rust-версии</b><div class="spoiler_text"><code> 13.48% habr habr [.] habr::main<br>
 8.54% habr libc-2.29.so [.] _int_free<br>
 5.91% habr habr [.] serde_json::value::de::&lt;impl 
serde::de::Deserialize&lt;'de&gt; for 
serde_json::value::Value&gt;::deserialize<br>
 5.13% habr libc-2.29.so [.] malloc<br>
 4.89% habr libc-2.29.so [.] realloc<br>
 3.79% habr libc-2.29.so [.] _int_malloc<br>
 3.70% habr habr [.] &lt;serde_json::read::SliceRead&lt;'a&gt; as serde_json::read::Read&lt;'a&gt;&gt;::parse_str<br>
 3.28% habr habr [.] &lt;std::collections::hash::map::DefaultHasher as core::hash::Hasher&gt;::write<br>
 3.05% habr libc-2.29.so [.] _int_realloc<br>
 2.99% habr habr [.] &lt;serde_json::value::de::&lt;impl 
serde::de::Deserialize&lt;'de&gt; for 
serde_json::value::Value&gt;::deserialize::ValueVisitor as 
serde::de::Visitor&lt;'de&gt;&gt;::visit_map<br>
 2.97% habr habr [.] std::collections::hash::table::make_hash<br>
 2.92% habr habr [.] core::str::run_utf8_validation<br>
 2.86% habr libc-2.29.so [.] __memmove_avx_unaligned_erms<br>
 2.80% habr libc-2.29.so [.] cfree@GLIBC_2.2.5<br>
 2.32% habr habr [.] &lt;alloc::collections::btree::map::BTreeMap&lt;K, V&gt;&gt;::insert<br>
 2.21% habr libc-2.29.so [.] __memcmp_avx2_movbe</code><br>
</div></div><br>
<br>
<div class="spoiler"><b class="spoiler_title">rust по библиотекам</b><div class="spoiler_text"><code> 65,31% habr<br>
 34,07% libc-2.29.so<br>
 0,59% [unknown]<br>
 0,03% ld-2.29.so</code><br>
</div></div><br>
<br>
<div class="spoiler"><b class="spoiler_title">Процент cjson во времени выполнения lua</b><div class="spoiler_text"><code> 22,67% cjson.so</code><br>
</div></div><br>
<br></div>

        <div class="comment__footer">
    <a href="#reply" class="comment__footer-link reply_link" onclick="return comment_show_reply_form(20140502 )">Ответить</a>


</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-3" id="reply_comments_20140502">  <li class="content-list__item content-list__item_comment js-comment " rel="20140516">
    
    <span class="parent_id" data-parent_id="20140502"></span>
    <div class="comment" id="comment_20140516">
      <span class="comment__collapse" title="Свернуть/развернуть ветку комментариев" data-id="20140516"></span>
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head   " rel="20140516">
          <a href="https://habr.com/ru/users/tsukanov-as/" class="user-info user-info_inline" rel="user-popover" data-user-login="tsukanov-as">
    <svg class="default-image default-image_mini default-image_green" width="24" height="24"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#slug"></use></svg>
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">tsukanov-as</span>
</a>

          
          <time class="comment__date-time comment__date-time_published">11 мая 2019 в 23:44</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="#comment_20140516" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="20140516" data-action="add" title="Добавить в закладки"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#book"></use></svg></a>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <span class="icon_comment-branch js-comment_tree" data-id="20140516" data-parent_id="20140502" title="Показать ветку комментариев"><svg width="8" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#tree"></use></svg></span>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#comment_20140502" class="icon_comment-arrow-up js-comment_parent" data-id="20140516" data-parent_id="20140502" title="Показать предыдущий комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
    </li>

  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="#comment_20140516" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="20140516" data-parent_id="20140502" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="20140516" data-post-target="450512" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="plus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter   js-score" title="Всего голосов 0: ↑0 и ↓0">0</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message ">Спасибо!</div>

        <div class="comment__footer">
    <a href="#reply" class="comment__footer-link reply_link" onclick="return comment_show_reply_form(20140516 )">Ответить</a>


</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-4" id="reply_comments_20140516"></ul>
  </li>
  <li class="content-list__item content-list__item_comment js-comment " rel="20141124">
    
    <span class="parent_id" data-parent_id="20140502"></span>
    <div class="comment" id="comment_20141124">
      <span class="comment__collapse" title="Свернуть/развернуть ветку комментариев" data-id="20141124"></span>
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head comment__head_topic-author comment__head_my-comment " rel="20141124">
          <a href="https://habr.com/ru/users/epishman/" class="user-info user-info_inline" rel="user-popover" data-user-login="epishman">
    <img src="Swift%20%D0%BF%D1%80%D0%BE%D1%82%D0%B8%D0%B2%20Rust%20%E2%80%94%20%D0%B1%D0%B5%D0%BD%D1%87%D0%BC%D0%B0%D1%80%D0%BA%D0%B8%D0%BD%D0%B3%20%D0%BD%D0%B0%20Linux%20%D1%81%20(%D0%BD%D0%B5)%D0%BF%D0%BE%D0%BD%D1%8F%D1%82%D0%BD%D1%8B%D0%BC%20%D1%84%D0%B8%D0%BD%D0%B0%D0%BB%D0%BE%D0%BC%20_%20%D0%A5%D0%B0%D0%B1%D1%80_files/ec0d88c4853c0d36d44bd0526dcfa8d7.png" class="user-info__image-pic user-info__image-pic_small" width="24" height="24">
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">epishman</span>
</a>

          
          <time class="comment__date-time comment__date-time_published">12 мая 2019 в 10:18</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="#comment_20141124" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="20141124" data-action="add" title="Добавить в закладки"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#book"></use></svg></a>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <span class="icon_comment-branch js-comment_tree" data-id="20141124" data-parent_id="20140502" title="Показать ветку комментариев"><svg width="8" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#tree"></use></svg></span>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#comment_20140502" class="icon_comment-arrow-up js-comment_parent" data-id="20141124" data-parent_id="20140502" title="Показать предыдущий комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
    </li>

  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="#comment_20141124" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="20141124" data-parent_id="20140502" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="20141124" data-post-target="450512" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="plus" onclick="comment_vote(this);" title="За свои комментарии голосовать нельзя" disabled="disabled"><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter   js-score" title="Всего голосов 0: ↑0 и ↓0">0</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="За свои комментарии голосовать нельзя" disabled="disabled"><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message ">Классно. То есть мы видим, что 
большинство времени уходит на алгоритм, а не на сторонние вызовы, а 
также на чтение файла. Как и предполагалось — маллоки на 3-м месте. В 
алгоритме ЛУА вроде чтение файла делается по другому, и там не создается
 промежуточная структура, то есть идет агрегация с колес, по сырым 
данным. Тут мне все понятно. Но оптимизировать код Rust я еще не дорос 
пока :)</div>

        <div class="comment__footer">
    <a href="#reply" class="comment__footer-link reply_link" onclick="return comment_show_reply_form(20141124 )">Ответить</a>


</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-4" id="reply_comments_20141124"></ul>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="content-list__item content-list__item_comment js-comment " rel="20141406">
    
    <span class="parent_id" data-parent_id="0"></span>
    <div class="comment" id="comment_20141406">
      <span class="comment__collapse" title="Свернуть/развернуть ветку комментариев" data-id="20141406"></span>
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head   " rel="20141406">
          <a href="https://habr.com/ru/users/red75prim/" class="user-info user-info_inline" rel="user-popover" data-user-login="red75prim">
    <svg class="default-image default-image_mini default-image_lilac" width="24" height="24"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#slug"></use></svg>
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">red75prim</span>
</a>

          <svg class="icon_comment-edit" title="Комментарий был изменен" width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#pencil"></use></svg>
          <time class="comment__date-time comment__date-time_published">12 мая 2019 в 12:15</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="#comment_20141406" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#" class="icon_comment-bookmark icon_comment-bookmark_add" onclick="return comments_add_to_favorite(this)" data-type="3" data-id="20141406" data-action="remove" title="Убрать из закладок"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#book"></use></svg></a>
    </li>


  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="#comment_20141406" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="20141406" data-parent_id="0" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="20141406" data-post-target="450512" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small voting-wjt__button_plus" data-action="plus" onclick="comment_vote(this);" title="Вы проголосовали положительно " disabled="disabled"><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter voting-wjt__counter_positive  js-score" title="Всего голосов +1: ↑1 и ↓0">+1</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="Вы проголосовали положительно , отменить голос нельзя" disabled="disabled"><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message "><p><a href="https://gist.github.com/red75prime/53111e066cb1a32721c461b24eadbe6e">https://gist.github.com/red75prime/53111e066cb1a32721c461b24eadbe6e</a></p><br>
<p>Где-то в два раза ускорил Rust версию — использовал <code>RawValue</code>, чтобы избежать лишнего парсинга и копирования.</p><br>
<p>Версия с mmap: <a href="https://gist.github.com/red75prime/676ba0f8b8e830861679f03f6824cb77">https://gist.github.com/red75prime/676ba0f8b8e830861679f03f6824cb77</a></p><br>
<p>У меня она работает немного медленнее.</p><br>
<blockquote>тогда как правильнее было бы заморочиться со ссылками и 
временами жизни (хотя предполагаю, что умный компилятор сделал это за 
меня)</blockquote><p>Нет, в Rust таких оптимизаций нет. Если написано <code>to_string()</code>, то будет создана новая строка и выделена память под неё.</p></div>

        <div class="comment__footer">
    <a href="#reply" class="comment__footer-link reply_link" onclick="return comment_show_reply_form(20141406 )">Ответить</a>


</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-0" id="reply_comments_20141406">  <li class="content-list__item content-list__item_comment js-comment " rel="20141568">
    
    <span class="parent_id" data-parent_id="20141406"></span>
    <div class="comment" id="comment_20141568">
      <span class="comment__collapse" title="Свернуть/развернуть ветку комментариев" data-id="20141568"></span>
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head comment__head_topic-author comment__head_my-comment " rel="20141568">
          <a href="https://habr.com/ru/users/epishman/" class="user-info user-info_inline" rel="user-popover" data-user-login="epishman">
    <img src="Swift%20%D0%BF%D1%80%D0%BE%D1%82%D0%B8%D0%B2%20Rust%20%E2%80%94%20%D0%B1%D0%B5%D0%BD%D1%87%D0%BC%D0%B0%D1%80%D0%BA%D0%B8%D0%BD%D0%B3%20%D0%BD%D0%B0%20Linux%20%D1%81%20(%D0%BD%D0%B5)%D0%BF%D0%BE%D0%BD%D1%8F%D1%82%D0%BD%D1%8B%D0%BC%20%D1%84%D0%B8%D0%BD%D0%B0%D0%BB%D0%BE%D0%BC%20_%20%D0%A5%D0%B0%D0%B1%D1%80_files/ec0d88c4853c0d36d44bd0526dcfa8d7.png" class="user-info__image-pic user-info__image-pic_small" width="24" height="24">
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">epishman</span>
</a>

          
          <time class="comment__date-time comment__date-time_published">12 мая 2019 в 13:00</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="#comment_20141568" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="20141568" data-action="add" title="Добавить в закладки"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#book"></use></svg></a>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <span class="icon_comment-branch js-comment_tree" data-id="20141568" data-parent_id="20141406" title="Показать ветку комментариев"><svg width="8" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#tree"></use></svg></span>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#comment_20141406" class="icon_comment-arrow-up js-comment_parent" data-id="20141568" data-parent_id="20141406" title="Показать предыдущий комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
    </li>

  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="#comment_20141568" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="20141568" data-parent_id="20141406" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="20141568" data-post-target="450512" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="plus" onclick="comment_vote(this);" title="За свои комментарии голосовать нельзя" disabled="disabled"><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter   js-score" title="Всего голосов 0: ↑0 и ↓0">0</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="За свои комментарии голосовать нельзя" disabled="disabled"><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message ">Круто, но Вы еще и алгоритм хеширования поменяли, вроде в std он медленный.<br>
PS<br>
но можно писать to_owned(), применимо к любым слайсам, теоретически он 
мог бы в некоторых случаях повторно использовать память, но это не наш 
случай — у нас память это кусок большого буфер, который перетирается на 
следующей итерации.<br>
PPSS<br>
То есть, в сухом остатке, можно считать, что мы догнали C++? <a href="https://habr.com/ru/users/twinklede/" class="user_link">twinklede</a> — я ничего не понимаю в плюсах, и даже вряд-ли смогу собрать тест. Материал тянет на статью, может кто напишет? :)</div>

        <div class="comment__footer">
    <a href="#reply" class="comment__footer-link reply_link" onclick="return comment_show_reply_form(20141568 )">Ответить</a>


</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-1" id="reply_comments_20141568">  <li class="content-list__item content-list__item_comment js-comment " rel="20141744">
    
    <span class="parent_id" data-parent_id="20141568"></span>
    <div class="comment" id="comment_20141744">
      <span class="comment__collapse" title="Свернуть/развернуть ветку комментариев" data-id="20141744"></span>
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head   " rel="20141744">
          <a href="https://habr.com/ru/users/red75prim/" class="user-info user-info_inline" rel="user-popover" data-user-login="red75prim">
    <svg class="default-image default-image_mini default-image_lilac" width="24" height="24"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#slug"></use></svg>
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">red75prim</span>
</a>

          
          <time class="comment__date-time comment__date-time_published">12 мая 2019 в 13:56</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="#comment_20141744" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="20141744" data-action="add" title="Добавить в закладки"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#book"></use></svg></a>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <span class="icon_comment-branch js-comment_tree" data-id="20141744" data-parent_id="20141568" title="Показать ветку комментариев"><svg width="8" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#tree"></use></svg></span>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#comment_20141568" class="icon_comment-arrow-up js-comment_parent" data-id="20141744" data-parent_id="20141568" title="Показать предыдущий комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
    </li>

  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="#comment_20141744" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="20141744" data-parent_id="20141568" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="20141744" data-post-target="450512" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="plus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter   js-score" title="Всего голосов 0: ↑0 и ↓0">0</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message "><blockquote>То есть, в сухом остатке, можно считать, что мы догнали C++?</blockquote><p>Пока не знаю. Там похоже bleeding edge C++ — g++ 8.3.0 его не понимает, а новее в моей убунте нет.</p></div>

        <div class="comment__footer">
    <a href="#reply" class="comment__footer-link reply_link" onclick="return comment_show_reply_form(20141744 )">Ответить</a>


</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-2" id="reply_comments_20141744"></ul>
  </li>
  <li class="content-list__item content-list__item_comment js-comment " rel="20142092">
    
    <span class="parent_id" data-parent_id="20141568"></span>
    <div class="comment" id="comment_20142092">
      <span class="comment__collapse" title="Свернуть/развернуть ветку комментариев" data-id="20142092"></span>
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head   " rel="20142092">
          <a href="https://habr.com/ru/users/twinklede/" class="user-info user-info_inline" rel="user-popover" data-user-login="twinklede">
    <svg class="default-image default-image_mini default-image_pink" width="24" height="24"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#slug"></use></svg>
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">twinklede</span>
</a>

          
          <time class="comment__date-time comment__date-time_published">12 мая 2019 в 15:47</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="#comment_20142092" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="20142092" data-action="add" title="Добавить в закладки"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#book"></use></svg></a>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <span class="icon_comment-branch js-comment_tree" data-id="20142092" data-parent_id="20141568" title="Показать ветку комментариев"><svg width="8" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#tree"></use></svg></span>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#comment_20141568" class="icon_comment-arrow-up js-comment_parent" data-id="20142092" data-parent_id="20141568" title="Показать предыдущий комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
    </li>

  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="#comment_20142092" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="20142092" data-parent_id="20141568" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="20142092" data-post-target="450512" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="plus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter   js-score" title="Всего голосов 0: ↑0 и ↓0">0</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message "><blockquote>То есть, в сухом остатке, можно считать, что мы догнали C++?</blockquote><br>
Нет, почти в 2раза медленнее.<br>
<br>
<blockquote>Материал тянет на статью, может кто напишет? :)</blockquote><br>
Мой код откровенно позорный. Так же я не заниматься оптимизациями. Если 
вам нужно быстро читать/писать/считать — вы явно выбрали не тот формат 
хранения и алгоритм. Используйте базу данных для таких задач. <br>
<br>
Я примерно предполагаю как ускорить С++-версию ещё раза в 2. Но если 
использовать бинарный, строгий формат данных — можно получить результат в
 разы быстрее текущих даже для самой базовой, не оптимизированной 
версии. Мы просто тратим силы впустую.<br>
<br></div>

        <div class="comment__footer">
    <a href="#reply" class="comment__footer-link reply_link" onclick="return comment_show_reply_form(20142092 )">Ответить</a>


</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-2" id="reply_comments_20142092">  <li class="content-list__item content-list__item_comment js-comment " rel="20142376">
    
    <span class="parent_id" data-parent_id="20142092"></span>
    <div class="comment" id="comment_20142376">
      <span class="comment__collapse" title="Свернуть/развернуть ветку комментариев" data-id="20142376"></span>
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head comment__head_topic-author comment__head_my-comment " rel="20142376">
          <a href="https://habr.com/ru/users/epishman/" class="user-info user-info_inline" rel="user-popover" data-user-login="epishman">
    <img src="Swift%20%D0%BF%D1%80%D0%BE%D1%82%D0%B8%D0%B2%20Rust%20%E2%80%94%20%D0%B1%D0%B5%D0%BD%D1%87%D0%BC%D0%B0%D1%80%D0%BA%D0%B8%D0%BD%D0%B3%20%D0%BD%D0%B0%20Linux%20%D1%81%20(%D0%BD%D0%B5)%D0%BF%D0%BE%D0%BD%D1%8F%D1%82%D0%BD%D1%8B%D0%BC%20%D1%84%D0%B8%D0%BD%D0%B0%D0%BB%D0%BE%D0%BC%20_%20%D0%A5%D0%B0%D0%B1%D1%80_files/ec0d88c4853c0d36d44bd0526dcfa8d7.png" class="user-info__image-pic user-info__image-pic_small" width="24" height="24">
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">epishman</span>
</a>

          
          <time class="comment__date-time comment__date-time_published">12 мая 2019 в 17:29</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="#comment_20142376" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="20142376" data-action="add" title="Добавить в закладки"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#book"></use></svg></a>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <span class="icon_comment-branch js-comment_tree" data-id="20142376" data-parent_id="20142092" title="Показать ветку комментариев"><svg width="8" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#tree"></use></svg></span>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#comment_20142092" class="icon_comment-arrow-up js-comment_parent" data-id="20142376" data-parent_id="20142092" title="Показать предыдущий комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
    </li>

  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="#comment_20142376" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="20142376" data-parent_id="20142092" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="20142376" data-post-target="450512" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="plus" onclick="comment_vote(this);" title="За свои комментарии голосовать нельзя" disabled="disabled"><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter   js-score" title="Всего голосов 0: ↑0 и ↓0">0</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="За свои комментарии голосовать нельзя" disabled="disabled"><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message ">В 2 раза это нормально. Спасибо за пищу для размышлений :)</div>

        <div class="comment__footer">
    <a href="#reply" class="comment__footer-link reply_link" onclick="return comment_show_reply_form(20142376 )">Ответить</a>


</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-3" id="reply_comments_20142376"></ul>
  </li>
  <li class="content-list__item content-list__item_comment js-comment " rel="20142450">
    
    <span class="parent_id" data-parent_id="20142092"></span>
    <div class="comment" id="comment_20142450">
      <span class="comment__collapse" title="Свернуть/развернуть ветку комментариев" data-id="20142450"></span>
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head comment__head_topic-author comment__head_my-comment " rel="20142450">
          <a href="https://habr.com/ru/users/epishman/" class="user-info user-info_inline" rel="user-popover" data-user-login="epishman">
    <img src="Swift%20%D0%BF%D1%80%D0%BE%D1%82%D0%B8%D0%B2%20Rust%20%E2%80%94%20%D0%B1%D0%B5%D0%BD%D1%87%D0%BC%D0%B0%D1%80%D0%BA%D0%B8%D0%BD%D0%B3%20%D0%BD%D0%B0%20Linux%20%D1%81%20(%D0%BD%D0%B5)%D0%BF%D0%BE%D0%BD%D1%8F%D1%82%D0%BD%D1%8B%D0%BC%20%D1%84%D0%B8%D0%BD%D0%B0%D0%BB%D0%BE%D0%BC%20_%20%D0%A5%D0%B0%D0%B1%D1%80_files/ec0d88c4853c0d36d44bd0526dcfa8d7.png" class="user-info__image-pic user-info__image-pic_small" width="24" height="24">
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">epishman</span>
</a>

          
          <time class="comment__date-time comment__date-time_published">12 мая 2019 в 17:49</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="#comment_20142450" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="20142450" data-action="add" title="Добавить в закладки"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#book"></use></svg></a>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <span class="icon_comment-branch js-comment_tree" data-id="20142450" data-parent_id="20142092" title="Показать ветку комментариев"><svg width="8" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#tree"></use></svg></span>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#comment_20142092" class="icon_comment-arrow-up js-comment_parent" data-id="20142450" data-parent_id="20142092" title="Показать предыдущий комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
    </li>

  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="#comment_20142450" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="20142450" data-parent_id="20142092" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="20142450" data-post-target="450512" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="plus" onclick="comment_vote(this);" title="За свои комментарии голосовать нельзя" disabled="disabled"><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter   js-score" title="Всего голосов 0: ↑0 и ↓0">0</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="За свои комментарии голосовать нельзя" disabled="disabled"><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message ">Так JSON и есть бинарный формат —
 все разделители байты, остальное в ut8, единственная проблема — нет 
отдельных делимиторов верхнего уровня, и нет блочности, поэтому 
распараллелить расчет можно только после первичного поточного парсинга.<br>
PS<br>
СУБД и рядом не стояли по производительности на сопоставимом железе, 
поэтому для бигдаты и не используют реляционку, банально не тянет. Все 
хранится в древовидных документах, и обрабатывается фулсканом.</div>

        <div class="comment__footer">
    <a href="#reply" class="comment__footer-link reply_link" onclick="return comment_show_reply_form(20142450 )">Ответить</a>


</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-3" id="reply_comments_20142450">  <li class="content-list__item content-list__item_comment js-comment " rel="20142594">
    
    <span class="parent_id" data-parent_id="20142450"></span>
    <div class="comment" id="comment_20142594">
      <span class="comment__collapse" title="Свернуть/развернуть ветку комментариев" data-id="20142594"></span>
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head   " rel="20142594">
          <a href="https://habr.com/ru/users/twinklede/" class="user-info user-info_inline" rel="user-popover" data-user-login="twinklede">
    <svg class="default-image default-image_mini default-image_pink" width="24" height="24"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#slug"></use></svg>
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">twinklede</span>
</a>

          
          <time class="comment__date-time comment__date-time_published">12 мая 2019 в 18:37</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="#comment_20142594" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="20142594" data-action="add" title="Добавить в закладки"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#book"></use></svg></a>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <span class="icon_comment-branch js-comment_tree" data-id="20142594" data-parent_id="20142450" title="Показать ветку комментариев"><svg width="8" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#tree"></use></svg></span>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#comment_20142450" class="icon_comment-arrow-up js-comment_parent" data-id="20142594" data-parent_id="20142450" title="Показать предыдущий комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
    </li>

  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="#comment_20142594" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="20142594" data-parent_id="20142450" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="20142594" data-post-target="450512" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="plus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter voting-wjt__counter_positive  js-score" title="Всего голосов +1: ↑1 и ↓0">+1</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message "><blockquote>Так JSON и есть 
бинарный формат — все разделители байты, остальное в ut8, единственная 
проблема — нет отдельных делимиторов верхнего уровня, и нет блочности, 
поэтому распараллелить расчет можно только после первичного поточного 
парсинга.</blockquote><br>
Он не бинарный формат в том смысле в котором понимают бинарным форматы. Формально да, все форматы являются бинарными.<br>
<br>
Основных отличий много. В бинарном формат строгий/однозначный, а значит в
 данных ненужно хранить структуру. У вас же оно хранится. Бинарный 
формат компактней. Ненужно ничего никуда преобразовывать(строки в числа,
 числа в строки и прочее). Подобные форматы заранее спроектированы таким
 образом, что-бы хранить данные в наиболее удобной для обработки вида. 
Про блочность вы уже сказали. Продолжать можно долго.<br>
<br>
<blockquote>СУБД и рядом не стояли по производительности на сопоставимом
 железе, поэтому для бигдаты и не используют реляционку, банально не 
тянет.</blockquote><br>
Нужно сравнивать. К тому же БД не обязательно должна быть реляционной. 
Аналогично, сомневаюсь, что кто-то в бигдате использует json. Для 
хранения отдельных документов? Возможно. Но то отдельные документы. К 
тому по эти документам строятся внешние индексы/иерархия.<br></div>

        <div class="comment__footer">
    <a href="#reply" class="comment__footer-link reply_link" onclick="return comment_show_reply_form(20142594 )">Ответить</a>


</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-4" id="reply_comments_20142594">  <li class="content-list__item content-list__item_comment js-comment " rel="20143672">
    
    <span class="parent_id" data-parent_id="20142594"></span>
    <div class="comment" id="comment_20143672">
      <span class="comment__collapse" title="Свернуть/развернуть ветку комментариев" data-id="20143672"></span>
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head comment__head_topic-author comment__head_my-comment " rel="20143672">
          <a href="https://habr.com/ru/users/epishman/" class="user-info user-info_inline" rel="user-popover" data-user-login="epishman">
    <img src="Swift%20%D0%BF%D1%80%D0%BE%D1%82%D0%B8%D0%B2%20Rust%20%E2%80%94%20%D0%B1%D0%B5%D0%BD%D1%87%D0%BC%D0%B0%D1%80%D0%BA%D0%B8%D0%BD%D0%B3%20%D0%BD%D0%B0%20Linux%20%D1%81%20(%D0%BD%D0%B5)%D0%BF%D0%BE%D0%BD%D1%8F%D1%82%D0%BD%D1%8B%D0%BC%20%D1%84%D0%B8%D0%BD%D0%B0%D0%BB%D0%BE%D0%BC%20_%20%D0%A5%D0%B0%D0%B1%D1%80_files/ec0d88c4853c0d36d44bd0526dcfa8d7.png" class="user-info__image-pic user-info__image-pic_small" width="24" height="24">
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">epishman</span>
</a>

          
          <time class="comment__date-time comment__date-time_published">13 мая 2019 в 00:33</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="#comment_20143672" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="20143672" data-action="add" title="Добавить в закладки"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#book"></use></svg></a>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <span class="icon_comment-branch js-comment_tree" data-id="20143672" data-parent_id="20142594" title="Показать ветку комментариев"><svg width="8" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#tree"></use></svg></span>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#comment_20142594" class="icon_comment-arrow-up js-comment_parent" data-id="20143672" data-parent_id="20142594" title="Показать предыдущий комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
    </li>

  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="#comment_20143672" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="20143672" data-parent_id="20142594" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="20143672" data-post-target="450512" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="plus" onclick="comment_vote(this);" title="За свои комментарии голосовать нельзя" disabled="disabled"><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter   js-score" title="Всего голосов 0: ↑0 и ↓0">0</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="За свои комментарии голосовать нельзя" disabled="disabled"><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message ">Я кстати много работал с 
объектами Javascript, и да, они быстрее в разы, если их хранить в 
документной базе в виде именно объектов JS. Даже если это IndexedDB с 
индексами. Но почему-то нет стандарта сериализации, подобного джаве, и 
все пользуют убогий Json/Xml.</div>

        <div class="comment__footer">
    <a href="#reply" class="comment__footer-link reply_link" onclick="return comment_show_reply_form(20143672 )">Ответить</a>


</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-5" id="reply_comments_20143672">  <li class="content-list__item content-list__item_comment js-comment " rel="20144038">
    
    <span class="parent_id" data-parent_id="20143672"></span>
    <div class="comment" id="comment_20144038">
      <span class="comment__collapse" title="Свернуть/развернуть ветку комментариев" data-id="20144038"></span>
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head   " rel="20144038">
          <a href="https://habr.com/ru/users/Yar_Rom/" class="user-info user-info_inline" rel="user-popover" data-user-login="Yar_Rom">
    <svg class="default-image default-image_mini default-image_green" width="24" height="24"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#slug"></use></svg>
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">Yar_Rom</span>
</a>

          
          <time class="comment__date-time comment__date-time_published">13 мая 2019 в 07:22</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="#comment_20144038" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="20144038" data-action="add" title="Добавить в закладки"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#book"></use></svg></a>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <span class="icon_comment-branch js-comment_tree" data-id="20144038" data-parent_id="20143672" title="Показать ветку комментариев"><svg width="8" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#tree"></use></svg></span>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#comment_20143672" class="icon_comment-arrow-up js-comment_parent" data-id="20144038" data-parent_id="20143672" title="Показать предыдущий комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
    </li>

  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="#comment_20144038" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="20144038" data-parent_id="20143672" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="20144038" data-post-target="450512" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="plus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter   js-score" title="Всего голосов 0: ↑0 и ↓0">0</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message ">Так разве JSON не является стандартом сериализации для Javascript?</div>

        <div class="comment__footer">
    <a href="#reply" class="comment__footer-link reply_link" onclick="return comment_show_reply_form(20144038 )">Ответить</a>


</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-6" id="reply_comments_20144038">  <li class="content-list__item content-list__item_comment js-comment " rel="20144160">
    
    <span class="parent_id" data-parent_id="20144038"></span>
    <div class="comment" id="comment_20144160">
      <span class="comment__collapse" title="Свернуть/развернуть ветку комментариев" data-id="20144160"></span>
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head comment__head_topic-author comment__head_my-comment " rel="20144160">
          <a href="https://habr.com/ru/users/epishman/" class="user-info user-info_inline" rel="user-popover" data-user-login="epishman">
    <img src="Swift%20%D0%BF%D1%80%D0%BE%D1%82%D0%B8%D0%B2%20Rust%20%E2%80%94%20%D0%B1%D0%B5%D0%BD%D1%87%D0%BC%D0%B0%D1%80%D0%BA%D0%B8%D0%BD%D0%B3%20%D0%BD%D0%B0%20Linux%20%D1%81%20(%D0%BD%D0%B5)%D0%BF%D0%BE%D0%BD%D1%8F%D1%82%D0%BD%D1%8B%D0%BC%20%D1%84%D0%B8%D0%BD%D0%B0%D0%BB%D0%BE%D0%BC%20_%20%D0%A5%D0%B0%D0%B1%D1%80_files/ec0d88c4853c0d36d44bd0526dcfa8d7.png" class="user-info__image-pic user-info__image-pic_small" width="24" height="24">
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">epishman</span>
</a>

          
          <time class="comment__date-time comment__date-time_published">13 мая 2019 в 08:25</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="#comment_20144160" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="20144160" data-action="add" title="Добавить в закладки"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#book"></use></svg></a>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <span class="icon_comment-branch js-comment_tree" data-id="20144160" data-parent_id="20144038" title="Показать ветку комментариев"><svg width="8" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#tree"></use></svg></span>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#comment_20144038" class="icon_comment-arrow-up js-comment_parent" data-id="20144160" data-parent_id="20144038" title="Показать предыдущий комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
    </li>

  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="#comment_20144160" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="20144160" data-parent_id="20144038" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="20144160" data-post-target="450512" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="plus" onclick="comment_vote(this);" title="За свои комментарии голосовать нельзя" disabled="disabled"><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter   js-score" title="Всего голосов 0: ↑0 и ↓0">0</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="За свои комментарии голосовать нельзя" disabled="disabled"><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message ">Ну так да, но в базе похоже объекты хранятся в более быстром виде, хотя не проверял.</div>

        <div class="comment__footer">
    <a href="#reply" class="comment__footer-link reply_link" onclick="return comment_show_reply_form(20144160 )">Ответить</a>


</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-7" id="reply_comments_20144160"></ul>
  </li>
</ul>
  </li>
  <li class="content-list__item content-list__item_comment js-comment " rel="20146340">
    
    <span class="parent_id" data-parent_id="20143672"></span>
    <div class="comment" id="comment_20146340">
      <span class="comment__collapse" title="Свернуть/развернуть ветку комментариев" data-id="20146340"></span>
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head   " rel="20146340">
          <a href="https://habr.com/ru/users/RomanKerimov/" class="user-info user-info_inline" rel="user-popover" data-user-login="RomanKerimov">
    <svg class="default-image default-image_mini default-image_pink" width="24" height="24"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#slug"></use></svg>
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">RomanKerimov</span>
</a>

          <svg class="icon_comment-edit" title="Комментарий был изменен" width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#pencil"></use></svg>
          <time class="comment__date-time comment__date-time_published">13 мая 2019 в 15:00</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="#comment_20146340" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="20146340" data-action="add" title="Добавить в закладки"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#book"></use></svg></a>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <span class="icon_comment-branch js-comment_tree" data-id="20146340" data-parent_id="20143672" title="Показать ветку комментариев"><svg width="8" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#tree"></use></svg></span>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#comment_20143672" class="icon_comment-arrow-up js-comment_parent" data-id="20146340" data-parent_id="20143672" title="Показать предыдущий комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
    </li>

  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="#comment_20146340" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="20146340" data-parent_id="20143672" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="20146340" data-post-target="450512" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="plus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter   js-score" title="Всего голосов 0: ↑0 и ↓0">0</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message ">В Сўифт есть сериализация в 
бинарник, и если писать на Сўифт и клиент, и сервер, то, я полагаю, без 
проблем можно будет и бинарные данные пересылать через сеть. Подобно 
Джаве и получится, насколько я понял.<br>
Но, да, кросс‐языкового стандарта нет.</div>

        <div class="comment__footer">
    <a href="#reply" class="comment__footer-link reply_link" onclick="return comment_show_reply_form(20146340 )">Ответить</a>


</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-6" id="reply_comments_20146340"></ul>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="content-list__item content-list__item_comment js-comment " rel="20141608">
    
    <span class="parent_id" data-parent_id="20141406"></span>
    <div class="comment" id="comment_20141608">
      <span class="comment__collapse" title="Свернуть/развернуть ветку комментариев" data-id="20141608"></span>
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head   " rel="20141608">
          <a href="https://habr.com/ru/users/tsukanov-as/" class="user-info user-info_inline" rel="user-popover" data-user-login="tsukanov-as">
    <svg class="default-image default-image_mini default-image_green" width="24" height="24"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#slug"></use></svg>
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">tsukanov-as</span>
</a>

          <svg class="icon_comment-edit" title="Комментарий был изменен" width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#pencil"></use></svg>
          <time class="comment__date-time comment__date-time_published">12 мая 2019 в 13:14</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="#comment_20141608" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="20141608" data-action="add" title="Добавить в закладки"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#book"></use></svg></a>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <span class="icon_comment-branch js-comment_tree" data-id="20141608" data-parent_id="20141406" title="Показать ветку комментариев"><svg width="8" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#tree"></use></svg></span>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#comment_20141406" class="icon_comment-arrow-up js-comment_parent" data-id="20141608" data-parent_id="20141406" title="Показать предыдущий комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
    </li>

  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="#comment_20141608" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="20141608" data-parent_id="20141406" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="20141608" data-post-target="450512" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="plus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter   js-score" title="Всего голосов 0: ↑0 и ↓0">0</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message ">У меня 1.3 сек. против 1.6 сек. на LuaJit<br>
Правда оно не переварило файл со скобками внутри строк.<br>
<br>
ps Теперь интересно быстрее плюсы или нет. Я их на винде не смог собрать</div>

        <div class="comment__footer">
    <a href="#reply" class="comment__footer-link reply_link" onclick="return comment_show_reply_form(20141608 )">Ответить</a>


</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-1" id="reply_comments_20141608">  <li class="content-list__item content-list__item_comment js-comment " rel="20142028">
    
    <span class="parent_id" data-parent_id="20141608"></span>
    <div class="comment" id="comment_20142028">
      <span class="comment__collapse" title="Свернуть/развернуть ветку комментариев" data-id="20142028"></span>
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head   " rel="20142028">
          <a href="https://habr.com/ru/users/twinklede/" class="user-info user-info_inline" rel="user-popover" data-user-login="twinklede">
    <svg class="default-image default-image_mini default-image_pink" width="24" height="24"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#slug"></use></svg>
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">twinklede</span>
</a>

          
          <time class="comment__date-time comment__date-time_published">12 мая 2019 в 15:25</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="#comment_20142028" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="20142028" data-action="add" title="Добавить в закладки"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#book"></use></svg></a>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <span class="icon_comment-branch js-comment_tree" data-id="20142028" data-parent_id="20141608" title="Показать ветку комментариев"><svg width="8" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#tree"></use></svg></span>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#comment_20141608" class="icon_comment-arrow-up js-comment_parent" data-id="20142028" data-parent_id="20141608" title="Показать предыдущий комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
    </li>

  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="#comment_20142028" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="20142028" data-parent_id="20141608" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="20142028" data-post-target="450512" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="plus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter   js-score" title="Всего голосов 0: ↑0 и ↓0">0</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message ">real 0m1,242s — luajit<br>
real 0m1,611s — rust(старый)<br>
real 0m0,963s — rust(новый)<br>
У вас:<br>
1.6 — luajit<br>
1.3 — rust(новый)<br>
<br>
1.288 — коэффициент между нами.<br>
Если поделить ваши результаты на коэффициент, то мы получим 1sec(для rust новый). Что соотносится с моими измерениями.<br>
<br>
Версия С++ у вас должна выполнятся примерно 0.71sec. Rust(старый) должна выполняться примерно 2sec.<br>
<br>
<blockquote>Я их на винде не смог собрать</blockquote><br>
Я адаптирую код под gcc8.<br></div>

        <div class="comment__footer">
    <a href="#reply" class="comment__footer-link reply_link" onclick="return comment_show_reply_form(20142028 )">Ответить</a>


</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-2" id="reply_comments_20142028"></ul>
  </li>
</ul>
  </li>
  <li class="content-list__item content-list__item_comment js-comment " rel="20141990">
    
    <span class="parent_id" data-parent_id="20141406"></span>
    <div class="comment" id="comment_20141990">
      <span class="comment__collapse" title="Свернуть/развернуть ветку комментариев" data-id="20141990"></span>
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head   " rel="20141990">
          <a href="https://habr.com/ru/users/twinklede/" class="user-info user-info_inline" rel="user-popover" data-user-login="twinklede">
    <svg class="default-image default-image_mini default-image_pink" width="24" height="24"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#slug"></use></svg>
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">twinklede</span>
</a>

          
          <time class="comment__date-time comment__date-time_published">12 мая 2019 в 15:12</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="#comment_20141990" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="20141990" data-action="add" title="Добавить в закладки"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#book"></use></svg></a>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <span class="icon_comment-branch js-comment_tree" data-id="20141990" data-parent_id="20141406" title="Показать ветку комментариев"><svg width="8" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#tree"></use></svg></span>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#comment_20141406" class="icon_comment-arrow-up js-comment_parent" data-id="20141990" data-parent_id="20141406" title="Показать предыдущий комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
    </li>

  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="#comment_20141990" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="20141990" data-parent_id="20141406" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="20141990" data-post-target="450512" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="plus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter   js-score" title="Всего голосов 0: ↑0 и ↓0">0</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message "><div class="spoiler"><b class="spoiler_title">Версия без mmap</b><div class="spoiler_text"><code>$ time ./target/release/habr -f 1.json <br>
1.json:<br>
PROCESSED: 1000000 objects in 961.843328ms, 0 errors found<br>
-------------------------------<br>
#0: debt: 910000000<br>
companies: {"Рога и копыта", "Первая коллекторская", "Шестерочка"}<br>
phones: {"789", "788", "123", "234", "2128506", "456"}<br>
-------------------------------<br>
#1: debt: 433200000<br>
companies: {"Казачий спас", "Святой престол"}<br>
phones: {"345678", "666", "234567"}<br>
<br>
real 0m0,963s<br>
user 0m0,958s<br>
sys 0m0,005s</code><br>
</div></div><br>
<br>
<div class="spoiler"><b class="spoiler_title">Версия с mmap</b><div class="spoiler_text"><code>$ time ./target/release/habr -f 1.json <br>
1.json:<br>
PROCESSED: 1000000 objects in 998.797718ms, 0 errors found<br>
-------------------------------<br>
#0: debt: 910000000<br>
companies: {"Рога и копыта", "Первая коллекторская", "Шестерочка"}<br>
phones: {"789", "788", "123", "234", "2128506", "456"}<br>
-------------------------------<br>
#1: debt: 433200000<br>
companies: {"Казачий спас", "Святой престол"}<br>
phones: {"345678", "666", "234567"}<br>
<br>
real 0m1,000s<br>
user 0m0,994s<br>
sys 0m0,006s<br>
</code><br>
</div></div><br>
<br>
<blockquote>У меня она работает немного медленнее.</blockquote><br>
<code>mmap(NULL, 99000002, PROT_READ, MAP_SHARED, 3, 0) = 0x7fd176971000</code><br>
Попробуйте изменить флажки на «как у меня». Здесь mmap нужен не столько 
для скорости, а сколько для уменьшения потребления памяти. PROT_READ + 
MAP_POPULATE он сразу мапит пейджкеш в юзерспейс. Без каких-либо 
аллокация и копирования. В данном случае файл не используется весь, а 
читается последовательно. Эффект с zero-copy и отсутствия раздувания 
памяти будет заметен мало.<br>
<br></div>

        <div class="comment__footer">
    <a href="#reply" class="comment__footer-link reply_link" onclick="return comment_show_reply_form(20141990 )">Ответить</a>


</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-1" id="reply_comments_20141990">  <li class="content-list__item content-list__item_comment js-comment " rel="20142152">
    
    <span class="parent_id" data-parent_id="20141990"></span>
    <div class="comment" id="comment_20142152">
      <span class="comment__collapse" title="Свернуть/развернуть ветку комментариев" data-id="20142152"></span>
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head   " rel="20142152">
          <a href="https://habr.com/ru/users/red75prim/" class="user-info user-info_inline" rel="user-popover" data-user-login="red75prim">
    <svg class="default-image default-image_mini default-image_lilac" width="24" height="24"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#slug"></use></svg>
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">red75prim</span>
</a>

          <svg class="icon_comment-edit" title="Комментарий был изменен" width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#pencil"></use></svg>
          <time class="comment__date-time comment__date-time_published">12 мая 2019 в 16:09</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="#comment_20142152" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="20142152" data-action="add" title="Добавить в закладки"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#book"></use></svg></a>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <span class="icon_comment-branch js-comment_tree" data-id="20142152" data-parent_id="20141990" title="Показать ветку комментариев"><svg width="8" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#tree"></use></svg></span>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#comment_20141990" class="icon_comment-arrow-up js-comment_parent" data-id="20142152" data-parent_id="20141990" title="Показать предыдущий комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
    </li>

  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="#comment_20142152" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="20142152" data-parent_id="20141990" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="20142152" data-post-target="450512" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="plus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter   js-score" title="Всего голосов 0: ↑0 и ↓0">0</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message "><p>Да, там можно много чего 
ускорить. Отказаться от валидации utf-8 как в С++ версии (~10%), 
использовать платформо-специфичные оптимизации для mmap (я использовал 
кросплатформенный memmap), использовать serde_json в режиме парсинга, а 
не десериализации и т.п. Может быть позже займусь.</p></div>

        <div class="comment__footer">
    <a href="#reply" class="comment__footer-link reply_link" onclick="return comment_show_reply_form(20142152 )">Ответить</a>


</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-2" id="reply_comments_20142152">  <li class="content-list__item content-list__item_comment js-comment " rel="20142386">
    
    <span class="parent_id" data-parent_id="20142152"></span>
    <div class="comment" id="comment_20142386">
      <span class="comment__collapse" title="Свернуть/развернуть ветку комментариев" data-id="20142386"></span>
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head comment__head_topic-author comment__head_my-comment " rel="20142386">
          <a href="https://habr.com/ru/users/epishman/" class="user-info user-info_inline" rel="user-popover" data-user-login="epishman">
    <img src="Swift%20%D0%BF%D1%80%D0%BE%D1%82%D0%B8%D0%B2%20Rust%20%E2%80%94%20%D0%B1%D0%B5%D0%BD%D1%87%D0%BC%D0%B0%D1%80%D0%BA%D0%B8%D0%BD%D0%B3%20%D0%BD%D0%B0%20Linux%20%D1%81%20(%D0%BD%D0%B5)%D0%BF%D0%BE%D0%BD%D1%8F%D1%82%D0%BD%D1%8B%D0%BC%20%D1%84%D0%B8%D0%BD%D0%B0%D0%BB%D0%BE%D0%BC%20_%20%D0%A5%D0%B0%D0%B1%D1%80_files/ec0d88c4853c0d36d44bd0526dcfa8d7.png" class="user-info__image-pic user-info__image-pic_small" width="24" height="24">
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">epishman</span>
</a>

          <svg class="icon_comment-edit" title="Комментарий был изменен" width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#pencil"></use></svg>
          <time class="comment__date-time comment__date-time_published">12 мая 2019 в 17:31</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="#comment_20142386" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="20142386" data-action="add" title="Добавить в закладки"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#book"></use></svg></a>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <span class="icon_comment-branch js-comment_tree" data-id="20142386" data-parent_id="20142152" title="Показать ветку комментариев"><svg width="8" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#tree"></use></svg></span>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#comment_20142152" class="icon_comment-arrow-up js-comment_parent" data-id="20142386" data-parent_id="20142152" title="Показать предыдущий комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
    </li>

  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="#comment_20142386" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="20142386" data-parent_id="20142152" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="20142386" data-post-target="450512" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="plus" onclick="comment_vote(this);" title="За свои комментарии голосовать нельзя" disabled="disabled"><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter   js-score" title="Всего голосов 0: ↑0 и ↓0">0</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="За свои комментарии голосовать нельзя" disabled="disabled"><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message ">Я тут многопоточку написал, на 4-х ядрах она точно разделает сишку, а если еще Ваши патчи накатить — такъ победимъ :)<br>
<a href="https://github.com/epishman/habr_samples/blob/master/jsonparse/main.rs">github.com/epishman/habr_samples/blob/master/jsonparse/main.rs</a></div>

        <div class="comment__footer">
    <a href="#reply" class="comment__footer-link reply_link" onclick="return comment_show_reply_form(20142386 )">Ответить</a>


</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-3" id="reply_comments_20142386">  <li class="content-list__item content-list__item_comment js-comment " rel="20146720">
    
    <span class="parent_id" data-parent_id="20142386"></span>
    <div class="comment" id="comment_20146720">
      <span class="comment__collapse" title="Свернуть/развернуть ветку комментариев" data-id="20146720"></span>
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head   " rel="20146720">
          <a href="https://habr.com/ru/users/red75prim/" class="user-info user-info_inline" rel="user-popover" data-user-login="red75prim">
    <svg class="default-image default-image_mini default-image_lilac" width="24" height="24"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#slug"></use></svg>
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">red75prim</span>
</a>

          
          <time class="comment__date-time comment__date-time_published">13 мая 2019 в 15:56</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="#comment_20146720" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="20146720" data-action="add" title="Добавить в закладки"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#book"></use></svg></a>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <span class="icon_comment-branch js-comment_tree" data-id="20146720" data-parent_id="20142386" title="Показать ветку комментариев"><svg width="8" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#tree"></use></svg></span>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#comment_20142386" class="icon_comment-arrow-up js-comment_parent" data-id="20146720" data-parent_id="20142386" title="Показать предыдущий комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
    </li>

  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="#comment_20146720" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="20146720" data-parent_id="20142386" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="20146720" data-post-target="450512" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="plus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter   js-score" title="Всего голосов 0: ↑0 и ↓0">0</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message "><p><a href="https://gist.github.com/red75prime/b19c5cb369ee12a1ccfe8b6649b06647">https://gist.github.com/red75prime/b19c5cb369ee12a1ccfe8b6649b06647</a></p><br>
<p>Добавил параллелизм (воспользовался вашим <code>merge_result</code>), исключил лишнее выделение памяти при вставках в <code>HashSet</code>, <code>HashMap</code>, добавил обработку кавычек.</p><br>
<p>Результаты такие (~650ms C++, ~260ms Rust):</p><br>
<pre><code class="plaintext hljs">red75:/mnt/d/git/habr1$ time target/release/habr1 -f 1.json
[...]
real    0m0.270s
user    0m1.219s
sys     0m0.047s
red75:/mnt/d/git/habr1$ time ../habr2_cpp/a.out 1.json
[...]
real    0m0.666s
user    0m0.422s
sys     0m0.172s
red75:/mnt/d/git/habr1$ time ../habr2_cpp/a.out 1.json
[...]
real    0m0.653s
user    0m0.453s
sys     0m0.188s
red75:/mnt/d/git/habr1$ time target/release/habr1 -f 1.json
[...]
real    0m0.250s
user    0m1.156s
sys     0m0.031s
red75:/mnt/d/git/habr1$ time target/release/habr1 -f 1.json
[...]
real    0m0.269s
user    0m1.219s
sys     0m0.063s
red75:/mnt/d/git/habr1$ time ../habr2_cpp/a.out 1.json
[...]
real    0m0.657s
user    0m0.484s
sys     0m0.156s

red75:/mnt/d/git/habr1$ /usr/bin/time -v target/release/habr1 -f 1.json
[...]
        Command being timed: "target/release/habr1 -f 1.json"
        User time (seconds): 1.15
        System time (seconds): 0.04
        Percent of CPU this job got: 464%
        Elapsed (wall clock) time (h:mm:ss or m:ss): 0:00.25
        Average shared text size (kbytes): 0
        Average unshared data size (kbytes): 0
        Average stack size (kbytes): 0
        Average total size (kbytes): 0
        Maximum resident set size (kbytes): 98360
        Average resident set size (kbytes): 0
        Major (requiring I/O) page faults: 0
        Minor (reclaiming a frame) page faults: 24697
        Voluntary context switches: 0
        Involuntary context switches: 0
        Swaps: 0
        File system inputs: 0
        File system outputs: 0
        Socket messages sent: 0
        Socket messages received: 0
        Signals delivered: 0
        Page size (bytes): 4096
        Exit status: 0
red75:/mnt/d/git/habr1$ /usr/bin/time -v ../habr2_cpp/a.out 1.json
[...]
        Command being timed: "../habr2_cpp/a.out 1.json"
        User time (seconds): 0.48
        System time (seconds): 0.15
        Percent of CPU this job got: 97%
        Elapsed (wall clock) time (h:mm:ss or m:ss): 0:00.65
        Average shared text size (kbytes): 0
        Average unshared data size (kbytes): 0
        Average stack size (kbytes): 0
        Average total size (kbytes): 0
        Maximum resident set size (kbytes): 266076
        Average resident set size (kbytes): 0
        Major (requiring I/O) page faults: 0
        Minor (reclaiming a frame) page faults: 66704
        Voluntary context switches: 0
        Involuntary context switches: 0
        Swaps: 0
        File system inputs: 0
        File system outputs: 0
        Socket messages sent: 0
        Socket messages received: 0
        Signals delivered: 0
        Page size (bytes): 4096
        Exit status: 0</code></pre></div>

        <div class="comment__footer">
    <a href="#reply" class="comment__footer-link reply_link" onclick="return comment_show_reply_form(20146720 )">Ответить</a>


</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-4" id="reply_comments_20146720">  <li class="content-list__item content-list__item_comment js-comment " rel="20147194">
    
    <span class="parent_id" data-parent_id="20146720"></span>
    <div class="comment" id="comment_20147194">
      <span class="comment__collapse" title="Свернуть/развернуть ветку комментариев" data-id="20147194"></span>
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head   " rel="20147194">
          <a href="https://habr.com/ru/users/twinklede/" class="user-info user-info_inline" rel="user-popover" data-user-login="twinklede">
    <svg class="default-image default-image_mini default-image_pink" width="24" height="24"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#slug"></use></svg>
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">twinklede</span>
</a>

          
          <time class="comment__date-time comment__date-time_published">13 мая 2019 в 17:23</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="#comment_20147194" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="20147194" data-action="add" title="Добавить в закладки"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#book"></use></svg></a>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <span class="icon_comment-branch js-comment_tree" data-id="20147194" data-parent_id="20146720" title="Показать ветку комментариев"><svg width="8" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#tree"></use></svg></span>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#comment_20146720" class="icon_comment-arrow-up js-comment_parent" data-id="20147194" data-parent_id="20146720" title="Показать предыдущий комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
    </li>

  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="#comment_20147194" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="20147194" data-parent_id="20146720" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="20147194" data-post-target="450512" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="plus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter   js-score" title="Всего голосов 0: ↑0 и ↓0">0</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message ">У меня два замечания. Оно работает неправильно(как минимум оно не читает более чем 4 телефона). Зачем вы сравниваете:<br>
<code>User time (seconds): 1.15<br>
User time (seconds): 0.48</code><br>
Какой в этом смысл?</div>

        <div class="comment__footer">
    <a href="#reply" class="comment__footer-link reply_link" onclick="return comment_show_reply_form(20147194 )">Ответить</a>


</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-5" id="reply_comments_20147194">  <li class="content-list__item content-list__item_comment js-comment " rel="20147232">
    
    <span class="parent_id" data-parent_id="20147194"></span>
    <div class="comment" id="comment_20147232">
      <span class="comment__collapse" title="Свернуть/развернуть ветку комментариев" data-id="20147232"></span>
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head   " rel="20147232">
          <a href="https://habr.com/ru/users/red75prim/" class="user-info user-info_inline" rel="user-popover" data-user-login="red75prim">
    <svg class="default-image default-image_mini default-image_lilac" width="24" height="24"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#slug"></use></svg>
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">red75prim</span>
</a>

          
          <time class="comment__date-time comment__date-time_published">13 мая 2019 в 17:31</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="#comment_20147232" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="20147232" data-action="add" title="Добавить в закладки"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#book"></use></svg></a>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <span class="icon_comment-branch js-comment_tree" data-id="20147232" data-parent_id="20147194" title="Показать ветку комментариев"><svg width="8" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#tree"></use></svg></span>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#comment_20147194" class="icon_comment-arrow-up js-comment_parent" data-id="20147232" data-parent_id="20147194" title="Показать предыдущий комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
    </li>

  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="#comment_20147232" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="20147232" data-parent_id="20147194" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="20147232" data-post-target="450512" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="plus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter   js-score" title="Всего голосов 0: ↑0 и ↓0">0</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message "><p>Хм. На каком входе не читает?</p><br>
<pre><code class="plaintext hljs">red75:/mnt/d/git/habr1$ cat 2.json
[
    {"company":"Первая коллекторская",  "debt": 1200,   "phones": [2128506, 456, 789, "1", 2, 3, 4]},
]
red75:/mnt/d/git/habr1$ time target/release/habr1 -f 2.json
2.json:
PROCESSED: 1 objects in 625.2µs, 0 errors found
-------------------------------
#0: debt: 1200
companies: {"Первая коллекторская"}
phones: {"789", "3", "4", "2128506", "456", "1", "2"}

real    0m0.007s
user    0m0.000s
sys     0m0.000s</code></pre><br>
<p><code>/usr/bin/time</code> там для измерения потребления памяти. Остальное надо было убрать из вывода.</p></div>

        <div class="comment__footer">
    <a href="#reply" class="comment__footer-link reply_link" onclick="return comment_show_reply_form(20147232 )">Ответить</a>


</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-6" id="reply_comments_20147232">  <li class="content-list__item content-list__item_comment js-comment " rel="20147400">
    
    <span class="parent_id" data-parent_id="20147232"></span>
    <div class="comment" id="comment_20147400">
      <span class="comment__collapse" title="Свернуть/развернуть ветку комментариев" data-id="20147400"></span>
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head   " rel="20147400">
          <a href="https://habr.com/ru/users/twinklede/" class="user-info user-info_inline" rel="user-popover" data-user-login="twinklede">
    <svg class="default-image default-image_mini default-image_pink" width="24" height="24"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#slug"></use></svg>
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">twinklede</span>
</a>

          
          <time class="comment__date-time comment__date-time_published">13 мая 2019 в 18:00</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="#comment_20147400" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="20147400" data-action="add" title="Добавить в закладки"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#book"></use></svg></a>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <span class="icon_comment-branch js-comment_tree" data-id="20147400" data-parent_id="20147232" title="Показать ветку комментариев"><svg width="8" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#tree"></use></svg></span>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#comment_20147232" class="icon_comment-arrow-up js-comment_parent" data-id="20147400" data-parent_id="20147232" title="Показать предыдущий комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
    </li>

  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="#comment_20147400" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="20147400" data-parent_id="20147232" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="20147400" data-post-target="450512" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small voting-wjt__button_plus" data-action="plus" onclick="comment_vote(this);" title="Вы проголосовали положительно " disabled="disabled"><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter voting-wjt__counter_positive  js-score" title="Всего голосов +1: ↑1 и ↓0">+1</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="Вы проголосовали положительно , отменить голос нельзя" disabled="disabled"><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message "><blockquote>Хм. На каком входе не читает?</blockquote><br>
<div class="spoiler"><b class="spoiler_title">Сравнение</b><div class="spoiler_text"><code>[<br>
 {"company":"Рога и копыта", "debt": 800, "phones": [123, 234, 456]},<br>
 {"company":"Первая коллекторская", "debt": 1200, "phones": [2128506, 456, 789, 123, 412, 12412]},<br>
 {"company":"Святой престол", "debt": "666", "phones": 666},<br>
 {"company": "Казачий спас", "debt": 1500, "phones": [234567, "345678"], "phone": 666},<br>
 {"company": {"name": "Шестерочка"}, "debt": 2550, "phones": 788, "phone": 789},<br>
]</code><br>
<br>
<code>2.json:<br>
PROCESSED: 5 objects in 169.14µs, 0 errors found<br>
-------------------------------<br>
#0: debt: 4550<br>
companies: {"Первая коллекторская", "Шестерочка", "Рога и копыта"}<br>
phones: {"234", "12412", "123", "2128506", "788", "412", "789", "456"}<br>
-------------------------------<br>
#1: debt: 2166<br>
companies: {"Святой престол", "Казачий спас"}<br>
phones: {"234567", "345678", "666"}</code><br>
<br>
Запустил и уже подумал, что ошибся. Но нет — не ошибся. Оно попросту выдаёт каждый раз разный результат.<br>
<br>
<code>2.json:<br>
PROCESSED: 5 objects in 647.78µs, 0 errors found<br>
-------------------------------<br>
#0: debt: 2166<br>
companies: {"Казачий спас", "Святой престол"}<br>
phones: {"345678", "666", "234567"}<br>
-------------------------------<br>
#1: debt: 3750<br>
companies: {"Шестерочка", "Первая коллекторская"}<br>
phones: {"789", "412", "788", "123", "12412", "2128506", "456"}<br>
-------------------------------<br>
#2: debt: 800<br>
companies: {"Рога и копыта"}<br>
phones: {"123", "234", "456"}</code><br>
</div></div><br>
<br>
<blockquote>/usr/bin/time там для измерения потребления памяти. Остальное надо было убрать из вывода.</blockquote><br>
Дело не в выводе. <br>
<br>
<code>$ time taskset -c 0 ./target/release/habr -f 1.json <br>
1.json:<br>
PROCESSED: 1000000 objects in 825.626717ms, 0 errors found<br>
-------------------------------<br>
#0: debt: 910000000<br>
companies: {"Рога и копыта", "Первая коллекторская", "Шестерочка"}<br>
phones: {"789", "788", "123", "234", "2128506", "456"}<br>
-------------------------------<br>
#1: debt: 433200000<br>
companies: {"Казачий спас", "Святой престол"}<br>
phones: {"345678", "666", "234567"}<br>
<br>
real 0m0,828s<br>
user 0m0,790s<br>
sys 0m0,038s</code><br>
<br>
А в этом. Какой смысл сравнивать однопоточную и многопоточную версию? 
Сравнивайте однопоточные. Хотите сравнить многопоточные? Сравнивайте их.
 <br>
<br>
Да и сравнение идёт крайне наивно, ведь нужно учитывать ещё и cputime. В
 условиях реального применения всегда будут желающие потратить cputime.</div>

        <div class="comment__footer">
    <a href="#reply" class="comment__footer-link reply_link" onclick="return comment_show_reply_form(20147400 )">Ответить</a>


</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-7" id="reply_comments_20147400">  <li class="content-list__item content-list__item_comment js-comment " rel="20147432">
    
    <span class="parent_id" data-parent_id="20147400"></span>
    <div class="comment" id="comment_20147432">
      <span class="comment__collapse" title="Свернуть/развернуть ветку комментариев" data-id="20147432"></span>
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head   " rel="20147432">
          <a href="https://habr.com/ru/users/red75prim/" class="user-info user-info_inline" rel="user-popover" data-user-login="red75prim">
    <svg class="default-image default-image_mini default-image_lilac" width="24" height="24"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#slug"></use></svg>
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">red75prim</span>
</a>

          <svg class="icon_comment-edit" title="Комментарий был изменен" width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#pencil"></use></svg>
          <time class="comment__date-time comment__date-time_published">13 мая 2019 в 18:08</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="#comment_20147432" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="20147432" data-action="add" title="Добавить в закладки"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#book"></use></svg></a>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <span class="icon_comment-branch js-comment_tree" data-id="20147432" data-parent_id="20147400" title="Показать ветку комментариев"><svg width="8" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#tree"></use></svg></span>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#comment_20147400" class="icon_comment-arrow-up js-comment_parent" data-id="20147432" data-parent_id="20147400" title="Показать предыдущий комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
    </li>

  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="#comment_20147432" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="20147432" data-parent_id="20147400" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="20147432" data-post-target="450512" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small voting-wjt__button_plus" data-action="plus" onclick="comment_vote(this);" title="Вы проголосовали положительно " disabled="disabled"><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter voting-wjt__counter_positive  js-score" title="Всего голосов +1: ↑1 и ↓0">+1</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="Вы проголосовали положительно , отменить голос нельзя" disabled="disabled"><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message "><p>Понял. Алгоритм мёржа 
неверный. А однопоточная версия в этом варианте будет медленнее из-за 
валидации utf-8, mmap'а и другого подхода к парсингу. Много переделывать
 надо. Может быть позже.</p><br>
<p>К слову, то, насколько просто можно распараллелить програму, тоже играет свою роль.</p></div>

        <div class="comment__footer">
    <a href="#reply" class="comment__footer-link reply_link" onclick="return comment_show_reply_form(20147432 )">Ответить</a>


</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-8" id="reply_comments_20147432">  <li class="content-list__item content-list__item_comment js-comment " rel="20149094">
    
    <span class="parent_id" data-parent_id="20147432"></span>
    <div class="comment" id="comment_20149094">
      <span class="comment__collapse" title="Свернуть/развернуть ветку комментариев" data-id="20149094"></span>
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head   " rel="20149094">
          <a href="https://habr.com/ru/users/twinklede/" class="user-info user-info_inline" rel="user-popover" data-user-login="twinklede">
    <svg class="default-image default-image_mini default-image_pink" width="24" height="24"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#slug"></use></svg>
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">twinklede</span>
</a>

          
          <time class="comment__date-time comment__date-time_published">14 мая 2019 в 06:14</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="#comment_20149094" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="20149094" data-action="add" title="Добавить в закладки"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#book"></use></svg></a>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <span class="icon_comment-branch js-comment_tree" data-id="20149094" data-parent_id="20147432" title="Показать ветку комментариев"><svg width="8" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#tree"></use></svg></span>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#comment_20147432" class="icon_comment-arrow-up js-comment_parent" data-id="20149094" data-parent_id="20147432" title="Показать предыдущий комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
    </li>

  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="#comment_20149094" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="20149094" data-parent_id="20147432" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="20149094" data-post-target="450512" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="plus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter   js-score" title="Всего голосов 0: ↑0 и ↓0">0</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message "><blockquote>К слову, то, насколько просто можно распараллелить програму, тоже играет свою роль.</blockquote><br>
Ещё важнее то, насколько просто написать оптимальную(если мы говорим про
 оптимальные программы) программу. В одном случае берётся стандартная 
библиотека и просто пишется код «как попало» без каких-то попыток что-то
 оптимизировать. Единственная функция, которая там написана хоть как-то 
адекватно — это main::next. В другом случае требуются замена стандартных
 функций, множество хаков, тюнинга библиотек и прочего. Но даже этого 
недостаточно.<br>
<br>
На тему распараллеливания. Тут всё куда сложнее. В подавляющем 
большинстве случаев попытка распараллелить задачу малоэффективна, либо 
попросту бессмысленна. Подобные мы видим и тут.<br>
<br>
В данном случае распараллеливание достигается за счёт запуска отдельных 
инстансов задачи. Но проблема никуда не уходит. Трупут каждого потока 
так и остался лишь чуть большим от 0.5 от С++.<br>
<br>
Запустить задачи в параллель везде и всюду так же просто, особенно 
используя готовые библиотеки для организации пайпов. Но в данном случае,
 как и в большинстве других, всё упирается в трупут 
парсинг+process_object. И от этого никуда не уйти.<br>
<br>
Если задача ~линейно параллелится, то cputime не должно расти. Если же оно растёт — что-то делается не так.<br></div>

        <div class="comment__footer">
    <a href="#reply" class="comment__footer-link reply_link" onclick="return comment_show_reply_form(20149094 )">Ответить</a>


</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-9" id="reply_comments_20149094">  <li class="content-list__item content-list__item_comment js-comment " rel="20149304">
    
    <span class="parent_id" data-parent_id="20149094"></span>
    <div class="comment" id="comment_20149304">
      <span class="comment__collapse" title="Свернуть/развернуть ветку комментариев" data-id="20149304"></span>
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head   " rel="20149304">
          <a href="https://habr.com/ru/users/red75prim/" class="user-info user-info_inline" rel="user-popover" data-user-login="red75prim">
    <svg class="default-image default-image_mini default-image_lilac" width="24" height="24"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#slug"></use></svg>
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">red75prim</span>
</a>

          <svg class="icon_comment-edit" title="Комментарий был изменен" width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#pencil"></use></svg>
          <time class="comment__date-time comment__date-time_published">14 мая 2019 в 08:27</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="#comment_20149304" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="20149304" data-action="add" title="Добавить в закладки"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#book"></use></svg></a>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <span class="icon_comment-branch js-comment_tree" data-id="20149304" data-parent_id="20149094" title="Показать ветку комментариев"><svg width="8" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#tree"></use></svg></span>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#comment_20149094" class="icon_comment-arrow-up js-comment_parent" data-id="20149304" data-parent_id="20149094" title="Показать предыдущий комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
    </li>

  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="#comment_20149304" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="20149304" data-parent_id="20149094" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="20149304" data-post-target="450512" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="plus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter   js-score" title="Всего голосов 0: ↑0 и ↓0">0</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message "><blockquote>Но проблема никуда не уходит. Трупут каждого потока так и остался лишь чуть большим от 0.5 от С++.</blockquote><p>Раст, как и С++, предполагает, что программист знает что делает. Если написано <code>&amp;str</code>
 — значит программист хочет валидный utf-8, что предполагает 
обязательную валидацию пользовательского ввода. Догадаться, что 
программист хочет максимально быстрый код без валидации, Раст, 
естественно, не может. </p><br>
<p>serde ориентирован на десериализацию в strongly typed персистентные 
структуры, а не на потоковый парсинг. Впрочем, библиотеки для 
максимально быстрого потокового парсинга JSON кажется ещё нет. Вот это —
 проблема, да.</p><br>
<blockquote>Если задача ~линейно параллелится</blockquote><p>Эту задачу 
нетривиально распараллелить линейно. Поэтому приходится тратить время на
 раскидывание миллиона объектов по нескольким потокам (оверхед около 
300нс на объект, но накапливается), вместо того, чтобы разбить файл на 
несколько частей и отдать каждую своему потоку. Скажем есть у нас 
позиция в середине JSON, как вы определите в общем случае откуда 
начинается следующий объект? Придётся писать особый вариант парсинга со 
сканированием назад.</p></div>

        <div class="comment__footer">
    <a href="#reply" class="comment__footer-link reply_link" onclick="return comment_show_reply_form(20149304 )">Ответить</a>


</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-10" id="reply_comments_20149304">  <li class="content-list__item content-list__item_comment js-comment " rel="20149384">
    
    <span class="parent_id" data-parent_id="20149304"></span>
    <div class="comment" id="comment_20149384">
      <span class="comment__collapse" title="Свернуть/развернуть ветку комментариев" data-id="20149384"></span>
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head   " rel="20149384">
          <a href="https://habr.com/ru/users/twinklede/" class="user-info user-info_inline" rel="user-popover" data-user-login="twinklede">
    <svg class="default-image default-image_mini default-image_pink" width="24" height="24"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#slug"></use></svg>
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">twinklede</span>
</a>

          <svg class="icon_comment-edit" title="Комментарий был изменен" width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#pencil"></use></svg>
          <time class="comment__date-time comment__date-time_published">14 мая 2019 в 08:49</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="#comment_20149384" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="20149384" data-action="add" title="Добавить в закладки"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#book"></use></svg></a>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <span class="icon_comment-branch js-comment_tree" data-id="20149384" data-parent_id="20149304" title="Показать ветку комментариев"><svg width="8" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#tree"></use></svg></span>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#comment_20149304" class="icon_comment-arrow-up js-comment_parent" data-id="20149384" data-parent_id="20149304" title="Показать предыдущий комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
    </li>

  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="#comment_20149384" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="20149384" data-parent_id="20149304" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="20149384" data-post-target="450512" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="plus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter  voting-wjt__counter_negative js-score" title="Всего голосов –1: ↑0 и ↓1">–1</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message comment__message_downgrade comment__message_downgrade-1"><blockquote>Раст,
 как и С++, предполагает, что программист знает что делает. Если 
написано &amp;str — значит программист хочет валидный utf-8, что 
предполагает обязательную валидацию пользовательского ввода. Догадаться,
 что программист хочет максимально быстрый код, Раст, естественно, не 
может.</blockquote><br>
Не совсем понимаю причём тут пользовательский ввод, когда читаются 
бинарные данные из файла. Если мне понадобиться валидация utf-8 — я 
вопрошу её явно. Раст ведь декларирует zero-cost-абстракции? <br>
<br>
Так же, я говорил об ином. Для того, что-бы догнать наивный, кое-как 
написанный С++-код приходится что-то оптимизировать, хакать, страдать. И
 даже всего этого недостаточно.<br>
<br>
<blockquote>serde ориентирован на десериализацию в strongly typed персистентные структуры, а не на потоковый парсинг. </blockquote><br>
У меня используется парсер в dom-режиме. В sax-режиме этот парсер куда 
быстрее, но до «максимально» и даже «быстрого» ему очень далеко. Не вижу
 смысла заниматься оптимизацией изначального тупикового подхода. <br>
<br>
<blockquote>Эту задачу нетривиально распараллелить линейно. Поэтому 
приходится тратить время на раскидывание миллиона объектов по нескольким
 потокам (оверхед около 300нс на объект, но накапливается), вместо того,
 чтобы разбить файл на несколько частей и отдать каждую своему потоку.</blockquote><br>
Всё это не имеет отношения к проблеме. У вас базовая логика почти в 
2раза медленнее. Это значит, что абсолютно неважно какой там оверхед и 
как сложно что-то распараллелить.<br>
<br>
Есть базовое обстоятельство. Трупут парсинга объекта и его обработки 
почти в два раза ниже. В этот самый трупут всё и упирается. На сколько 
угодно потоков этот трупут можно множить, но он останется лишь в районе 
0.5. Ведь у С++ есть столько же потоков.<br>
<br>
Это просто фокус. Работает он следующим образом. Есть трупут на одном 
потоке у С++ — это 1.0. Есть раст, у него трупут на потоке 0.5. Есть 
некий коэффициент(какой угодно, но положительный). Из этого следует, что
 добавляя потоки(один, два, десять) — мы когда-нибудь дойдём до этой 
единице.<br>
<br>
Если же взять одинаковое кол-во потоков, одинаковый коэффициент роста за
 поток, то первый случай будет всегда быстрее. И быстрее в те самые 2 
раза.<br></div>

        <div class="comment__footer">
    <a href="#reply" class="comment__footer-link reply_link" onclick="return comment_show_reply_form(20149384 )">Ответить</a>


</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-11" id="reply_comments_20149384">  <li class="content-list__item content-list__item_comment js-comment " rel="20150072">
    
    <span class="parent_id" data-parent_id="20149384"></span>
    <div class="comment" id="comment_20150072">
      <span class="comment__collapse" title="Свернуть/развернуть ветку комментариев" data-id="20150072"></span>
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head   " rel="20150072">
          <a href="https://habr.com/ru/users/red75prim/" class="user-info user-info_inline" rel="user-popover" data-user-login="red75prim">
    <svg class="default-image default-image_mini default-image_lilac" width="24" height="24"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#slug"></use></svg>
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">red75prim</span>
</a>

          
          <time class="comment__date-time comment__date-time_published">14 мая 2019 в 11:22</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="#comment_20150072" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="20150072" data-action="add" title="Добавить в закладки"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#book"></use></svg></a>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <span class="icon_comment-branch js-comment_tree" data-id="20150072" data-parent_id="20149384" title="Показать ветку комментариев"><svg width="8" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#tree"></use></svg></span>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#comment_20149384" class="icon_comment-arrow-up js-comment_parent" data-id="20150072" data-parent_id="20149384" title="Показать предыдущий комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
    </li>

  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="#comment_20150072" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="20150072" data-parent_id="20149384" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="20150072" data-post-target="450512" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="plus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter voting-wjt__counter_positive  js-score" title="Всего голосов +2: ↑2 и ↓0">+2</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message "><blockquote>Раст ведь декларирует zero-cost-абстракции? </blockquote><p>И это zero-cost. Чтобы получить гарантированно валидный <code>String</code> из неконтролируемых внешних данных, нужно эти данные валидировать. Если программист знает, что данные точно валидны, он пишет <code>unsafe { String::from_utf8_unchecked(...) }</code> и получает UB, если данные оказываются не валидны. Или использует <code>Vec&lt;u8&gt;</code>, если нужно работать с любыми данными. Как я и говорил, нужно знать, что делаешь. Здесь бы больше подошёл <code>Vec&lt;u8&gt;</code> (возможность повреждения файла всё-таки исключать нельзя), но код начинал писать не я.</p><br>
<blockquote>У вас базовая логика почти в 2раза медленнее.</blockquote><p>Это не базовая логика. Это — 1) валидация utf-8, 2) моя ошибка с десериализацией <code>Cow</code> (значение всегда копировалось), 3) оверхед на работу с потоками.</p><br>
<p>Вот тут я всё это убрал: <a href="https://gist.github.com/red75prime/7b2f5cb45fae81a44ac9451ae9dece00">https://gist.github.com/red75prime/7b2f5cb45fae81a44ac9451ae9dece00</a></p><br>
<p>Заодно добавил кастомный аллокатор, чтобы немного отыграть проигрыш 
на флагах mmap. На моей машине версия с аллокатором обгоняет ваш код на 
70ms, без аллокатора на 50ms.</p></div>

        <div class="comment__footer">
    <a href="#reply" class="comment__footer-link reply_link" onclick="return comment_show_reply_form(20150072 )">Ответить</a>


</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-12" id="reply_comments_20150072">  <li class="content-list__item content-list__item_comment js-comment " rel="20150316">
    
    <span class="parent_id" data-parent_id="20150072"></span>
    <div class="comment" id="comment_20150316">
      <span class="comment__collapse" title="Свернуть/развернуть ветку комментариев" data-id="20150316"></span>
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head   " rel="20150316">
          <a href="https://habr.com/ru/users/red75prim/" class="user-info user-info_inline" rel="user-popover" data-user-login="red75prim">
    <svg class="default-image default-image_mini default-image_lilac" width="24" height="24"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#slug"></use></svg>
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">red75prim</span>
</a>

          
          <time class="comment__date-time comment__date-time_published">14 мая 2019 в 11:52</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="#comment_20150316" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="20150316" data-action="add" title="Добавить в закладки"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#book"></use></svg></a>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <span class="icon_comment-branch js-comment_tree" data-id="20150316" data-parent_id="20150072" title="Показать ветку комментариев"><svg width="8" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#tree"></use></svg></span>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#comment_20150072" class="icon_comment-arrow-up js-comment_parent" data-id="20150316" data-parent_id="20150072" title="Показать предыдущий комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
    </li>

  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="#comment_20150316" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="20150316" data-parent_id="20150072" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="20150316" data-post-target="450512" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="plus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter   js-score" title="Всего голосов 0: ↑0 и ↓0">0</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message "><p>ДОПОЛНЕНИЕ: Поправил баг (ну не работал я с serde никогда в zero-copy режиме), время выполнения поднялось на 50ms</p></div>

        <div class="comment__footer">
    <a href="#reply" class="comment__footer-link reply_link" onclick="return comment_show_reply_form(20150316 )">Ответить</a>


</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-13" id="reply_comments_20150316">  <li class="content-list__item content-list__item_comment js-comment " rel="20150404">
    
    <span class="parent_id" data-parent_id="20150316"></span>
    <div class="comment" id="comment_20150404">
      <span class="comment__collapse" title="Свернуть/развернуть ветку комментариев" data-id="20150404"></span>
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head   " rel="20150404">
          <a href="https://habr.com/ru/users/a1ien_n3t/" class="user-info user-info_inline" rel="user-popover" data-user-login="a1ien_n3t">
    <svg class="default-image default-image_mini default-image_green" width="24" height="24"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#slug"></use></svg>
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">a1ien_n3t</span>
</a>

          
          <time class="comment__date-time comment__date-time_published">14 мая 2019 в 12:02</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="#comment_20150404" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="20150404" data-action="add" title="Добавить в закладки"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#book"></use></svg></a>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <span class="icon_comment-branch js-comment_tree" data-id="20150404" data-parent_id="20150316" title="Показать ветку комментариев"><svg width="8" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#tree"></use></svg></span>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#comment_20150316" class="icon_comment-arrow-up js-comment_parent" data-id="20150404" data-parent_id="20150316" title="Показать предыдущий комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
    </li>

  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="#comment_20150404" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="20150404" data-parent_id="20150316" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="20150404" data-post-target="450512" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="plus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter   js-score" title="Всего голосов 0: ↑0 и ↓0">0</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message ">Еще кстаи можно contains_key земенить на entry и уменьшить расчет хеша.</div>

        <div class="comment__footer">
    <a href="#reply" class="comment__footer-link reply_link" onclick="return comment_show_reply_form(20150404 )">Ответить</a>


</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-14" id="reply_comments_20150404">  <li class="content-list__item content-list__item_comment js-comment " rel="20150444">
    
    <span class="parent_id" data-parent_id="20150404"></span>
    <div class="comment" id="comment_20150444">
      <span class="comment__collapse" title="Свернуть/развернуть ветку комментариев" data-id="20150444"></span>
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head   " rel="20150444">
          <a href="https://habr.com/ru/users/red75prim/" class="user-info user-info_inline" rel="user-popover" data-user-login="red75prim">
    <svg class="default-image default-image_mini default-image_lilac" width="24" height="24"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#slug"></use></svg>
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">red75prim</span>
</a>

          
          <time class="comment__date-time comment__date-time_published">14 мая 2019 в 12:07</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="#comment_20150444" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="20150444" data-action="add" title="Добавить в закладки"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#book"></use></svg></a>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <span class="icon_comment-branch js-comment_tree" data-id="20150444" data-parent_id="20150404" title="Показать ветку комментариев"><svg width="8" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#tree"></use></svg></span>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#comment_20150404" class="icon_comment-arrow-up js-comment_parent" data-id="20150444" data-parent_id="20150404" title="Показать предыдущий комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
    </li>

  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="#comment_20150444" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="20150444" data-parent_id="20150404" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="20150444" data-post-target="450512" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="plus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter   js-score" title="Всего голосов 0: ↑0 и ↓0">0</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message "><p>Не, там смысл в том, что сначала используем ссылку, а потом, если надо, делаем <code>to_owned()</code>. <code>entry()</code> требует owned значение.</p></div>

        <div class="comment__footer">
    <a href="#reply" class="comment__footer-link reply_link" onclick="return comment_show_reply_form(20150444 )">Ответить</a>


</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-15" id="reply_comments_20150444"></ul>
  </li>
</ul>
  </li>
  <li class="content-list__item content-list__item_comment js-comment " rel="20150654">
    
    <span class="parent_id" data-parent_id="20150316"></span>
    <div class="comment" id="comment_20150654">
      <span class="comment__collapse" title="Свернуть/развернуть ветку комментариев" data-id="20150654"></span>
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head   " rel="20150654">
          <a href="https://habr.com/ru/users/red75prim/" class="user-info user-info_inline" rel="user-popover" data-user-login="red75prim">
    <svg class="default-image default-image_mini default-image_lilac" width="24" height="24"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#slug"></use></svg>
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">red75prim</span>
</a>

          <svg class="icon_comment-edit" title="Комментарий был изменен" width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#pencil"></use></svg>
          <time class="comment__date-time comment__date-time_published">14 мая 2019 в 12:26</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="#comment_20150654" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="20150654" data-action="add" title="Добавить в закладки"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#book"></use></svg></a>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <span class="icon_comment-branch js-comment_tree" data-id="20150654" data-parent_id="20150316" title="Показать ветку комментариев"><svg width="8" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#tree"></use></svg></span>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#comment_20150316" class="icon_comment-arrow-up js-comment_parent" data-id="20150654" data-parent_id="20150316" title="Показать предыдущий комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
    </li>

  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="#comment_20150654" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="20150654" data-parent_id="20150316" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="20150654" data-post-target="450512" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="plus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter   js-score" title="Всего голосов 0: ↑0 и ↓0">0</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message "><p>ДОПОЛНЕНИЕ2: если убрать 
проверку на '{}' внутри строк, как в С++ коде, c которым я сравниваю, то
 время выполнения падает на 50ms.</p></div>

        <div class="comment__footer">
    <a href="#reply" class="comment__footer-link reply_link" onclick="return comment_show_reply_form(20150654 )">Ответить</a>


</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-14" id="reply_comments_20150654"></ul>
  </li>
  <li class="content-list__item content-list__item_comment js-comment " rel="20152000">
    
    <span class="parent_id" data-parent_id="20150316"></span>
    <div class="comment" id="comment_20152000">
      <span class="comment__collapse" title="Свернуть/развернуть ветку комментариев" data-id="20152000"></span>
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head   " rel="20152000">
          <a href="https://habr.com/ru/users/twinklede/" class="user-info user-info_inline" rel="user-popover" data-user-login="twinklede">
    <svg class="default-image default-image_mini default-image_pink" width="24" height="24"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#slug"></use></svg>
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">twinklede</span>
</a>

          
          <time class="comment__date-time comment__date-time_published">14 мая 2019 в 16:12</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="#comment_20152000" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="20152000" data-action="add" title="Добавить в закладки"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#book"></use></svg></a>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <span class="icon_comment-branch js-comment_tree" data-id="20152000" data-parent_id="20150316" title="Показать ветку комментариев"><svg width="8" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#tree"></use></svg></span>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#comment_20150316" class="icon_comment-arrow-up js-comment_parent" data-id="20152000" data-parent_id="20150316" title="Показать предыдущий комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
    </li>

  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="#comment_20152000" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="20152000" data-parent_id="20150316" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="20152000" data-post-target="450512" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="plus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter  voting-wjt__counter_negative js-score" title="Всего голосов –5: ↑0 и ↓5">–5</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message comment__message_downgrade comment__message_downgrade-5"><blockquote>Поправил баг (ну не работал я с serde никогда в zero-copy режиме), время выполнения поднялось на 50ms</blockquote><br>
Я в очередной раз спрошу. Зачем? История аналогичная потоком. Вы 
пытаетесь похакать, добавить jemalloc, выкинуть стандартную библиотеку, 
добавить «zero-copy режиме». И все эти ухищрения нужны для того, что-бы 
ещё даже не догнать С++-версию без всего это.<br>
<br>
Зачем вы сравнивали однопоточную и многопоточную версию? Думали, что я 
не добавлю многопоточную? Зачем вы занимаетесь этим шаманством? Вы 
думаете, я не добавлю его в С++-код? К чему эта пыль в глаза?</div>

        <div class="comment__footer">
    <a href="#reply" class="comment__footer-link reply_link" onclick="return comment_show_reply_form(20152000 )">Ответить</a>


</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-14" id="reply_comments_20152000">  <li class="content-list__item content-list__item_comment js-comment " rel="20152034">
    
    <span class="parent_id" data-parent_id="20152000"></span>
    <div class="comment" id="comment_20152034">
      <span class="comment__collapse" title="Свернуть/развернуть ветку комментариев" data-id="20152034"></span>
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head   " rel="20152034">
          <a href="https://habr.com/ru/users/red75prim/" class="user-info user-info_inline" rel="user-popover" data-user-login="red75prim">
    <svg class="default-image default-image_mini default-image_lilac" width="24" height="24"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#slug"></use></svg>
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">red75prim</span>
</a>

          <svg class="icon_comment-edit" title="Комментарий был изменен" width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#pencil"></use></svg>
          <time class="comment__date-time comment__date-time_published">14 мая 2019 в 16:18</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="#comment_20152034" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="20152034" data-action="add" title="Добавить в закладки"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#book"></use></svg></a>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <span class="icon_comment-branch js-comment_tree" data-id="20152034" data-parent_id="20152000" title="Показать ветку комментариев"><svg width="8" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#tree"></use></svg></span>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#comment_20152000" class="icon_comment-arrow-up js-comment_parent" data-id="20152034" data-parent_id="20152000" title="Показать предыдущий комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
    </li>

  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="#comment_20152034" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="20152034" data-parent_id="20152000" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="20152034" data-post-target="450512" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="plus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter voting-wjt__counter_positive  js-score" title="Всего голосов +2: ↑2 и ↓0">+2</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message "><p>Не понял. В статье 
представлена достаточно наивная реализация решения. Производительность 
Rust кода теоретически не должна отличаться от C++. Я разбираюсь почему 
она отличается. Какое ещё шаманство?</p><br>
<blockquote>Думали, что я не добавлю многопоточную?</blockquote><p>Эм, а что и многопоточная версия есть? </p><br>
<blockquote>К чему эта пыль в глаза?</blockquote><p>У вас всё в порядке? Обычное желание выжать максимум из кода. Не надо придумывать какие-то странные мотивации.</p></div>

        <div class="comment__footer">
    <a href="#reply" class="comment__footer-link reply_link" onclick="return comment_show_reply_form(20152034 )">Ответить</a>


</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-15" id="reply_comments_20152034">  <li class="content-list__item content-list__item_comment js-comment " rel="20152158">
    
    <span class="parent_id" data-parent_id="20152034"></span>
    <div class="comment" id="comment_20152158">
      <span class="comment__collapse" title="Свернуть/развернуть ветку комментариев" data-id="20152158"></span>
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head   " rel="20152158">
          <a href="https://habr.com/ru/users/twinklede/" class="user-info user-info_inline" rel="user-popover" data-user-login="twinklede">
    <svg class="default-image default-image_mini default-image_pink" width="24" height="24"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#slug"></use></svg>
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">twinklede</span>
</a>

          
          <time class="comment__date-time comment__date-time_published">14 мая 2019 в 16:39</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="#comment_20152158" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="20152158" data-action="add" title="Добавить в закладки"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#book"></use></svg></a>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <span class="icon_comment-branch js-comment_tree" data-id="20152158" data-parent_id="20152034" title="Показать ветку комментариев"><svg width="8" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#tree"></use></svg></span>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#comment_20152034" class="icon_comment-arrow-up js-comment_parent" data-id="20152158" data-parent_id="20152034" title="Показать предыдущий комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
    </li>

  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="#comment_20152158" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="20152158" data-parent_id="20152034" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="20152158" data-post-target="450512" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="plus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter  voting-wjt__counter_negative js-score" title="Всего голосов –3: ↑0 и ↓3">–3</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message comment__message_downgrade comment__message_downgrade-3"><blockquote>В статье представлена достаточно наивная реализация решения.</blockquote><br>
Я предоставил такую же наивную реализацию на С++.<br>
<br>
<blockquote>Производительность Rust кода теоретически не должна отличаться от C++. </blockquote><br>
Нужно сравнивать равные решения, иначе это всё не имеет смысла. Вы 
пытаетесь догнать наивную С++-версию. Сравнивайте с наивным rust-кодом. 
Вы же что делаете? Вы добавляете хаки, оптимизации и прочее, что не 
будет использоваться в обыденной жизни. В обыденной жизни будет 
использоваться базовый подход.<br>
<br>
Далее, вы ускоряете версию в которой проблем меньше, чем у С++. Вы 
пытаетесь добавить zero-copy парсинг, убрать копирование, добавить более
 оптимальные хешмапы, cow и прочее. Но проблема никуда не делал — это 
сравнение глупое. Ведь всё это(и даже больше) есть в С++-коде и я там же
 могу этим заняться. И если вы даже наивную С++ до сих пор не догнали, 
то что будет в том случае? В случая, когда она будете не наивная.<br>
<br>
Нужно всегда сравнивать что-то в равных условиях. Подобный вашему подход
 работает в ситуации сравнению с тем же jua. jua не может во всё это и 
на этом можно играть.<br>
<br>
<blockquote>Я разбираюсь почему она отличается.</blockquote><br>
Ну нет же. В С++ есть zero-copy-парсинг? Нету. Там даже поточного 
парсинга нету. Задача «понять почему отличается» — это не пытаться найти
 другой подход и как-то догнать. Задача понять заключается в том, что-бы
 узнать. Почему в одном и том же подходе оно отличается. Почему С++ без 
всего этого работает быстро, причём работает быстрее даже самой 
оптимизированной вашей версии. <br>
<br>
<blockquote>Эм, а что и многопоточная версия есть?</blockquote><br>
Да. Я специально после написания этой ветке пошел и сделал его.<br>
<br>
<blockquote>У вас всё в порядке? Обычное желание выжать максимум из кода. Не надо придумывать какие-то странные мотивации.</blockquote><br>
Вы не выжимаете максимум — вы сравниваете. Сравниваете неадекватно. 
Сравниваете одно/много-поточные версии. Сравниваете наивные и не-наивные
 решения.<br>
<br>
Выше вы писали, что хотите разобраться. Сейчас вы пишите, что вы просто 
пытаетесь догнать любыми методами. И в этом проблема. Все эти ухищрения,
 в том числи и многопоточность, можно добавить в С++. Это вам никак не 
поможет разобраться.<br>
<br>
Это проблема вашего подхода. Обозначу проблему ещё раз. Нет смысла 
делать быстрее за счёт изменения подхода применяемого в С++. Вы этим 
ничего ничего не добиваетесь и причина простая. Всё это подходы можно 
точно так же добавить в С++ и они на него повлияют точно так же, даже 
больше.<br>
<br></div>

        <div class="comment__footer">
    <a href="#reply" class="comment__footer-link reply_link" onclick="return comment_show_reply_form(20152158 )">Ответить</a>


</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-16" id="reply_comments_20152158">  <li class="content-list__item content-list__item_comment js-comment " rel="20152320">
    
    <span class="parent_id" data-parent_id="20152158"></span>
    <div class="comment" id="comment_20152320">
      <span class="comment__collapse" title="Свернуть/развернуть ветку комментариев" data-id="20152320"></span>
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head   " rel="20152320">
          <a href="https://habr.com/ru/users/red75prim/" class="user-info user-info_inline" rel="user-popover" data-user-login="red75prim">
    <svg class="default-image default-image_mini default-image_lilac" width="24" height="24"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#slug"></use></svg>
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">red75prim</span>
</a>

          <svg class="icon_comment-edit" title="Комментарий был изменен" width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#pencil"></use></svg>
          <time class="comment__date-time comment__date-time_published">14 мая 2019 в 17:12</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="#comment_20152320" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="20152320" data-action="add" title="Добавить в закладки"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#book"></use></svg></a>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <span class="icon_comment-branch js-comment_tree" data-id="20152320" data-parent_id="20152158" title="Показать ветку комментариев"><svg width="8" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#tree"></use></svg></span>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#comment_20152158" class="icon_comment-arrow-up js-comment_parent" data-id="20152320" data-parent_id="20152158" title="Показать предыдущий комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
    </li>

  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="#comment_20152320" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="20152320" data-parent_id="20152158" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="20152320" data-post-target="450512" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="plus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter voting-wjt__counter_positive  js-score" title="Всего голосов +1: ↑1 и ↓0">+1</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message "><blockquote>Сравниваете одно/много-поточные версии. </blockquote><p>Производительность
 однопоточного С++ кода я привёл, чтобы была точка отсчета для связи с 
приведёнными результатами на других машинах. Многопоточного С++ кода 
тогда ещё по-моему не было.</p><br>
<blockquote>Сравниваете наивные и не-наивные решения.</blockquote><p>Rust
 ориентирован на безопасность кода. Наивное решение на Rust и наивное 
решение на C++ (которое ещё и работает) требуют разных уровней знания 
языка.</p><br>
<p>Кроме того, использование вами <code>string_view</code> и других последних фишек языка, как-то не выглядит очень наивным. Какой у вас опыт разработки на C++?</p><br>
<blockquote>Нет смысла делать быстрее за счёт изменения подхода применяемого в С++.</blockquote><p>Подход,
 применяемый в rapidjson, и так отличается от того, что применяется в 
serde. Например, SIMD intrinsic'и в serde пока ещё не применяются. 
Видимо это и является причиной, почему я с трудом догнал его по 
производительности на своей машине даже с zero-copy.</p><br>
<p>Стоп, стоп, стоп. Я посмотрел код rapidjson/document.h и ещё раз глянул ваш код.</p><br>
<pre><code class="plaintext hljs">std::string_view key{x.name.GetString(), x.name.GetStringLength()};</code></pre><br>
<p>Пожалуйста, объясните, каким образом это не zero-copy? <code>x.name.GetString()</code> возвращает указатель на буфер, если есть такая возможность. Или я не прав?</p></div>

        <div class="comment__footer">
    <a href="#reply" class="comment__footer-link reply_link" onclick="return comment_show_reply_form(20152320 )">Ответить</a>


</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-17" id="reply_comments_20152320">  <li class="content-list__item content-list__item_comment js-comment " rel="20152518">
    
    <span class="parent_id" data-parent_id="20152320"></span>
    <div class="comment" id="comment_20152518">
      <span class="comment__collapse" title="Свернуть/развернуть ветку комментариев" data-id="20152518"></span>
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head   " rel="20152518">
          <a href="https://habr.com/ru/users/twinklede/" class="user-info user-info_inline" rel="user-popover" data-user-login="twinklede">
    <svg class="default-image default-image_mini default-image_pink" width="24" height="24"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#slug"></use></svg>
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">twinklede</span>
</a>

          
          <time class="comment__date-time comment__date-time_published">14 мая 2019 в 17:56</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="#comment_20152518" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="20152518" data-action="add" title="Добавить в закладки"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#book"></use></svg></a>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <span class="icon_comment-branch js-comment_tree" data-id="20152518" data-parent_id="20152320" title="Показать ветку комментариев"><svg width="8" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#tree"></use></svg></span>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#comment_20152320" class="icon_comment-arrow-up js-comment_parent" data-id="20152518" data-parent_id="20152320" title="Показать предыдущий комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
    </li>

  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="#comment_20152518" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="20152518" data-parent_id="20152320" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="20152518" data-post-target="450512" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="plus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter   js-score" title="Всего голосов 0: ↑0 и ↓0">0</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message "><blockquote>Производительность 
однопоточного С++ кода я привёл, чтобы была точка отсчета для связи с 
приведёнными результатами на других машинах. </blockquote><br>
Нет, вы именно сравнивали. Как минимум автор статьи декларировал это 
сравнение явно, а вы просто сравнивали. Причём сравнивали непонятно где.
 И почему-то 200мс сустайма у вас вопросов не вызвало как и запуск не 
под линуксом. <br>
<br>
<blockquote>Многопоточного С++ кода тогда ещё по-моему не было.</blockquote><br>
Я уже отвечал на этот вопрос. Дело в том, что добавление многопоточности
 — это не оптимизация в ситуации, когда и тот и тот язык умеет в 
многопоточность. Тут можно долго говорить о просьбе автора, но факт 
остаётся фактом. Это обстоятельство нужно уточнять и сравнивать 
несравнимое нельзя.<br>
<br>
<blockquote>Rust ориентирован на безопасность когда. Наивное решение на 
Rust и наивное решение на C++ (которое ещё и работает) требуют разных 
уровней знания языка.</blockquote><br>
Насколько я вижу в интернете, везде вся эта безопасность декларируется как «zero-cost». <br>
<br>
<blockquote>Кроме того, использование вами string_view и других последних фишек языка, как-то не выглядит очень наивным. </blockquote><br>
Я уже так же отвечал на этот вопрос. Единственное место, которое я 
паписал «не очень наивно» — это main::next. Именно там сосредоточено 
почти всё использование string_view.<br>
<br>
<blockquote>Какой у вас опыт разработки на C++?</blockquote><br>
Смотря как считать. Если брать именно С++, то может года 2-3 суммарно.<br>
<br>
<blockquote>Подход, применяемый в rapidjson, и так отличается от того, что применяется в serde.</blockquote><br>
<br>
<blockquote> Например, SIMD intrinsic'и в serde пока ещё не применяются.</blockquote><br>
Я вижу этот rapidjson первый(или второй) раз в жизни, как и саму задачу 
парсинга json«а. Полистав код я вижу только одно, что я уже и говорил. 
Этой библиотеке очень и очень далеко до оптимальной.<br>
<br>
По поводу simd. Они там мало что дают. Да и сделано это крайне наивно. <br>
<br>
<blockquote>Видимо это и является причиной, почему я с трудом догнал его по производительности на своей машине даже с zero-copy.<br>
</blockquote><br>
Нет, не является. Я проверил. Они там не включены по умолчанию, а если их включить, то они только замедляют код.<br>
<br>
<blockquote>Пожалуйста, объясните, каким образом это не zero-copy? 
x.name.GetString() возвращает указатель на буфер, если есть такая 
возможность. Или я не прав?</blockquote><br>
Нет, это не zero-copy. В данном случае я использую sv как обёртку над 
„указатель + длинна“, которую мне отдают библиотка. Использую я это для 
красивого сравнения строк через ==, а не через memcmp(который за меня 
вызовет sv).<br>
<br>
Все строки, которые выходят из это функции — это std::string, в который 
копируются данные. Везде и всюду, где использует sv — он используется 
как удобная обёртка над указателем + длинна. Никакой zero-cost функции 
он не несёт.<br>
<br>
Причины я обозначил. Я писал аналогичный rust-коду автора код. 
Единственное место, где я отошёл от этого правила — это main::next и 
чтение файла. Причина банальна — так проще.<br>
<br>
zero-cost есть в многопоточной реализации, именно так строки отправляют через очередь на парсинг.<br>
<br></div>

        <div class="comment__footer">
    <a href="#reply" class="comment__footer-link reply_link" onclick="return comment_show_reply_form(20152518 )">Ответить</a>


</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-18" id="reply_comments_20152518">  <li class="content-list__item content-list__item_comment js-comment " rel="20152940">
    
    <span class="parent_id" data-parent_id="20152518"></span>
    <div class="comment" id="comment_20152940">
      <span class="comment__collapse" title="Свернуть/развернуть ветку комментариев" data-id="20152940"></span>
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head   " rel="20152940">
          <a href="https://habr.com/ru/users/red75prim/" class="user-info user-info_inline" rel="user-popover" data-user-login="red75prim">
    <svg class="default-image default-image_mini default-image_lilac" width="24" height="24"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#slug"></use></svg>
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">red75prim</span>
</a>

          <svg class="icon_comment-edit" title="Комментарий был изменен" width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#pencil"></use></svg>
          <time class="comment__date-time comment__date-time_published">14 мая 2019 в 19:24</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="#comment_20152940" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="20152940" data-action="add" title="Добавить в закладки"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#book"></use></svg></a>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <span class="icon_comment-branch js-comment_tree" data-id="20152940" data-parent_id="20152518" title="Показать ветку комментариев"><svg width="8" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#tree"></use></svg></span>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#comment_20152518" class="icon_comment-arrow-up js-comment_parent" data-id="20152940" data-parent_id="20152518" title="Показать предыдущий комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
    </li>

  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="#comment_20152940" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="20152940" data-parent_id="20152518" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="20152940" data-post-target="450512" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="plus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter   js-score" title="Всего голосов 0: ↑0 и ↓0">0</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message "><blockquote>Нет, не является. Я проверил.</blockquote><p>Да, ошибся. SIMD включается флагами <code>RAPIDJSON_SSE2</code> и <code>RAPIDJSON_SSE42</code></p><br>
<blockquote>Нет, это не zero-copy.</blockquote><p>Да, разобрался. 
zero-copy используется только если использовать буфер — мутабельную 
строку. Если правильно понял код, то для аллокации распознанных значений
 используется CrtAllocator — как и в Rust без <code>Jemalloc</code>.</p><br>
<p>Извиняюсь. Невнимательно посмотрел код.</p><br>
<p>Почему Rust немного отстаёт даже в zero-copy режиме пока совершенно непонятно.</p></div>

        <div class="comment__footer">
    <a href="#reply" class="comment__footer-link reply_link" onclick="return comment_show_reply_form(20152940 )">Ответить</a>


</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-19" id="reply_comments_20152940"></ul>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="content-list__item content-list__item_comment js-comment " rel="20152382">
    
    <span class="parent_id" data-parent_id="20152034"></span>
    <div class="comment" id="comment_20152382">
      <span class="comment__collapse" title="Свернуть/развернуть ветку комментариев" data-id="20152382"></span>
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head   " rel="20152382">
          <a href="https://habr.com/ru/users/Antervis/" class="user-info user-info_inline" rel="user-popover" data-user-login="Antervis">
    <img src="Swift%20%D0%BF%D1%80%D0%BE%D1%82%D0%B8%D0%B2%20Rust%20%E2%80%94%20%D0%B1%D0%B5%D0%BD%D1%87%D0%BC%D0%B0%D1%80%D0%BA%D0%B8%D0%BD%D0%B3%20%D0%BD%D0%B0%20Linux%20%D1%81%20(%D0%BD%D0%B5)%D0%BF%D0%BE%D0%BD%D1%8F%D1%82%D0%BD%D1%8B%D0%BC%20%D1%84%D0%B8%D0%BD%D0%B0%D0%BB%D0%BE%D0%BC%20_%20%D0%A5%D0%B0%D0%B1%D1%80_files/642e096dc9c149dd052c474a9a360e7c.png" class="user-info__image-pic user-info__image-pic_small" width="24" height="24">
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">Antervis</span>
</a>

          
          <time class="comment__date-time comment__date-time_published">14 мая 2019 в 17:24</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="#comment_20152382" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="20152382" data-action="add" title="Добавить в закладки"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#book"></use></svg></a>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <span class="icon_comment-branch js-comment_tree" data-id="20152382" data-parent_id="20152034" title="Показать ветку комментариев"><svg width="8" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#tree"></use></svg></span>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#comment_20152034" class="icon_comment-arrow-up js-comment_parent" data-id="20152382" data-parent_id="20152034" title="Показать предыдущий комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
    </li>

  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="#comment_20152382" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="20152382" data-parent_id="20152034" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="20152382" data-post-target="450512" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="plus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter   js-score" title="Всего голосов 0: ↑1 и ↓1">0</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message "><blockquote>Производительность Rust кода теоретически не должна отличаться от C++</blockquote><br>
ключевое слово «теоретически». Даже если устранить все различия в 
реализациях одного и того же кода (для этого в Rust зачастую придется 
обмазаться unsafe с ног до головы, нивелируя все его достоинства), 
компилятор rust'а может использовать менее эффективную декларацию о 
вызовах, как, например, можно посмотреть <a href="https://godbolt.org/z/4Z3YW0">здесь</a> (пример позаимствован из доклада Антона Полухина <a href="https://habr.com/ru/users/antoshkka/" class="user_link">antoshkka</a> на с++russia 2019)</div>

        <div class="comment__footer">
    <a href="#reply" class="comment__footer-link reply_link" onclick="return comment_show_reply_form(20152382 )">Ответить</a>


</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-16" id="reply_comments_20152382">  <li class="content-list__item content-list__item_comment js-comment " rel="20152624">
    
    <span class="parent_id" data-parent_id="20152382"></span>
    <div class="comment" id="comment_20152624">
      <span class="comment__collapse" title="Свернуть/развернуть ветку комментариев" data-id="20152624"></span>
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head   " rel="20152624">
          <a href="https://habr.com/ru/users/twinklede/" class="user-info user-info_inline" rel="user-popover" data-user-login="twinklede">
    <svg class="default-image default-image_mini default-image_pink" width="24" height="24"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#slug"></use></svg>
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">twinklede</span>
</a>

          
          <time class="comment__date-time comment__date-time_published">14 мая 2019 в 18:17</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="#comment_20152624" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="20152624" data-action="add" title="Добавить в закладки"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#book"></use></svg></a>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <span class="icon_comment-branch js-comment_tree" data-id="20152624" data-parent_id="20152382" title="Показать ветку комментариев"><svg width="8" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#tree"></use></svg></span>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#comment_20152382" class="icon_comment-arrow-up js-comment_parent" data-id="20152624" data-parent_id="20152382" title="Показать предыдущий комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
    </li>

  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="#comment_20152624" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="20152624" data-parent_id="20152382" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="20152624" data-post-target="450512" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="plus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter voting-wjt__counter_positive  js-score" title="Всего голосов +1: ↑1 и ↓0">+1</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message "><blockquote>Даже если устранить 
все различия в реализациях одного и того же кода (для этого в Rust 
зачастую придется обмазаться unsafe с ног до головы, нивелируя все его 
достоинства)</blockquote><br>
Аналогичная проблема возникла и тут. Даже наивный код в котором C++ и 
его stdlib очень просто победить. Не побеждается. И чем ниже уровень, 
тем больше проблем. Ведь rust задизайнен именно для <s>наивного</s>хайлевел программирования. <br>
<br>
Да, можно говорить о том, что код на rust более безопасный. В С++ можно 
попробовать заменить list на vector. Но нельзя говорить о том, что эта 
безопасность достаётся бесплатно. Как и по части производительности, так
 и по части применяемых усилий. Очень много ложится на голову 
программиста. <br>
<br>
Есть ещё один нюанс, о котором всё время забывают. Не бывает 
быстрых/медленных языков. Есть языки с большими/меньшими возможностями. 
Производительность/безопасность кода зависит исключительно от 
программиста. И именно на этом этапе проявляется различие языков. 
Какой-то язык одному уровню программистов даёт писать код 
быстрее/безопаснее, чем другим. Но для другого уровня — всё может быть 
наоборот.<br>
<br>
Если мы начнём говорить про производительность, то тут прежде всего 
определяющим является умение программиста. А язык лишь средство 
выражения его умения/опыта. Язык должен дать возможность выразить 
программисту то, что он хочет и то как он это хочет. В этом основания 
проблема rust. В подобных случаях он не просто не помогает — он мешает. 
Причём порою мешает до невозможности.<br>
<br>
Именно поэтому нет никакого смысла говорить о высокой(не в сравнении с 
питоном/swift, а объективно) производительности. Раст попросту не даст 
возможности программисту раскрыть свой потенциал. Именно поэтому уровень
 программистов будет относительно мал. Человек должен быть крайне 
фанатичен(в сторону rust) что-бы несмотря на все горечи и страдания 
пытаться писать на нём высокопроизводительный код.<br>
<br>
<blockquote>компилятор rust'а может использовать менее эффективную декларацию о вызовах</blockquote><br>
Есть ещё одно обстоятельство касательно llvm. В нём вполне адекватные 
хайлевел-оптимизации. В ситуациях, когда дело касается числодробильного 
кода- он крайне слаб.<br>
<br>
За примерами ходить ненужно. Тот же rapidjson собранный gcc в полтора раза быстрее собранного clang/llvm.<br></div>

        <div class="comment__footer">
    <a href="#reply" class="comment__footer-link reply_link" onclick="return comment_show_reply_form(20152624 )">Ответить</a>


</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-17" id="reply_comments_20152624"></ul>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="content-list__item content-list__item_comment js-comment " rel="20151970">
    
    <span class="parent_id" data-parent_id="20150072"></span>
    <div class="comment" id="comment_20151970">
      <span class="comment__collapse" title="Свернуть/развернуть ветку комментариев" data-id="20151970"></span>
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head   " rel="20151970">
          <a href="https://habr.com/ru/users/twinklede/" class="user-info user-info_inline" rel="user-popover" data-user-login="twinklede">
    <svg class="default-image default-image_mini default-image_pink" width="24" height="24"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#slug"></use></svg>
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">twinklede</span>
</a>

          
          <time class="comment__date-time comment__date-time_published">14 мая 2019 в 16:05</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="#comment_20151970" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="20151970" data-action="add" title="Добавить в закладки"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#book"></use></svg></a>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <span class="icon_comment-branch js-comment_tree" data-id="20151970" data-parent_id="20150072" title="Показать ветку комментариев"><svg width="8" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#tree"></use></svg></span>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#comment_20150072" class="icon_comment-arrow-up js-comment_parent" data-id="20151970" data-parent_id="20150072" title="Показать предыдущий комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
    </li>

  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="#comment_20151970" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="20151970" data-parent_id="20150072" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="20151970" data-post-target="450512" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="plus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter  voting-wjt__counter_negative js-score" title="Всего голосов –3: ↑0 и ↓3">–3</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message comment__message_downgrade comment__message_downgrade-3"><blockquote>И это zero-cost. Чтобы получить гарантированно валидный String из неконтролируемых внешних данных</blockquote><br>
Как строка связана с utf8? Как минимум существуют строки без юникода, а 
даже если с юникодом — существуют разные форматы юникода.<br>
<br>
<blockquote>Это не базовая логика. </blockquote><br>
Это базовая логика. Почему именно она у вас медленнее неважно. Факт есть факт — она медленнее, со всеми вытекающими.<br>
<br>
<blockquote>Это — 1) валидация utf-8, 2) моя ошибка с десериализацией Cow (значение всегда копировалось), 3) оверхед на работу с потоками.</blockquote><br>
<br>
1) уберите. 2) у меня в С++ коде всё копируется и нет проблем. 3) у меня никого оврехеда нет. Почему? <br>
<br>
<blockquote>Заодно добавил кастомный аллокатор, чтобы немного отыграть проигрыш на флагах mmap.</blockquote><br>
Зачем вы добавили С++-зависимость к коду на rust? Ваши биндинги не могут во флаги?<br>
<br>
<blockquote>На моей машине версия с аллокатором обгоняет ваш код на 70ms, без аллокатора на 50ms.</blockquote><br>
Нет. Я уже говорил, что у вас 180ms systime. Такого быть не должно.<br></div>

        <div class="comment__footer">
    <a href="#reply" class="comment__footer-link reply_link" onclick="return comment_show_reply_form(20151970 )">Ответить</a>


</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-13" id="reply_comments_20151970">  <li class="content-list__item content-list__item_comment js-comment " rel="20152106">
    
    <span class="parent_id" data-parent_id="20151970"></span>
    <div class="comment" id="comment_20152106">
      <span class="comment__collapse" title="Свернуть/развернуть ветку комментариев" data-id="20152106"></span>
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head   " rel="20152106">
          <a href="https://habr.com/ru/users/red75prim/" class="user-info user-info_inline" rel="user-popover" data-user-login="red75prim">
    <svg class="default-image default-image_mini default-image_lilac" width="24" height="24"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#slug"></use></svg>
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">red75prim</span>
</a>

          <svg class="icon_comment-edit" title="Комментарий был изменен" width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#pencil"></use></svg>
          <time class="comment__date-time comment__date-time_published">14 мая 2019 в 16:30</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="#comment_20152106" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="20152106" data-action="add" title="Добавить в закладки"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#book"></use></svg></a>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <span class="icon_comment-branch js-comment_tree" data-id="20152106" data-parent_id="20151970" title="Показать ветку комментариев"><svg width="8" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#tree"></use></svg></span>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#comment_20151970" class="icon_comment-arrow-up js-comment_parent" data-id="20152106" data-parent_id="20151970" title="Показать предыдущий комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
    </li>

  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="#comment_20152106" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="20152106" data-parent_id="20151970" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="20152106" data-post-target="450512" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="plus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter voting-wjt__counter_positive  js-score" title="Всего голосов +2: ↑2 и ↓0">+2</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message "><blockquote>Как строка связана с utf8?</blockquote><p>Это инвариант типов <code>String</code> и <code>str</code> — они содержат валидный utf-8, если не содержат — UB.</p><br>
<blockquote>Нет. Я уже говорил, что у вас 180ms systime. Такого быть не должно.</blockquote><p>Но есть. Платформа WSL.</p><br>
<pre><code class="plaintext hljs">$ uname -v
#379-Microsoft Wed Mar 06 19:16:00 PST 2019</code></pre><br>
<p>Откуда столько systime пока не разобрался.</p><br>
<p>И, после общения в таком тоне, не очень хочется.</p></div>

        <div class="comment__footer">
    <a href="#reply" class="comment__footer-link reply_link" onclick="return comment_show_reply_form(20152106 )">Ответить</a>


</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-14" id="reply_comments_20152106">  <li class="content-list__item content-list__item_comment js-comment " rel="20152180">
    
    <span class="parent_id" data-parent_id="20152106"></span>
    <div class="comment" id="comment_20152180">
      <span class="comment__collapse" title="Свернуть/развернуть ветку комментариев" data-id="20152180"></span>
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head   " rel="20152180">
          <a href="https://habr.com/ru/users/twinklede/" class="user-info user-info_inline" rel="user-popover" data-user-login="twinklede">
    <svg class="default-image default-image_mini default-image_pink" width="24" height="24"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#slug"></use></svg>
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">twinklede</span>
</a>

          
          <time class="comment__date-time comment__date-time_published">14 мая 2019 в 16:43</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="#comment_20152180" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="20152180" data-action="add" title="Добавить в закладки"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#book"></use></svg></a>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <span class="icon_comment-branch js-comment_tree" data-id="20152180" data-parent_id="20152106" title="Показать ветку комментариев"><svg width="8" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#tree"></use></svg></span>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#comment_20152106" class="icon_comment-arrow-up js-comment_parent" data-id="20152180" data-parent_id="20152106" title="Показать предыдущий комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
    </li>

  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="#comment_20152180" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="20152180" data-parent_id="20152106" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="20152180" data-post-target="450512" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="plus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter  voting-wjt__counter_negative js-score" title="Всего голосов –3: ↑0 и ↓3">–3</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message comment__message_downgrade comment__message_downgrade-3"><blockquote>Это инвариант типов String и str — они содержат валидный utf-8, если не содержат — UB.</blockquote><br>
Ещё раз. Это локальные проблемы отдельной библиотеки. Реальная жизнь на 
строки никакого подобного инварианта не накладывает. Строки это не 
только utf-8.<br>
<br>
<blockquote>Но есть. Платформа WSL.</blockquote><br>
Это явно не обозначенная автором платформа.<br>
<br>
<blockquote>И, после общения в таком тоне, не очень хочется.</blockquote><br>
Не хочется запускать код на той платформе, которую обозначил автор? <br>
<br></div>

        <div class="comment__footer">
    <a href="#reply" class="comment__footer-link reply_link" onclick="return comment_show_reply_form(20152180 )">Ответить</a>


</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-15" id="reply_comments_20152180">  <li class="content-list__item content-list__item_comment js-comment " rel="20167802">
    
    <span class="parent_id" data-parent_id="20152180"></span>
    <div class="comment" id="comment_20167802">
      <span class="comment__collapse" title="Свернуть/развернуть ветку комментариев" data-id="20167802"></span>
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head   " rel="20167802">
          <a href="https://habr.com/ru/users/freecoder_xx/" class="user-info user-info_inline" rel="user-popover" data-user-login="freecoder_xx">
    <img src="Swift%20%D0%BF%D1%80%D0%BE%D1%82%D0%B8%D0%B2%20Rust%20%E2%80%94%20%D0%B1%D0%B5%D0%BD%D1%87%D0%BC%D0%B0%D1%80%D0%BA%D0%B8%D0%BD%D0%B3%20%D0%BD%D0%B0%20Linux%20%D1%81%20(%D0%BD%D0%B5)%D0%BF%D0%BE%D0%BD%D1%8F%D1%82%D0%BD%D1%8B%D0%BC%20%D1%84%D0%B8%D0%BD%D0%B0%D0%BB%D0%BE%D0%BC%20_%20%D0%A5%D0%B0%D0%B1%D1%80_files/0c40b0aab930790cf75c1321e40a9912.jpg" class="user-info__image-pic user-info__image-pic_small" width="24" height="24">
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">freecoder_xx</span>
</a>

          
          <time class="comment__date-time comment__date-time_published">17 мая 2019 в 19:22</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="#comment_20167802" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="20167802" data-action="add" title="Добавить в закладки"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#book"></use></svg></a>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <span class="icon_comment-branch js-comment_tree" data-id="20167802" data-parent_id="20152180" title="Показать ветку комментариев"><svg width="8" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#tree"></use></svg></span>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#comment_20152180" class="icon_comment-arrow-up js-comment_parent" data-id="20167802" data-parent_id="20152180" title="Показать предыдущий комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
    </li>

  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="#comment_20167802" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="20167802" data-parent_id="20152180" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="20167802" data-post-target="450512" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="plus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter   js-score" title="Всего голосов 0: ↑0 и ↓0">0</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message "><p>В Rust строки — это utf-8 
строки (байтовый массив + проверка на utf-8-корректность 
последовательности байт). Если нужны какие-то иные строки, используется 
байтовый массив без проверок.</p></div>

        <div class="comment__footer">
    <a href="#reply" class="comment__footer-link reply_link" onclick="return comment_show_reply_form(20167802 )">Ответить</a>


</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-16" id="reply_comments_20167802">  <li class="content-list__item content-list__item_comment js-comment " rel="20167830">
    
    <span class="parent_id" data-parent_id="20167802"></span>
    <div class="comment" id="comment_20167830">
      <span class="comment__collapse" title="Свернуть/развернуть ветку комментариев" data-id="20167830"></span>
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head   " rel="20167830">
          <a href="https://habr.com/ru/users/twinklede/" class="user-info user-info_inline" rel="user-popover" data-user-login="twinklede">
    <svg class="default-image default-image_mini default-image_pink" width="24" height="24"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#slug"></use></svg>
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">twinklede</span>
</a>

          
          <time class="comment__date-time comment__date-time_published">17 мая 2019 в 19:30</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="#comment_20167830" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="20167830" data-action="add" title="Добавить в закладки"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#book"></use></svg></a>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <span class="icon_comment-branch js-comment_tree" data-id="20167830" data-parent_id="20167802" title="Показать ветку комментариев"><svg width="8" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#tree"></use></svg></span>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#comment_20167802" class="icon_comment-arrow-up js-comment_parent" data-id="20167830" data-parent_id="20167802" title="Показать предыдущий комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
    </li>

  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="#comment_20167830" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="20167830" data-parent_id="20167802" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="20167830" data-post-target="450512" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="plus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter  voting-wjt__counter_negative js-score" title="Всего голосов –4: ↑1 и ↓5">–4</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message comment__message_downgrade comment__message_downgrade-4"><blockquote>В Rust строки — это utf-8 строки (байтовый массив + проверка на utf-8-корректность последовательности байт). </blockquote><br>
Мне какая разница с этого? Меня начали уверять, что строки такими «и должны быть» — я на это отвечал. Они такими быть не должны.<br>
<br>
<blockquote>Если нужны какие-то иные строки, используется байтовый массив без проверок.</blockquote><br>
Мне никакой rust и никакие его строки использовать ненужно. Зачем вы мне
 это пишите? Вы это пишите тем, кто оправдывал этим малую 
производительность раста. Пусть они их используют и, возможно(крайне 
маловероятно) перестанут сливать lua.</div>

        <div class="comment__footer">
    <a href="#reply" class="comment__footer-link reply_link" onclick="return comment_show_reply_form(20167830 )">Ответить</a>


</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-17" id="reply_comments_20167830">  <li class="content-list__item content-list__item_comment js-comment " rel="20170632">
    
    <span class="parent_id" data-parent_id="20167830"></span>
    <div class="comment" id="comment_20170632">
      <span class="comment__collapse" title="Свернуть/развернуть ветку комментариев" data-id="20170632"></span>
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head   " rel="20170632">
          <a href="https://habr.com/ru/users/PsyHaSTe/" class="user-info user-info_inline" rel="user-popover" data-user-login="PsyHaSTe">
    <img src="Swift%20%D0%BF%D1%80%D0%BE%D1%82%D0%B8%D0%B2%20Rust%20%E2%80%94%20%D0%B1%D0%B5%D0%BD%D1%87%D0%BC%D0%B0%D1%80%D0%BA%D0%B8%D0%BD%D0%B3%20%D0%BD%D0%B0%20Linux%20%D1%81%20(%D0%BD%D0%B5)%D0%BF%D0%BE%D0%BD%D1%8F%D1%82%D0%BD%D1%8B%D0%BC%20%D1%84%D0%B8%D0%BD%D0%B0%D0%BB%D0%BE%D0%BC%20_%20%D0%A5%D0%B0%D0%B1%D1%80_files/7631ac5e5a7e237a937f5f2a74ae4c9e.jpg" class="user-info__image-pic user-info__image-pic_small" width="24" height="24">
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">PsyHaSTe</span>
</a>

          
          <time class="comment__date-time comment__date-time_published">18 мая 2019 в 20:01</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="#comment_20170632" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="20170632" data-action="add" title="Добавить в закладки"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#book"></use></svg></a>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <span class="icon_comment-branch js-comment_tree" data-id="20170632" data-parent_id="20167830" title="Показать ветку комментариев"><svg width="8" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#tree"></use></svg></span>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#comment_20167830" class="icon_comment-arrow-up js-comment_parent" data-id="20170632" data-parent_id="20167830" title="Показать предыдущий комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
    </li>

  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="#comment_20170632" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="20170632" data-parent_id="20167830" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="20170632" data-post-target="450512" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="plus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter   js-score" title="Всего голосов 0: ↑0 и ↓0">0</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message "><p>Конечно, в строках должны быть
 символы, а не рандомный мусор. Если вы не валидируете строки "и так 
сойдет", то тут исключительно ваши проблемы.</p><br>
<p>Считать дефолтом объект, в котором возможно строка, а возможно и хрень видимо эффект проф деформации написания на С или С++.</p></div>

        <div class="comment__footer">
    <a href="#reply" class="comment__footer-link reply_link" onclick="return comment_show_reply_form(20170632 )">Ответить</a>


</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-18" id="reply_comments_20170632">  <li class="content-list__item content-list__item_comment js-comment " rel="20170750">
    
    <span class="parent_id" data-parent_id="20170632"></span>
    <div class="comment" id="comment_20170750">
      <span class="comment__collapse" title="Свернуть/развернуть ветку комментариев" data-id="20170750"></span>
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head   " rel="20170750">
          <a href="https://habr.com/ru/users/twinklede/" class="user-info user-info_inline" rel="user-popover" data-user-login="twinklede">
    <svg class="default-image default-image_mini default-image_pink" width="24" height="24"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#slug"></use></svg>
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">twinklede</span>
</a>

          
          <time class="comment__date-time comment__date-time_published">18 мая 2019 в 20:58</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="#comment_20170750" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="20170750" data-action="add" title="Добавить в закладки"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#book"></use></svg></a>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <span class="icon_comment-branch js-comment_tree" data-id="20170750" data-parent_id="20170632" title="Показать ветку комментариев"><svg width="8" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#tree"></use></svg></span>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#comment_20170632" class="icon_comment-arrow-up js-comment_parent" data-id="20170750" data-parent_id="20170632" title="Показать предыдущий комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
    </li>

  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="#comment_20170750" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="20170750" data-parent_id="20170632" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="20170750" data-post-target="450512" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="plus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter  voting-wjt__counter_negative js-score" title="Всего голосов –2: ↑0 и ↓2">–2</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message comment__message_downgrade comment__message_downgrade-2">utf16 — это мусор, я правильно понял? Как и тысячи других кодировок.</div>

        <div class="comment__footer">
    <a href="#reply" class="comment__footer-link reply_link" onclick="return comment_show_reply_form(20170750 )">Ответить</a>


</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-19" id="reply_comments_20170750">  <li class="content-list__item content-list__item_comment js-comment " rel="20170756">
    
    <span class="parent_id" data-parent_id="20170750"></span>
    <div class="comment" id="comment_20170756">
      <span class="comment__collapse" title="Свернуть/развернуть ветку комментариев" data-id="20170756"></span>
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head   " rel="20170756">
          <a href="https://habr.com/ru/users/PsyHaSTe/" class="user-info user-info_inline" rel="user-popover" data-user-login="PsyHaSTe">
    <img src="Swift%20%D0%BF%D1%80%D0%BE%D1%82%D0%B8%D0%B2%20Rust%20%E2%80%94%20%D0%B1%D0%B5%D0%BD%D1%87%D0%BC%D0%B0%D1%80%D0%BA%D0%B8%D0%BD%D0%B3%20%D0%BD%D0%B0%20Linux%20%D1%81%20(%D0%BD%D0%B5)%D0%BF%D0%BE%D0%BD%D1%8F%D1%82%D0%BD%D1%8B%D0%BC%20%D1%84%D0%B8%D0%BD%D0%B0%D0%BB%D0%BE%D0%BC%20_%20%D0%A5%D0%B0%D0%B1%D1%80_files/7631ac5e5a7e237a937f5f2a74ae4c9e.jpg" class="user-info__image-pic user-info__image-pic_small" width="24" height="24">
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">PsyHaSTe</span>
</a>

          
          <time class="comment__date-time comment__date-time_published">18 мая 2019 в 20:59</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="#comment_20170756" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="20170756" data-action="add" title="Добавить в закладки"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#book"></use></svg></a>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <span class="icon_comment-branch js-comment_tree" data-id="20170756" data-parent_id="20170750" title="Показать ветку комментариев"><svg width="8" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#tree"></use></svg></span>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#comment_20170750" class="icon_comment-arrow-up js-comment_parent" data-id="20170756" data-parent_id="20170750" title="Показать предыдущий комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
    </li>

  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="#comment_20170756" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="20170756" data-parent_id="20170750" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="20170756" data-post-target="450512" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="plus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter voting-wjt__counter_positive  js-score" title="Всего голосов +2: ↑2 и ↓0">+2</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message "><p>Пока вы не провалидировали 
набор байт — у вас набор байт, а не кодировка. Хоть UTF16 хоть любая 
другая. Даже то что это ASCII надо убедиться.</p></div>

        <div class="comment__footer">
    <a href="#reply" class="comment__footer-link reply_link" onclick="return comment_show_reply_form(20170756 )">Ответить</a>


</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-20" id="reply_comments_20170756">  <li class="content-list__item content-list__item_comment js-comment " rel="20170962">
    
    <span class="parent_id" data-parent_id="20170756"></span>
    <div class="comment" id="comment_20170962">
      <span class="comment__collapse" title="Свернуть/развернуть ветку комментариев" data-id="20170962"></span>
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head   " rel="20170962">
          <a href="https://habr.com/ru/users/twinklede/" class="user-info user-info_inline" rel="user-popover" data-user-login="twinklede">
    <svg class="default-image default-image_mini default-image_pink" width="24" height="24"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#slug"></use></svg>
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">twinklede</span>
</a>

          
          <time class="comment__date-time comment__date-time_published">18 мая 2019 в 22:26</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="#comment_20170962" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="20170962" data-action="add" title="Добавить в закладки"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#book"></use></svg></a>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <span class="icon_comment-branch js-comment_tree" data-id="20170962" data-parent_id="20170756" title="Показать ветку комментариев"><svg width="8" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#tree"></use></svg></span>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#comment_20170756" class="icon_comment-arrow-up js-comment_parent" data-id="20170962" data-parent_id="20170756" title="Показать предыдущий комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
    </li>

  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="#comment_20170962" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="20170962" data-parent_id="20170756" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="20170962" data-post-target="450512" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="plus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter  voting-wjt__counter_negative js-score" title="Всего голосов –5: ↑0 и ↓5">–5</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message comment__message_downgrade comment__message_downgrade-5"><blockquote>Пока вы не провалидировали набор байт — у вас набор байт,</blockquote><br>
Полная чушь. Вы опять показываете свою полную несостоятельность. Никакой
 валидации utf16 не требует, я специально упомянул именно его, что-бы в 
очередной раз доказать ваш уровень понимания темы. <br>
<br>
Ещё раз. Вы сказали, что всё что не utf8(всё во что не может ваша 
«строка») — мусор. Вернее мусор всё то, что не понимают строки в вашем 
супер-языке сливающему lua. И я даже не буду рассказывать, что никакой 
строке вообще никакая валидация/utf8 ненужны. <br>
<br>
У вас два варианта. Либо продолжать отрицать очевидное(что строки и utf8 являются синонимом), либо признать ошибку.<br>
<br>
У меня возникает такой вопрос, почему каждая ваша попытка со мною спорить — заканчивается полным вашим поражением?</div>

        <div class="comment__footer">
    <a href="#reply" class="comment__footer-link reply_link" onclick="return comment_show_reply_form(20170962 )">Ответить</a>


</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-21" id="reply_comments_20170962">  <li class="content-list__item content-list__item_comment js-comment " rel="20171070">
    
    <span class="parent_id" data-parent_id="20170962"></span>
    <div class="comment" id="comment_20171070">
      <span class="comment__collapse" title="Свернуть/развернуть ветку комментариев" data-id="20171070"></span>
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head   " rel="20171070">
          <a href="https://habr.com/ru/users/humbug/" class="user-info user-info_inline" rel="user-popover" data-user-login="humbug">
    <img src="Swift%20%D0%BF%D1%80%D0%BE%D1%82%D0%B8%D0%B2%20Rust%20%E2%80%94%20%D0%B1%D0%B5%D0%BD%D1%87%D0%BC%D0%B0%D1%80%D0%BA%D0%B8%D0%BD%D0%B3%20%D0%BD%D0%B0%20Linux%20%D1%81%20(%D0%BD%D0%B5)%D0%BF%D0%BE%D0%BD%D1%8F%D1%82%D0%BD%D1%8B%D0%BC%20%D1%84%D0%B8%D0%BD%D0%B0%D0%BB%D0%BE%D0%BC%20_%20%D0%A5%D0%B0%D0%B1%D1%80_files/08b630a09b5e92ca37ee388932101770.jpg" class="user-info__image-pic user-info__image-pic_small" width="24" height="24">
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">humbug</span>
</a>

          
          <time class="comment__date-time comment__date-time_published">18 мая 2019 в 23:11</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="#comment_20171070" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="20171070" data-action="add" title="Добавить в закладки"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#book"></use></svg></a>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <span class="icon_comment-branch js-comment_tree" data-id="20171070" data-parent_id="20170962" title="Показать ветку комментариев"><svg width="8" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#tree"></use></svg></span>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#comment_20170962" class="icon_comment-arrow-up js-comment_parent" data-id="20171070" data-parent_id="20170962" title="Показать предыдущий комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
    </li>

  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="#comment_20171070" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="20171070" data-parent_id="20170962" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="20171070" data-post-target="450512" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="plus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter voting-wjt__counter_positive  js-score" title="Всего голосов +2: ↑2 и ↓0">+2</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message "><blockquote>И я даже не буду рассказывать, что никакой строке вообще никакая валидация/utf8 ненужны.</blockquote><p><img src="Swift%20%D0%BF%D1%80%D0%BE%D1%82%D0%B8%D0%B2%20Rust%20%E2%80%94%20%D0%B1%D0%B5%D0%BD%D1%87%D0%BC%D0%B0%D1%80%D0%BA%D0%B8%D0%BD%D0%B3%20%D0%BD%D0%B0%20Linux%20%D1%81%20(%D0%BD%D0%B5)%D0%BF%D0%BE%D0%BD%D1%8F%D1%82%D0%BD%D1%8B%D0%BC%20%D1%84%D0%B8%D0%BD%D0%B0%D0%BB%D0%BE%D0%BC%20_%20%D0%A5%D0%B0%D0%B1%D1%80_files/f76cefbb8b5add64c7d319f1677c4964.jpg" alt="image"></p></div>

        <div class="comment__footer">
    <a href="#reply" class="comment__footer-link reply_link" onclick="return comment_show_reply_form(20171070 )">Ответить</a>


</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-22" id="reply_comments_20171070">  <li class="content-list__item content-list__item_comment js-comment " rel="20171184">
    
    <span class="parent_id" data-parent_id="20171070"></span>
    <div class="comment" id="comment_20171184">
      <span class="comment__collapse" title="Свернуть/развернуть ветку комментариев" data-id="20171184"></span>
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head   " rel="20171184">
          <a href="https://habr.com/ru/users/twinklede/" class="user-info user-info_inline" rel="user-popover" data-user-login="twinklede">
    <svg class="default-image default-image_mini default-image_pink" width="24" height="24"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#slug"></use></svg>
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">twinklede</span>
</a>

          
          <time class="comment__date-time comment__date-time_published">18 мая 2019 в 23:59</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="#comment_20171184" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="20171184" data-action="add" title="Добавить в закладки"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#book"></use></svg></a>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <span class="icon_comment-branch js-comment_tree" data-id="20171184" data-parent_id="20171070" title="Показать ветку комментариев"><svg width="8" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#tree"></use></svg></span>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#comment_20171070" class="icon_comment-arrow-up js-comment_parent" data-id="20171184" data-parent_id="20171070" title="Показать предыдущий комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
    </li>

  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="#comment_20171184" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="20171184" data-parent_id="20171070" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="20171184" data-post-target="450512" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="plus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter  voting-wjt__counter_negative js-score" title="Всего голосов –3: ↑0 и ↓3">–3</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message comment__message_downgrade comment__message_downgrade-3">Есть
 что ответить? Или опять, типичная для хабра, клоунада? Доказывать 
необходимость/нужность — это ваша задача, а не моя. Вы это утверждаете, а
 не я. Доказывать ненужность чего угодно я не обязан — это состояние 
всего по умолчанию и это не требует доказательств по причине 
невозможности доказательства ненужности.</div>

        <div class="comment__footer">
    <a href="#reply" class="comment__footer-link reply_link" onclick="return comment_show_reply_form(20171184 )">Ответить</a>


</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-23" id="reply_comments_20171184"></ul>
  </li>
</ul>
  </li>
  <li class="content-list__item content-list__item_comment js-comment " rel="20171112">
    
    <span class="parent_id" data-parent_id="20170962"></span>
    <div class="comment" id="comment_20171112">
      <span class="comment__collapse" title="Свернуть/развернуть ветку комментариев" data-id="20171112"></span>
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head   " rel="20171112">
          <a href="https://habr.com/ru/users/PsyHaSTe/" class="user-info user-info_inline" rel="user-popover" data-user-login="PsyHaSTe">
    <img src="Swift%20%D0%BF%D1%80%D0%BE%D1%82%D0%B8%D0%B2%20Rust%20%E2%80%94%20%D0%B1%D0%B5%D0%BD%D1%87%D0%BC%D0%B0%D1%80%D0%BA%D0%B8%D0%BD%D0%B3%20%D0%BD%D0%B0%20Linux%20%D1%81%20(%D0%BD%D0%B5)%D0%BF%D0%BE%D0%BD%D1%8F%D1%82%D0%BD%D1%8B%D0%BC%20%D1%84%D0%B8%D0%BD%D0%B0%D0%BB%D0%BE%D0%BC%20_%20%D0%A5%D0%B0%D0%B1%D1%80_files/7631ac5e5a7e237a937f5f2a74ae4c9e.jpg" class="user-info__image-pic user-info__image-pic_small" width="24" height="24">
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">PsyHaSTe</span>
</a>

          
          <time class="comment__date-time comment__date-time_published">18 мая 2019 в 23:27</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="#comment_20171112" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="20171112" data-action="add" title="Добавить в закладки"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#book"></use></svg></a>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <span class="icon_comment-branch js-comment_tree" data-id="20171112" data-parent_id="20170962" title="Показать ветку комментариев"><svg width="8" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#tree"></use></svg></span>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#comment_20170962" class="icon_comment-arrow-up js-comment_parent" data-id="20171112" data-parent_id="20170962" title="Показать предыдущий комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
    </li>

  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="#comment_20171112" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="20171112" data-parent_id="20170962" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="20171112" data-post-target="450512" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="plus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter   js-score" title="Всего голосов 0: ↑0 и ↓0">0</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message "><blockquote>Полная чушь. Вы опять
 показываете свою полную несостоятельность. Никакой валидации utf16 не 
требует, я специально упомянул именно его, что-бы в очередной раз 
доказать ваш уровень понимания темы. </blockquote><p>Вам по сети 
передают прям UTF16? Или может все же набор байт, который вы потом 
интерпретируете? Покажите исходый код библиотеки, которая вам UTF16 
возвращает, и я вам покажу, как она производит конвертацию из байтового 
массива. В лучшем случае как и в расте, а в худшем как вы предлагаете, 
через статик_каст какой-нибудь.</p></div>

        <div class="comment__footer">
    <a href="#reply" class="comment__footer-link reply_link" onclick="return comment_show_reply_form(20171112 )">Ответить</a>


</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-22" id="reply_comments_20171112">  <li class="content-list__item content-list__item_comment js-comment " rel="20171156">
    
    <span class="parent_id" data-parent_id="20171112"></span>
    <div class="comment" id="comment_20171156">
      <span class="comment__collapse" title="Свернуть/развернуть ветку комментариев" data-id="20171156"></span>
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head   " rel="20171156">
          <a href="https://habr.com/ru/users/twinklede/" class="user-info user-info_inline" rel="user-popover" data-user-login="twinklede">
    <svg class="default-image default-image_mini default-image_pink" width="24" height="24"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#slug"></use></svg>
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">twinklede</span>
</a>

          
          <time class="comment__date-time comment__date-time_published">18 мая 2019 в 23:47</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="#comment_20171156" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="20171156" data-action="add" title="Добавить в закладки"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#book"></use></svg></a>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <span class="icon_comment-branch js-comment_tree" data-id="20171156" data-parent_id="20171112" title="Показать ветку комментариев"><svg width="8" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#tree"></use></svg></span>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#comment_20171112" class="icon_comment-arrow-up js-comment_parent" data-id="20171156" data-parent_id="20171112" title="Показать предыдущий комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
    </li>

  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="#comment_20171156" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="20171156" data-parent_id="20171112" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="20171156" data-post-target="450512" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="plus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter  voting-wjt__counter_negative js-score" title="Всего голосов –2: ↑0 и ↓2">–2</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message comment__message_downgrade comment__message_downgrade-2">Ещё раз. Ваша задача — показать мне валидатор utf16. Вы утверждали обратное.<br>
<br>
Далее, все эти рассуждения — сотрясение воздуха. Вы утверждали, что в 
строках должен быть валидатор utf8, либо там мусор. Теперь вы либо 
должны это доказать. Никакое отсутствие/присутствие валидации никакого 
отношения к теме не имеет. <br>
<br>
Повторю ещё раз. Валидатор utf16, а так же доказательства того, что 
«только валидированный utf8 является строкой». А так же, что меня вообще
 в какой-то мере должна волновать какая-то валидация, но это уже другая 
история и на неё можно не отвечать.</div>

        <div class="comment__footer">
    <a href="#reply" class="comment__footer-link reply_link" onclick="return comment_show_reply_form(20171156 )">Ответить</a>


</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-23" id="reply_comments_20171156">  <li class="content-list__item content-list__item_comment js-comment " rel="20171168">
    
    <span class="parent_id" data-parent_id="20171156"></span>
    <div class="comment" id="comment_20171168">
      <span class="comment__collapse" title="Свернуть/развернуть ветку комментариев" data-id="20171168"></span>
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head   " rel="20171168">
          <a href="https://habr.com/ru/users/PsyHaSTe/" class="user-info user-info_inline" rel="user-popover" data-user-login="PsyHaSTe">
    <img src="Swift%20%D0%BF%D1%80%D0%BE%D1%82%D0%B8%D0%B2%20Rust%20%E2%80%94%20%D0%B1%D0%B5%D0%BD%D1%87%D0%BC%D0%B0%D1%80%D0%BA%D0%B8%D0%BD%D0%B3%20%D0%BD%D0%B0%20Linux%20%D1%81%20(%D0%BD%D0%B5)%D0%BF%D0%BE%D0%BD%D1%8F%D1%82%D0%BD%D1%8B%D0%BC%20%D1%84%D0%B8%D0%BD%D0%B0%D0%BB%D0%BE%D0%BC%20_%20%D0%A5%D0%B0%D0%B1%D1%80_files/7631ac5e5a7e237a937f5f2a74ae4c9e.jpg" class="user-info__image-pic user-info__image-pic_small" width="24" height="24">
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">PsyHaSTe</span>
</a>

          
          <time class="comment__date-time comment__date-time_published">18 мая 2019 в 23:56</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="#comment_20171168" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="20171168" data-action="add" title="Добавить в закладки"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#book"></use></svg></a>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <span class="icon_comment-branch js-comment_tree" data-id="20171168" data-parent_id="20171156" title="Показать ветку комментариев"><svg width="8" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#tree"></use></svg></span>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#comment_20171156" class="icon_comment-arrow-up js-comment_parent" data-id="20171168" data-parent_id="20171156" title="Показать предыдущий комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
    </li>

  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="#comment_20171168" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="20171168" data-parent_id="20171156" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="20171168" data-post-target="450512" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="plus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter   js-score" title="Всего голосов 0: ↑0 и ↓0">0</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message "><p>При чем тут валиадатор UTF8? Я
 сказал, что набор байт должен быть провалидирован. В расте дефолтная 
строка это utf8. Значит и в плюсовом коде должен быть utf8, иначе 
сравнение не до конца корректное. А уж сравнивать тупо с байтовым 
массивом тем более неправильно.</p></div>

        <div class="comment__footer">
    <a href="#reply" class="comment__footer-link reply_link" onclick="return comment_show_reply_form(20171168 )">Ответить</a>


</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-24" id="reply_comments_20171168">  <li class="content-list__item content-list__item_comment js-comment " rel="20171202">
    
    <span class="parent_id" data-parent_id="20171168"></span>
    <div class="comment" id="comment_20171202">
      <span class="comment__collapse" title="Свернуть/развернуть ветку комментариев" data-id="20171202"></span>
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head   " rel="20171202">
          <a href="https://habr.com/ru/users/twinklede/" class="user-info user-info_inline" rel="user-popover" data-user-login="twinklede">
    <svg class="default-image default-image_mini default-image_pink" width="24" height="24"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#slug"></use></svg>
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">twinklede</span>
</a>

          
          <time class="comment__date-time comment__date-time_published">19 мая 2019 в 00:10</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="#comment_20171202" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="20171202" data-action="add" title="Добавить в закладки"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#book"></use></svg></a>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <span class="icon_comment-branch js-comment_tree" data-id="20171202" data-parent_id="20171168" title="Показать ветку комментариев"><svg width="8" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#tree"></use></svg></span>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#comment_20171168" class="icon_comment-arrow-up js-comment_parent" data-id="20171202" data-parent_id="20171168" title="Показать предыдущий комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
    </li>

  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="#comment_20171202" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="20171202" data-parent_id="20171168" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="20171202" data-post-target="450512" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="plus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter  voting-wjt__counter_negative js-score" title="Всего голосов –2: ↑0 и ↓2">–2</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message comment__message_downgrade comment__message_downgrade-2"><blockquote>При чем тут валиадатор UTF8?</blockquote><br>
<br>
Что я писал:<br>
<br>
<blockquote>Как строка связана с utf8? Как минимум существуют строки без
 юникода, а даже если с юникодом — существуют разные форматы юникода.<br>
</blockquote><br>
<blockquote>Ещё раз. Это локальные проблемы отдельной библиотеки. 
Реальная жизнь на строки никакого подобного инварианта не накладывает. 
Строки это не только utf-8.</blockquote><br>
<br>
Вы пытались со мною спорить? Пытались. Что вы опровергали? Опровергали 
эти утверждения. Значит, вы утверждаете, что строки бывают только utf8 и
 что все строки должны его валидировтаь.<br>
<br>
<blockquote>Конечно, в строках должны быть символы, а не рандомный 
мусор. Если вы не валидируете строки «и так сойдет», то тут 
исключительно ваши проблемы.<br>
</blockquote><br>
Вот тот набор слов, который я услышал на процитированные выше 
тезисы(мои). Я говорил о не-utf8 строках. Мне в ответ, среди этого 
набора слов, поступило заявление:<br>
<br>
<blockquote>Конечно, в строках должны быть символы, а не рандомный мусор.<br>
</blockquote><br>
Т.е. под символами тут имеется ввиду utf8(хотя какое отношение utf8 и 
его валидация имеет к символам, но ладно), а «рандомным мусором» 
называется всё, что не является валидированным utf8.<br>
<br>
<blockquote>В расте дефолтная строка это utf8. Значит и в плюсовом коде должен быть utf8, иначе сравнение не до конца корректное. </blockquote><br>
С чего вдруг? Эта проблема вашего «языка сливающего луа», а не мои. По 
этой «логике» у вас должен быть ГЦ, когда вы сравниваете что-то с 
луа(хотя это не помогло). Ведь тогда сравнение нечестное? Но это 
глупость.<br>
<br>
Код должен выполнять поставленную задачу. Если мне нужна валидация utf8 и
 сам utf8 — она будет и должна быть. Если не нужна, то не будет.<br>
<br>
А то, что вы пытаетесь фанатично защищать(вы бы лучше делом защищали, а 
не разговорами) свой предмет обожания не значит, что «как у меня» — 
должно быть у всех.<br>
<br>
Это вари проблемы, что ваш «язык» сливает и не даёт вам выбора. И это не
 значит, что этот выбор ненужен. Это значит, что выбора нет у вас. И на 
меня это никак распространятся не должно.</div>

        <div class="comment__footer">
    <a href="#reply" class="comment__footer-link reply_link" onclick="return comment_show_reply_form(20171202 )">Ответить</a>


</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-25" id="reply_comments_20171202"></ul>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="content-list__item content-list__item_comment js-comment " rel="20171232">
    
    <span class="parent_id" data-parent_id="20170962"></span>
    <div class="comment" id="comment_20171232">
      <span class="comment__collapse" title="Свернуть/развернуть ветку комментариев" data-id="20171232"></span>
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head   " rel="20171232">
          <a href="https://habr.com/ru/users/freecoder_xx/" class="user-info user-info_inline" rel="user-popover" data-user-login="freecoder_xx">
    <img src="Swift%20%D0%BF%D1%80%D0%BE%D1%82%D0%B8%D0%B2%20Rust%20%E2%80%94%20%D0%B1%D0%B5%D0%BD%D1%87%D0%BC%D0%B0%D1%80%D0%BA%D0%B8%D0%BD%D0%B3%20%D0%BD%D0%B0%20Linux%20%D1%81%20(%D0%BD%D0%B5)%D0%BF%D0%BE%D0%BD%D1%8F%D1%82%D0%BD%D1%8B%D0%BC%20%D1%84%D0%B8%D0%BD%D0%B0%D0%BB%D0%BE%D0%BC%20_%20%D0%A5%D0%B0%D0%B1%D1%80_files/0c40b0aab930790cf75c1321e40a9912.jpg" class="user-info__image-pic user-info__image-pic_small" width="24" height="24">
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">freecoder_xx</span>
</a>

          
          <time class="comment__date-time comment__date-time_published">19 мая 2019 в 00:23</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="#comment_20171232" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="20171232" data-action="add" title="Добавить в закладки"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#book"></use></svg></a>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <span class="icon_comment-branch js-comment_tree" data-id="20171232" data-parent_id="20170962" title="Показать ветку комментариев"><svg width="8" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#tree"></use></svg></span>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#comment_20170962" class="icon_comment-arrow-up js-comment_parent" data-id="20171232" data-parent_id="20170962" title="Показать предыдущий комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
    </li>

  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="#comment_20171232" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="20171232" data-parent_id="20170962" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="20171232" data-post-target="450512" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="plus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter voting-wjt__counter_positive  js-score" title="Всего голосов +2: ↑2 и ↓0">+2</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message "><blockquote>Никакой валидации utf16 не требует</blockquote><p>Насколько
 я знаю utf-16 поддерживает суррогатные пары (если лидирующее слово 
содержит 11011 в старших разрядах). При этом последующее слово 
обязательно должно содержать 110111 в старших разрядах. Если это не так,
 то последовательность невалидна.</p></div>

        <div class="comment__footer">
    <a href="#reply" class="comment__footer-link reply_link" onclick="return comment_show_reply_form(20171232 )">Ответить</a>


</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-22" id="reply_comments_20171232">  <li class="content-list__item content-list__item_comment js-comment " rel="20171350">
    
    <span class="parent_id" data-parent_id="20171232"></span>
    <div class="comment" id="comment_20171350">
      <span class="comment__collapse" title="Свернуть/развернуть ветку комментариев" data-id="20171350"></span>
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head   " rel="20171350">
          <a href="https://habr.com/ru/users/twinklede/" class="user-info user-info_inline" rel="user-popover" data-user-login="twinklede">
    <svg class="default-image default-image_mini default-image_pink" width="24" height="24"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#slug"></use></svg>
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">twinklede</span>
</a>

          
          <time class="comment__date-time comment__date-time_published">19 мая 2019 в 01:04</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="#comment_20171350" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="20171350" data-action="add" title="Добавить в закладки"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#book"></use></svg></a>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <span class="icon_comment-branch js-comment_tree" data-id="20171350" data-parent_id="20171232" title="Показать ветку комментариев"><svg width="8" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#tree"></use></svg></span>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#comment_20171232" class="icon_comment-arrow-up js-comment_parent" data-id="20171350" data-parent_id="20171232" title="Показать предыдущий комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
    </li>

  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="#comment_20171350" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="20171350" data-parent_id="20171232" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="20171350" data-post-target="450512" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="plus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter  voting-wjt__counter_negative js-score" title="Всего голосов –1: ↑0 и ↓1">–1</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message comment__message_downgrade comment__message_downgrade-1"><blockquote>Насколько я знаю utf-16 поддерживает суррогатные пары</blockquote><br>
Действительно, судя по: <a href="http://www.unicode.org/faq/utf_bom.html#utf16-11">www.unicode.org/faq/utf_bom.html#utf16-11</a>
 сейчас под utf16 понимается именно формат кодирования. Т.е. я был не 
совсем точен — пусть будет UCS-2/UCS-4/да пусть та же ascii. <br>
<br>
<blockquote> При этом последующее слово обязательно должно содержать 
110111 в старших разрядах. Если это не так, то последовательность 
невалидна.</blockquote><br>
Я не нашел подобных ограничений. Можете предоставить ссылку на то, что 
стандарт utf16 как-то ограничивает значение второго числа из пары. <br></div>

        <div class="comment__footer">
    <a href="#reply" class="comment__footer-link reply_link" onclick="return comment_show_reply_form(20171350 )">Ответить</a>


</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-23" id="reply_comments_20171350">  <li class="content-list__item content-list__item_comment js-comment " rel="20171838">
    
    <span class="parent_id" data-parent_id="20171350"></span>
    <div class="comment" id="comment_20171838">
      <span class="comment__collapse" title="Свернуть/развернуть ветку комментариев" data-id="20171838"></span>
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head   " rel="20171838">
          <a href="https://habr.com/ru/users/PsyHaSTe/" class="user-info user-info_inline" rel="user-popover" data-user-login="PsyHaSTe">
    <img src="Swift%20%D0%BF%D1%80%D0%BE%D1%82%D0%B8%D0%B2%20Rust%20%E2%80%94%20%D0%B1%D0%B5%D0%BD%D1%87%D0%BC%D0%B0%D1%80%D0%BA%D0%B8%D0%BD%D0%B3%20%D0%BD%D0%B0%20Linux%20%D1%81%20(%D0%BD%D0%B5)%D0%BF%D0%BE%D0%BD%D1%8F%D1%82%D0%BD%D1%8B%D0%BC%20%D1%84%D0%B8%D0%BD%D0%B0%D0%BB%D0%BE%D0%BC%20_%20%D0%A5%D0%B0%D0%B1%D1%80_files/7631ac5e5a7e237a937f5f2a74ae4c9e.jpg" class="user-info__image-pic user-info__image-pic_small" width="24" height="24">
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">PsyHaSTe</span>
</a>

          
          <time class="comment__date-time comment__date-time_published">19 мая 2019 в 10:09</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="#comment_20171838" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="20171838" data-action="add" title="Добавить в закладки"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#book"></use></svg></a>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <span class="icon_comment-branch js-comment_tree" data-id="20171838" data-parent_id="20171350" title="Показать ветку комментариев"><svg width="8" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#tree"></use></svg></span>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#comment_20171350" class="icon_comment-arrow-up js-comment_parent" data-id="20171838" data-parent_id="20171350" title="Показать предыдущий комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
    </li>

  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="#comment_20171838" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="20171838" data-parent_id="20171350" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="20171838" data-post-target="450512" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="plus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter voting-wjt__counter_positive  js-score" title="Всего голосов +2: ↑2 и ↓0">+2</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message "><p>ASCII семибитная кодировка, так что если старший бит единица, то строка опять невалидна.</p></div>

        <div class="comment__footer">
    <a href="#reply" class="comment__footer-link reply_link" onclick="return comment_show_reply_form(20171838 )">Ответить</a>


</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-24" id="reply_comments_20171838">  <li class="content-list__item content-list__item_comment js-comment " rel="20173268">
    
    <span class="parent_id" data-parent_id="20171838"></span>
    <div class="comment" id="comment_20173268">
      <span class="comment__collapse" title="Свернуть/развернуть ветку комментариев" data-id="20173268"></span>
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head   " rel="20173268">
          <a href="https://habr.com/ru/users/twinklede/" class="user-info user-info_inline" rel="user-popover" data-user-login="twinklede">
    <svg class="default-image default-image_mini default-image_pink" width="24" height="24"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#slug"></use></svg>
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">twinklede</span>
</a>

          
          <time class="comment__date-time comment__date-time_published">19 мая 2019 в 19:26</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="#comment_20173268" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="20173268" data-action="add" title="Добавить в закладки"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#book"></use></svg></a>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <span class="icon_comment-branch js-comment_tree" data-id="20173268" data-parent_id="20171838" title="Показать ветку комментариев"><svg width="8" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#tree"></use></svg></span>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#comment_20171838" class="icon_comment-arrow-up js-comment_parent" data-id="20173268" data-parent_id="20171838" title="Показать предыдущий комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
    </li>

  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="#comment_20173268" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="20173268" data-parent_id="20171838" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="20173268" data-post-target="450512" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="plus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter  voting-wjt__counter_negative js-score" title="Всего голосов –2: ↑0 и ↓2">–2</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message comment__message_downgrade comment__message_downgrade-2">Неверно.
 Там нет такого понятия как «невалидный». Опять глупости вызванные 
полным непониманием темы. ascii — это таблица, а как там они хранятся и в
 каком виде — абсолютно неважно. Тут идёт попросту путаница с utf8, где 
utf8 — это именно формат кодирования, а не таблица кодов.</div>

        <div class="comment__footer">
    <a href="#reply" class="comment__footer-link reply_link" onclick="return comment_show_reply_form(20173268 )">Ответить</a>


</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-25" id="reply_comments_20173268">  <li class="content-list__item content-list__item_comment js-comment " rel="20173546">
    
    <span class="parent_id" data-parent_id="20173268"></span>
    <div class="comment" id="comment_20173546">
      <span class="comment__collapse" title="Свернуть/развернуть ветку комментариев" data-id="20173546"></span>
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head   " rel="20173546">
          <a href="https://habr.com/ru/users/PsyHaSTe/" class="user-info user-info_inline" rel="user-popover" data-user-login="PsyHaSTe">
    <img src="Swift%20%D0%BF%D1%80%D0%BE%D1%82%D0%B8%D0%B2%20Rust%20%E2%80%94%20%D0%B1%D0%B5%D0%BD%D1%87%D0%BC%D0%B0%D1%80%D0%BA%D0%B8%D0%BD%D0%B3%20%D0%BD%D0%B0%20Linux%20%D1%81%20(%D0%BD%D0%B5)%D0%BF%D0%BE%D0%BD%D1%8F%D1%82%D0%BD%D1%8B%D0%BC%20%D1%84%D0%B8%D0%BD%D0%B0%D0%BB%D0%BE%D0%BC%20_%20%D0%A5%D0%B0%D0%B1%D1%80_files/7631ac5e5a7e237a937f5f2a74ae4c9e.jpg" class="user-info__image-pic user-info__image-pic_small" width="24" height="24">
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">PsyHaSTe</span>
</a>

          
          <time class="comment__date-time comment__date-time_published">19 мая 2019 в 21:30</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="#comment_20173546" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="20173546" data-action="add" title="Добавить в закладки"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#book"></use></svg></a>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <span class="icon_comment-branch js-comment_tree" data-id="20173546" data-parent_id="20173268" title="Показать ветку комментариев"><svg width="8" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#tree"></use></svg></span>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#comment_20173268" class="icon_comment-arrow-up js-comment_parent" data-id="20173546" data-parent_id="20173268" title="Показать предыдущий комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
    </li>

  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="#comment_20173546" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="20173546" data-parent_id="20173268" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="20173546" data-post-target="450512" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="plus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter   js-score" title="Всего голосов 0: ↑0 и ↓0">0</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message "><p>Байт 222 — это какой ASCII символ?</p></div>

        <div class="comment__footer">
    <a href="#reply" class="comment__footer-link reply_link" onclick="return comment_show_reply_form(20173546 )">Ответить</a>


</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-26" id="reply_comments_20173546">  <li class="content-list__item content-list__item_comment js-comment " rel="20173940">
    
    <span class="parent_id" data-parent_id="20173546"></span>
    <div class="comment" id="comment_20173940">
      <span class="comment__collapse" title="Свернуть/развернуть ветку комментариев" data-id="20173940"></span>
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head   " rel="20173940">
          <a href="https://habr.com/ru/users/twinklede/" class="user-info user-info_inline" rel="user-popover" data-user-login="twinklede">
    <svg class="default-image default-image_mini default-image_pink" width="24" height="24"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#slug"></use></svg>
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">twinklede</span>
</a>

          
          <time class="comment__date-time comment__date-time_published">20 мая 2019 в 00:05</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="#comment_20173940" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="20173940" data-action="add" title="Добавить в закладки"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#book"></use></svg></a>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <span class="icon_comment-branch js-comment_tree" data-id="20173940" data-parent_id="20173546" title="Показать ветку комментариев"><svg width="8" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#tree"></use></svg></span>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#comment_20173546" class="icon_comment-arrow-up js-comment_parent" data-id="20173940" data-parent_id="20173546" title="Показать предыдущий комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
    </li>

  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="#comment_20173940" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="20173940" data-parent_id="20173546" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="20173940" data-post-target="450512" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="plus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter  voting-wjt__counter_negative js-score" title="Всего голосов –4: ↑0 и ↓4">–4</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message comment__message_downgrade comment__message_downgrade-4">Нет, это так не работает. Вас поможет не это, а основания(верифицируемые) для признания байта «222» невалидным.<br>
<br>
Хотя даже этого ненужно. Кто вас вообще сказал, что какой-то там байт 
вообще какой-то символ? Это, как я уже говорил, так не работает. 
Семибитную «кодировку» вообще не должно волновать то, что там лежит 
слева, сбоку и в каких-то левых битах.<br>
<br>
Причина тому проста. Если у нас там 0, то чем это отличается от 1? Где 
именно ascii предписывает(даже в древнем rfc 0 там только рекомендация. К
 тому же это именно битовый формат, а не таблица. И тут, опять же, 
ненужно путать), что в каких-то других битах должен быть ноль? Почему не
 1? <br>
<br>
Именно поэтому подобные рассуждения опять сводятся к непониманию темы. 
Какая-то кодировка является лишь интерпретацией каких-то битов. Никаких 
интерпретаций других битов — она не даёт. Поэтому она могут быть какими 
угодно. В этом её свойство.<br>
<br>
utf8(и тот же 16) — это не таблица, а формат кодирования. Именно в нём 
формализовано то, что является ошибкой, а что не является. Прям на 
уровне битов и прям всех байтов.<br>
<br>
Таблица же определяет лишь соответствия уровня число-&gt;символ. Она 
нигде не определяет форматы чисел, какие и где там могут быть записаны 
числа. Сколько их должно быть и какой они должны быть ширины.<br>
<br>
И самое главное, и об этом я уже говорил. Никто и нигде не накладывает 
ограничений на канальный уровень. Никто и нигде не накладывает 
ограничений на вход в декодер. Именно поэтому такого понятия как 
«валидация» вообще существовать не может — это глупость. Валидация 
является лишь частью декодера и не более того.<br>
<br>
С т.з. всего остального — никакой валидации в принципе существовать не может, да и она не имеет смысла.<br>
<br></div>

        <div class="comment__footer">
    <a href="#reply" class="comment__footer-link reply_link" onclick="return comment_show_reply_form(20173940 )">Ответить</a>


</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-27" id="reply_comments_20173940"></ul>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="content-list__item content-list__item_comment js-comment " rel="20172096">
    
    <span class="parent_id" data-parent_id="20171350"></span>
    <div class="comment" id="comment_20172096">
      <span class="comment__collapse" title="Свернуть/развернуть ветку комментариев" data-id="20172096"></span>
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head   " rel="20172096">
          <a href="https://habr.com/ru/users/mayorovp/" class="user-info user-info_inline" rel="user-popover" data-user-login="mayorovp">
    <svg class="default-image default-image_mini default-image_pink" width="24" height="24"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#slug"></use></svg>
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">mayorovp</span>
</a>

          <svg class="icon_comment-edit" title="Комментарий был изменен" width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#pencil"></use></svg>
          <time class="comment__date-time comment__date-time_published">19 мая 2019 в 11:46</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="#comment_20172096" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="20172096" data-action="add" title="Добавить в закладки"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#book"></use></svg></a>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <span class="icon_comment-branch js-comment_tree" data-id="20172096" data-parent_id="20171350" title="Показать ветку комментариев"><svg width="8" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#tree"></use></svg></span>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#comment_20171350" class="icon_comment-arrow-up js-comment_parent" data-id="20172096" data-parent_id="20171350" title="Показать предыдущий комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
    </li>

  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="#comment_20172096" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="20172096" data-parent_id="20171350" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="20172096" data-post-target="450512" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="plus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter   js-score" title="Всего голосов 0: ↑0 и ↓0">0</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message "><p>В UCS-2/UCS-4, опять-таки, 
существуют невалидные коды. Из-за тех самых суррогатных пар. Собственно,
 суррогаты как раз и невалидны, поскольку соответствующих им символов в 
Юникоде не существует.</p></div>

        <div class="comment__footer">
    <a href="#reply" class="comment__footer-link reply_link" onclick="return comment_show_reply_form(20172096 )">Ответить</a>


</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-24" id="reply_comments_20172096">  <li class="content-list__item content-list__item_comment js-comment " rel="20173390">
    
    <span class="parent_id" data-parent_id="20172096"></span>
    <div class="comment" id="comment_20173390">
      <span class="comment__collapse" title="Свернуть/развернуть ветку комментариев" data-id="20173390"></span>
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head   " rel="20173390">
          <a href="https://habr.com/ru/users/twinklede/" class="user-info user-info_inline" rel="user-popover" data-user-login="twinklede">
    <svg class="default-image default-image_mini default-image_pink" width="24" height="24"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#slug"></use></svg>
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">twinklede</span>
</a>

          
          <time class="comment__date-time comment__date-time_published">19 мая 2019 в 20:19</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="#comment_20173390" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="20173390" data-action="add" title="Добавить в закладки"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#book"></use></svg></a>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <span class="icon_comment-branch js-comment_tree" data-id="20173390" data-parent_id="20172096" title="Показать ветку комментариев"><svg width="8" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#tree"></use></svg></span>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#comment_20172096" class="icon_comment-arrow-up js-comment_parent" data-id="20173390" data-parent_id="20172096" title="Показать предыдущий комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
    </li>

  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="#comment_20173390" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="20173390" data-parent_id="20172096" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="20173390" data-post-target="450512" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="plus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter  voting-wjt__counter_negative js-score" title="Всего голосов –2: ↑0 и ↓2">–2</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message comment__message_downgrade comment__message_downgrade-2"><blockquote>В UCS-2/UCS-4, опять-таки, существуют невалидные коды. </blockquote><br>
Там не может подобного существовать в принципе. Это просто таблица.<br>
<br>
<blockquote>Из-за тех самых суррогатных пар. Собственно, суррогаты как 
раз и невалидны, поскольку соответствующих им символов в Юникоде не 
существует.</blockquote><br>
Не существует — не значит невалидно.<br>
<br>
В целом я ваши рассуждения вообще не понимаю. Вы откуда-то взяли 
какое-то «валидно», но ссылаетесь на декодирование(которое вы, очевидно,
 не делаете). Вы каким-то образом накладываете критерий валидности на 
передающий канал, хотя никакого подобного упоминания нет. И это попросту
 бред. «Валидация» — это задача декодера.<br>
<br>
В конечном итоге была придумана какая-то глупость и путём подмены 
понятий с кого-то начинается требование. Я вообще могу сослаться на 
декодер и то, что декодер является валидатором, а значит МОЖЕТ принимать
 невалидную последовательность.<br>
<br>
Из этого напрямую следует то, что на входящую последовательность НИКАКИХ
 ограничений нет. А значит никакого смысла валидации нет и вообще её 
нет. Это ваша локальная придумка.<br></div>

        <div class="comment__footer">
    <a href="#reply" class="comment__footer-link reply_link" onclick="return comment_show_reply_form(20173390 )">Ответить</a>


</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-25" id="reply_comments_20173390"></ul>
  </li>
</ul>
  </li>
  <li class="content-list__item content-list__item_comment js-comment " rel="20172808">
    
    <span class="parent_id" data-parent_id="20171350"></span>
    <div class="comment" id="comment_20172808">
      <span class="comment__collapse" title="Свернуть/развернуть ветку комментариев" data-id="20172808"></span>
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head   " rel="20172808">
          <a href="https://habr.com/ru/users/freecoder_xx/" class="user-info user-info_inline" rel="user-popover" data-user-login="freecoder_xx">
    <img src="Swift%20%D0%BF%D1%80%D0%BE%D1%82%D0%B8%D0%B2%20Rust%20%E2%80%94%20%D0%B1%D0%B5%D0%BD%D1%87%D0%BC%D0%B0%D1%80%D0%BA%D0%B8%D0%BD%D0%B3%20%D0%BD%D0%B0%20Linux%20%D1%81%20(%D0%BD%D0%B5)%D0%BF%D0%BE%D0%BD%D1%8F%D1%82%D0%BD%D1%8B%D0%BC%20%D1%84%D0%B8%D0%BD%D0%B0%D0%BB%D0%BE%D0%BC%20_%20%D0%A5%D0%B0%D0%B1%D1%80_files/0c40b0aab930790cf75c1321e40a9912.jpg" class="user-info__image-pic user-info__image-pic_small" width="24" height="24">
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">freecoder_xx</span>
</a>

          
          <time class="comment__date-time comment__date-time_published">19 мая 2019 в 16:22</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="#comment_20172808" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="20172808" data-action="add" title="Добавить в закладки"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#book"></use></svg></a>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <span class="icon_comment-branch js-comment_tree" data-id="20172808" data-parent_id="20171350" title="Показать ветку комментариев"><svg width="8" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#tree"></use></svg></span>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#comment_20171350" class="icon_comment-arrow-up js-comment_parent" data-id="20172808" data-parent_id="20171350" title="Показать предыдущий комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
    </li>

  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="#comment_20172808" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="20172808" data-parent_id="20171350" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="20172808" data-post-target="450512" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="plus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter   js-score" title="Всего голосов 0: ↑0 и ↓0">0</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message "><blockquote>Можете предоставить ссылку на то, что стандарт utf16 как-то ограничивает значение второго числа из пары.</blockquote><p>10
 разряд обоих слов пары используется для указания признака лидирующего 
или последующего слова. А пять старших разрядов у обоих слов должны 
содержать 11011. Так что для кодирования символа в паре используется 
только 20 разрядов:</p><br>
<pre><code class="plaintext hljs">U' = yyyyyyyyyyxxxxxxxxxx
W1 = 110110yyyyyyyyyy
W2 = 110111xxxxxxxxxx</code></pre><br>
<p><a href="https://tools.ietf.org/html/rfc2781#section-2.1">UTF-16, an encoding of ISO 10646 — 2.1 Encoding UTF-16</a></p></div>

        <div class="comment__footer">
    <a href="#reply" class="comment__footer-link reply_link" onclick="return comment_show_reply_form(20172808 )">Ответить</a>


</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-24" id="reply_comments_20172808">  <li class="content-list__item content-list__item_comment js-comment " rel="20173304">
    
    <span class="parent_id" data-parent_id="20172808"></span>
    <div class="comment" id="comment_20173304">
      <span class="comment__collapse" title="Свернуть/развернуть ветку комментариев" data-id="20173304"></span>
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head   " rel="20173304">
          <a href="https://habr.com/ru/users/twinklede/" class="user-info user-info_inline" rel="user-popover" data-user-login="twinklede">
    <svg class="default-image default-image_mini default-image_pink" width="24" height="24"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#slug"></use></svg>
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">twinklede</span>
</a>

          <svg class="icon_comment-edit" title="Комментарий был изменен" width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#pencil"></use></svg>
          <time class="comment__date-time comment__date-time_published">19 мая 2019 в 19:38</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="#comment_20173304" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="20173304" data-action="add" title="Добавить в закладки"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#book"></use></svg></a>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <span class="icon_comment-branch js-comment_tree" data-id="20173304" data-parent_id="20172808" title="Показать ветку комментариев"><svg width="8" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#tree"></use></svg></span>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#comment_20172808" class="icon_comment-arrow-up js-comment_parent" data-id="20173304" data-parent_id="20172808" title="Показать предыдущий комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
    </li>

  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="#comment_20173304" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="20173304" data-parent_id="20172808" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="20173304" data-post-target="450512" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="plus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter  voting-wjt__counter_negative js-score" title="Всего голосов –3: ↑0 и ↓3">–3</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message comment__message_downgrade comment__message_downgrade-3"><blockquote>If there is no W2 (that is, the sequence ends with W1), or if W2<br>
 is not between 0xDC00 and 0xDFFF, the sequence is in error.<br>
 Terminate.</blockquote><br>
Т.е. там попросту есть ограничения на значения во второй части пары. <br>
<br>
<blockquote>При этом последующее слово обязательно должно содержать 
110111 в старших разрядах. Если это не так, то последовательность 
невалидна.</blockquote><br>
Этого я там не нашел.<br>
<br>
<blockquote>W1 is between 0xD800 and 0xDBFF<br>
W2 is between 0xDC00 and 0xDFFF</blockquote><br>
Это все ограничения, которые я там увидел.<br>
<br>
Но в любом случае — ограничения на значения в utf16 есть. Значит она может быть невалидной.<br>
<br>
<blockquote>Also note that a string<br>
 decoding algorithm, as opposed to the single-character decoding<br>
 described above, need not terminate upon detection of an error, if<br>
 proper error reporting and/or recovery is provided.</blockquote><br>
Хотя тут допускается игнорирование ошибок. Зарепортить можно когда и как
 угодно. Аналогично с восстановлением. После, по-факту использования я 
могу попросту игнорировать «битые» пары. Насколько я понимаю под 
восстановлением тут понимается «восстановление владиности 
последовательности».<br>
<br></div>

        <div class="comment__footer">
    <a href="#reply" class="comment__footer-link reply_link" onclick="return comment_show_reply_form(20173304 )">Ответить</a>


</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-25" id="reply_comments_20173304">  <li class="content-list__item content-list__item_comment js-comment " rel="20185360">
    
    <span class="parent_id" data-parent_id="20173304"></span>
    <div class="comment" id="comment_20185360">
      <span class="comment__collapse" title="Свернуть/развернуть ветку комментариев" data-id="20185360"></span>
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head   " rel="20185360">
          <a href="https://habr.com/ru/users/freecoder_xx/" class="user-info user-info_inline" rel="user-popover" data-user-login="freecoder_xx">
    <img src="Swift%20%D0%BF%D1%80%D0%BE%D1%82%D0%B8%D0%B2%20Rust%20%E2%80%94%20%D0%B1%D0%B5%D0%BD%D1%87%D0%BC%D0%B0%D1%80%D0%BA%D0%B8%D0%BD%D0%B3%20%D0%BD%D0%B0%20Linux%20%D1%81%20(%D0%BD%D0%B5)%D0%BF%D0%BE%D0%BD%D1%8F%D1%82%D0%BD%D1%8B%D0%BC%20%D1%84%D0%B8%D0%BD%D0%B0%D0%BB%D0%BE%D0%BC%20_%20%D0%A5%D0%B0%D0%B1%D1%80_files/0c40b0aab930790cf75c1321e40a9912.jpg" class="user-info__image-pic user-info__image-pic_small" width="24" height="24">
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">freecoder_xx</span>
</a>

          <svg class="icon_comment-edit" title="Комментарий был изменен" width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#pencil"></use></svg>
          <time class="comment__date-time comment__date-time_published">22 мая 2019 в 14:51</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="#comment_20185360" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="20185360" data-action="add" title="Добавить в закладки"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#book"></use></svg></a>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <span class="icon_comment-branch js-comment_tree" data-id="20185360" data-parent_id="20173304" title="Показать ветку комментариев"><svg width="8" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#tree"></use></svg></span>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#comment_20173304" class="icon_comment-arrow-up js-comment_parent" data-id="20185360" data-parent_id="20173304" title="Показать предыдущий комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
    </li>

  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="#comment_20185360" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="20185360" data-parent_id="20173304" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="20185360" data-post-target="450512" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="plus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter voting-wjt__counter_positive  js-score" title="Всего голосов +1: ↑1 и ↓0">+1</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message "><blockquote><blockquote>If there is no W2 (that is, the sequence ends with W1), or if W2 is not between 0xDC00 and 0xDFFF, the sequence is in error.<br>
Terminate.</blockquote><p>Т.е. там попросту есть ограничения на значения во второй части пары.</p><br>
<blockquote>При этом последующее слово обязательно должно содержать 
110111 в старших разрядах. Если это не так, то последовательность 
невалидна.</blockquote><p>Этого я там не нашел.</p><br>
<br>
</blockquote><p>0xDC00 = <strong>110111</strong>0000000000<br>
0xDFFF = <strong>110111</strong>1111111111</p></div>

        <div class="comment__footer">
    <a href="#reply" class="comment__footer-link reply_link" onclick="return comment_show_reply_form(20185360 )">Ответить</a>


</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-26" id="reply_comments_20185360"></ul>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="content-list__item content-list__item_comment js-comment " rel="20196814">
    
    <span class="parent_id" data-parent_id="20170962"></span>
    <div class="comment" id="comment_20196814">
      <span class="comment__collapse" title="Свернуть/развернуть ветку комментариев" data-id="20196814"></span>
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head   " rel="20196814">
          <a href="https://habr.com/ru/users/grossws/" class="user-info user-info_inline" rel="user-popover" data-user-login="grossws">
    <img src="Swift%20%D0%BF%D1%80%D0%BE%D1%82%D0%B8%D0%B2%20Rust%20%E2%80%94%20%D0%B1%D0%B5%D0%BD%D1%87%D0%BC%D0%B0%D1%80%D0%BA%D0%B8%D0%BD%D0%B3%20%D0%BD%D0%B0%20Linux%20%D1%81%20(%D0%BD%D0%B5)%D0%BF%D0%BE%D0%BD%D1%8F%D1%82%D0%BD%D1%8B%D0%BC%20%D1%84%D0%B8%D0%BD%D0%B0%D0%BB%D0%BE%D0%BC%20_%20%D0%A5%D0%B0%D0%B1%D1%80_files/be321ce5998c10ffff4b20f0c5dd9862.jpg" class="user-info__image-pic user-info__image-pic_small" width="24" height="24">
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">grossws</span>
</a>

          
          <time class="comment__date-time comment__date-time_published">24 мая 2019 в 18:24</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="#comment_20196814" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="20196814" data-action="add" title="Добавить в закладки"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#book"></use></svg></a>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <span class="icon_comment-branch js-comment_tree" data-id="20196814" data-parent_id="20170962" title="Показать ветку комментариев"><svg width="8" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#tree"></use></svg></span>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#comment_20170962" class="icon_comment-arrow-up js-comment_parent" data-id="20196814" data-parent_id="20170962" title="Показать предыдущий комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
    </li>

  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="#comment_20196814" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="20196814" data-parent_id="20170962" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="20196814" data-post-target="450512" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="plus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter   js-score" title="Всего голосов 0: ↑0 и ↓0">0</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message "><blockquote>Никакой валидации 
utf16 не требует, я специально упомянул именно его, что-бы в очередной 
раз доказать ваш уровень понимания темы.</blockquote><p>Как насчёт строки состоящей из двух байт <code>0x00, 0xd8</code> в utf-16 le. Всё ещё не требует валидации? Или разницы между UTF-16 и UCS-2 по-вашему нет?</p></div>

        <div class="comment__footer">
    <a href="#reply" class="comment__footer-link reply_link" onclick="return comment_show_reply_form(20196814 )">Ответить</a>


</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-22" id="reply_comments_20196814">  <li class="content-list__item content-list__item_comment js-comment " rel="20197518">
    
    <span class="parent_id" data-parent_id="20196814"></span>
    <div class="comment" id="comment_20197518">
      <span class="comment__collapse" title="Свернуть/развернуть ветку комментариев" data-id="20197518"></span>
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head   " rel="20197518">
          <a href="https://habr.com/ru/users/twinklede/" class="user-info user-info_inline" rel="user-popover" data-user-login="twinklede">
    <svg class="default-image default-image_mini default-image_pink" width="24" height="24"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#slug"></use></svg>
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">twinklede</span>
</a>

          
          <time class="comment__date-time comment__date-time_published">24 мая 2019 в 22:36</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="#comment_20197518" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="20197518" data-action="add" title="Добавить в закладки"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#book"></use></svg></a>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <span class="icon_comment-branch js-comment_tree" data-id="20197518" data-parent_id="20196814" title="Показать ветку комментариев"><svg width="8" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#tree"></use></svg></span>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#comment_20196814" class="icon_comment-arrow-up js-comment_parent" data-id="20197518" data-parent_id="20196814" title="Показать предыдущий комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
    </li>

  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="#comment_20197518" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="20197518" data-parent_id="20196814" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="20197518" data-post-target="450512" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="plus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter  voting-wjt__counter_negative js-score" title="Всего голосов –4: ↑0 и ↓4">–4</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message comment__message_downgrade comment__message_downgrade-4"><blockquote>Всё ещё не требует валидации?</blockquote><br>
Я уже отвечал на это и на тысячи подобных вопросов. Я до сих пор не 
понял зачем вы говорите о какой-то валидации. Зачем она нужна? Какой в 
ней смысл? Делать два раза одну и туже работу?<br>
<br>
Есть ли в utf16 «неправильные» последовательности, либо нет — так же 
неважно. utf16 лишь пример, которую я перепутал с ucs-2, а даже если бы 
не перепутал — это так же ничего не меняет.<br>
<br>
Факт остаётся фактом — строка является транспортом для данных. Никакой транспорт валидировать ненужно и это не имеет смысла.<br>
<br>
Аналогично и с utf8. Строка не с utf8 не становится мусором, как 
утверждалось выше. И даже если мы примем какую-то необходимость 
валидации строки, то не все форматы кодирования избыточны.</div>

        <div class="comment__footer">
    <a href="#reply" class="comment__footer-link reply_link" onclick="return comment_show_reply_form(20197518 )">Ответить</a>


</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-23" id="reply_comments_20197518">  <li class="content-list__item content-list__item_comment js-comment " rel="20198950">
    
    <span class="parent_id" data-parent_id="20197518"></span>
    <div class="comment" id="comment_20198950">
      <span class="comment__collapse" title="Свернуть/развернуть ветку комментариев" data-id="20198950"></span>
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head   " rel="20198950">
          <a href="https://habr.com/ru/users/grossws/" class="user-info user-info_inline" rel="user-popover" data-user-login="grossws">
    <img src="Swift%20%D0%BF%D1%80%D0%BE%D1%82%D0%B8%D0%B2%20Rust%20%E2%80%94%20%D0%B1%D0%B5%D0%BD%D1%87%D0%BC%D0%B0%D1%80%D0%BA%D0%B8%D0%BD%D0%B3%20%D0%BD%D0%B0%20Linux%20%D1%81%20(%D0%BD%D0%B5)%D0%BF%D0%BE%D0%BD%D1%8F%D1%82%D0%BD%D1%8B%D0%BC%20%D1%84%D0%B8%D0%BD%D0%B0%D0%BB%D0%BE%D0%BC%20_%20%D0%A5%D0%B0%D0%B1%D1%80_files/be321ce5998c10ffff4b20f0c5dd9862.jpg" class="user-info__image-pic user-info__image-pic_small" width="24" height="24">
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">grossws</span>
</a>

          
          <time class="comment__date-time comment__date-time_published">25 мая 2019 в 16:47</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="#comment_20198950" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="20198950" data-action="add" title="Добавить в закладки"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#book"></use></svg></a>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <span class="icon_comment-branch js-comment_tree" data-id="20198950" data-parent_id="20197518" title="Показать ветку комментариев"><svg width="8" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#tree"></use></svg></span>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#comment_20197518" class="icon_comment-arrow-up js-comment_parent" data-id="20198950" data-parent_id="20197518" title="Показать предыдущий комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
    </li>

  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="#comment_20198950" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="20198950" data-parent_id="20197518" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="20198950" data-post-target="450512" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="plus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter voting-wjt__counter_positive  js-score" title="Всего голосов +2: ↑2 и ↓0">+2</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message "><p>Спасибо за ваше 
квалифицированное мнение. Некоторые писатели парсеров ASN.1 тоже 
заявляли подобное, потом можно было спокойно выпускать сертификат на <code>"*.google.com\0.my-evil-domain.ru"</code> и браузеры его прекрасно интерпретировали как <code>google.com</code>.
 И куча других не менее прелестных CVE где причиной стало то, что 
разработчики не обращают внимания на то что в разных контекстах строка 
может быть не просто <code>char *</code> или <code>uint8_t *</code> с null-termination, но и чем-то другим. Другой хороший пример, что <em>"транспорт валидировать не надо"</em> назывался heartbleed. Помните такой?</p><br>
<p>Если так хочется сравнивать использовать в rust'е, например, "строки" не с utf8 никто не мешает использовать срезы байт (<code>&amp;[u8]</code>), которые эффективно являются указателем + длинной как и плюсовый <code>string_view</code> или какую-нибудь <code>OsString</code>, который имеет более слабые инварианты на содержимое нижележащего массива байт.</p></div>

        <div class="comment__footer">
    <a href="#reply" class="comment__footer-link reply_link" onclick="return comment_show_reply_form(20198950 )">Ответить</a>


</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-24" id="reply_comments_20198950">  <li class="content-list__item content-list__item_comment js-comment " rel="20199076">
    
    <span class="parent_id" data-parent_id="20198950"></span>
    <div class="comment" id="comment_20199076">
      <span class="comment__collapse" title="Свернуть/развернуть ветку комментариев" data-id="20199076"></span>
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head   " rel="20199076">
          <a href="https://habr.com/ru/users/twinklede/" class="user-info user-info_inline" rel="user-popover" data-user-login="twinklede">
    <svg class="default-image default-image_mini default-image_pink" width="24" height="24"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#slug"></use></svg>
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">twinklede</span>
</a>

          
          <time class="comment__date-time comment__date-time_published">25 мая 2019 в 18:11</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="#comment_20199076" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="20199076" data-action="add" title="Добавить в закладки"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#book"></use></svg></a>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <span class="icon_comment-branch js-comment_tree" data-id="20199076" data-parent_id="20198950" title="Показать ветку комментариев"><svg width="8" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#tree"></use></svg></span>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#comment_20198950" class="icon_comment-arrow-up js-comment_parent" data-id="20199076" data-parent_id="20198950" title="Показать предыдущий комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
    </li>

  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="#comment_20199076" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="20199076" data-parent_id="20198950" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="20199076" data-post-target="450512" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="plus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter  voting-wjt__counter_negative js-score" title="Всего голосов –4: ↑0 и ↓4">–4</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message comment__message_downgrade comment__message_downgrade-4"><blockquote>Спасибо за ваше квалифицированное мнение.</blockquote><br>
Ну кому-то же надо его иметь.<br>
<br>
<blockquote> Некоторые писатели парсеров ASN.1 тоже заявляли подобное, 
потом можно было спокойно выпускать сертификат на 
"*.google.com\0.my-evil-domain.ru" и браузеры его прекрасно 
интерпретировали как google.com.</blockquote><br>
Какая-то чушь. Оно так интерпретируется именно потому, что 
интерпретируется «правильно». А вот если бы это был «массив байт», то 
никогда такого бы не произошло. Это очевидно.<br>
<br>
<blockquote> куча других не менее прелестных CVE где причиной стало то, 
что разработчики не обращают внимания на то что в разных контекстах 
строка может быть не просто char * или uint8_t * с null-termination, но и
 чем-то другим. </blockquote><br>
Больше базвордов, больше отсылок на фентейзиные cve.<br>
<br>
Ваши рассуждений сломались так и не начавшись. Изначально речь шла о 
«всё что не utf8 — мусор». Теперь вдруг риторика поменялась и началось 
какое-то char, null и прочие не относящиеся к теме рассуждения.<br>
<br>
<blockquote>Другой хороший пример, что «транспорт валидировать не надо» назывался heartbleed. Помните такой?</blockquote><br>
Такая же глупость. heartbleed вообще никак не связан с темой. Это глупая
 попытка выдернуть фразу, интерпретировать как угодно. Очевидно, что под
 транспортом имелось ввиду «транспортируемые данные». <br>
<blockquote>Если так хочется сравнивать использовать в rust'е, например, «строки» не с utf8</blockquote><br>
И опять враньё. Строк не с utf8 нету. Это всё мусор. Зачем мне использовать мусор?<br>
<br>
К тому же, вы сейчас умножили на ноль все предыдущие рассуждений. Если 
это делать можно, то зачем все эти рассуждения про cve/hb? Пустить пыль в
 глаза?<br>
<br>
Все эти рассуждения имеют единственную предпосылку «у вас можно сделать 
неправильно». Если неправильно можно сделать везде, то смысла в этих 
рассуждениях нет.<br>
<br>
<blockquote>никто не мешает использовать срезы байт (&amp;[u8]), которые
 эффективно являются указателем + длинной как и плюсовый string_view или
 какую-нибудь OsString, который имеет более слабые инварианты на 
содержимое нижележащего массива байт.</blockquote><br>
К эффективности rust не имеет никакого отношения. По поводу «можно» — это такая же глупость.<br>
<br>
Меня не должно волновать слово «можно», меня должно волновать слово 
«как». Можно и черепом гвозди забивать, но я так делать не буду.<br>
<br>
Определяющим является не то, что там можно через какое-то одно место(и 
то, можно только номинально). А то, насколько всё это прозрачно и удобно
 происходит.<br>
<br></div>

        <div class="comment__footer">
    <a href="#reply" class="comment__footer-link reply_link" onclick="return comment_show_reply_form(20199076 )">Ответить</a>


</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-25" id="reply_comments_20199076">  <li class="content-list__item content-list__item_comment js-comment " rel="20206634">
    
    <span class="parent_id" data-parent_id="20199076"></span>
    <div class="comment" id="comment_20206634">
      <span class="comment__collapse" title="Свернуть/развернуть ветку комментариев" data-id="20206634"></span>
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head   " rel="20206634">
          <a href="https://habr.com/ru/users/grossws/" class="user-info user-info_inline" rel="user-popover" data-user-login="grossws">
    <img src="Swift%20%D0%BF%D1%80%D0%BE%D1%82%D0%B8%D0%B2%20Rust%20%E2%80%94%20%D0%B1%D0%B5%D0%BD%D1%87%D0%BC%D0%B0%D1%80%D0%BA%D0%B8%D0%BD%D0%B3%20%D0%BD%D0%B0%20Linux%20%D1%81%20(%D0%BD%D0%B5)%D0%BF%D0%BE%D0%BD%D1%8F%D1%82%D0%BD%D1%8B%D0%BC%20%D1%84%D0%B8%D0%BD%D0%B0%D0%BB%D0%BE%D0%BC%20_%20%D0%A5%D0%B0%D0%B1%D1%80_files/be321ce5998c10ffff4b20f0c5dd9862.jpg" class="user-info__image-pic user-info__image-pic_small" width="24" height="24">
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">grossws</span>
</a>

          
          <time class="comment__date-time comment__date-time_published">27 мая 2019 в 17:20</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="#comment_20206634" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="20206634" data-action="add" title="Добавить в закладки"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#book"></use></svg></a>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <span class="icon_comment-branch js-comment_tree" data-id="20206634" data-parent_id="20199076" title="Показать ветку комментариев"><svg width="8" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#tree"></use></svg></span>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#comment_20199076" class="icon_comment-arrow-up js-comment_parent" data-id="20206634" data-parent_id="20199076" title="Показать предыдущий комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
    </li>

  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="#comment_20206634" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="20206634" data-parent_id="20199076" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="20206634" data-post-target="450512" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="plus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter   js-score" title="Всего голосов 0: ↑0 и ↓0">0</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message "><p>Во-первых, у вас детектор сарказма сломался.</p><br>
<blockquote>Оно так интерпретируется именно потому, что интерпретируется
 «правильно». А вот если бы это был «массив байт», то никогда такого бы 
не произошло. Это очевидно.</blockquote><p>Ну-ну, т. е. паскалёвых и подобных строк не существует. И понятие строки из различных представлений ASN.1.</p><br>
<p>У меня сложилось впечатление, что Вы не осознаёте, что в различных 
контекстах понятие строки может быть различное. Где-то это просто byte 
array + lenght, где-то с требованием валидного UTF-16 в native 
endianness, где-то null terminated byte array, где-то byte array с 
указателем на объект encoder'а и decoder'а. И всё это строки. </p><br>
<p>Сравнивать стоит всё-таки сопоставимые вещи, о чём Вам здесь не раз 
сказали. Сравнивать реализацию с валидацией входного потока и без, да 
потом заявлять что реализация без валидации выше/лучше/быстрее выглядит 
как какой-то маразм. И цепляться после этого к тому что в другом языке 
и/или стандартной библиотеке под строкой могут понимать что-то другое — 
тоже.</p></div>

        <div class="comment__footer">
    <a href="#reply" class="comment__footer-link reply_link" onclick="return comment_show_reply_form(20206634 )">Ответить</a>


</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-26" id="reply_comments_20206634">  <li class="content-list__item content-list__item_comment js-comment " rel="20207316">
    
    <span class="parent_id" data-parent_id="20206634"></span>
    <div class="comment" id="comment_20207316">
      <span class="comment__collapse" title="Свернуть/развернуть ветку комментариев" data-id="20207316"></span>
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head   " rel="20207316">
          <a href="https://habr.com/ru/users/twinklede/" class="user-info user-info_inline" rel="user-popover" data-user-login="twinklede">
    <svg class="default-image default-image_mini default-image_pink" width="24" height="24"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#slug"></use></svg>
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">twinklede</span>
</a>

          
          <time class="comment__date-time comment__date-time_published">27 мая 2019 в 19:55</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="#comment_20207316" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="20207316" data-action="add" title="Добавить в закладки"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#book"></use></svg></a>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <span class="icon_comment-branch js-comment_tree" data-id="20207316" data-parent_id="20206634" title="Показать ветку комментариев"><svg width="8" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#tree"></use></svg></span>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#comment_20206634" class="icon_comment-arrow-up js-comment_parent" data-id="20207316" data-parent_id="20206634" title="Показать предыдущий комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
    </li>

  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="#comment_20207316" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="20207316" data-parent_id="20206634" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="20207316" data-post-target="450512" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="plus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter  voting-wjt__counter_negative js-score" title="Всего голосов –3: ↑0 и ↓3">–3</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message comment__message_downgrade comment__message_downgrade-3"><blockquote>Ну-ну, т. е. паскалёвых и подобных строк не существует. И понятие строки из различных представлений ASN.1.</blockquote><br>
Попытка подменять понятия. Я говорил именно про данные, к паскаль/си-строке это не имеет никакого отношения.<br>
<br>
Я уж не стал цепляться к ваши примерам с hb. Но я вам подскажу. Именно 
то, что openssl следовал вашей логике и получился hb. Именно потому, что
 openssl пытался не отделял транспорт от транспортируемого и вышла 
подобная ситуация. Как и ваш другой пример был глуп.<br>
<br>
Никогда адекватный транспорт не должен вообще смотреть на 
транспортируемое и никак с ним взаимодействовать. Именно тогда, и только
 тогда, никаких проблем не будет. Задача интерпретации/валидации данных —
 это задача той логики, которая как-то работает с этими данными.<br>
<br>
Строка, как транспорт, с ними не работает и её абсолютно не должно 
волновать какие в ней лежат данные. Если вы хотите валидировать данные —
 их нужно валидировать на входе. Строка этим входом не является.<br>
<br>
<blockquote>У меня сложилось впечатление, что Вы не осознаёте, что в различных контекстах понятие строки может быть различное. </blockquote><br>
Вы это не мне пишите, а тем, кто утверждал «строки — это наши строки с 
utf8, а всё остальное мусор». Для меня строка — некий транспорт для 
данных. Транспорту абсолютно без разницы что там внутри него. <br>
<br>
<blockquote>Где-то это просто byte array + lenght</blockquote><br>
Это описание транспорта.<br>
<br>
<blockquote>где-то с требованием валидного UTF-16 в native endianness, 
где-то null terminated byte array, где-то byte array с указателем на 
объект encoder'а и decoder'а. И всё это строки.</blockquote><br>
Вы должны спорить не со мною. С чем именно вы спорите? С моим тезисом 
«транспорт не должно интересовать транспортируемое»? Я не считаю 
обратное осмысленным. Вы можете с этим поспорить.<br>
<br>
Ссылки на «я считаю, что можно и валидировать» не являются аргументом. 
Вы должны объяснить «зачем». Зачем делать что-то, что предлагаете 
делать.<br>
<br>
<blockquote>Сравнивать стоит всё-таки сопоставимые вещи, о чём Вам здесь не раз сказали. </blockquote><br>
Я что-то не вижу вашей критики под «я сравниваю многопоточное/однопоточное», «я сравниваю sax/dom»? Зачем вы это пишите мне?<br>
<br>
Кто вам не даёт убрать ненужную здесь валидацию? Это не моя проблема, 
что вы её не убрали. И это не было темой обсуждения. Вы опять врёте.<br>
<br>
Темой обсуждение было «мы не убрали потому что убирать неправильно» — 
ваша задача обосновать почему. Зачем вы пытаетесь подменить контекст? <br>
<br>
<blockquote>Сравнивать реализацию с валидацией входного потока и без,</blockquote><br>
Во-первых вы опять врёте, т.к. валидация в моём коде есть. Во-вторых, 
как я уже говорил, наличие валидации у вас — ваша проблемы. Она не 
ставилась как требование автора, а значит она ненужна. Вы должны 
обосновать её наличие. Если вы пытаетесь утверждать, что моя реализация 
неверня или что-то тому подобное.<br>
<br>
К тому же, вас никак это не спасёт. Даже если я буду строку хоть 10 раз валидировать.<br>
<br>
<blockquote> да потом заявлять что реализация без валидации выше/лучше/быстрее выглядит как какой-то маразм. </blockquote><br>
Опять враньё про отсутствие валидации. Опять враньё про причину 
проигрыша. Причина не в валидации. Повторюсь, кто вам мешал её убрать? 
Она была в требованиях автора? Нет. У вас она есть? Да. У вас с нею 
проблемы? Уберите её.<br>
<br>
<blockquote>И цепляться после этого к тому что в другом языке и/или стандартной библиотеке под строкой могут понимать что-то другое — тоже.</blockquote><br>
Опять враньё. Почему каждый ваш тезис — враньё? Цеплялись вы. Вы начали 
оправдываться, вы начали утверждать, что строки только utf8 и всё 
остальное мусор.<br>
<br>
С чего вдруг я должен идти на поводу у ограничения какого-либо пхп и 
заниматься какой-то ненужностью? Это ваша проблема, а не моя.<br>
<br>
К тому же, где критика моих оппонентов которые действительно сравнивали 
несравнимой? Какая-то у вас однобокая справедливость получается. Почему 
та происходит?<br>
<br>
После того, каким «сравнением несравнимого» поклонники очередного пхп 
пытались выиграть мой код — я могу говорить что угодно. Я не собираюсь 
играть по правилам, которые нарушаете вы. Вы их нарушили множество раз. 
После этого все обвинения меня не имеют смысла.<br>
<br>
К тому же даже ваши обвинения ложны.<br>
<br></div>

        <div class="comment__footer">
    <a href="#reply" class="comment__footer-link reply_link" onclick="return comment_show_reply_form(20207316 )">Ответить</a>


</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-27" id="reply_comments_20207316"></ul>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="content-list__item content-list__item_comment js-comment " rel="20148346">
    
    <span class="parent_id" data-parent_id="20147400"></span>
    <div class="comment" id="comment_20148346">
      <span class="comment__collapse" title="Свернуть/развернуть ветку комментариев" data-id="20148346"></span>
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head comment__head_topic-author comment__head_my-comment " rel="20148346">
          <a href="https://habr.com/ru/users/epishman/" class="user-info user-info_inline" rel="user-popover" data-user-login="epishman">
    <img src="Swift%20%D0%BF%D1%80%D0%BE%D1%82%D0%B8%D0%B2%20Rust%20%E2%80%94%20%D0%B1%D0%B5%D0%BD%D1%87%D0%BC%D0%B0%D1%80%D0%BA%D0%B8%D0%BD%D0%B3%20%D0%BD%D0%B0%20Linux%20%D1%81%20(%D0%BD%D0%B5)%D0%BF%D0%BE%D0%BD%D1%8F%D1%82%D0%BD%D1%8B%D0%BC%20%D1%84%D0%B8%D0%BD%D0%B0%D0%BB%D0%BE%D0%BC%20_%20%D0%A5%D0%B0%D0%B1%D1%80_files/ec0d88c4853c0d36d44bd0526dcfa8d7.png" class="user-info__image-pic user-info__image-pic_small" width="24" height="24">
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">epishman</span>
</a>

          
          <time class="comment__date-time comment__date-time_published">13 мая 2019 в 22:16</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="#comment_20148346" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="20148346" data-action="add" title="Добавить в закладки"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#book"></use></svg></a>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <span class="icon_comment-branch js-comment_tree" data-id="20148346" data-parent_id="20147400" title="Показать ветку комментариев"><svg width="8" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#tree"></use></svg></span>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#comment_20147400" class="icon_comment-arrow-up js-comment_parent" data-id="20148346" data-parent_id="20147400" title="Показать предыдущий комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
    </li>

  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="#comment_20148346" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="20148346" data-parent_id="20147400" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="20148346" data-post-target="450512" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="plus" onclick="comment_vote(this);" title="За свои комментарии голосовать нельзя" disabled="disabled"><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter   js-score" title="Всего голосов 0: ↑0 и ↓0">0</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="За свои комментарии голосовать нельзя" disabled="disabled"><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message ">Я ошибся в merge_result, там 
нужно итеративно мерджить, ведь есть связи через несколько компаний, 
поэтому и результаты разные — в зависимости как данные между потоками 
распределились.</div>

        <div class="comment__footer">
    <a href="#reply" class="comment__footer-link reply_link" onclick="return comment_show_reply_form(20148346 )">Ответить</a>


</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-8" id="reply_comments_20148346">  <li class="content-list__item content-list__item_comment js-comment " rel="20148470">
    
    <span class="parent_id" data-parent_id="20148346"></span>
    <div class="comment" id="comment_20148470">
      <span class="comment__collapse" title="Свернуть/развернуть ветку комментариев" data-id="20148470"></span>
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head   " rel="20148470">
          <a href="https://habr.com/ru/users/twinklede/" class="user-info user-info_inline" rel="user-popover" data-user-login="twinklede">
    <svg class="default-image default-image_mini default-image_pink" width="24" height="24"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#slug"></use></svg>
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">twinklede</span>
</a>

          
          <time class="comment__date-time comment__date-time_published">13 мая 2019 в 22:55</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="#comment_20148470" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="20148470" data-action="add" title="Добавить в закладки"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#book"></use></svg></a>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <span class="icon_comment-branch js-comment_tree" data-id="20148470" data-parent_id="20148346" title="Показать ветку комментариев"><svg width="8" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#tree"></use></svg></span>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#comment_20148346" class="icon_comment-arrow-up js-comment_parent" data-id="20148470" data-parent_id="20148346" title="Показать предыдущий комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
    </li>

  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="#comment_20148470" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="20148470" data-parent_id="20148346" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="20148470" data-post-target="450512" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="plus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter   js-score" title="Всего голосов 0: ↑0 и ↓0">0</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message ">Я тоже ошибся в своей попытке 
локализовать проблемы. Мне почему-то показалось, что эти вектора 
статической длинны, но судя по всему это что-то аналогичное sso.<br>
<br>
Как только у меня появится время займусь оптимизацией С++-варианта.</div>

        <div class="comment__footer">
    <a href="#reply" class="comment__footer-link reply_link" onclick="return comment_show_reply_form(20148470 )">Ответить</a>


</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-9" id="reply_comments_20148470"></ul>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="content-list__item content-list__item_comment js-comment " rel="20149214">
    
    <span class="parent_id" data-parent_id="20146720"></span>
    <div class="comment" id="comment_20149214">
      <span class="comment__collapse" title="Свернуть/развернуть ветку комментариев" data-id="20149214"></span>
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head   " rel="20149214">
          <a href="https://habr.com/ru/users/twinklede/" class="user-info user-info_inline" rel="user-popover" data-user-login="twinklede">
    <svg class="default-image default-image_mini default-image_pink" width="24" height="24"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#slug"></use></svg>
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">twinklede</span>
</a>

          
          <time class="comment__date-time comment__date-time_published">14 мая 2019 в 07:48</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="#comment_20149214" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="20149214" data-action="add" title="Добавить в закладки"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#book"></use></svg></a>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <span class="icon_comment-branch js-comment_tree" data-id="20149214" data-parent_id="20146720" title="Показать ветку комментариев"><svg width="8" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#tree"></use></svg></span>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#comment_20146720" class="icon_comment-arrow-up js-comment_parent" data-id="20149214" data-parent_id="20146720" title="Показать предыдущий комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
    </li>

  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="#comment_20149214" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="20149214" data-parent_id="20146720" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="20149214" data-post-target="450512" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="plus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter   js-score" title="Всего голосов 0: ↑0 и ↓0">0</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message ">merge я реализовал простым перебором. Не знаю правильно это или нет.<br>
<br>
Только сейчас увидел:<br>
<code>$ time ../habr2_cpp/a.out 1.json<br>
[...]<br>
real 0m0.653s<br>
user 0m0.453s<br>
sys 0m0.188s</code><br>
Судя по sys — с системой явно что-то не то.<br>
<br>
<div class="spoiler"><b class="spoiler_title">Многопоточная С++-версия</b><div class="spoiler_text"><pre><code class="cpp hljs"><span class="hljs-comment"><span class="hljs-comment">//https://github.com/jarro2783/cxxopts.git</span></span>
<span class="hljs-comment"><span class="hljs-comment">//https://github.com/Tencent/rapidjson.git</span></span>
<span class="hljs-comment"><span class="hljs-comment">//https://github.com/cameron314/concurrentqueue.git</span></span>
<span class="hljs-meta"><span class="hljs-meta">#</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">include</span></span></span><span class="hljs-meta"> </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">&lt;rapidjson/document.h&gt;</span></span></span></span>
<span class="hljs-meta"><span class="hljs-meta">#</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">include</span></span></span><span class="hljs-meta"> </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">&lt;filesystem&gt;</span></span></span></span>
<span class="hljs-meta"><span class="hljs-meta">#</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">include</span></span></span><span class="hljs-meta"> </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">&lt;sys/mman.h&gt;</span></span></span></span>
<span class="hljs-meta"><span class="hljs-meta">#</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">include</span></span></span><span class="hljs-meta"> </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">&lt;fcntl.h&gt;</span></span></span></span>
<span class="hljs-meta"><span class="hljs-meta">#</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">include</span></span></span><span class="hljs-meta"> </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">&lt;unordered_map&gt;</span></span></span></span>
<span class="hljs-meta"><span class="hljs-meta">#</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">include</span></span></span><span class="hljs-meta"> </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">&lt;charconv&gt;</span></span></span></span>
<span class="hljs-meta"><span class="hljs-meta">#</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">include</span></span></span><span class="hljs-meta"> </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">&lt;string&gt;</span></span></span></span>
<span class="hljs-meta"><span class="hljs-meta">#</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">include</span></span></span><span class="hljs-meta"> </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">&lt;unordered_set&gt;</span></span></span></span>
<span class="hljs-meta"><span class="hljs-meta">#</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">include</span></span></span><span class="hljs-meta"> </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">&lt;list&gt;</span></span></span></span>
<span class="hljs-meta"><span class="hljs-meta">#</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">include</span></span></span><span class="hljs-meta"> </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">&lt;array&gt;</span></span></span></span>
<span class="hljs-meta"><span class="hljs-meta">#</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">include</span></span></span><span class="hljs-meta"> </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">&lt;vector&gt;</span></span></span></span>
<span class="hljs-meta"><span class="hljs-meta">#</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">include</span></span></span><span class="hljs-meta"> </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">&lt;boost/algorithm/string/join.hpp&gt;</span></span></span></span>
<span class="hljs-meta"><span class="hljs-meta">#</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">include</span></span></span><span class="hljs-meta"> </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">&lt;algorithm&gt;</span></span></span></span>
<span class="hljs-meta"><span class="hljs-meta">#</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">include</span></span></span><span class="hljs-meta"> </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">&lt;cxxopts.hpp&gt;</span></span></span></span>
<span class="hljs-meta"><span class="hljs-meta">#</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">include</span></span></span><span class="hljs-meta"> </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">&lt;concurrentqueue/concurrentqueue.h&gt;</span></span></span></span>
<span class="hljs-meta"><span class="hljs-meta">#</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">include</span></span></span><span class="hljs-meta"> </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">&lt;future&gt;</span></span></span></span>

<span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">struct</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">rec_t</span></span></span><span class="hljs-class"> {</span></span>
  <span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::<span class="hljs-built_in"><span class="hljs-built_in">string</span></span> company;
  <span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::<span class="hljs-built_in"><span class="hljs-built_in">vector</span></span>&lt;<span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::<span class="hljs-built_in"><span class="hljs-built_in">string</span></span>&gt; phones;
  <span class="hljs-keyword"><span class="hljs-keyword">double</span></span> debt;
};

<span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">struct</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">debtor_t</span></span></span><span class="hljs-class"> {</span></span>
  <span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::<span class="hljs-built_in"><span class="hljs-built_in">unordered_set</span></span>&lt;<span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::<span class="hljs-built_in"><span class="hljs-built_in">string</span></span>&gt; companies;
  <span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::<span class="hljs-built_in"><span class="hljs-built_in">unordered_set</span></span>&lt;<span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::<span class="hljs-built_in"><span class="hljs-built_in">string</span></span>&gt; phones;
  <span class="hljs-keyword"><span class="hljs-keyword">double</span></span> debt;
};


<span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">struct</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">debtors_t</span></span></span><span class="hljs-class"> {</span></span>
  <span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::<span class="hljs-built_in"><span class="hljs-built_in">unordered_map</span></span>&lt;<span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::<span class="hljs-built_in"><span class="hljs-built_in">string</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">debtor_t</span></span> &amp;&gt; by_phone_index;
  <span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::<span class="hljs-built_in"><span class="hljs-built_in">list</span></span>&lt;<span class="hljs-keyword"><span class="hljs-keyword">debtor_t</span></span>&gt; all;
};

<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">process_object</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">debtors_t</span></span></span></span><span class="hljs-function"><span class="hljs-params"> &amp; debtors, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">rec_t</span></span></span></span><span class="hljs-function"><span class="hljs-params"> &amp; rec)</span></span></span><span class="hljs-function"> </span></span>{
  
  <span class="hljs-keyword"><span class="hljs-keyword">auto</span></span> &amp; index = debtors.by_phone_index;
  <span class="hljs-keyword"><span class="hljs-keyword">auto</span></span> op = [&amp;](<span class="hljs-keyword"><span class="hljs-keyword">debtor_t</span></span> &amp; d) {
    d.companies.insert(<span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::move(rec.company));
    <span class="hljs-keyword"><span class="hljs-keyword">for</span></span>(<span class="hljs-keyword"><span class="hljs-keyword">const</span></span> <span class="hljs-keyword"><span class="hljs-keyword">auto</span></span> &amp; phone: rec.phones) {
      d.phones.insert(phone);
<span class="hljs-comment"><span class="hljs-comment">//       if(!index.contains(phone))</span></span>
      <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(index.find(phone) == end(index))
        index.emplace(phone, d);
    }
    d.debt += rec.debt;
  };
  
  <span class="hljs-keyword"><span class="hljs-keyword">auto</span></span> di = end(index);
  <span class="hljs-keyword"><span class="hljs-keyword">for</span></span>(<span class="hljs-keyword"><span class="hljs-keyword">const</span></span> <span class="hljs-keyword"><span class="hljs-keyword">auto</span></span> &amp; phone: rec.phones) {
    di = index.find(phone);
    <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(di != end(index)) <span class="hljs-keyword"><span class="hljs-keyword">break</span></span>;    
  }
  op((di != end(index)) ? di-&gt;second : debtors.all.emplace_back());
}


<span class="hljs-keyword"><span class="hljs-keyword">rec_t</span></span> &amp; extract_data(rapidjson::Document &amp; doc, <span class="hljs-keyword"><span class="hljs-keyword">rec_t</span></span> &amp; rec) {
  rec.phones.clear();
  rec.company.clear();
  rec.debt = <span class="hljs-number"><span class="hljs-number">0</span></span>;
  
  <span class="hljs-keyword"><span class="hljs-keyword">for</span></span>(<span class="hljs-keyword"><span class="hljs-keyword">auto</span></span> &amp; x: doc.GetObject()) {
    <span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::string_view key{x.name.GetString(), x.name.GetStringLength()};
    <span class="hljs-keyword"><span class="hljs-keyword">auto</span></span> &amp; value = x.value;
    
    <span class="hljs-keyword"><span class="hljs-keyword">auto</span></span> val2str = [](<span class="hljs-keyword"><span class="hljs-keyword">auto</span></span> &amp; value) -&gt; <span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::<span class="hljs-built_in"><span class="hljs-built_in">string</span></span> {
      <span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::<span class="hljs-built_in"><span class="hljs-built_in">array</span></span>&lt;<span class="hljs-keyword"><span class="hljs-keyword">char</span></span>, <span class="hljs-number"><span class="hljs-number">32</span></span>&gt; mem;  
      
      <span class="hljs-keyword"><span class="hljs-keyword">switch</span></span>(value.GetType()) {
        <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> rapidjson::kStringType: <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> {value.GetString(), value.GetStringLength()};
        <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> rapidjson::kNumberType: {
          <span class="hljs-keyword"><span class="hljs-keyword">auto</span></span> [endp, _] = <span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::to_chars(begin(mem), end(mem), value.GetUint64());
          <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> {begin(mem), endp};
        }
        <span class="hljs-keyword"><span class="hljs-keyword">default</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> {};
      }
    };
    
    <span class="hljs-keyword"><span class="hljs-keyword">auto</span></span> val2num = [](<span class="hljs-keyword"><span class="hljs-keyword">auto</span></span> &amp; value) -&gt; <span class="hljs-keyword"><span class="hljs-keyword">double</span></span> {
      <span class="hljs-keyword"><span class="hljs-keyword">switch</span></span>(value.GetType()) {
        <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> rapidjson::kStringType: <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> strtod(value.GetString(), <span class="hljs-literal"><span class="hljs-literal">nullptr</span></span>);
        <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> rapidjson::kNumberType: <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> value.GetDouble();
        <span class="hljs-keyword"><span class="hljs-keyword">default</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> {};
      }
    };
    
    <span class="hljs-keyword"><span class="hljs-keyword">auto</span></span> push_phone = [&amp;](<span class="hljs-keyword"><span class="hljs-keyword">auto</span></span> &amp; value) {
      <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(<span class="hljs-keyword"><span class="hljs-keyword">auto</span></span> phone = val2str(value);!phone.empty())
        rec.phones.emplace_back(phone);
    };
    
    <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(key == <span class="hljs-string"><span class="hljs-string">"company"</span></span>) {
      <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(value.IsString()) {
        rec.company = {value.GetString(), value.GetStringLength()};
      } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(value.IsObject()) {
        <span class="hljs-keyword"><span class="hljs-keyword">auto</span></span> name = value.GetObject().FindMember(<span class="hljs-string"><span class="hljs-string">"name"</span></span>);
        <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(name != value.GetObject().MemberEnd()) rec.company = val2str(name-&gt;value);
      }
    } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(key == <span class="hljs-string"><span class="hljs-string">"phone"</span></span>) {
      push_phone(value);
    } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(key == <span class="hljs-string"><span class="hljs-string">"phones"</span></span>) {
      <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(value.IsArray()) <span class="hljs-keyword"><span class="hljs-keyword">for</span></span>(<span class="hljs-keyword"><span class="hljs-keyword">auto</span></span> &amp; x: value.GetArray()) push_phone(x);
      push_phone(value);
    } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(key == <span class="hljs-string"><span class="hljs-string">"debt"</span></span>) rec.debt = val2num(value);
  }
  
  <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> rec;  
}

<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">print</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">const</span></span></span></span><span class="hljs-function"><span class="hljs-params"> </span></span><span class="hljs-built_in"><span class="hljs-function"><span class="hljs-params"><span class="hljs-built_in">std</span></span></span></span><span class="hljs-function"><span class="hljs-params">::</span></span><span class="hljs-built_in"><span class="hljs-function"><span class="hljs-params"><span class="hljs-built_in">list</span></span></span></span><span class="hljs-function"><span class="hljs-params">&lt;</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">debtor_t</span></span></span></span><span class="hljs-function"><span class="hljs-params">&gt; &amp; all)</span></span></span><span class="hljs-function"> </span></span>{
  <span class="hljs-keyword"><span class="hljs-keyword">for</span></span>(<span class="hljs-keyword"><span class="hljs-keyword">size_t</span></span> it = <span class="hljs-number"><span class="hljs-number">0</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">auto</span></span> &amp; d: all) {
    <span class="hljs-built_in"><span class="hljs-built_in">printf</span></span>(<span class="hljs-string"><span class="hljs-string">"-------------------------------\n"</span></span>);
    <span class="hljs-built_in"><span class="hljs-built_in">printf</span></span>(<span class="hljs-string"><span class="hljs-string">"#%lu: debt: %f\n"</span></span>, it++, d.debt);
    <span class="hljs-keyword"><span class="hljs-keyword">using</span></span> boost::algorithm::join;
    <span class="hljs-built_in"><span class="hljs-built_in">printf</span></span>(<span class="hljs-string"><span class="hljs-string">"companies: {%s}\nphones: {%s}\n"</span></span>, join(d.companies, <span class="hljs-string"><span class="hljs-string">","</span></span>).c_str(), join(d.phones, <span class="hljs-string"><span class="hljs-string">","</span></span>).c_str());
  }
}

<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">auto</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">merge</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-built_in"><span class="hljs-function"><span class="hljs-params"><span class="hljs-built_in">std</span></span></span></span><span class="hljs-function"><span class="hljs-params">::</span></span><span class="hljs-built_in"><span class="hljs-function"><span class="hljs-params"><span class="hljs-built_in">vector</span></span></span></span><span class="hljs-function"><span class="hljs-params">&lt;</span></span><span class="hljs-built_in"><span class="hljs-function"><span class="hljs-params"><span class="hljs-built_in">std</span></span></span></span><span class="hljs-function"><span class="hljs-params">::</span></span><span class="hljs-built_in"><span class="hljs-function"><span class="hljs-params"><span class="hljs-built_in">list</span></span></span></span><span class="hljs-function"><span class="hljs-params">&lt;</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">debtor_t</span></span></span></span><span class="hljs-function"><span class="hljs-params">&gt;&gt; &amp; results)</span></span></span><span class="hljs-function"> </span></span>{
  <span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::<span class="hljs-built_in"><span class="hljs-built_in">list</span></span>&lt;<span class="hljs-keyword"><span class="hljs-keyword">debtor_t</span></span>&gt; result, tmp;
  <span class="hljs-keyword"><span class="hljs-keyword">for</span></span>(<span class="hljs-keyword"><span class="hljs-keyword">auto</span></span> &amp; x: results) result.splice(end(result), x);
  <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(result.empty()) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> result;
  <span class="hljs-keyword"><span class="hljs-keyword">for</span></span>(<span class="hljs-keyword"><span class="hljs-keyword">size_t</span></span> c = <span class="hljs-number"><span class="hljs-number">1</span></span>; c;) {
    tmp.splice(<span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::begin(tmp), result, begin(result), ++begin(result));
    <span class="hljs-keyword"><span class="hljs-keyword">auto</span></span> &amp; a = tmp.front();
    c = <span class="hljs-number"><span class="hljs-number">0</span></span>;
    re:
    <span class="hljs-keyword"><span class="hljs-keyword">for</span></span>(<span class="hljs-keyword"><span class="hljs-keyword">auto</span></span> &amp; phone: a.phones) {
      <span class="hljs-keyword"><span class="hljs-keyword">for</span></span>(<span class="hljs-keyword"><span class="hljs-keyword">auto</span></span> it = begin(result); it != end(result); ++it) {
        <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(<span class="hljs-keyword"><span class="hljs-keyword">auto</span></span> &amp; b = *it; b.phones.find(phone) != end(b.phones)) {
          a.companies.merge(b.companies);
          a.phones.merge(b.phones);
          a.debt += b.debt;          
          result.erase(it);
          ++c;
          <span class="hljs-keyword"><span class="hljs-keyword">goto</span></span> re;
        }
      }      
    }
    result.splice(end(result), tmp);
  }
  assert(tmp.empty());
  <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> result;  
}



moodycamel::ConcurrentQueue&lt;<span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::string_view&gt; q;

<span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">struct</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">config</span></span></span><span class="hljs-class"> {</span></span>
  <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-keyword"><span class="hljs-keyword">inline</span></span> <span class="hljs-keyword"><span class="hljs-keyword">size_t</span></span> bulk = <span class="hljs-number"><span class="hljs-number">128</span></span>;
  <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-keyword"><span class="hljs-keyword">inline</span></span> <span class="hljs-keyword"><span class="hljs-keyword">size_t</span></span> concurrency = <span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::min(<span class="hljs-number"><span class="hljs-number">4u</span></span>, <span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::thread::hardware_concurrency());
};

<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">auto</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">work</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{
  <span class="hljs-keyword"><span class="hljs-keyword">debtors_t</span></span> debtors;
  <span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::<span class="hljs-built_in"><span class="hljs-built_in">vector</span></span>&lt;<span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::string_view&gt; pool(config::bulk);
  <span class="hljs-keyword"><span class="hljs-keyword">rec_t</span></span> rec;
  
  <span class="hljs-keyword"><span class="hljs-keyword">for</span></span>(<span class="hljs-keyword"><span class="hljs-keyword">bool</span></span> end_flag = <span class="hljs-literal"><span class="hljs-literal">false</span></span>; !end_flag;) {
    <span class="hljs-keyword"><span class="hljs-keyword">auto</span></span> n = q.try_dequeue_bulk(begin(pool), config::bulk);
    rapidjson::Document doc;
    <span class="hljs-keyword"><span class="hljs-keyword">for</span></span>(<span class="hljs-keyword"><span class="hljs-keyword">size_t</span></span> it = <span class="hljs-number"><span class="hljs-number">0</span></span>; it &lt; n; ++it) {
      <span class="hljs-keyword"><span class="hljs-keyword">auto</span></span> &amp; str = pool[it];
      <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>((end_flag = str.empty())) <span class="hljs-keyword"><span class="hljs-keyword">continue</span></span>;
      doc.Parse(data(str), size(str));
      process_object(debtors, extract_data(doc, rec));      
    }
    
    <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(end_flag) q.enqueue({});
  }
  <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> debtors.all;
}


<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">auto</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">parse</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> argc, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">char</span></span></span></span><span class="hljs-function"><span class="hljs-params">* argv[])</span></span></span><span class="hljs-function"> </span></span>{
  cxxopts::Options options{*argv};
  options.add_options()
    (<span class="hljs-string"><span class="hljs-string">"b"</span></span>, <span class="hljs-string"><span class="hljs-string">""</span></span>, cxxopts::value(config::bulk))
    (<span class="hljs-string"><span class="hljs-string">"c"</span></span>, <span class="hljs-string"><span class="hljs-string">"threads"</span></span>, cxxopts::value(config::concurrency))
    (<span class="hljs-string"><span class="hljs-string">"f"</span></span>, <span class="hljs-string"><span class="hljs-string">"file path"</span></span>, cxxopts::value&lt;<span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::<span class="hljs-built_in"><span class="hljs-built_in">string</span></span>&gt;());
  <span class="hljs-keyword"><span class="hljs-keyword">auto</span></span> pr = options.parse(argc, argv);
  <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(pr.count(<span class="hljs-string"><span class="hljs-string">"f"</span></span>) == <span class="hljs-number"><span class="hljs-number">1</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> pr[<span class="hljs-string"><span class="hljs-string">"f"</span></span>].as&lt;<span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::<span class="hljs-built_in"><span class="hljs-built_in">string</span></span>&gt;();
  <span class="hljs-built_in"><span class="hljs-built_in">printf</span></span>(<span class="hljs-string"><span class="hljs-string">"%s\n"</span></span>, options.help().c_str());
  <span class="hljs-built_in"><span class="hljs-built_in">exit</span></span>(<span class="hljs-number"><span class="hljs-number">0</span></span>);
}


<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">int</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">main</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> argc, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">char</span></span></span></span><span class="hljs-function"><span class="hljs-params"> * argv[])</span></span></span><span class="hljs-function"> </span></span>{
  <span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::filesystem::path path = parse(argc, argv);
  <span class="hljs-keyword"><span class="hljs-keyword">auto</span></span> file_size = <span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::filesystem::file_size(path);
  <span class="hljs-keyword"><span class="hljs-keyword">auto</span></span> file_data = (<span class="hljs-keyword"><span class="hljs-keyword">const</span></span> <span class="hljs-keyword"><span class="hljs-keyword">char</span></span> *)mmap(<span class="hljs-literal"><span class="hljs-literal">nullptr</span></span>, file_size + <span class="hljs-number"><span class="hljs-number">4096</span></span>, PROT_READ, MAP_POPULATE|MAP_PRIVATE|MAP_FILE, open(path.c_str(), O_RDONLY), <span class="hljs-number"><span class="hljs-number">0</span></span>);
  <span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::string_view file{file_data, file_size};
    
  <span class="hljs-keyword"><span class="hljs-keyword">auto</span></span> next = [it = file]() <span class="hljs-keyword"><span class="hljs-keyword">mutable</span></span> {
    <span class="hljs-keyword"><span class="hljs-keyword">auto</span></span> p = it.data();
    <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> <span class="hljs-keyword"><span class="hljs-keyword">char</span></span> * begin = <span class="hljs-literal"><span class="hljs-literal">nullptr</span></span>;
    <span class="hljs-keyword"><span class="hljs-keyword">size_t</span></span> braces = <span class="hljs-number"><span class="hljs-number">0</span></span>;
    <span class="hljs-keyword"><span class="hljs-keyword">while</span></span>(<span class="hljs-literal"><span class="hljs-literal">true</span></span>) {
      <span class="hljs-keyword"><span class="hljs-keyword">switch</span></span>(p = <span class="hljs-built_in"><span class="hljs-built_in">strpbrk</span></span>(p, <span class="hljs-string"><span class="hljs-string">"{}"</span></span>); p ? *p : <span class="hljs-number"><span class="hljs-number">0</span></span>) {
        <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> <span class="hljs-string"><span class="hljs-string">'{'</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(!braces++) begin = p; ++p; <span class="hljs-keyword"><span class="hljs-keyword">break</span></span>;
        <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> <span class="hljs-string"><span class="hljs-string">'}'</span></span>: ++p; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(!--braces) {
          it = it.substr(<span class="hljs-keyword"><span class="hljs-keyword">size_t</span></span>(p - it.begin()));
          <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::string_view{begin, <span class="hljs-keyword"><span class="hljs-keyword">size_t</span></span>(p - begin)};
        } <span class="hljs-keyword"><span class="hljs-keyword">break</span></span>;
        <span class="hljs-keyword"><span class="hljs-keyword">default</span></span>: it = it.substr(it.size()); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::string_view{};
      }
    };
  };
  
  <span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::<span class="hljs-built_in"><span class="hljs-built_in">vector</span></span>&lt;<span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::future&lt;<span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::<span class="hljs-built_in"><span class="hljs-built_in">list</span></span>&lt;<span class="hljs-keyword"><span class="hljs-keyword">debtor_t</span></span>&gt;&gt;&gt; tp(config::concurrency);
  <span class="hljs-keyword"><span class="hljs-keyword">for</span></span>(<span class="hljs-keyword"><span class="hljs-keyword">auto</span></span> &amp; f: tp) f = <span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::async(<span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::launch::async, work);
  
  <span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::<span class="hljs-built_in"><span class="hljs-built_in">vector</span></span>&lt;<span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::string_view&gt; pool;
  <span class="hljs-keyword"><span class="hljs-keyword">auto</span></span> max = config::bulk * config::concurrency;
  pool.reserve(max);
  <span class="hljs-keyword"><span class="hljs-keyword">while</span></span>(<span class="hljs-literal"><span class="hljs-literal">true</span></span>) {
    <span class="hljs-keyword"><span class="hljs-keyword">auto</span></span> str = next();
    <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(pool.size() == max || str.empty()) {
      q.enqueue_bulk(begin(pool), pool.size());
      pool.clear();
    }
    <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(str.empty()) {
      q.enqueue({});
      <span class="hljs-keyword"><span class="hljs-keyword">break</span></span>;
    }
    pool.emplace_back(str);    
  }
  <span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::<span class="hljs-built_in"><span class="hljs-built_in">vector</span></span>&lt;<span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::<span class="hljs-built_in"><span class="hljs-built_in">list</span></span>&lt;<span class="hljs-keyword"><span class="hljs-keyword">debtor_t</span></span>&gt;&gt; all;
  <span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::transform(begin(tp), end(tp), <span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::back_inserter(all), [](<span class="hljs-keyword"><span class="hljs-keyword">auto</span></span> &amp; f) {
    <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> f.get();
  });
  assert(all.size() == config::concurrency);
  print(merge(all));
}</code></pre><br>
</div></div><br>
<br>
Результат был понятен изначально:<br>
<br>
<code>//C++ 4 потока <br>
real 0m0,137s<br>
user 0m0,557s<br>
sys 0m0,012s<br>
<br>
//C++ 1 поток + taskset на 1 ядро<br>
real 0m0,526s<br>
user 0m0,510s<br>
sys 0m0,016s<br>
<br>
//далее 400 мегабайт json<br>
//C++ 4 потока + taskset на 4 ядра<br>
real 0m0,547s<br>
user 0m2,057s<br>
sys 0m0,042s<br>
<br>
//C++ 1 поток + taskset на 1 ядро<br>
real 0m2,074s<br>
user 0m2,034s<br>
sys 0m0,040s<br>
<br>
//rust + taskset на 4 ядра<br>
real 0m0,956s<br>
user 0m3,696s<br>
sys 0m0,070s<br>
<br>
</code><br>
<br>
Правильный рост, никакого оверхеда, никакого изменения кода. Написано максимально наивно.<br></div>

        <div class="comment__footer">
    <a href="#reply" class="comment__footer-link reply_link" onclick="return comment_show_reply_form(20149214 )">Ответить</a>


</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-5" id="reply_comments_20149214"></ul>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="content-list__item content-list__item_comment js-comment " rel="20142442">
    
    <span class="parent_id" data-parent_id="0"></span>
    <div class="comment" id="comment_20142442">
      <span class="comment__collapse" title="Свернуть/развернуть ветку комментариев" data-id="20142442"></span>
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head   " rel="20142442">
          <a href="https://habr.com/ru/users/twinklede/" class="user-info user-info_inline" rel="user-popover" data-user-login="twinklede">
    <svg class="default-image default-image_mini default-image_pink" width="24" height="24"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#slug"></use></svg>
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">twinklede</span>
</a>

          
          <time class="comment__date-time comment__date-time_published">12 мая 2019 в 17:48</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="#comment_20142442" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="20142442" data-action="add" title="Добавить в закладки"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#book"></use></svg></a>
    </li>


  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="#comment_20142442" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="20142442" data-parent_id="0" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="20142442" data-post-target="450512" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="plus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter voting-wjt__counter_positive  js-score" title="Всего голосов +1: ↑1 и ↓0">+1</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message "><blockquote>Я тут многопоточку написал, на 4-х ядрах она точно разделает сишку,</blockquote><br>
Нет, но близко. ~0.7 против ~0.55. Нужно больше потоков.</div>

        <div class="comment__footer">
    <a href="#reply" class="comment__footer-link reply_link" onclick="return comment_show_reply_form(20142442 )">Ответить</a>


</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-0" id="reply_comments_20142442">  <li class="content-list__item content-list__item_comment js-comment " rel="20142454">
    
    <span class="parent_id" data-parent_id="20142442"></span>
    <div class="comment" id="comment_20142454">
      <span class="comment__collapse" title="Свернуть/развернуть ветку комментариев" data-id="20142454"></span>
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head comment__head_topic-author comment__head_my-comment " rel="20142454">
          <a href="https://habr.com/ru/users/epishman/" class="user-info user-info_inline" rel="user-popover" data-user-login="epishman">
    <img src="Swift%20%D0%BF%D1%80%D0%BE%D1%82%D0%B8%D0%B2%20Rust%20%E2%80%94%20%D0%B1%D0%B5%D0%BD%D1%87%D0%BC%D0%B0%D1%80%D0%BA%D0%B8%D0%BD%D0%B3%20%D0%BD%D0%B0%20Linux%20%D1%81%20(%D0%BD%D0%B5)%D0%BF%D0%BE%D0%BD%D1%8F%D1%82%D0%BD%D1%8B%D0%BC%20%D1%84%D0%B8%D0%BD%D0%B0%D0%BB%D0%BE%D0%BC%20_%20%D0%A5%D0%B0%D0%B1%D1%80_files/ec0d88c4853c0d36d44bd0526dcfa8d7.png" class="user-info__image-pic user-info__image-pic_small" width="24" height="24">
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">epishman</span>
</a>

          
          <time class="comment__date-time comment__date-time_published">12 мая 2019 в 17:52</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="#comment_20142454" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="20142454" data-action="add" title="Добавить в закладки"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#book"></use></svg></a>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <span class="icon_comment-branch js-comment_tree" data-id="20142454" data-parent_id="20142442" title="Показать ветку комментариев"><svg width="8" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#tree"></use></svg></span>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#comment_20142442" class="icon_comment-arrow-up js-comment_parent" data-id="20142454" data-parent_id="20142442" title="Показать предыдущий комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
    </li>

  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="#comment_20142454" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="20142454" data-parent_id="20142442" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="20142454" data-post-target="450512" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="plus" onclick="comment_vote(this);" title="За свои комментарии голосовать нельзя" disabled="disabled"><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter   js-score" title="Всего голосов 0: ↑0 и ↓0">0</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="За свои комментарии голосовать нельзя" disabled="disabled"><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message ">а сколько у вас потоков, там же параметр есть, и дополнительно вид обмена — синхронный медленнее но память не жрет.</div>

        <div class="comment__footer">
    <a href="#reply" class="comment__footer-link reply_link" onclick="return comment_show_reply_form(20142454 )">Ответить</a>


</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-1" id="reply_comments_20142454">  <li class="content-list__item content-list__item_comment js-comment " rel="20142550">
    
    <span class="parent_id" data-parent_id="20142454"></span>
    <div class="comment" id="comment_20142550">
      <span class="comment__collapse" title="Свернуть/развернуть ветку комментариев" data-id="20142550"></span>
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head   " rel="20142550">
          <a href="https://habr.com/ru/users/twinklede/" class="user-info user-info_inline" rel="user-popover" data-user-login="twinklede">
    <svg class="default-image default-image_mini default-image_pink" width="24" height="24"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#slug"></use></svg>
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">twinklede</span>
</a>

          
          <time class="comment__date-time comment__date-time_published">12 мая 2019 в 18:27</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="#comment_20142550" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="20142550" data-action="add" title="Добавить в закладки"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#book"></use></svg></a>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <span class="icon_comment-branch js-comment_tree" data-id="20142550" data-parent_id="20142454" title="Показать ветку комментариев"><svg width="8" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#tree"></use></svg></span>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#comment_20142454" class="icon_comment-arrow-up js-comment_parent" data-id="20142550" data-parent_id="20142454" title="Показать предыдущий комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
    </li>

  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="#comment_20142550" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="20142550" data-parent_id="20142454" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="20142550" data-post-target="450512" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="plus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter   js-score" title="Всего голосов 0: ↑0 и ↓0">0</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message ">Я проверял на 4х потоках. На том и том параметре. Разницы между параметрами у меня минимальна.</div>

        <div class="comment__footer">
    <a href="#reply" class="comment__footer-link reply_link" onclick="return comment_show_reply_form(20142550 )">Ответить</a>


</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-2" id="reply_comments_20142550"></ul>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="content-list__item content-list__item_comment js-comment " rel="20258670">
    
    <span class="parent_id" data-parent_id="0"></span>
    <div class="comment" id="comment_20258670">
      <span class="comment__collapse" title="Свернуть/развернуть ветку комментариев" data-id="20258670"></span>
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head   " rel="20258670">
          <a href="https://habr.com/ru/users/technic93/" class="user-info user-info_inline" rel="user-popover" data-user-login="technic93">
    <img src="Swift%20%D0%BF%D1%80%D0%BE%D1%82%D0%B8%D0%B2%20Rust%20%E2%80%94%20%D0%B1%D0%B5%D0%BD%D1%87%D0%BC%D0%B0%D1%80%D0%BA%D0%B8%D0%BD%D0%B3%20%D0%BD%D0%B0%20Linux%20%D1%81%20(%D0%BD%D0%B5)%D0%BF%D0%BE%D0%BD%D1%8F%D1%82%D0%BD%D1%8B%D0%BC%20%D1%84%D0%B8%D0%BD%D0%B0%D0%BB%D0%BE%D0%BC%20_%20%D0%A5%D0%B0%D0%B1%D1%80_files/4e796c6e9f932ba70d1af19b21f2b99a.png" class="user-info__image-pic user-info__image-pic_small" width="24" height="24">
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">technic93</span>
</a>

          
          <time class="comment__date-time comment__date-time_published">7 июня 2019 в 20:42</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="#comment_20258670" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="20258670" data-action="add" title="Добавить в закладки"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#book"></use></svg></a>
    </li>


  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="#comment_20258670" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="20258670" data-parent_id="0" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="20258670" data-post-target="450512" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="plus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter   js-score" title="Всего голосов 0: ↑0 и ↓0">0</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message "><p>Алгоритм не правильный.</p><br>
<div class="spoiler"><b class="spoiler_title">Пример</b><div class="spoiler_text"><p>[<br>
{"company":"Рога и копыта", "debt": 800, "phones": [123, 234, 456]},<br>
{"company":"Первая коллекторская", "debt": 1200, "phones": ["2128506", 456, 789]},<br>
{"company":"Святой престол", "debt": "666", "phones": 666},<br>
{"company": "Казачий спас", "debt": 1500, "phones": [234567, "34567", 789], "phone": 666},<br>
{"company": {"name": "Шестерочка"}, "debt": 2550, "phones": 788, "phone": 789}<br>
]</p></div></div><br>
<p>Должно объеденить всё в одного, но это не происходит. Я думаю этот 
неправильный алгоритм перекочивал во все примеры из комментариев, кроме 
многопоточки на С++ там подругому merge сделан.</p></div>

        <div class="comment__footer">
    <a href="#reply" class="comment__footer-link reply_link" onclick="return comment_show_reply_form(20258670 )">Ответить</a>


</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-0" id="reply_comments_20258670">  <li class="content-list__item content-list__item_comment js-comment " rel="20259362">
    
    <span class="parent_id" data-parent_id="20258670"></span>
    <div class="comment" id="comment_20259362">
      <span class="comment__collapse" title="Свернуть/развернуть ветку комментариев" data-id="20259362"></span>
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head comment__head_topic-author comment__head_my-comment " rel="20259362">
          <a href="https://habr.com/ru/users/epishman/" class="user-info user-info_inline" rel="user-popover" data-user-login="epishman">
    <img src="Swift%20%D0%BF%D1%80%D0%BE%D1%82%D0%B8%D0%B2%20Rust%20%E2%80%94%20%D0%B1%D0%B5%D0%BD%D1%87%D0%BC%D0%B0%D1%80%D0%BA%D0%B8%D0%BD%D0%B3%20%D0%BD%D0%B0%20Linux%20%D1%81%20(%D0%BD%D0%B5)%D0%BF%D0%BE%D0%BD%D1%8F%D1%82%D0%BD%D1%8B%D0%BC%20%D1%84%D0%B8%D0%BD%D0%B0%D0%BB%D0%BE%D0%BC%20_%20%D0%A5%D0%B0%D0%B1%D1%80_files/ec0d88c4853c0d36d44bd0526dcfa8d7.png" class="user-info__image-pic user-info__image-pic_small" width="24" height="24">
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">epishman</span>
</a>

          
          <time class="comment__date-time comment__date-time_published">8 июня 2019 в 01:24</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="#comment_20259362" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="20259362" data-action="add" title="Добавить в закладки"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#book"></use></svg></a>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <span class="icon_comment-branch js-comment_tree" data-id="20259362" data-parent_id="20258670" title="Показать ветку комментариев"><svg width="8" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#tree"></use></svg></span>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#comment_20258670" class="icon_comment-arrow-up js-comment_parent" data-id="20259362" data-parent_id="20258670" title="Показать предыдущий комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
    </li>

  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="#comment_20259362" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="20259362" data-parent_id="20258670" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="20259362" data-post-target="450512" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="plus" onclick="comment_vote(this);" title="За свои комментарии голосовать нельзя" disabled="disabled"><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter   js-score" title="Всего голосов 0: ↑0 и ↓0">0</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="За свои комментарии голосовать нельзя" disabled="disabled"><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message ">Мой косяк, надо итеративно мерджить, уже лень переделывать…</div>

        <div class="comment__footer">
    <a href="#reply" class="comment__footer-link reply_link" onclick="return comment_show_reply_form(20259362 )">Ответить</a>


</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-1" id="reply_comments_20259362">  <li class="content-list__item content-list__item_comment js-comment " rel="20260371">
    
    <span class="parent_id" data-parent_id="20259362"></span>
    <div class="comment" id="comment_20260371">
      <span class="comment__collapse" title="Свернуть/развернуть ветку комментариев" data-id="20260371"></span>
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head   " rel="20260371">
          <a href="https://habr.com/ru/users/technic93/" class="user-info user-info_inline" rel="user-popover" data-user-login="technic93">
    <img src="Swift%20%D0%BF%D1%80%D0%BE%D1%82%D0%B8%D0%B2%20Rust%20%E2%80%94%20%D0%B1%D0%B5%D0%BD%D1%87%D0%BC%D0%B0%D1%80%D0%BA%D0%B8%D0%BD%D0%B3%20%D0%BD%D0%B0%20Linux%20%D1%81%20(%D0%BD%D0%B5)%D0%BF%D0%BE%D0%BD%D1%8F%D1%82%D0%BD%D1%8B%D0%BC%20%D1%84%D0%B8%D0%BD%D0%B0%D0%BB%D0%BE%D0%BC%20_%20%D0%A5%D0%B0%D0%B1%D1%80_files/4e796c6e9f932ba70d1af19b21f2b99a.png" class="user-info__image-pic user-info__image-pic_small" width="24" height="24">
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">technic93</span>
</a>

          
          <time class="comment__date-time comment__date-time_published">8 июня 2019 в 14:36</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="#comment_20260371" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="20260371" data-action="add" title="Добавить в закладки"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#book"></use></svg></a>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <span class="icon_comment-branch js-comment_tree" data-id="20260371" data-parent_id="20259362" title="Показать ветку комментариев"><svg width="8" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#tree"></use></svg></span>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#comment_20259362" class="icon_comment-arrow-up js-comment_parent" data-id="20260371" data-parent_id="20259362" title="Показать предыдущий комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
    </li>

  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="#comment_20260371" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="20260371" data-parent_id="20259362" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="20260371" data-post-target="450512" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="plus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter   js-score" title="Всего голосов 0: ↑0 и ↓0">0</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="Срок голосования истек" disabled="disabled"><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message "><p>Тогда ТЗ не понятно, например 
HashSet для телефонов не нужен, достаточно общего HashMap. С учётом того
 что у нас там постоянно to_owned, выкидывание лишней строчки даёт 
ускорение на 10%. Например в последней версии на го вообще выкинули 
HashSet и всё в vector, что для десятка телефонов работает наверное 
быстрее с учетом константы. Но если телефонов тысяча тогда я уверен 
решение на го сольётся.</p></div>

        <div class="comment__footer">
    <a href="#reply" class="comment__footer-link reply_link" onclick="return comment_show_reply_form(20260371 )">Ответить</a>


</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-2" id="reply_comments_20260371"></ul>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="content-list__item content-list__item_comment js-comment " rel="20262967">
    
    <span class="parent_id" data-parent_id="0"></span>
    <div class="comment" id="comment_20262967">
      <span class="comment__collapse" title="Свернуть/развернуть ветку комментариев" data-id="20262967"></span>
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head   " rel="20262967">
          <a href="https://habr.com/ru/users/technic93/" class="user-info user-info_inline" rel="user-popover" data-user-login="technic93">
    <img src="Swift%20%D0%BF%D1%80%D0%BE%D1%82%D0%B8%D0%B2%20Rust%20%E2%80%94%20%D0%B1%D0%B5%D0%BD%D1%87%D0%BC%D0%B0%D1%80%D0%BA%D0%B8%D0%BD%D0%B3%20%D0%BD%D0%B0%20Linux%20%D1%81%20(%D0%BD%D0%B5)%D0%BF%D0%BE%D0%BD%D1%8F%D1%82%D0%BD%D1%8B%D0%BC%20%D1%84%D0%B8%D0%BD%D0%B0%D0%BB%D0%BE%D0%BC%20_%20%D0%A5%D0%B0%D0%B1%D1%80_files/4e796c6e9f932ba70d1af19b21f2b99a.png" class="user-info__image-pic user-info__image-pic_small" width="24" height="24">
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">technic93</span>
</a>

          
          <time class="comment__date-time comment__date-time_published">9 июня 2019 в 19:52</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="#comment_20262967" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#" class="icon_comment-bookmark icon_comment-bookmark_add" onclick="return comments_add_to_favorite(this)" data-type="3" data-id="20262967" data-action="remove" title="Убрать из закладок"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#book"></use></svg></a>
    </li>


  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="#comment_20262967" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="20262967" data-parent_id="0" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="20262967" data-post-target="450512" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small voting-wjt__button_plus" data-action="plus" onclick="comment_vote(this);" title="Вы проголосовали положительно " disabled="disabled"><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter voting-wjt__counter_positive  js-score" title="Всего голосов +1: ↑1 и ↓0">+1</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="Вы проголосовали положительно , отменить голос нельзя" disabled="disabled"><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message "><p>Написал потоковый (как на 
Гошке) парсер на расте, с аллокациями не заморачивался, думаю можно ещё 
ускорить. Результаты на моём i5, это однопоточка:</p><br>
<ul>
<li>rust = 636ms</li>
<li>gcc = 653ms</li>
<li>go = 663ms</li>
<li>clang = 799ms</li>
</ul><br>
<p>Бойлерплейта много слабонервным не смотреть: <a href="https://gist.github.com/technic/5f23603ac955d246a90a8421a667c8c2#file-main-rs">https://gist.github.com/technic/5f23603ac955d246a90a8421a667c8c2#file-main-rs</a> (лицензия кода на rust MIT)</p><br>
<p>PS На гист так же залил исходники плюсов и гошки с которой сравнивал. Надеюсь авторы не против.</p><br>
<p>PPS Возможно это не самая быстрые версии на альтернативных языках, что удалось найти среди комментов. </p></div>

        <div class="comment__footer">
    <a href="#reply" class="comment__footer-link reply_link" onclick="return comment_show_reply_form(20262967 )">Ответить</a>


</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-0" id="reply_comments_20262967">  <li class="content-list__item content-list__item_comment js-comment " rel="20263067">
    
    <span class="parent_id" data-parent_id="20262967"></span>
    <div class="comment" id="comment_20263067">
      <span class="comment__collapse" title="Свернуть/развернуть ветку комментариев" data-id="20263067"></span>
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head   " rel="20263067">
          <a href="https://habr.com/ru/users/technic93/" class="user-info user-info_inline" rel="user-popover" data-user-login="technic93">
    <img src="Swift%20%D0%BF%D1%80%D0%BE%D1%82%D0%B8%D0%B2%20Rust%20%E2%80%94%20%D0%B1%D0%B5%D0%BD%D1%87%D0%BC%D0%B0%D1%80%D0%BA%D0%B8%D0%BD%D0%B3%20%D0%BD%D0%B0%20Linux%20%D1%81%20(%D0%BD%D0%B5)%D0%BF%D0%BE%D0%BD%D1%8F%D1%82%D0%BD%D1%8B%D0%BC%20%D1%84%D0%B8%D0%BD%D0%B0%D0%BB%D0%BE%D0%BC%20_%20%D0%A5%D0%B0%D0%B1%D1%80_files/4e796c6e9f932ba70d1af19b21f2b99a.png" class="user-info__image-pic user-info__image-pic_small" width="24" height="24">
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">technic93</span>
</a>

          <svg class="icon_comment-edit" title="Комментарий был изменен" width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#pencil"></use></svg>
          <time class="comment__date-time comment__date-time_published">9 июня 2019 в 20:33</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="#comment_20263067" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="20263067" data-action="add" title="Добавить в закладки"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#book"></use></svg></a>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <span class="icon_comment-branch js-comment_tree" data-id="20263067" data-parent_id="20262967" title="Показать ветку комментариев"><svg width="8" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#tree"></use></svg></span>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#comment_20262967" class="icon_comment-arrow-up js-comment_parent" data-id="20263067" data-parent_id="20262967" title="Показать предыдущий комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
    </li>

  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="#comment_20263067" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="20263067" data-parent_id="20262967" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="20263067" data-post-target="450512" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small voting-wjt__button_plus" data-action="plus" onclick="comment_vote(this);" title="Вы проголосовали положительно " disabled="disabled"><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter voting-wjt__counter_positive  js-score" title="Всего голосов +1: ↑1 и ↓0">+1</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="Вы проголосовали положительно , отменить голос нельзя" disabled="disabled"><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message "><p>Кстати автор ещё не оценивал решения на предмет обработки ошибок. Добавил мусор в джсон:</p><br>
<ul>
<li>C++: <code>Assertion `IsObject()' failed. Aborted (core dumped)</code></li>
<li>Go: Вывело не правильный результат ничего не сказав</li>
<li>Rust: <code>Error("expected value", line: 1, column: 69)</code></li>
</ul><br>
<p>Понятно что можно это везде реализовать, но в раст у меня не 
получилось бы подругому, либо паника либо сообщение об ошибке и его 
обработка.</p></div>

        <div class="comment__footer">
    <a href="#reply" class="comment__footer-link reply_link" onclick="return comment_show_reply_form(20263067 )">Ответить</a>


</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-1" id="reply_comments_20263067"></ul>
  </li>
  <li class="content-list__item content-list__item_comment js-comment " rel="20263679">
    
    <span class="parent_id" data-parent_id="20262967"></span>
    <div class="comment" id="comment_20263679">
      <span class="comment__collapse" title="Свернуть/развернуть ветку комментариев" data-id="20263679"></span>
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head comment__head_topic-author comment__head_my-comment " rel="20263679">
          <a href="https://habr.com/ru/users/epishman/" class="user-info user-info_inline" rel="user-popover" data-user-login="epishman">
    <img src="Swift%20%D0%BF%D1%80%D0%BE%D1%82%D0%B8%D0%B2%20Rust%20%E2%80%94%20%D0%B1%D0%B5%D0%BD%D1%87%D0%BC%D0%B0%D1%80%D0%BA%D0%B8%D0%BD%D0%B3%20%D0%BD%D0%B0%20Linux%20%D1%81%20(%D0%BD%D0%B5)%D0%BF%D0%BE%D0%BD%D1%8F%D1%82%D0%BD%D1%8B%D0%BC%20%D1%84%D0%B8%D0%BD%D0%B0%D0%BB%D0%BE%D0%BC%20_%20%D0%A5%D0%B0%D0%B1%D1%80_files/ec0d88c4853c0d36d44bd0526dcfa8d7.png" class="user-info__image-pic user-info__image-pic_small" width="24" height="24">
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">epishman</span>
</a>

          <svg class="icon_comment-edit" title="Комментарий был изменен" width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#pencil"></use></svg>
          <time class="comment__date-time comment__date-time_published">9 июня 2019 в 23:54</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="#comment_20263679" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="20263679" data-action="add" title="Добавить в закладки"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#book"></use></svg></a>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <span class="icon_comment-branch js-comment_tree" data-id="20263679" data-parent_id="20262967" title="Показать ветку комментариев"><svg width="8" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#tree"></use></svg></span>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#comment_20262967" class="icon_comment-arrow-up js-comment_parent" data-id="20263679" data-parent_id="20262967" title="Показать предыдущий комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
    </li>

  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="#comment_20263679" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="20263679" data-parent_id="20262967" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="20263679" data-post-target="450512" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="plus" onclick="comment_vote(this);" title="За свои комментарии голосовать нельзя" disabled="disabled"><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter   js-score" title="Всего голосов 0: ↑0 и ↓0">0</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="За свои комментарии голосовать нельзя" disabled="disabled"><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message ">Пишете Вы круто, но результат 
сравнения совершенно ужасен — платформозависимый модуль, прямой доступ к
 памяти, unsafe — тогда нафига нам нужен такой Rust, если гошка в 
совершенно безопасном и тупом как валенок коде практически ничем не 
хуже. Может поэтому на этом расте в России никто и не пишет?</div>

        <div class="comment__footer">
    <a href="#reply" class="comment__footer-link reply_link" onclick="return comment_show_reply_form(20263679 )">Ответить</a>


</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-1" id="reply_comments_20263679">  <li class="content-list__item content-list__item_comment js-comment " rel="20263799">
    
    <span class="parent_id" data-parent_id="20263679"></span>
    <div class="comment" id="comment_20263799">
      <span class="comment__collapse" title="Свернуть/развернуть ветку комментариев" data-id="20263799"></span>
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head   " rel="20263799">
          <a href="https://habr.com/ru/users/technic93/" class="user-info user-info_inline" rel="user-popover" data-user-login="technic93">
    <img src="Swift%20%D0%BF%D1%80%D0%BE%D1%82%D0%B8%D0%B2%20Rust%20%E2%80%94%20%D0%B1%D0%B5%D0%BD%D1%87%D0%BC%D0%B0%D1%80%D0%BA%D0%B8%D0%BD%D0%B3%20%D0%BD%D0%B0%20Linux%20%D1%81%20(%D0%BD%D0%B5)%D0%BF%D0%BE%D0%BD%D1%8F%D1%82%D0%BD%D1%8B%D0%BC%20%D1%84%D0%B8%D0%BD%D0%B0%D0%BB%D0%BE%D0%BC%20_%20%D0%A5%D0%B0%D0%B1%D1%80_files/4e796c6e9f932ba70d1af19b21f2b99a.png" class="user-info__image-pic user-info__image-pic_small" width="24" height="24">
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">technic93</span>
</a>

          <svg class="icon_comment-edit" title="Комментарий был изменен" width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#pencil"></use></svg>
          <time class="comment__date-time comment__date-time_published">10 июня 2019 в 01:00</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="#comment_20263799" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#" class="icon_comment-bookmark icon_comment-bookmark_add" onclick="return comments_add_to_favorite(this)" data-type="3" data-id="20263799" data-action="remove" title="Убрать из закладок"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#book"></use></svg></a>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <span class="icon_comment-branch js-comment_tree" data-id="20263799" data-parent_id="20263679" title="Показать ветку комментариев"><svg width="8" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#tree"></use></svg></span>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#comment_20263679" class="icon_comment-arrow-up js-comment_parent" data-id="20263799" data-parent_id="20263679" title="Показать предыдущий комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
    </li>

  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="#comment_20263799" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="20263799" data-parent_id="20263679" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="20263799" data-post-target="450512" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small voting-wjt__button_plus" data-action="plus" onclick="comment_vote(this);" title="Вы проголосовали положительно " disabled="disabled"><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter voting-wjt__counter_positive  js-score" title="Всего голосов +1: ↑1 и ↓0">+1</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="Вы проголосовали положительно , отменить голос нельзя" disabled="disabled"><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message "><p>unsafe используется:</p><br>
<p>1) я написал очень упрощённый вариант glibc функции strpbrk, которая векторизирует поиск скобочек в строке (после беседы с <a href="https://habr.com/ru/users/twinklede/" class="user_link">twinklede</a>).
 Без этого будет по-моему 700ms (там можно раскоментировать вариант с 
enumerate). Тогда даже на такой простой задаче С++ не догнать по 
определению, если прочий код будет работать одинаково. (Хотя я 
подозреваю что потоковый парсер плюсов мы не догоним). Без unsafe вы не 
получите sse42.</p><br>
<p>2) Прямой доступ к памяти это Вы про mmap? Возможно он не обязателен.
 Кстати mmap там кросс платформенный используется. Но во многих примерах
 выше он тоже присутсвовал.</p><br>
<p>Да я не аккуратно писал с unsafe, надо было как то завернуть в 
модуль, обложить комментариями и т п. По сути инвариант там всего один 
(я надеюсь :), нам надо скармливать буфер определённого размера в 
векторный регистр. Если дадим указатель на меньше памяти чем надо, то 
привет UB, я использовал растовый итератор chunks_exact а не арифметику с
 указателями чтобы сделать это более явно.</p><br>
<p>Алгоритм мержа у меня тоже не правильный. Я думал над тем какой 
лучше, но походу зависит от характера входных данных. Для нашего 
датасета, логичнее всего по быстрому отбрасывать повторения. Поэтому 
думаю это не так важно для сравнения. <em>Upd:</em> Вообще я подумал 
задача довольно странная мы соревнуемся в том чтобы как можно быстрее 
отбрасывать данные. Какая-то ддос атака. Достаточно было бы сравнить 
скорость сериализации до получения DebtRec.</p><br>
<p>Решение на го действительно выглядит красиво, просто и работает 
быстро. На serde писать свои Visitor далеко не так приятно. Но если 
данные не "грязные" а следуют обычному формату то можно было бы обойтись
 <code>#[derive]</code>. Хотя в го коде есть всякие читики, типа 
резервация векоторов на 10 елементов и вектора вместо set, я не знаю на 
сколько это влияет.</p><br>
<p>Я к сожелению на go не смог построить heatmap через perf, т.е. я построил но имена функции все <code>unknown</code>. Кто подскажет? </p></div>

        <div class="comment__footer">
    <a href="#reply" class="comment__footer-link reply_link" onclick="return comment_show_reply_form(20263799 )">Ответить</a>


</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-2" id="reply_comments_20263799">  <li class="content-list__item content-list__item_comment js-comment " rel="20264825">
    
    <span class="parent_id" data-parent_id="20263799"></span>
    <div class="comment" id="comment_20264825">
      <span class="comment__collapse" title="Свернуть/развернуть ветку комментариев" data-id="20264825"></span>
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head comment__head_topic-author comment__head_my-comment " rel="20264825">
          <a href="https://habr.com/ru/users/epishman/" class="user-info user-info_inline" rel="user-popover" data-user-login="epishman">
    <img src="Swift%20%D0%BF%D1%80%D0%BE%D1%82%D0%B8%D0%B2%20Rust%20%E2%80%94%20%D0%B1%D0%B5%D0%BD%D1%87%D0%BC%D0%B0%D1%80%D0%BA%D0%B8%D0%BD%D0%B3%20%D0%BD%D0%B0%20Linux%20%D1%81%20(%D0%BD%D0%B5)%D0%BF%D0%BE%D0%BD%D1%8F%D1%82%D0%BD%D1%8B%D0%BC%20%D1%84%D0%B8%D0%BD%D0%B0%D0%BB%D0%BE%D0%BC%20_%20%D0%A5%D0%B0%D0%B1%D1%80_files/ec0d88c4853c0d36d44bd0526dcfa8d7.png" class="user-info__image-pic user-info__image-pic_small" width="24" height="24">
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">epishman</span>
</a>

          
          <time class="comment__date-time comment__date-time_published">10 июня 2019 в 11:23</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="#comment_20264825" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="20264825" data-action="add" title="Добавить в закладки"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#book"></use></svg></a>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <span class="icon_comment-branch js-comment_tree" data-id="20264825" data-parent_id="20263799" title="Показать ветку комментариев"><svg width="8" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#tree"></use></svg></span>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#comment_20263799" class="icon_comment-arrow-up js-comment_parent" data-id="20264825" data-parent_id="20263799" title="Показать предыдущий комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
    </li>

  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="#comment_20264825" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="20264825" data-parent_id="20263799" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="20264825" data-post-target="450512" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="plus" onclick="comment_vote(this);" title="За свои комментарии голосовать нельзя" disabled="disabled"><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter   js-score" title="Всего голосов 0: ↑0 и ↓0">0</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="За свои комментарии голосовать нельзя" disabled="disabled"><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message ">Спасибо, множество нового узнал из Ваших комментариев!</div>

        <div class="comment__footer">
    <a href="#reply" class="comment__footer-link reply_link" onclick="return comment_show_reply_form(20264825 )">Ответить</a>


</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-3" id="reply_comments_20264825"></ul>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </li>

      
    </ul>
    <div class="js-form_placeholder">
      
            <div class="comment-form" id="comments_form_placeholder">
              <div class="comment-form__title">
                <span class="comment-form__title-text">Написать комментарий</span>
              </div>
              <div class="comment-form_wrapper" id="comment-form">
                <div id="preview_placeholder" class="comment-form__preview hidden"></div>
                <div class="tm-editor tm-editor_comments" data-component="tm-editor">
                    <ul class="tm-editor__toolbar wysiwyg-toolbar wysiwyg-toolbar_comment">
  <li class="wysiwyg-toolbar__item">
    <button type="button" class="btn btn_wysiwyg" tabindex="0" title="Жирный" onclick="habraWYG2.insertTagWithText(this, 'b');">
      <svg class="icon-svg icon-svg_bold_wysiwyg" aria-hidden="true" aria-labelledby="title" version="1.1" role="img" width="18" height="24" viewBox="0 0 18 24"><path d="M15.39 11.282l-.354-.254c1.076-1.122 1.64-2.532 1.64-4.118 0-2.282-1.018-4.128-2.94-5.336-1.676-1.06-3.922-1.574-6.866-1.574h-6.87v24h7.838c2.854 0 5.202-.536 6.98-1.59 2.082-1.236 3.182-3.24 3.182-5.79 0-2.214-.902-4.06-2.61-5.338zm-11.39-7.282c1.13 0 2.26-.048 3.39-.006 1.308.05 2.714.15 3.88.812.56.318 1.1.81 1.304 1.438.196.606.046 1.302-.322 1.814-.454.634-1.192 1.016-1.952 1.192-.932.216-1.902.15-2.85.15h-3.4499999999999997v-5.4zm8.78 14.98c-.414.264-.89.44-1.364.572-1.17.328-2.366.448-3.578.448h-3.838v-6.6h3.238c1.644 0 3.392-.126 4.932.572.618.28 1.182.718 1.514 1.308.7 1.244.298 2.93-.904 3.7z"></path></svg>
    </button>
  </li>
  <li class="wysiwyg-toolbar__item">
    <button type="button" class="btn btn_wysiwyg" tabindex="0" title="Курсив" onclick="habraWYG2.insertTagWithText(this, 'i');">
      <svg class="icon-svg icon-svg_italic_wysiwyg" aria-hidden="true" aria-labelledby="title" version="1.1" role="img" width="8" height="24" viewBox="0 0 8 24"><path d="M3.996 24h-4l4.004-24h4z"></path></svg>

    </button>
  </li>
  <li class="wysiwyg-toolbar__item">
    <button type="button" class="btn btn_wysiwyg" tabindex="0" title="Подчеркнутый" onclick="habraWYG2.insertTagWithText(this, 'u');">
      <svg class="icon-svg icon-svg_underline_wysiwyg" aria-hidden="true" aria-labelledby="title" version="1.1" role="img" width="20" height="24" viewBox="0 0 20 24"><path d="M10 18c2.81 0 4.88-.596 6.328-1.822l.026-.022.016-.014c1.474-1.254 2.254-3.03 2.254-5.134v-11.008h-4v11.014c0 .42-.058.76-.148 1.04-.136.416-.37.758-.712 1.054-.67.558-2.076.892-3.764.892-2.458 0-3.44-.606-3.754-.87l-.142-.13c-.482-.484-.728-1.152-.728-1.992v-11.008h-4v11.008c0 2.114.788 3.9 2.274 5.164 1.436 1.23 3.512 1.828 6.35 1.828zM0 20h20v4h-20v-4z"></path></svg>

    </button>
  </li>
  <li class="wysiwyg-toolbar__item">
    <button type="button" class="btn btn_wysiwyg" tabindex="0" title="Зачеркнутый" onclick="habraWYG2.insertTagWithText(this, 's');">
      <svg class="icon-svg icon-svg_strike_wysiwyg" aria-hidden="true" aria-labelledby="title" version="1.1" role="img" width="24" height="24" viewBox="0 0 24 24"><path d="M14.686 14.562c.116.126.232.256.306.386l.118.266c.1.302.19.762.19 1.346v.006c0 .668-.16 1.326-.444 1.814l-.132.208c-.154.22-.342.426-.552.6-.156.132-.33.248-.522.352-.262.136-.574.24-.9.318-.244.058-.496.078-.75.098l-.382.044h-.018000000000000002c-.56-.002-1.086-.058-1.536-.166-.254-.06-.488-.138-.7-.234-.63-.29-1.308-.768-1.86-1.31l-2.804 2.852c.928.914 1.942 1.622 3.014 2.102.38.174.794.318 1.234.434.814.214 1.708.322 2.67.322l.382-.022c.252-.01.506-.02.75-.05 1-.122 1.928-.404 2.77-.854.384-.202.752-.442 1.094-.714.516-.406.964-.878 1.346-1.414.128-.18.248-.366.36-.556l.022-.04c.636-1.116.958-2.39.958-3.784 0-.728-.102-1.384-.252-2.004h-4.362zM5.718 9.284l.182.278h8.018c-.36-.138-.756-.276-1.168-.414l-.17-.06-.58-.202c-.908-.322-1.554-.6-2.018-.874-.378-.226-.648-.468-.782-.696l-.044-.086c-.072-.162-.158-.47-.158-1.01 0-.422.094-.776.292-1.106l.174-.246c.134-.16.298-.296.496-.418l.208-.116c.508-.256 1.184-.334 1.832-.318.264.006.51.028.75.066l.362.058c.188.048.364.106.536.176.266.116.528.264.784.438.232.164.474.36.734.598l2.724-2.93c-.388-.366-.794-.694-1.214-.98-.478-.332-.96-.596-1.462-.808-.234-.098-.478-.186-.73-.262-.538-.166-1.122-.254-1.734-.31-.244-.022-.49-.042-.75-.046l-.244-.016c-1.29 0-2.368.244-3.392.764-.242.122-.472.254-.692.4-.472.312-.88.672-1.236 1.09-.202.238-.388.492-.552.762-.606.974-.886 1.992-.886 3.204 0 1.018.162 1.868.502 2.632.066.15.138.294.218.432zM15.604 11.25h-15.604v2h24v-2z"></path></svg>

    </button>
  </li>
  <li class="wysiwyg-toolbar__item">
    <button type="button" class="btn btn_wysiwyg" tabindex="0" title="Цитата" onclick="habraWYG2.insertTagWithText(this, 'blockquote');">
      <svg class="icon-svg icon-svg_blockquote_wysiwyg" aria-hidden="true" aria-labelledby="title" version="1.1" role="img" width="31" height="24" viewBox="0 0 31 24"><path d="M7.01.002c-1.032.029-2.069.238-3.038.612-1.322.509-2.503 1.373-3.218 2.506-.638 1.01-1.02 2.501-.528 3.631.461 1.063 1.471 1.999 2.542 2.57.343.182 3.151 1.438 3.05 1.807l-3.494 12.859h3.701l5.808-10.901c.833-1.627 1.428-2.954 1.786-3.984s.535-2.006.535-2.928c0-1.79-.684-3.281-2.054-4.474-1.399-1.219-3.235-1.75-5.088-1.699zM29.146 1.702c-1.399-1.219-3.235-1.75-5.088-1.697-1.032.029-2.069.238-3.038.612-1.322.506-2.503 1.37-3.218 2.503-.641 1.01-1.02 2.503-.53 3.634.463 1.061 1.474 1.997 2.544 2.568.343.182 3.151 1.438 3.05 1.807l-3.492 12.859h3.701l5.808-10.901c.833-1.627 1.428-2.954 1.786-3.984.355-1.03.533-2.006.533-2.928 0-1.79-.684-3.281-2.054-4.474z"></path></svg>

    </button>
  </li>
  <li class="wysiwyg-toolbar__item">
    <button type="button" class="btn btn_wysiwyg" tabindex="0" title="Ссылка" onclick="habraWYG2.insertLink(this);">
      <svg class="icon-svg icon-svg_link_wysiwyg" aria-hidden="true" aria-labelledby="title" version="1.1" role="img" width="24" height="24" viewBox="0 0 24 24"><path d="M7.274 19.152l-2.426-2.426 4.855-4.853-2.426-2.424-7.277 7.277 7.274 7.274 7.267-7.269-2.424-2.424zM19.152 2.424l-2.426-2.424-7.267 7.269 2.424 2.424 4.843-4.845 2.426 2.426-4.855 4.853 2.426 2.424 7.277-7.277zM8.862 13.94l4.849-4.849 1.212 1.212-4.849 4.849-1.212-1.212z"></path></svg>

    </button>
  </li>
  <li class="wysiwyg-toolbar__item has-nested">
    <button type="button" class="btn btn_wysiwyg" tabindex="0" data-toggle="dropdown" title="Список">
      <svg class="icon-svg icon-svg_ul-list_wysiwyg" aria-hidden="true" aria-labelledby="title" version="1.1" role="img" width="27" height="24" viewBox="0 0 27 24"><path d="M0 6.171h6.171v-6.171h-6.171zM10.284 4.846h17.143v-3.43h-17.143zM10.284 13.764h17.143v-3.429h-17.143zM10.284 22.618h17.143v-3.43h-17.143zM0 24h6.171v-6.171h-6.171zM0 15.091h6.171v-6.171h-6.171z"></path></svg>

    </button>
    <ul class="wysiwyg-toolbar__dropdown">
      <li class="wysiwyg-toolbar__dropdown-item">
        <button type="button" class="btn btn_wysiwyg" tabindex="0" title="Нумерованный список" onclick="habraWYG2.insertList(this, 'ol');">
          <svg class="icon-svg icon-svg_ol-list_wysiwyg" aria-hidden="true" aria-labelledby="title" version="1.1" role="img" width="27" height="24" viewBox="0 0 27 24"><path d="M10.286 1.418h17.143v3.429h-17.143v-3.429zM10.286 10.335h17.143v3.429h-17.143v-3.429zM10.286 19.188h17.143v3.429h-17.143v-3.429zM2.379 5.662h-1.44v1.195h4.565v-1.195h-1.411v-5.662h-1.519c-.012.183-.058.336-.137.459-.077.122-.201.223-.36.298-.134.065-.303.11-.506.135s-.413.039-.634.039v1.118h1.442v3.612zM3.398 13.551c.278-.214.552-.446.825-.699.441-.408.765-.801.977-1.185s.319-.787.319-1.21c0-.648-.223-1.15-.663-1.502s-1.087-.531-1.932-.531c-.418 0-.838.046-1.253.141-.417.096-.734.185-.946.278v1.497h.144c.264-.178.549-.324.854-.437s.597-.171.874-.171c.37 0 .655.084.852.25s.297.405.297.713c0 .257-.077.516-.231.777-.154.262-.411.567-.777.921-.245.238-.569.521-.977.85-.406.327-.809.638-1.212.929v1.111h5.282v-1.286h-3.021l.59-.444zM5.225 20.772c-.137-.118-.291-.207-.459-.269s-.327-.103-.477-.125v-.062c.37-.079.669-.262.895-.549s.339-.612.339-.979c0-.276-.058-.518-.177-.723s-.297-.381-.538-.525c-.204-.12-.461-.218-.773-.29-.31-.07-.675-.108-1.089-.108-.427 0-.849.048-1.263.135-.417.091-.744.183-.986.281v1.426h.163c.303-.178.617-.317.941-.413.324-.094.624-.142.9-.142l.403.027s.291.051.406.106c.101.048.187.113.255.192.069.081.101.187.101.321 0 .18-.031.317-.098.41-.065.093-.163.168-.291.225-.125.051-.274.087-.449.101-.177.015-.381.022-.61.022h-.372v1.176h.362l.566.007s.377.031.519.077c.144.045.261.12.348.225.087.106.134.254.134.442 0 .199-.031.348-.098.453-.065.106-.151.194-.261.267-.137.094-.307.156-.509.183-.199.029-.384.043-.555.043-.291 0-.612-.055-.965-.168-.353-.111-.655-.242-.907-.398h-.171v1.445c.243.106.562.204.951.286.389.084.857.127 1.402.127.477 0 .881-.048 1.217-.147.334-.098.624-.24.873-.425.254-.19.441-.42.562-.689.122-.267.183-.555.183-.866 0-.274-.043-.492-.129-.658-.084-.173-.199-.319-.345-.442z"></path></svg>

        </button>
      </li>
      <li class="wysiwyg-toolbar__dropdown-item">
        <button type="button" class="btn btn_wysiwyg" tabindex="0" title="Маркированный список" onclick="habraWYG2.insertList(this, 'ul');">
          <svg class="icon-svg icon-svg_ul-list_wysiwyg" aria-hidden="true" aria-labelledby="title" version="1.1" role="img" width="27" height="24" viewBox="0 0 27 24"><path d="M0 6.171h6.171v-6.171h-6.171zM10.284 4.846h17.143v-3.43h-17.143zM10.284 13.764h17.143v-3.429h-17.143zM10.284 22.618h17.143v-3.43h-17.143zM0 24h6.171v-6.171h-6.171zM0 15.091h6.171v-6.171h-6.171z"></path></svg>

        </button>
      </li>
    </ul>
  </li>
  <li class="wysiwyg-toolbar__item has-nested" id="list-languages">
    <button type="button" class="btn btn_wysiwyg" data-toggle="dropdown" tabindex="0" title="Исходный код" onclick="habraWYG2.insertSource(this);">
      <svg class="icon-svg icon-svg_source_wysiwyg" aria-hidden="true" aria-labelledby="title" version="1.1" role="img" width="34" height="24" viewBox="0 0 34 24"><path d="M9.698 2.343l-9.698 9.696 9.698 9.698 2.424-2.424-7.274-7.274 7.274-7.272zM13.716 24h3.429l3.429-24h-3.429zM31.913 9.615l-7.274-7.272-2.424 2.424 7.274 7.272-7.274 7.274 2.424 2.424 9.698-9.698z"></path></svg>

    </button>
  </li>
  <li class="wysiwyg-toolbar__item">
    <button type="button" class="btn btn_wysiwyg" tabindex="0" title="Изображение" onclick="habraWYG2.insertImage(this);">
      <svg class="icon-svg icon-svg_image_wysiwyg" aria-hidden="true" aria-labelledby="title" version="1.1" role="img" width="31" height="24" viewBox="0 0 31 24"><path d="M28.289 0h-25.721c-1.418 0-2.568 1.15-2.568 2.568v18.862c0 1.419 1.15 2.57 2.568 2.57h25.719c1.419 0 2.57-1.15 2.57-2.57v-18.862c0-1.418-1.15-2.568-2.568-2.568zm-24.86 20.571v-.873l6.465-6.465 5.899 4.541.005-.007.002.002 2.654-1.923 7.443 4.725h-22.467zm24-2.941l-9.199-5.835-2.563 1.86-6.079-4.677-6.159 6.159v-11.709h24v14.201zM24.831 7.349c0 .947-.768 1.714-1.714 1.714s-1.714-.768-1.714-1.714c0-.947.768-1.714 1.714-1.714s1.714.768 1.714 1.714z"></path></svg>

    </button>
  </li>
  <li class="wysiwyg-toolbar__item">
    <button type="button" class="btn btn_wysiwyg" tabindex="0" title="Медиаэлемент" onclick="habraWYG2.insertTagWithText(this, 'oembed');">
      <svg class="icon-svg icon-svg_embed_wysiwyg" aria-hidden="true" aria-labelledby="title" version="1.1" role="img" width="24" height="24" viewBox="0 0 24 24"><path d="M21.437 0h-18.874c-1.416 0-2.563 1.147-2.563 2.563v18.874c0 1.416 1.147 2.563 2.563 2.563h18.874c1.416 0 2.563-1.147 2.563-2.563v-18.874c0-1.416-1.147-2.563-2.563-2.563zm-.866 20.571h-17.143v-17.143h17.143v17.143zM10.392 18h3.429v-4.286h4.286v-3.429h-4.286v-4.286h-3.429v4.286h-4.286v3.429h4.286z"></path></svg>

    </button>
  </li>
  <li class="wysiwyg-toolbar__item">
    <button type="button" class="btn btn_wysiwyg" tabindex="0" title="Пользователь" onclick="habraWYG2.insertUser(this);">
      <svg class="icon-svg icon-svg_user_wysiwyg" aria-hidden="true" aria-labelledby="title" version="1.1" role="img" width="24" height="24" viewBox="0 0 24 24"><path d="M18.792 17.931c-3.146-1.198-4.152-2.208-4.152-4.371 0-1.299.96-.874 1.383-3.254.175-.987 1.023-.015 1.186-2.268 0-.898-.463-1.121-.463-1.121s.235-1.329.327-2.35c.113-1.275-.706-4.567-5.074-4.567s-5.187 3.291-5.073 4.565c.093 1.022.327 2.35.327 2.35s-.463.223-.463 1.121c.163 2.253 1.011 1.282 1.185 2.268.423 2.378 1.383 1.954 1.383 3.254 0 2.163-1.006 3.173-4.152 4.371-3.156 1.202-5.208 2.426-5.208 3.262v2.808h24v-2.808c0-.835-2.05-2.061-5.208-3.261z"></path></svg>

    </button>
  </li>
  <li class="wysiwyg-toolbar__item">
    <button type="button" class="btn btn_wysiwyg" tabindex="0" title="Спойлер" onclick="habraWYG2.insertSpoiler(this);">
      <svg class="icon-svg icon-svg_spoiler_wysiwyg" aria-hidden="true" aria-labelledby="title" version="1.1" role="img" width="24" height="24" viewBox="0 0 24 24"><path d="M24 10.286h-7.862l5.559-5.559-2.424-2.424-5.559 5.559v-7.862h-3.429v7.862l-5.559-5.559-2.424 2.424 5.559 5.559h-7.862v3.429h7.862l-5.559 5.559 2.424 2.424 5.559-5.559v7.862h3.429v-7.862l5.559 5.559 2.424-2.424-5.559-5.559h7.862z"></path></svg>

    </button>
  </li>
</ul>

                  <form action="/json/comment/" method="post" data-post-type="publish_ugc_ru,h_359,h_18961,h_19039,f_develop" id="comments_form" class="form form_comment-message">
                    <input type="hidden" name="ts" value="1582956122">
                    <input type="hidden" name="tt" value="2">
                    <input type="hidden" name="ti" value="450512">
                    <input type="hidden" name="comment_id" value="0">
                    <input type="hidden" name="parent_id" value="0">

                    <div class="tm-editor__textarea-wrap">
                      <textarea cols="30" rows="5" class="tm-editor__textarea tm-editor__textarea_comment" id="comment_text" name="text"></textarea>
                    </div>

                    <div class="form__buttons form__buttons_comment js-form-buttons">
                      <button type="button" name="preview" class="btn btn_x-large btn_outline_blue js-btn_preview" onclick="comment_preview(this.form, this)" disabled="disabled">Предпросмотр</button>
                      <button type="button" name="send" class="btn btn_x-large btn_blue" onclick="comment_send(this.form, this, event)" disabled="disabled">Отправить</button>
                      <button type="button" name="save" class="btn btn_x-large btn_outline_blue hidden" onclick="comment_update(this.form, this)" disabled="disabled">Сохранить</button>


                        <label class="checkbox checkbox_custom checkbox_md-comments">
                          <input type="checkbox" name="comment_markdown" id="comment_markdown">
                          <span class="checkbox__label checkbox__label_md">
                            Markdown
                            (<a class="checkbox__label-help" href="https://habr.com/info/help/markdown/" target="_blank" rel=" noopener">?</a>)
                          </span>
                        </label>
                    </div>

                    <span class="time_left" title="Оставшееся время редактирования комментария"></span>
                  </form>
                </div>
                <div id="error_text" class="error"></div>
              </div>
            </div>

            <form class="h-message h-message_warning js-h-message hidden" id="moderated_placeholder">
  <div class="h-message__content">
    <h3 class="h-message__title">Ваш комментарий на модерации</h3>
    <p class="h-message__text">Он станет виден другим пользователям, 
если его одобрит автор поста или один из модераторов. Дальше вы сможете 
комментировать этот пост без ограничений.</p>
  </div>
  <div class="h-message__controls">
    <button class="btn btn_x-large btn_outline_blue h-message__submit js-h-message__submit">Продолжить</button>
    <span class="h-message__close js-h-message__submit">
      <svg class="icon-svg icon-svg_navbar-close-search" width="31" height="32" viewBox="0 0 31 32" aria-hidden="true" version="1.1" role="img"><path d="M26.67 0L15.217 11.448 3.77 0 0 3.77l11.447 11.45L0 26.666l3.77 3.77L15.218 18.99l11.45 11.448 3.772-3.77-11.448-11.45L30.44 3.772z"></path></svg>

    </span>
  </div>
</form>


    </div>
  </div>


  </div>
  <div class="sidebar">
    <div class="sidebar_right sidebar_comments js-sidebar_right">
          

  <div class="js-ad_sticky_comments">
    <div class="default-block">
      <div class="default-block__header">
        <h3 class="default-block__header-title">Что обсуждают</h3>
      </div>

      <div class="default-block__content default-block__content_most-comments" id="broadcast_tabs_comments">
        <ul class="toggle-menu toggle-menu_most-comments">
          <li class="toggle-menu__item">
            <a href="#broadcast_comments_now" class="toggle-menu__item-link active" rel="nofollow">Сейчас</a>
          </li>
          <li class="toggle-menu__item">
            <a href="#broadcast_comments_yesterday" class="toggle-menu__item-link" rel="nofollow">Вчера</a>
          </li>
          <li class="toggle-menu__item">
            <a href="#broadcast_comments_week" class="toggle-menu__item-link" rel="nofollow">Неделя</a>
          </li>
        </ul>

          <div class="tabs__content" id="broadcast_comments_now" style="display: block;">
              <ul class="content-list content-list_most-comments">
                  <li class="content-list__item content-list__item_devided post-info">
                    <a href="https://habr.com/ru/post/489610/" onclick="if (typeof ga === 'function') { ga('send', 'event', 'tm_block', 'discussions', 'now'); }" class="post-info__title">Полная домашняя автоматизация в новостройке</a>

                  <div class="post-info__meta">
                    <span class="post-info__meta-item">
                      <svg class="post-info__meta-icon icon-svg_views" width="16" height="9"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#eye"></use></svg><span class="post-info__meta-counter">86,6k</span>
                    </span>
                    <a href="https://habr.com/ru/post/489610/#comments" class="post-info__meta-item" rel="nofollow">
                      <svg class="post-info__meta-icon icon-svg_comments" width="14" height="13"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#comment"></use></svg><span class="post-info__meta-counter">396</span>
                    </a>
                  </div>
                </li>
                  <li class="content-list__item content-list__item_devided post-info">
                    <a href="https://habr.com/ru/news/t/490422/" onclick="if (typeof ga === 'function') { ga('send', 'event', 'tm_block', 'discussions', 'now'); }" class="post-info__title">Citroёn представила электрокар, который можно водить без прав в Европе</a>

                  <div class="post-info__meta">
                    <span class="post-info__meta-item">
                      <svg class="post-info__meta-icon icon-svg_views" width="16" height="9"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#eye"></use></svg><span class="post-info__meta-counter">4,8k</span>
                    </span>
                    <a href="https://habr.com/ru/news/t/490422/#comments" class="post-info__meta-item" rel="nofollow">
                      <svg class="post-info__meta-icon icon-svg_comments" width="14" height="13"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#comment"></use></svg><span class="post-info__meta-counter">23</span>
                    </a>
                  </div>
                </li>
                  <li class="content-list__item content-list__item_devided post-info">
                    <a href="https://habr.com/ru/company/pult/blog/490464/" onclick="if (typeof ga === 'function') { ga('send', 'event', 'tm_block', 'discussions', 'now'); }" class="post-info__title">О неудачной попытке брутфорса авторского права или 68 миллиардов мелодий, которые ничего не изменят</a>

                  <div class="post-info__meta">
                    <span class="post-info__meta-item">
                      <svg class="post-info__meta-icon icon-svg_views" width="16" height="9"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#eye"></use></svg><span class="post-info__meta-counter">3,6k</span>
                    </span>
                    <a href="https://habr.com/ru/company/pult/blog/490464/#comments" class="post-info__meta-item" rel="nofollow">
                      <svg class="post-info__meta-icon icon-svg_comments" width="14" height="13"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#comment"></use></svg><span class="post-info__meta-counter">26</span>
                    </a>
                  </div>
                </li>
                  <li class="content-list__item content-list__item_devided post-info">
                    <a href="https://habr.com/ru/company/mailru/blog/490060/" onclick="if (typeof ga === 'function') { ga('send', 'event', 'tm_block', 'discussions', 'now'); }" class="post-info__title">Граф знаний в Поиске: построение из нескольких источников</a>

                  <div class="post-info__meta">
                    <span class="post-info__meta-item">
                      <svg class="post-info__meta-icon icon-svg_views" width="16" height="9"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#eye"></use></svg><span class="post-info__meta-counter">2,1k</span>
                    </span>
                    <a href="https://habr.com/ru/company/mailru/blog/490060/#comments" class="post-info__meta-item" rel="nofollow">
                      <svg class="post-info__meta-icon icon-svg_comments" width="14" height="13"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#comment"></use></svg><span class="post-info__meta-counter">3</span>
                    </a>
                  </div>
                </li>
                  <li class="content-list__item content-list__item_devided post-info">
                    <a href="https://habr.com/ru/news/t/490008/" onclick="if (typeof ga === 'function') { ga('send', 'event', 'tm_block', 'discussions', 'now'); }" class="post-info__title">Разработчики Black Mesa назначили дату выхода финальной версии игры</a>

                  <div class="post-info__meta">
                    <span class="post-info__meta-item">
                      <svg class="post-info__meta-icon icon-svg_views" width="16" height="9"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#eye"></use></svg><span class="post-info__meta-counter">6,4k</span>
                    </span>
                    <a href="https://habr.com/ru/news/t/490008/#comments" class="post-info__meta-item" rel="nofollow">
                      <svg class="post-info__meta-icon icon-svg_comments" width="14" height="13"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#comment"></use></svg><span class="post-info__meta-counter">23</span>
                    </a>
                  </div>
                </li>
            </ul>
        </div>
          <div class="tabs__content" id="broadcast_comments_yesterday" style="display: none;">
              <ul class="content-list content-list_most-comments">
                  <li class="content-list__item content-list__item_devided post-info">
                    <a href="https://habr.com/ru/post/490378/" onclick="if (typeof ga === 'function') { ga('send', 'event', 'tm_block', 'discussions', 'yesterday'); }" class="post-info__title">IPv6 — прекрасный мир, стоящий скорого перехода на него</a>

                  <div class="post-info__meta">
                    <span class="post-info__meta-item">
                      <svg class="post-info__meta-icon icon-svg_views" width="16" height="9"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#eye"></use></svg><span class="post-info__meta-counter">5,1k</span>
                    </span>
                    <a href="https://habr.com/ru/post/490378/#comments" class="post-info__meta-item" rel="nofollow">
                      <svg class="post-info__meta-icon icon-svg_comments" width="14" height="13"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#comment"></use></svg><span class="post-info__meta-counter">151</span>
                    </a>
                  </div>
                </li>
                  <li class="content-list__item content-list__item_devided post-info">
                    <a href="https://habr.com/ru/company/dodopizzadev/blog/490372/" onclick="if (typeof ga === 'function') { ga('send', 'event', 'tm_block', 'discussions', 'yesterday'); }" class="post-info__title">Собеседование в Додо Пиццу</a>

                  <div class="post-info__meta">
                    <span class="post-info__meta-item">
                      <svg class="post-info__meta-icon icon-svg_views" width="16" height="9"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#eye"></use></svg><span class="post-info__meta-counter">11,7k</span>
                    </span>
                    <a href="https://habr.com/ru/company/dodopizzadev/blog/490372/#comments" class="post-info__meta-item" rel="nofollow">
                      <svg class="post-info__meta-icon icon-svg_comments" width="14" height="13"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#comment"></use></svg><span class="post-info__meta-counter">90</span>
                    </a>
                  </div>
                </li>
                  <li class="content-list__item content-list__item_devided post-info">
                    <a href="https://habr.com/ru/post/490358/" onclick="if (typeof ga === 'function') { ga('send', 'event', 'tm_block', 'discussions', 'yesterday'); }" class="post-info__title">Нужно ли современному программисту уметь создавать алгоритмы?</a>

                  <div class="post-info__meta">
                    <span class="post-info__meta-item">
                      <svg class="post-info__meta-icon icon-svg_views" width="16" height="9"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#eye"></use></svg><span class="post-info__meta-counter">4k</span>
                    </span>
                    <a href="https://habr.com/ru/post/490358/#comments" class="post-info__meta-item" rel="nofollow">
                      <svg class="post-info__meta-icon icon-svg_comments" width="14" height="13"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#comment"></use></svg><span class="post-info__meta-counter">74</span>
                    </a>
                  </div>
                </li>
                  <li class="content-list__item content-list__item_devided post-info">
                    <a href="https://habr.com/ru/post/490408/" onclick="if (typeof ga === 'function') { ga('send', 'event', 'tm_block', 'discussions', 'yesterday'); }" class="post-info__title">FreeBSD: гораздо лучше GNU/Linux</a>

                  <div class="post-info__meta">
                    <span class="post-info__meta-item">
                      <svg class="post-info__meta-icon icon-svg_views" width="16" height="9"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#eye"></use></svg><span class="post-info__meta-counter">10k</span>
                    </span>
                    <a href="https://habr.com/ru/post/490408/#comments" class="post-info__meta-item" rel="nofollow">
                      <svg class="post-info__meta-icon icon-svg_comments" width="14" height="13"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#comment"></use></svg><span class="post-info__meta-counter">53</span>
                    </a>
                  </div>
                </li>
                  <li class="content-list__item content-list__item_devided post-info">
                    <a href="https://habr.com/ru/post/490412/" onclick="if (typeof ga === 'function') { ga('send', 'event', 'tm_block', 'discussions', 'yesterday'); }" class="post-info__title">Может, нам слегка успокоиться с JavaScript?</a>

                  <div class="post-info__meta">
                    <span class="post-info__meta-item">
                      <svg class="post-info__meta-icon icon-svg_views" width="16" height="9"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#eye"></use></svg><span class="post-info__meta-counter">14,3k</span>
                    </span>
                    <a href="https://habr.com/ru/post/490412/#comments" class="post-info__meta-item" rel="nofollow">
                      <svg class="post-info__meta-icon icon-svg_comments" width="14" height="13"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#comment"></use></svg><span class="post-info__meta-counter">64</span>
                    </a>
                  </div>
                </li>
            </ul>
        </div>
          <div class="tabs__content" id="broadcast_comments_week" style="display: none;">
              <ul class="content-list content-list_most-comments">
                  <li class="content-list__item content-list__item_devided post-info">
                    <a href="https://habr.com/ru/post/489538/" onclick="if (typeof ga === 'function') { ga('send', 'event', 'tm_block', 'discussions', 'week'); }" class="post-info__title">Почему разработчикам не нравится Agile?</a>

                  <div class="post-info__meta">
                    <span class="post-info__meta-item">
                      <svg class="post-info__meta-icon icon-svg_views" width="16" height="9"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#eye"></use></svg><span class="post-info__meta-counter">18k</span>
                    </span>
                    <a href="https://habr.com/ru/post/489538/#comments" class="post-info__meta-item" rel="nofollow">
                      <svg class="post-info__meta-icon icon-svg_comments" width="14" height="13"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#comment"></use></svg><span class="post-info__meta-counter">533</span>
                    </a>
                  </div>
                </li>
                  <li class="content-list__item content-list__item_devided post-info">
                    <a href="https://habr.com/ru/post/489610/" onclick="if (typeof ga === 'function') { ga('send', 'event', 'tm_block', 'discussions', 'week'); }" class="post-info__title">Полная домашняя автоматизация в новостройке</a>

                  <div class="post-info__meta">
                    <span class="post-info__meta-item">
                      <svg class="post-info__meta-icon icon-svg_views" width="16" height="9"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#eye"></use></svg><span class="post-info__meta-counter">86,6k</span>
                    </span>
                    <a href="https://habr.com/ru/post/489610/#comments" class="post-info__meta-item" rel="nofollow">
                      <svg class="post-info__meta-icon icon-svg_comments" width="14" height="13"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#comment"></use></svg><span class="post-info__meta-counter">396</span>
                    </a>
                  </div>
                </li>
                  <li class="content-list__item content-list__item_devided post-info">
                    <a href="https://habr.com/ru/post/489576/" onclick="if (typeof ga === 'function') { ga('send', 'event', 'tm_block', 'discussions', 'week'); }" class="post-info__title">Нюансы современной медицины</a>

                  <div class="post-info__meta">
                    <span class="post-info__meta-item">
                      <svg class="post-info__meta-icon icon-svg_views" width="16" height="9"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#eye"></use></svg><span class="post-info__meta-counter">30,6k</span>
                    </span>
                    <a href="https://habr.com/ru/post/489576/#comments" class="post-info__meta-item" rel="nofollow">
                      <svg class="post-info__meta-icon icon-svg_comments" width="14" height="13"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#comment"></use></svg><span class="post-info__meta-counter">383</span>
                    </a>
                  </div>
                </li>
                  <li class="content-list__item content-list__item_devided post-info">
                    <a href="https://habr.com/ru/post/489492/" onclick="if (typeof ga === 'function') { ga('send', 'event', 'tm_block', 'discussions', 'week'); }" class="post-info__title">Яндекс.Диск запретил использование open source утилиты rclone. UPD — снова работает</a>

                  <div class="post-info__meta">
                    <span class="post-info__meta-item">
                      <svg class="post-info__meta-icon icon-svg_views" width="16" height="9"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#eye"></use></svg><span class="post-info__meta-counter">77,2k</span>
                    </span>
                    <a href="https://habr.com/ru/post/489492/#comments" class="post-info__meta-item" rel="nofollow">
                      <svg class="post-info__meta-icon icon-svg_comments" width="14" height="13"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#comment"></use></svg><span class="post-info__meta-counter">371</span>
                    </a>
                  </div>
                </li>
                  <li class="content-list__item content-list__item_devided post-info">
                    <a href="https://habr.com/ru/post/489710/" onclick="if (typeof ga === 'function') { ga('send', 'event', 'tm_block', 'discussions', 'week'); }" class="post-info__title">Как восстановить светодиодную лампу за 2 минуты при минимальных навыках работы с паяльником и знаниях об электронике</a>

                  <div class="post-info__meta">
                    <span class="post-info__meta-item">
                      <svg class="post-info__meta-icon icon-svg_views" width="16" height="9"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#eye"></use></svg><span class="post-info__meta-counter">80,5k</span>
                    </span>
                    <a href="https://habr.com/ru/post/489710/#comments" class="post-info__meta-item" rel="nofollow">
                      <svg class="post-info__meta-icon icon-svg_comments" width="14" height="13"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#comment"></use></svg><span class="post-info__meta-counter">279</span>
                    </a>
                  </div>
                </li>
            </ul>
        </div>
    </div>
  </div>

    </div>
  </div>
  </div></section>


  <script type="text/javascript">
    var userLabel = 'author';
  </script>

  


        </div>
      </div>

        <div class="layout__row layout__row_promo-blocks">
          <div class="layout__cell">
            <section class="column-wrapper column-wrapper_bottom column-wrapper_bordered">
  <div class="content_left">
    

  <div class="default-block default-block_content">
    <div class="default-block__header default-block__header_large">
      <h2 class="default-block__header-title default-block__header-title_large">Самое читаемое</h2>
    </div>
    <div class="default-block__content default-block__content_most-read" id="broadcast_tabs_posts">
      <ul class="toggle-menu toggle-menu__most-read">
        <li class="toggle-menu__item">
          <a href="#broadcast_posts_today" class="toggle-menu__item-link active" rel="nofollow">Сутки</a>
        </li>
        <li class="toggle-menu__item">
          <a href="#broadcast_posts_week" class="toggle-menu__item-link" rel="nofollow">Неделя</a>
        </li>
        <li class="toggle-menu__item">
          <a href="#broadcast_posts_month" class="toggle-menu__item-link" rel="nofollow">Месяц</a>
        </li>
      </ul>

        <div class="tabs__content tabs__content_reading" id="broadcast_posts_today" style="display: block;">
            <ul class="content-list content-list_most-read">
                <li class="content-list__item content-list__item_devided post-info">
                  <a href="https://habr.com/ru/post/490294/" class="post-info__title post-info__title_large" onclick="if (typeof ga === 'function') { ga('send', 'event', 'tm_block', 'most_read', 'today'); }">Собеседование в луже крови</a>
                  <div class="post-info__meta">
                    <span class="post-info__meta-item" title="Рейтинг">
                      <svg class="post-info__meta-icon icon-svg_rating" width="11" height="13"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#arrow-bold"></use></svg><span class="post-info__meta-counter">+148</span>
                    </span>
                    <span class="post-info__meta-item" title="Количество просмотров">
                      <svg class="post-info__meta-icon icon-svg_views" width="16" height="9"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#eye"></use></svg><span class="post-info__meta-counter">56,2k</span>
                    </span>
                    <span class="post-info__meta-item" title="Закладки">
                      <svg class="post-info__meta-icon icon-svg_bookmark-mini" width="8" height="13"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#book"></use></svg><span class="post-info__meta-counter">110</span>
                    </span>
                    <a href="https://habr.com/ru/post/490294/#comments" class="post-info__meta-item" rel="nofollow" title="Комментарии">
                      <svg class="post-info__meta-icon icon-svg_comments" width="14" height="13"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#comment"></use></svg><span class="post-info__meta-counter">167</span>
                    </a>
                  </div>
                </li>
                <li class="content-list__item content-list__item_devided post-info">
                  <a href="https://habr.com/ru/company/lamptest/blog/490292/" class="post-info__title post-info__title_large" onclick="if (typeof ga === 'function') { ga('send', 'event', 'tm_block', 'most_read', 'today'); }">Большое красно-синее надувательство</a>
                  <div class="post-info__meta">
                    <span class="post-info__meta-item" title="Рейтинг">
                      <svg class="post-info__meta-icon icon-svg_rating" width="11" height="13"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#arrow-bold"></use></svg><span class="post-info__meta-counter">+91</span>
                    </span>
                    <span class="post-info__meta-item" title="Количество просмотров">
                      <svg class="post-info__meta-icon icon-svg_views" width="16" height="9"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#eye"></use></svg><span class="post-info__meta-counter">44,3k</span>
                    </span>
                    <span class="post-info__meta-item" title="Закладки">
                      <svg class="post-info__meta-icon icon-svg_bookmark-mini" width="8" height="13"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#book"></use></svg><span class="post-info__meta-counter">51</span>
                    </span>
                    <a href="https://habr.com/ru/company/lamptest/blog/490292/#comments" class="post-info__meta-item" rel="nofollow" title="Комментарии">
                      <svg class="post-info__meta-icon icon-svg_comments" width="14" height="13"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#comment"></use></svg><span class="post-info__meta-counter">54</span>
                    </a>
                  </div>
                </li>
                <li class="content-list__item content-list__item_devided post-info">
                  <a href="https://habr.com/ru/post/490412/" class="post-info__title post-info__title_large" onclick="if (typeof ga === 'function') { ga('send', 'event', 'tm_block', 'most_read', 'today'); }">Может, нам слегка успокоиться с JavaScript?</a>
                  <div class="post-info__meta">
                    <span class="post-info__meta-item" title="Рейтинг">
                      <svg class="post-info__meta-icon icon-svg_rating" width="11" height="13"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#arrow-bold"></use></svg><span class="post-info__meta-counter">+60</span>
                    </span>
                    <span class="post-info__meta-item" title="Количество просмотров">
                      <svg class="post-info__meta-icon icon-svg_views" width="16" height="9"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#eye"></use></svg><span class="post-info__meta-counter">14,3k</span>
                    </span>
                    <span class="post-info__meta-item" title="Закладки">
                      <svg class="post-info__meta-icon icon-svg_bookmark-mini" width="8" height="13"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#book"></use></svg><span class="post-info__meta-counter">57</span>
                    </span>
                    <a href="https://habr.com/ru/post/490412/#comments" class="post-info__meta-item" rel="nofollow" title="Комментарии">
                      <svg class="post-info__meta-icon icon-svg_comments" width="14" height="13"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#comment"></use></svg><span class="post-info__meta-counter">64</span>
                    </a>
                  </div>
                </li>
                <li class="content-list__item content-list__item_devided post-info">
                  <a href="https://habr.com/ru/post/490196/" class="post-info__title post-info__title_large" onclick="if (typeof ga === 'function') { ga('send', 'event', 'tm_block', 'most_read', 'today'); }">[Flipper Zero] отказываемся от Raspberry Pi, делаем собственную плату с нуля. Поиск правильного WiFi чипа</a>
                  <div class="post-info__meta">
                    <span class="post-info__meta-item" title="Рейтинг">
                      <svg class="post-info__meta-icon icon-svg_rating" width="11" height="13"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#arrow-bold"></use></svg><span class="post-info__meta-counter">+103</span>
                    </span>
                    <span class="post-info__meta-item" title="Количество просмотров">
                      <svg class="post-info__meta-icon icon-svg_views" width="16" height="9"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#eye"></use></svg><span class="post-info__meta-counter">26,9k</span>
                    </span>
                    <span class="post-info__meta-item" title="Закладки">
                      <svg class="post-info__meta-icon icon-svg_bookmark-mini" width="8" height="13"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#book"></use></svg><span class="post-info__meta-counter">130</span>
                    </span>
                    <a href="https://habr.com/ru/post/490196/#comments" class="post-info__meta-item" rel="nofollow" title="Комментарии">
                      <svg class="post-info__meta-icon icon-svg_comments" width="14" height="13"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#comment"></use></svg><span class="post-info__meta-counter">75</span>
                    </a>
                  </div>
                </li>
                <li class="content-list__item content-list__item_devided post-info">
                  <a href="https://habr.com/ru/article/488384/" class="post-info__title post-info__title_large" onclick="if (typeof ga === 'function') { ga('send', 'event', 'tm_block', 'most_read', 'today'); }">Будни сисадмина: что бесит больше всего</a>
                  <div class="post-info__meta">
                    <span class="post-info__meta-item" title="Рейтинг">
                      <svg class="post-info__meta-icon icon-svg_rating" width="11" height="13"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#arrow-bold"></use></svg><span class="post-info__meta-counter">+15</span>
                    </span>
                    <span class="post-info__meta-item" title="Количество просмотров">
                      <svg class="post-info__meta-icon icon-svg_views" width="16" height="9"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#eye"></use></svg><span class="post-info__meta-counter">27,2k</span>
                    </span>
                    <span class="post-info__meta-item" title="Закладки">
                      <svg class="post-info__meta-icon icon-svg_bookmark-mini" width="8" height="13"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#book"></use></svg><span class="post-info__meta-counter">77</span>
                    </span>
                    <a href="https://habr.com/ru/article/488384/#comments" class="post-info__meta-item" rel="nofollow" title="Комментарии">
                      <svg class="post-info__meta-icon icon-svg_comments" width="14" height="13"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#comment"></use></svg><span class="post-info__meta-counter">30</span>
                    </a>
                  </div>
                </li>
            </ul>
        </div>
        <div class="tabs__content tabs__content_reading" id="broadcast_posts_week" style="display: none;">
            <ul class="content-list content-list_most-read">
                <li class="content-list__item content-list__item_devided post-info">
                  <a href="https://habr.com/ru/post/489610/" class="post-info__title post-info__title_large" onclick="if (typeof ga === 'function') { ga('send', 'event', 'tm_block', 'most_read', 'week'); }">Полная домашняя автоматизация в новостройке</a>
                  <div class="post-info__meta">
                    <span class="post-info__meta-item" title="Рейтинг">
                      <svg class="post-info__meta-icon icon-svg_rating" width="11" height="13"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#arrow-bold"></use></svg><span class="post-info__meta-counter">+112</span>
                    </span>
                    <span class="post-info__meta-item" title="Количество просмотров">
                      <svg class="post-info__meta-icon icon-svg_views" width="16" height="9"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#eye"></use></svg><span class="post-info__meta-counter">86,6k</span>
                    </span>
                    <span class="post-info__meta-item" title="Закладки">
                      <svg class="post-info__meta-icon icon-svg_bookmark-mini" width="8" height="13"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#book"></use></svg><span class="post-info__meta-counter">626</span>
                    </span>
                    <a href="https://habr.com/ru/post/489610/#comments" class="post-info__meta-item" rel="nofollow" title="Комментарии">
                      <svg class="post-info__meta-icon icon-svg_comments" width="14" height="13"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#comment"></use></svg><span class="post-info__meta-counter">396</span>
                    </a>
                  </div>
                </li>
                <li class="content-list__item content-list__item_devided post-info">
                  <a href="https://habr.com/ru/post/489710/" class="post-info__title post-info__title_large" onclick="if (typeof ga === 'function') { ga('send', 'event', 'tm_block', 'most_read', 'week'); }">Как восстановить светодиодную лампу за 2 минуты при минимальных навыках работы с паяльником и знаниях об электронике</a>
                  <div class="post-info__meta">
                    <span class="post-info__meta-item" title="Рейтинг">
                      <svg class="post-info__meta-icon icon-svg_rating" width="11" height="13"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#arrow-bold"></use></svg><span class="post-info__meta-counter">+28</span>
                    </span>
                    <span class="post-info__meta-item" title="Количество просмотров">
                      <svg class="post-info__meta-icon icon-svg_views" width="16" height="9"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#eye"></use></svg><span class="post-info__meta-counter">80,5k</span>
                    </span>
                    <span class="post-info__meta-item" title="Закладки">
                      <svg class="post-info__meta-icon icon-svg_bookmark-mini" width="8" height="13"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#book"></use></svg><span class="post-info__meta-counter">151</span>
                    </span>
                    <a href="https://habr.com/ru/post/489710/#comments" class="post-info__meta-item" rel="nofollow" title="Комментарии">
                      <svg class="post-info__meta-icon icon-svg_comments" width="14" height="13"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#comment"></use></svg><span class="post-info__meta-counter">279</span>
                    </a>
                  </div>
                </li>
                <li class="content-list__item content-list__item_devided post-info">
                  <a href="https://habr.com/ru/post/489492/" class="post-info__title post-info__title_large" onclick="if (typeof ga === 'function') { ga('send', 'event', 'tm_block', 'most_read', 'week'); }">Яндекс.Диск запретил использование open source утилиты rclone. UPD — снова работает</a>
                  <div class="post-info__meta">
                    <span class="post-info__meta-item" title="Рейтинг">
                      <svg class="post-info__meta-icon icon-svg_rating" width="11" height="13"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#arrow-bold"></use></svg><span class="post-info__meta-counter">+293</span>
                    </span>
                    <span class="post-info__meta-item" title="Количество просмотров">
                      <svg class="post-info__meta-icon icon-svg_views" width="16" height="9"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#eye"></use></svg><span class="post-info__meta-counter">77,2k</span>
                    </span>
                    <span class="post-info__meta-item" title="Закладки">
                      <svg class="post-info__meta-icon icon-svg_bookmark-mini" width="8" height="13"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#book"></use></svg><span class="post-info__meta-counter">115</span>
                    </span>
                    <a href="https://habr.com/ru/post/489492/#comments" class="post-info__meta-item" rel="nofollow" title="Комментарии">
                      <svg class="post-info__meta-icon icon-svg_comments" width="14" height="13"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#comment"></use></svg><span class="post-info__meta-counter">371</span>
                    </a>
                  </div>
                </li>
                <li class="content-list__item content-list__item_devided post-info">
                  <a href="https://habr.com/ru/post/490294/" class="post-info__title post-info__title_large" onclick="if (typeof ga === 'function') { ga('send', 'event', 'tm_block', 'most_read', 'week'); }">Собеседование в луже крови</a>
                  <div class="post-info__meta">
                    <span class="post-info__meta-item" title="Рейтинг">
                      <svg class="post-info__meta-icon icon-svg_rating" width="11" height="13"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#arrow-bold"></use></svg><span class="post-info__meta-counter">+148</span>
                    </span>
                    <span class="post-info__meta-item" title="Количество просмотров">
                      <svg class="post-info__meta-icon icon-svg_views" width="16" height="9"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#eye"></use></svg><span class="post-info__meta-counter">56,2k</span>
                    </span>
                    <span class="post-info__meta-item" title="Закладки">
                      <svg class="post-info__meta-icon icon-svg_bookmark-mini" width="8" height="13"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#book"></use></svg><span class="post-info__meta-counter">110</span>
                    </span>
                    <a href="https://habr.com/ru/post/490294/#comments" class="post-info__meta-item" rel="nofollow" title="Комментарии">
                      <svg class="post-info__meta-icon icon-svg_comments" width="14" height="13"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#comment"></use></svg><span class="post-info__meta-counter">167</span>
                    </a>
                  </div>
                </li>
                <li class="content-list__item content-list__item_devided post-info">
                  <a href="https://habr.com/ru/post/489514/" class="post-info__title post-info__title_large" onclick="if (typeof ga === 'function') { ga('send', 'event', 'tm_block', 'most_read', 'week'); }">Загружаем и храним в Google Drive файлы любого размера бесплатно. Баг или Фича?</a>
                  <div class="post-info__meta">
                    <span class="post-info__meta-item" title="Рейтинг">
                      <svg class="post-info__meta-icon icon-svg_rating" width="11" height="13"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#arrow-bold"></use></svg><span class="post-info__meta-counter">+128</span>
                    </span>
                    <span class="post-info__meta-item" title="Количество просмотров">
                      <svg class="post-info__meta-icon icon-svg_views" width="16" height="9"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#eye"></use></svg><span class="post-info__meta-counter">54,4k</span>
                    </span>
                    <span class="post-info__meta-item" title="Закладки">
                      <svg class="post-info__meta-icon icon-svg_bookmark-mini" width="8" height="13"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#book"></use></svg><span class="post-info__meta-counter">133</span>
                    </span>
                    <a href="https://habr.com/ru/post/489514/#comments" class="post-info__meta-item" rel="nofollow" title="Комментарии">
                      <svg class="post-info__meta-icon icon-svg_comments" width="14" height="13"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#comment"></use></svg><span class="post-info__meta-counter">96</span>
                    </a>
                  </div>
                </li>
            </ul>
        </div>
        <div class="tabs__content tabs__content_reading" id="broadcast_posts_month" style="display: none;">
            <ul class="content-list content-list_most-read">
                <li class="content-list__item content-list__item_devided post-info">
                  <a href="https://habr.com/ru/post/486174/" class="post-info__title post-info__title_large" onclick="if (typeof ga === 'function') { ga('send', 'event', 'tm_block', 'most_read', 'month'); }">У меня нулевая текучка</a>
                  <div class="post-info__meta">
                    <span class="post-info__meta-item" title="Рейтинг">
                      <svg class="post-info__meta-icon icon-svg_rating" width="11" height="13"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#arrow-bold"></use></svg><span class="post-info__meta-counter">+249</span>
                    </span>
                    <span class="post-info__meta-item" title="Количество просмотров">
                      <svg class="post-info__meta-icon icon-svg_views" width="16" height="9"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#eye"></use></svg><span class="post-info__meta-counter">148k</span>
                    </span>
                    <span class="post-info__meta-item" title="Закладки">
                      <svg class="post-info__meta-icon icon-svg_bookmark-mini" width="8" height="13"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#book"></use></svg><span class="post-info__meta-counter">566</span>
                    </span>
                    <a href="https://habr.com/ru/post/486174/#comments" class="post-info__meta-item" rel="nofollow" title="Комментарии">
                      <svg class="post-info__meta-icon icon-svg_comments" width="14" height="13"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#comment"></use></svg><span class="post-info__meta-counter">529</span>
                    </a>
                  </div>
                </li>
                <li class="content-list__item content-list__item_devided post-info">
                  <a href="https://habr.com/ru/post/487290/" class="post-info__title post-info__title_large" onclick="if (typeof ga === 'function') { ga('send', 'event', 'tm_block', 'most_read', 'month'); }">Samsung удалённо блокирует свои «серые» Smart TV в России. UPD — заявление Samsung</a>
                  <div class="post-info__meta">
                    <span class="post-info__meta-item" title="Рейтинг">
                      <svg class="post-info__meta-icon icon-svg_rating" width="11" height="13"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#arrow-bold"></use></svg><span class="post-info__meta-counter">+150</span>
                    </span>
                    <span class="post-info__meta-item" title="Количество просмотров">
                      <svg class="post-info__meta-icon icon-svg_views" width="16" height="9"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#eye"></use></svg><span class="post-info__meta-counter">144k</span>
                    </span>
                    <span class="post-info__meta-item" title="Закладки">
                      <svg class="post-info__meta-icon icon-svg_bookmark-mini" width="8" height="13"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#book"></use></svg><span class="post-info__meta-counter">75</span>
                    </span>
                    <a href="https://habr.com/ru/post/487290/#comments" class="post-info__meta-item" rel="nofollow" title="Комментарии">
                      <svg class="post-info__meta-icon icon-svg_comments" width="14" height="13"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#comment"></use></svg><span class="post-info__meta-counter">658</span>
                    </a>
                  </div>
                </li>
                <li class="content-list__item content-list__item_devided post-info">
                  <a href="https://habr.com/ru/post/486164/" class="post-info__title post-info__title_large" onclick="if (typeof ga === 'function') { ga('send', 'event', 'tm_block', 'most_read', 'month'); }">Коронавирус 2019-nCoV. FAQ по защите органов дыхания и дезинфекции</a>
                  <div class="post-info__meta">
                    <span class="post-info__meta-item" title="Рейтинг">
                      <svg class="post-info__meta-icon icon-svg_rating" width="11" height="13"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#arrow-bold"></use></svg><span class="post-info__meta-counter">+89</span>
                    </span>
                    <span class="post-info__meta-item" title="Количество просмотров">
                      <svg class="post-info__meta-icon icon-svg_views" width="16" height="9"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#eye"></use></svg><span class="post-info__meta-counter">127k</span>
                    </span>
                    <span class="post-info__meta-item" title="Закладки">
                      <svg class="post-info__meta-icon icon-svg_bookmark-mini" width="8" height="13"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#book"></use></svg><span class="post-info__meta-counter">315</span>
                    </span>
                    <a href="https://habr.com/ru/post/486164/#comments" class="post-info__meta-item" rel="nofollow" title="Комментарии">
                      <svg class="post-info__meta-icon icon-svg_comments" width="14" height="13"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#comment"></use></svg><span class="post-info__meta-counter">376</span>
                    </a>
                  </div>
                </li>
                <li class="content-list__item content-list__item_devided post-info">
                  <a href="https://habr.com/ru/post/486874/" class="post-info__title post-info__title_large" onclick="if (typeof ga === 'function') { ga('send', 'event', 'tm_block', 'most_read', 'month'); }">Коронавирус 2019-nCoV: смертность небольшая, большая летальность</a>
                  <div class="post-info__meta">
                    <span class="post-info__meta-item" title="Рейтинг">
                      <svg class="post-info__meta-icon icon-svg_rating" width="11" height="13"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#arrow-bold"></use></svg><span class="post-info__meta-counter">+143</span>
                    </span>
                    <span class="post-info__meta-item" title="Количество просмотров">
                      <svg class="post-info__meta-icon icon-svg_views" width="16" height="9"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#eye"></use></svg><span class="post-info__meta-counter">119k</span>
                    </span>
                    <span class="post-info__meta-item" title="Закладки">
                      <svg class="post-info__meta-icon icon-svg_bookmark-mini" width="8" height="13"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#book"></use></svg><span class="post-info__meta-counter">98</span>
                    </span>
                    <a href="https://habr.com/ru/post/486874/#comments" class="post-info__meta-item" rel="nofollow" title="Комментарии">
                      <svg class="post-info__meta-icon icon-svg_comments" width="14" height="13"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#comment"></use></svg><span class="post-info__meta-counter">395</span>
                    </a>
                  </div>
                </li>
                <li class="content-list__item content-list__item_devided post-info">
                  <a href="https://habr.com/ru/post/486372/" class="post-info__title post-info__title_large" onclick="if (typeof ga === 'function') { ga('send', 'event', 'tm_block', 'most_read', 'month'); }">Чешские программисты бесплатно написали сайт стоимостью 16 миллионов евро? Правда?</a>
                  <div class="post-info__meta">
                    <span class="post-info__meta-item" title="Рейтинг">
                      <svg class="post-info__meta-icon icon-svg_rating" width="11" height="13"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#arrow-bold"></use></svg><span class="post-info__meta-counter">+336</span>
                    </span>
                    <span class="post-info__meta-item" title="Количество просмотров">
                      <svg class="post-info__meta-icon icon-svg_views" width="16" height="9"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#eye"></use></svg><span class="post-info__meta-counter">117k</span>
                    </span>
                    <span class="post-info__meta-item" title="Закладки">
                      <svg class="post-info__meta-icon icon-svg_bookmark-mini" width="8" height="13"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#book"></use></svg><span class="post-info__meta-counter">150</span>
                    </span>
                    <a href="https://habr.com/ru/post/486372/#comments" class="post-info__meta-item" rel="nofollow" title="Комментарии">
                      <svg class="post-info__meta-icon icon-svg_comments" width="14" height="13"><use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#comment"></use></svg><span class="post-info__meta-counter">266</span>
                    </a>
                  </div>
                </li>
            </ul>
        </div>
    </div>
  </div>

  </div>

  <div class="sidebar">
    <div class="sidebar_right">
      <div class="default-block">
  <div class="default-block__header">
    <h2 class="default-block__header-title">Рекомендуем</h2>
      <a href="https://tmtm.ru/megapost" class="default-block__header-link" rel="nofollow" onclick="if (typeof ga === 'function') { ga('send', 'event', 'tm_block', 'megapost_promo', 'order'); }">Разместить</a>
  </div>
  <div class="default-block__content">
    <ul class="megapost-teasers megapost-teasers_sidebar">
        <li class="megapost-teasers__item megapost-teasers__item_sidebar teaser">
          <a href="https://u.tmtm.ru/p-k-p-270220" target="_blank" class="teaser__image" onclick="if (typeof ga === 'function') { ga('send', 'event', 'tm_block', 'megapost_promo', 'article_pic'); }" rel="nofollow noopener">
            <img src="Swift%20%D0%BF%D1%80%D0%BE%D1%82%D0%B8%D0%B2%20Rust%20%E2%80%94%20%D0%B1%D0%B5%D0%BD%D1%87%D0%BC%D0%B0%D1%80%D0%BA%D0%B8%D0%BD%D0%B3%20%D0%BD%D0%B0%20Linux%20%D1%81%20(%D0%BD%D0%B5)%D0%BF%D0%BE%D0%BD%D1%8F%D1%82%D0%BD%D1%8B%D0%BC%20%D1%84%D0%B8%D0%BD%D0%B0%D0%BB%D0%BE%D0%BC%20_%20%D0%A5%D0%B0%D0%B1%D1%80_files/523271143447b38ac8d0abd843a57c19.jpg" class="teaser__image-pic">
                <div class="megapost-teasers__label">
                  Мегапост
                </div>
          </a>
          <a href="https://u.tmtm.ru/p-k-p-270220" target="_blank" class="teaser__body" onclick="if (typeof ga === 'function') { ga('send', 'event', 'tm_block', 'megapost_promo', 'article_title'); }" rel="nofollow noopener">
            <h3 class="teaser__body-title">Боли сисадмина и как их лечить</h3>
          </a>
        </li>
        <li class="megapost-teasers__item megapost-teasers__item_sidebar teaser">
          <a href="https://u.tmtm.ru/p-f-p-270220" target="_blank" class="teaser__image" onclick="if (typeof ga === 'function') { ga('send', 'event', 'tm_block', 'megapost_promo', 'article_pic'); }" rel="nofollow noopener">
            <img src="Swift%20%D0%BF%D1%80%D0%BE%D1%82%D0%B8%D0%B2%20Rust%20%E2%80%94%20%D0%B1%D0%B5%D0%BD%D1%87%D0%BC%D0%B0%D1%80%D0%BA%D0%B8%D0%BD%D0%B3%20%D0%BD%D0%B0%20Linux%20%D1%81%20(%D0%BD%D0%B5)%D0%BF%D0%BE%D0%BD%D1%8F%D1%82%D0%BD%D1%8B%D0%BC%20%D1%84%D0%B8%D0%BD%D0%B0%D0%BB%D0%BE%D0%BC%20_%20%D0%A5%D0%B0%D0%B1%D1%80_files/3b3ff3149c982aa8c5e2f7a704f5ef5a.jpg" class="teaser__image-pic">
                <div class="megapost-teasers__label">
                  Мегапост
                </div>
          </a>
          <a href="https://u.tmtm.ru/p-f-p-270220" target="_blank" class="teaser__body" onclick="if (typeof ga === 'function') { ga('send', 'event', 'tm_block', 'megapost_promo', 'article_title'); }" rel="nofollow noopener">
            <h3 class="teaser__body-title">Как я искал девушку, а нашел заказчика</h3>
          </a>
        </li>
    </ul>
  </div>
</div>

    </div>
  </div>
</section>

          </div>
        </div>

      <div class="layout__row layout__row_footer-links">
        <div class="layout__cell">
          <div class="footer-grid footer-grid_menu">
  <div class="footer-grid__item footer-block">
    <h3 class="footer-block__title">
      Ваш аккаунт
    </h3>
    <div class="footer-block__content">
      <ul class="footer-menu">
          <li class="footer-menu__item">
            <a href="https://habr.com/ru/users/epishman/" class="footer-menu__item-link">Профиль</a>
          </li>
          <li class="footer-menu__item">
            <a href="https://habr.com/ru/tracker/" class="footer-menu__item-link">Трекер</a>
          </li>
            <li class="footer-menu__item">
              <a href="https://habr.com/ru/conversations/" class="footer-menu__item-link">Диалоги</a>
            </li>
            <li class="footer-menu__item">
              <a href="https://habr.com/ru/auth/settings/" class="footer-menu__item-link">Настройки</a>
            </li>
            <li class="footer-menu__item">
              <a href="https://habr.com/ru/ppa/" class="footer-menu__item-link">ППА</a>
            </li>
      </ul>
    </div>
  </div>

  <div class="footer-grid__item footer-block">
    <h3 class="footer-block__title">Разделы</h3>
    <div class="footer-block__content">
      <ul class="footer-menu">
        <li class="footer-menu__item">
          <a href="https://habr.com/ru/posts/top/" class="footer-menu__item-link">Публикации</a>
        </li>
        <li class="footer-menu__item">
          <a href="https://habr.com/ru/news/" class="footer-menu__item-link">Новости</a>
        </li>
        <li class="footer-menu__item">
          <a href="https://habr.com/ru/hubs/" class="footer-menu__item-link">Хабы</a>
        </li>
        <li class="footer-menu__item">
          <a href="https://habr.com/ru/companies/" class="footer-menu__item-link">Компании</a>
        </li>
        <li class="footer-menu__item">
          <a href="https://habr.com/ru/users/" class="footer-menu__item-link">Пользователи</a>
        </li>
        <li class="footer-menu__item">
          <a href="https://habr.com/ru/sandbox/" class="footer-menu__item-link">Песочница</a>
        </li>
      </ul>
    </div>
  </div>

  <div class="footer-grid__item footer-block">
    <h3 class="footer-block__title">Информация</h3>
    <div class="footer-block__content">
      <ul class="footer-menu">
        <li class="footer-menu__item">
          <a href="https://habr.com/ru/info/help/rules/" class="footer-menu__item-link">Правила</a>
        </li>
        <li class="footer-menu__item">
          <a href="https://habr.com/ru/info/help/" class="footer-menu__item-link">Помощь</a>
        </li>
        <li class="footer-menu__item">
          <a href="https://habr.com/ru/info/topics/madskillz/" class="footer-menu__item-link">Документация</a>
        </li>
        <li class="footer-menu__item">
          <a href="https://account.habr.com/info/agreement/?hl=ru_RU" class="footer-menu__item-link">Соглашение</a>
        </li>
        <li class="footer-menu__item">
          <a href="https://account.habr.com/info/confidential/?hl=ru_RU" class="footer-menu__item-link">Конфиденциальность</a>
        </li>
      </ul>
    </div>
  </div>

  <div class="footer-grid__item footer-block">
    <h3 class="footer-block__title">Услуги</h3>
    <div class="footer-block__content">
      <ul class="footer-menu">
        <li class="footer-menu__item">
          <a href="https://tmtm.ru/services/advertising/" target="_blank" class="footer-menu__item-link" rel=" noopener">Реклама</a>
        </li>
        <li class="footer-menu__item">
          <a href="https://tmtm.ru/services/corpblog/" target="_blank" class="footer-menu__item-link" rel=" noopener">Тарифы</a>
        </li>
        <li class="footer-menu__item">
          <a href="https://tmtm.ru/services/content/" target="_blank" class="footer-menu__item-link" rel=" noopener">Контент</a>
        </li>
        <li class="footer-menu__item">
          <a href="https://tmtm.ru/workshops/" target="_blank" class="footer-menu__item-link" rel=" noopener">Семинары</a>
        </li>
        <li class="footer-menu__item">
          <a href="https://habr.com/ru/megaprojects/" target="_blank" class="footer-menu__item-link" rel=" noopener">Мегапроекты</a>
        </li>
      </ul>
    </div>
  </div>
</div>

<div class="footer-misprints">
  Если нашли опечатку в&nbsp;посте, выделите ее&nbsp;и&nbsp;нажмите Ctrl+Enter, чтобы сообщить автору.
</div>

        </div>
      </div>

      <div class="layout__row layout__row_footer">
        <div class="layout__cell">
          <script>
  $(document).ready(function () {
    window.voteReasonsList = JSON.parse('{"1":{"id":"1","title":"Низкий технический уровень материала","order":1},"2":{"id":"2","title":"Больше рекламы, чем пользы","order":2},"3":{"id":"3","title":"Не соответствует тематике Хабра","order":3},"4":{"id":"4","title":"В тексте много ошибок и опечаток","order":4},"5":{"id":"5","title":"Пост небрежно оформлен","order":5},"6":{"id":"6","title":"Личная неприязнь к автору или компании","order":6},"7":{"id":"7","title":"В статье нет новой для меня информации","order":7},"8":{"id":"8","title":"Ничего не понял после прочтения","order":8},"9":{"id":"9","title":"Другое","order":9}}');
  });
</script>
<div class="footer-grid footer">
  <div class="footer-grid__item footer-grid__item_copyright">
    <span class="footer__copyright">© 2006 – 2020 «<a href="https://tmtm.ru/" class="footer__link">TM</a>»</span>
  </div>
    <div class="footer-grid__item footer-grid__item_link footer-grid__item_lang">
      <svg class="icon-svg icon-svg_lang-footer" width="16" height="16">
        <use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#globus"></use>
      </svg>
      <a href="#" class="footer__link js-show_lang_settings">Настройка языка</a>
    </div>
  <div class="footer-grid__item footer-grid__item_link">
      <a href="https://habr.com/ru/about/" class="footer__link">О сайте</a>
  </div>
  <div class="footer-grid__item footer-grid__item_link">
    <a href="https://habr.com/ru/feedback/" class="footer__link">Служба поддержки</a>
  </div>
  <div class="footer-grid__item footer-grid__item_link">
      <a href="https://m.habr.com/post/450512/?mobile=yes" class="footer__link">Мобильная версия</a>
  </div>

  <div class="footer-grid__item footer-grid__item_social">
    <ul class="social-icons">
      <li class="social-icons__item">
        <a href="https://twitter.com/habr_com" class="social-icons__item-link social-icons__item-link_normal social-icons__item-link_twitter" target="_blank" onclick="if (typeof ga === 'function') { ga('send', 'event', 'footer', 'Social_icons', 'twitter'); }" rel=" noopener">
          <svg class="icon-svg" aria-hidden="true" aria-labelledby="title" version="1.1" role="img" width="24" height="24" viewBox="0 0 24 24"><path d="M17.414 8.642c-.398.177-.826.296-1.276.35.459-.275.811-.71.977-1.229-.43.254-.905.439-1.41.539-.405-.432-.982-.702-1.621-.702-1.227 0-2.222.994-2.222 2.222 0 .174.019.344.058.506-1.846-.093-3.484-.978-4.579-2.322-.191.328-.301.71-.301 1.117 0 .77.392 1.45.988 1.849-.363-.011-.706-.111-1.006-.278v.028c0 1.077.766 1.974 1.782 2.178-.187.051-.383.078-.586.078-.143 0-.282-.014-.418-.04.282.882 1.103 1.525 2.075 1.542-.76.596-1.718.951-2.759.951-.179 0-.356-.01-.53-.031.983.63 2.15.998 3.406.998 4.086 0 6.321-3.386 6.321-6.321l-.006-.287c.433-.314.81-.705 1.107-1.15z"></path></svg>
        </a>
      </li>
      <li class="social-icons__item">
        <a href="https://www.facebook.com/habrahabr.ru" class="social-icons__item-link social-icons__item-link_normal social-icons__item-link_facebook" target="_blank" onclick="if (typeof ga === 'function') { ga('send', 'event', 'footer', 'Social_icons', 'facebook'); }" rel=" noopener">
          <svg class="icon-svg" aria-hidden="true" aria-labelledby="title" version="1.1" role="img" width="24" height="24" viewBox="0 0 24 24"><path d="M14.889 8.608h-1.65c-.195 0-.413.257-.413.6v1.192h2.063v1.698h-2.063v5.102h-1.948v-5.102h-1.766v-1.698h1.766v-1c0-1.434.995-2.6 2.361-2.6h1.65v1.808z"></path></svg>
        </a>
      </li>
        <li class="social-icons__item">
          <a href="https://vk.com/habr" class="social-icons__item-link social-icons__item-link_normal social-icons__item-link_vkontakte" target="_blank" onclick="if (typeof ga === 'function') { ga('send', 'event', 'footer', 'Social_icons', 'vkontakte'); }" rel=" noopener">
            <svg class="icon-svg" aria-hidden="true" aria-labelledby="title" version="1.1" role="img" width="24" height="24" viewBox="0 0 24 24"><path d="M16.066 11.93s1.62-2.286 1.782-3.037c.054-.268-.064-.418-.343-.418h-1.406c-.322 0-.44.139-.537.343 0 0-.76 1.619-1.685 2.64-.297.33-.448.429-.612.429-.132 0-.193-.11-.193-.408v-2.607c0-.365-.043-.472-.343-.472h-2.254c-.172 0-.279.1-.279.236 0 .343.526.421.526 1.352v1.921c0 .386-.022.537-.204.537-.483 0-1.631-1.663-2.274-3.552-.129-.386-.268-.494-.633-.494h-1.406c-.204 0-.354.139-.354.343 0 .375.44 2.114 2.167 4.442 1.159 1.566 2.683 2.414 4.056 2.414.838 0 1.041-.139 1.041-.494v-1.202c0-.301.118-.429.29-.429.193 0 .534.062 1.33.848.945.901 1.01 1.276 1.525 1.276h1.578c.161 0 .311-.075.311-.343 0-.354-.462-.987-1.17-1.738-.29-.386-.762-.805-.912-.998-.215-.226-.151-.354-.001-.59z"></path></svg>
          </a>
        </li>
      <li class="social-icons__item">
        <a href="https://telegram.me/habr_com" class="social-icons__item-link social-icons__item-link_normal social-icons__item-link_telegram" target="_blank" onclick="if (typeof ga === 'function') { ga('send', 'event', 'footer', 'Social_icons', 'telegram'); }" rel=" noopener">
          <svg class="icon-svg" aria-hidden="true" aria-labelledby="title" version="1.1" role="img" width="24" height="24" viewBox="0 0 24 24"><path d="M17.17 7.621l-10.498 3.699c-.169.059-.206.205-.006.286l2.257.904 1.338.536 6.531-4.796s.189.057.125.126l-4.68 5.062-.27.299.356.192 2.962 1.594c.173.093.397.016.447-.199.058-.254 1.691-7.29 1.728-7.447.047-.204-.087-.328-.291-.256zm-6.922 8.637c0 .147.082.188.197.084l1.694-1.522-1.891-.978v2.416z"></path></svg>
        </a>
      </li>
        <li class="social-icons__item">
          <a href="https://www.youtube.com/channel/UCd_sTwKqVrweTt4oAKY5y4w" class="social-icons__item-link social-icons__item-link_normal social-icons__item-link_youtube" target="_blank" onclick="if (typeof ga === 'function') { ga('send', 'event', 'footer', 'Social_icons', 'youtube'); }" rel=" noopener">
            <svg class="icon-svg" aria-hidden="true" aria-labelledby="title" version="1.1" role="img" width="32" height="32" viewBox="0 0 32 32"><path d="M3.2 0h25.6c1.767 0 3.2 1.433 3.2 3.2v25.6c0 1.767-1.433 3.2-3.2 3.2h-25.6c-1.767 0-3.2-1.433-3.2-3.2v-25.6c0-1.767 1.433-3.2 3.2-3.2zm18.133 16l-10.667-5.333v10.667l10.667-5.333z"></path></svg>

          </a>
        </li>
        <li class="social-icons__item">
          <a href="https://zen.yandex.ru/habr" class="social-icons__item-link social-icons__item-link_normal social-icons__item-link_zen" target="_blank" onclick="if (typeof ga === 'function') { ga('send', 'event', 'footer', 'Social_icons', 'zen'); }" rel=" noopener">
            <svg xmlns="http://www.w3.org/2000/svg" class="icon-svg" width="32" height="32" viewBox="0 0 32 32"><path fill="#f00" d="M3.2 0h25.6c1.767 0 3.2 1.433 3.2 3.2v25.6c0 1.767-1.433 3.2-3.2 3.2h-25.6c-1.767 0-3.2-1.433-3.2-3.2v-25.6c0-1.767 1.433-3.2 3.2-3.2z"></path><path fill="#d00000" d="M13.661 32h-6.157l12.409-9.537 2.44 2.811-8.693 6.726zm3.782-32h5.883l-10.515 8.777-2.44-2.811 7.072-5.966z"></path><path fill="#f8b3b2" d="M10.4 17.879l9.474-7.314 2.441 2.812-9.475 7.314z"></path><path fill="#fff" d="M10.417 5.954l11.909 3.897v3.543l-11.909-3.897v-3.543zm0 11.909l11.909 3.897v3.543l-11.909-3.897v-3.543z"></path></svg>

          </a>
        </li>
    </ul>
  </div>
</div>

        </div>
      </div>

      <a href="#" class="layout__elevator hidden" id="scroll_to_top" title="Наверх" onclick="if (typeof ga === 'function') { ga('send', 'event', 'navigation_button', 'down'); }">
        <svg class="icon-svg icon-svg_scroll-up" width="32" height="32" viewBox="0 0 32 32" aria-hidden="true" version="1.1" role="img"><path d="M16 0C7.164 0 0 7.164 0 16s7.164 16 16 16 16-7.164 16-16S24.836 0 16 0zm8.412 19.523c-.517.512-1.355.512-1.872 0L16 13.516l-6.54 6.01c-.518.51-1.356.51-1.873 0-.516-.513-.517-1.343 0-1.855l7.476-7.326c.517-.512 1.356-.512 1.873 0l7.476 7.327c.516.513.516 1.342 0 1.854z"></path></svg>
      </a>
    </div>

    <div class="overlay hidden" id="js-lang_settings">
  <div class="popup">
    <div class="popup__head popup__head_lang-settings">
      <span class="popup__head-title js-popup_title" data-section="1">Настройка языка</span>
      <button type="button" class="btn btn_small btn_popup-close js-hide_lang_settings">
        <svg class="icon-svg" width="12" height="12">
          <use xlink:href="https://habr.com/images/1582705396/common-svg-sprite.svg#close"></use>
        </svg>
      </button>
    </div>
    <div class="popup__body">
      <form action="/json/settings/i18n/" method="post" class="form form_lang-settings" id="lang-settings-form">
        <fieldset class="form__fieldset form__fieldset_thin" data-section="2">
          <legend class="form__legend form__legend_lang-settings js-popup_hl_legend">Интерфейс</legend>
            <div class="form-field form-field_lang-settings">
              <label class="radio radio_custom ">
                <input type="radio" name="hl" id="hl_langs_ru" class="radio__input js-hl_langs" value="ru" checked="checked">
                <span class="radio__label radio__label_another">Русский</span>
              </label>
            </div>
            <div class="form-field form-field_lang-settings">
              <label class="radio radio_custom ">
                <input type="radio" name="hl" id="hl_langs_en" class="radio__input js-hl_langs" value="en">
                <span class="radio__label radio__label_another">English</span>
              </label>
            </div>
        </fieldset>

        <fieldset class="form__fieldset form__fieldset_thin">
          <legend class="form__legend form__legend_lang-settings js-popup_fl_legend" data-section="3">Язык публикаций</legend>
            <div class="form-field form-field_lang-settings">
              <label class="checkbox checkbox_custom">
                <input type="checkbox" name="fl[]" id="fl_langs_ru" class="checkbox__input js-fl_langs" value="ru" checked="checked">
                <span class="checkbox__label checkbox__label_another js-popup_feed_ru">Русский</span>
              </label>
            </div>
            <div class="form-field form-field_lang-settings">
              <label class="checkbox checkbox_custom">
                <input type="checkbox" name="fl[]" id="fl_langs_en" class="checkbox__input js-fl_langs" value="en">
                <span class="checkbox__label checkbox__label_another js-popup_feed_en">Английский</span>
              </label>
            </div>
        </fieldset>

        <div class="form__footer form__footer_lang-settings">
          <button type="submit" class="btn btn_blue btn_huge btn_full-width js-popup_save_btn">Сохранить настройки</button>
        </div>
      </form>
    </div>
  </div>
</div>



    <script type="text/javascript">
  // global vars
  var g_base_url = 'habr.com/ru';
  var g_base_fullurl = 'https://habr.com/ru/';
  var g_tmid_fullurl = 'https://account.habr.com/';
  var g_is_guest = true;
  var g_show_xpanel = true;
  var g_is_enableShortcuts = '1';
  var g_is_ugc_post = '1';
    var g_current_hl = 'ru';
    var g_current_fl = 'ru';

    var g_user_login = 'epishman';
    var g_user_id = 1897381;
    var g_user_avatar = '//habrastorage.org/getpro/habr/avatars/ec0/d88/c48/ec0d88c4853c0d36d44bd0526dcfa8d7.png';
</script>

    <script src="Swift%20%D0%BF%D1%80%D0%BE%D1%82%D0%B8%D0%B2%20Rust%20%E2%80%94%20%D0%B1%D0%B5%D0%BD%D1%87%D0%BC%D0%B0%D1%80%D0%BA%D0%B8%D0%BD%D0%B3%20%D0%BD%D0%B0%20Linux%20%D1%81%20(%D0%BD%D0%B5)%D0%BF%D0%BE%D0%BD%D1%8F%D1%82%D0%BD%D1%8B%D0%BC%20%D1%84%D0%B8%D0%BD%D0%B0%D0%BB%D0%BE%D0%BC%20_%20%D0%A5%D0%B0%D0%B1%D1%80_files/vendors.js"></script>
    <script src="Swift%20%D0%BF%D1%80%D0%BE%D1%82%D0%B8%D0%B2%20Rust%20%E2%80%94%20%D0%B1%D0%B5%D0%BD%D1%87%D0%BC%D0%B0%D1%80%D0%BA%D0%B8%D0%BD%D0%B3%20%D0%BD%D0%B0%20Linux%20%D1%81%20(%D0%BD%D0%B5)%D0%BF%D0%BE%D0%BD%D1%8F%D1%82%D0%BD%D1%8B%D0%BC%20%D1%84%D0%B8%D0%BD%D0%B0%D0%BB%D0%BE%D0%BC%20_%20%D0%A5%D0%B0%D0%B1%D1%80_files/main.js"></script>
      <script src="Swift%20%D0%BF%D1%80%D0%BE%D1%82%D0%B8%D0%B2%20Rust%20%E2%80%94%20%D0%B1%D0%B5%D0%BD%D1%87%D0%BC%D0%B0%D1%80%D0%BA%D0%B8%D0%BD%D0%B3%20%D0%BD%D0%B0%20Linux%20%D1%81%20(%D0%BD%D0%B5)%D0%BF%D0%BE%D0%BD%D1%8F%D1%82%D0%BD%D1%8B%D0%BC%20%D1%84%D0%B8%D0%BD%D0%B0%D0%BB%D0%BE%D0%BC%20_%20%D0%A5%D0%B0%D0%B1%D1%80_files/neuro-habr.js"></script>

<script>
if (window.fetch) {
  var nh = window.neuroHabr;
    nh.init('https://habr.neuron.digital');

  var articleId = 450512;

  if (articleId) {
    nh.send('view', articleId);
  }

  var nhState = {
    viewTime: 0,
    interval: null,
    scrolledDown: false,
    likeSent: false,
  };

  var hidden;
  var visibilityChange;

  if (typeof document.hidden !== 'undefined') { // Opera 12.10 and Firefox 18 and later support
    hidden = 'hidden';
    visibilityChange = 'visibilitychange';
  } else if (typeof document.msHidden !== 'undefined') {
    hidden = 'msHidden';
    visibilityChange = 'msvisibilitychange';
  } else if (typeof document.webkitHidden !== 'undefined') {
    hidden = 'webkitHidden';
    visibilityChange = 'webkitvisibilitychange';
  }


  var articleBody = document.querySelector('.post__body') || document.querySelector('.article__body');

  if (articleBody) {
    var MINIMUM_ARTICLE_READ_SECONDS = 10;

    var isInViewport = function(e) {
      var b = e.getBoundingClientRect();
      return b.top <= window.innerHeight && b.top + b.height >= 0;
    };

    var isAtTheEnd = function(e) {
      return e.getBoundingClientRect().bottom - window.innerHeight <= 0;
    };

    var hasReadArticle = function() {
      return nhState.scrolledDown && nhState.viewTime >= MINIMUM_ARTICLE_READ_SECONDS;
    };

    function incrementViewTime(e) {
      if (!nhState.likeSent && !nhState.interval) {
        nhState.interval = setInterval(() => {
          if (hasReadArticle()) {
            if (!nhState.likeSent) {
              nhState.likeSent = true;
              nh.send('like', articleId);
            }
            clearInterval(nhState.interval);
            nhState.interval = null;
          } else if (isInViewport(e)) {
            nhState.viewTime += 2;
          }
        }, 2000);
      }
    };

    incrementViewTime(articleBody);

    if (typeof document.addEventListener !== 'undefined' && hidden !== undefined) {
      document.addEventListener(visibilityChange, () => {
        if (!hasReadArticle() && !nhState.likeSent) {
          if (document[hidden]) {
            clearInterval(nhState.interval);
            nhState.interval = null;
          } else {
            incrementViewTime(articleBody);
          }
        }
      });

      document.addEventListener('scroll', () => {
        if (!nhState.scrolledDown) {
          if (isAtTheEnd(articleBody)) {
            nhState.scrolledDown = true;
          }
        }
      });
    } else {
      nhState.scrolledDown = true;
    }
  }
}


</script>
  <script type="text/x-mathjax-config;executed=true">
  MathJax.Hub.Config({
    showProcessingMessages: false,
    showMathMenu: true,
    tex2jax: {
      inlineMath: [['$inline$','$inline$']],
      displayMath: [['$$display$$','$$display$$']],
      processEscapes: true
    },
    MathMenu: {
      showRenderer: true,
      showContext:  true
    }
  });

  MathJax.Extension.Img2jax = {
    PreProcess: function (element) {
      var hasMath = false;
      var images = element.querySelectorAll('[data-tex]');
      for (var i = images.length - 1; i >= 0; i--) {
        var img = images[i];
        var tex = img.alt.replace(/(\r\n|\n|\r)/gm, " ");
        if (tex && tex[0] === '$'){
          var script = document.createElement("script"); script.type = "math/tex";
          hasMath = true;
          if (img.getAttribute('data-tex') == "display"){script.type += ";mode=display"}
          MathJax.HTML.setScript(script, tex.substring(1,tex.length-1));
          img.parentNode.replaceChild(script,img);
        }
      }
    }
  };

  MathJax.Hub.Register.PreProcessor(["PreProcess", MathJax.Extension.Img2jax]);
</script>

<script type="text/javascript" src="Swift%20%D0%BF%D1%80%D0%BE%D1%82%D0%B8%D0%B2%20Rust%20%E2%80%94%20%D0%B1%D0%B5%D0%BD%D1%87%D0%BC%D0%B0%D1%80%D0%BA%D0%B8%D0%BD%D0%B3%20%D0%BD%D0%B0%20Linux%20%D1%81%20(%D0%BD%D0%B5)%D0%BF%D0%BE%D0%BD%D1%8F%D1%82%D0%BD%D1%8B%D0%BC%20%D1%84%D0%B8%D0%BD%D0%B0%D0%BB%D0%BE%D0%BC%20_%20%D0%A5%D0%B0%D0%B1%D1%80_files/MathJax.js">
</script>




      <script type="text/javascript" src="Swift%20%D0%BF%D1%80%D0%BE%D1%82%D0%B8%D0%B2%20Rust%20%E2%80%94%20%D0%B1%D0%B5%D0%BD%D1%87%D0%BC%D0%B0%D1%80%D0%BA%D0%B8%D0%BD%D0%B3%20%D0%BD%D0%B0%20Linux%20%D1%81%20(%D0%BD%D0%B5)%D0%BF%D0%BE%D0%BD%D1%8F%D1%82%D0%BD%D1%8B%D0%BC%20%D1%84%D0%B8%D0%BD%D0%B0%D0%BB%D0%BE%D0%BC%20_%20%D0%A5%D0%B0%D0%B1%D1%80_files/a"></script>

    
<!-- Yandex.Metrika counter -->
<script type="text/javascript">
(function(m,e,t,r,i,k,a){
  m[i]=m[i]||function(){(m[i].a=m[i].a||[]).push(arguments)};
  m[i].l=1*new Date();
  k=e.createElement(t),a=e.getElementsByTagName(t)[0],k.async=1,k.src=r,a.parentNode.insertBefore(k,a)
})(window, document, "script", "https://mc.yandex.ru/metrika/tag.js", "ym");

    ym(24049213, "init", {
      clickmap:true,
      trackLinks:true,
      accurateTrackBounce:true,
      webvisor:true
    });
</script>
<noscript>
  <div>
      <img src="https://mc.yandex.ru/watch/24049213" style="position:absolute; left:-9999px;" alt="" />
  </div>
</noscript>
<!-- /Yandex.Metrika counter -->

    <script type="text/javascript">
  function stripUrl(currentUrl, queryParam) {
   return currentUrl.replace(/\?([^#]*)/, function(_, search) {
      var result = search.split('&').map(function(param) {
        var regexp = new RegExp(`^${queryParam}`);
        if (regexp.test(param)) {
          return '';
        }
        return param;
      }).filter(Boolean).join('&');
      return result ? '?' + result : '';
    });
  }

  (function() {
    if (location.search.indexOf('cv') != -1 && history.replaceState) {
      var currentUrl = location.toString();
      var strippedUrl = stripUrl(currentUrl, 'cv');
      history.replaceState({}, '', strippedUrl);
    }
  })();

  function callGA(usesABP) {
    if (typeof window.adb1 === 'undefined') { window.adb1 = 'yes';}
    if (usesABP) { window.adb1 = 'aa'; }

    var user_type = 'habrauser';

    var page_type = "publish_ugc_ru,h_359,h_18961,h_19039,f_develop";

    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

        ga('create', 'UA-726094-1',  'auto', { 'uid': '96fc91143159cc1603f397676af4c764' });
        ga('create', 'UA-726094-24', 'auto', { 'uid': '96fc91143159cc1603f397676af4c764', 'name': 'HGM', 'allowLinker': true });

    ga('HGM.require', 'linker');
    ga('HGM.linker:autoLink', ['toster.ru', 'habr.com', 'account.habr.com', 'm.habr.com']);

    ga('require', 'displayfeatures');
    ga('set', 'dimension1', user_type); // user type - guest/readonly/habrauser
    ga('set', 'dimension2', page_type);
    ga('set', 'dimension3', 'active');
    ga('set', 'dimension4', window.adb1);
    ga('set', 'dimension6', 'ru');
    ga('set', 'dimension7', 'B');


    (function() {
      var removeUtms = function(){
        var location = window.location;
        if (location.search.indexOf('utm_') != -1 && history.replaceState) {
          var currentUrl = location.toString();
          var strippedUrl = stripUrl(currentUrl, 'utm_');
          history.replaceState({}, '', strippedUrl);
        }
      };
      ga('require', 'GTM-559GVC8');
      ga('send', 'pageview', { 'hitCallback': removeUtms });
    })();

    ga('HGM.set', 'dimension1', user_type);
    ga('HGM.set', 'dimension2', "habrahabr");
    ga('HGM.set', 'dimension4', window.adb1);

    ga('HGM.send', 'pageview');
  }


  if (window.habr_blockers_checker) {
    window.habr_blockers_checker.detectWrapper(callGA);
  } else {
    callGA(false)
  }

</script>

    <!-- Facebook Pixel Code -->
<img style="display:none" src="Swift%20%D0%BF%D1%80%D0%BE%D1%82%D0%B8%D0%B2%20Rust%20%E2%80%94%20%D0%B1%D0%B5%D0%BD%D1%87%D0%BC%D0%B0%D1%80%D0%BA%D0%B8%D0%BD%D0%B3%20%D0%BD%D0%B0%20Linux%20%D1%81%20(%D0%BD%D0%B5)%D0%BF%D0%BE%D0%BD%D1%8F%D1%82%D0%BD%D1%8B%D0%BC%20%D1%84%D0%B8%D0%BD%D0%B0%D0%BB%D0%BE%D0%BC%20_%20%D0%A5%D0%B0%D0%B1%D1%80_files/tr.gif" width="1" height="1">
<!-- End Facebook Pixel Code -->

    <img src="Swift%20%D0%BF%D1%80%D0%BE%D1%82%D0%B8%D0%B2%20Rust%20%E2%80%94%20%D0%B1%D0%B5%D0%BD%D1%87%D0%BC%D0%B0%D1%80%D0%BA%D0%B8%D0%BD%D0%B3%20%D0%BD%D0%B0%20Linux%20%D1%81%20(%D0%BD%D0%B5)%D0%BF%D0%BE%D0%BD%D1%8F%D1%82%D0%BD%D1%8B%D0%BC%20%D1%84%D0%B8%D0%BD%D0%B0%D0%BB%D0%BE%D0%BC%20_%20%D0%A5%D0%B0%D0%B1%D1%80_files/rtrg.gif" style="position:fixed; left:-999px;" alt="">
    
  

<div id="AutocompleteContainter_dc64" style="position: absolute; z-index: 9999; top: 0px; left: 0px;"><div class="autocomplete-w1"><div class="autocomplete" id="Autocomplete_dc64" style="display: none; width: 300px; max-height: 400px;"></div></div></div><div id="AutocompleteContainter_99914" style="position: absolute; z-index: 9999; top: 38.1667px; left: 0px;"><div class="autocomplete-w1"><div class="autocomplete" id="Autocomplete_99914" style="display: none; width: 300px; max-height: 400px;"></div></div></div><div id="xpanel"><span class="refresh" title="Обновить комментарии"></span><span class="prev_new" title="По клику (горячая клавиша - k) переходит к предыдущему непрочитанному комментарию." style="display: none;">↑</span><span class="new" title="Количество новых комментариев. По клику (горячая клавиша - f) переходит к первому непрочитанному комментарию." style="display: none;">0</span><span class="next_new" title="По клику (горячая клавиша - j) переходит к следующему непрочитанному комментарию." style="display: none;">↓</span></div><iframe name="ym-native-frame" title="ym-native-frame" style="opacity: 0 !important; width: 0px !important; height: 0px !important; position: absolute !important; left: 100% !important; bottom: 100% !important; border: 0px none !important;" aria-hidden="true" frameborder="0"></iframe><ym-measure class="ym-viewport" style="display: block; inset: 0px; position: fixed; transform: translate(0px, -100%); transform-origin: 0px 0px 0px;"></ym-measure><ym-measure class="ym-zoom" style="bottom: 100%; position: fixed; width: 100vw;"></ym-measure></body></html>